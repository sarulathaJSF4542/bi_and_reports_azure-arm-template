/*!
*  filename: ej2.map.all.min.js
*  version : 4.1.36.36
*  Copyright Syncfusion Inc. 2001 - 2017. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
!function(n){function t(r){if(i[r])return i[r].exports;var u=i[r]={i:r,l:!1,exports:{}};return n[r].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var i={};t.m=n;t.c=i;t.d=function(n,i,r){t.o(n,i)||Object.defineProperty(n,i,{enumerable:!0,get:r})};t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});Object.defineProperty(n,"__esModule",{value:!0})};t.t=function(n,i){var r,u;if((1&i&&(n=t(n)),8&i)||4&i&&"object"==typeof n&&n&&n.__esModule)return n;if(r=Object.create(null),t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&i&&"string"!=typeof n)for(u in n)t.d(r,u,function(t){return n[t]}.bind(null,u));return r};t.n=function(n){var i=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(i,"a",i),i};t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)};t.p="";t(t.s=5)}([function(n){n.exports=ejs.base},function(n){n.exports=ejs.data},function(n){n.exports=ejs.svgbase},function(n){n.exports=ejs.pdfexport},function(n,t){t.copy=function(n,t,i,r){var u=n||{},e=arguments.length;r&&(e-=1);for(var s=function(n){if(!o[n])return"continue";var t=o[n];Object.keys(t).forEach(function(n){var f,e=u[n],i=t[n];r&&(isObject(i)||Array.isArray(i))?isObject(i)?(f=e||{},u[n]=i({},f,i,r)):(f=e||[],u[n]=i([],f,i,r)):u[n]=i})},o=arguments,f=1;f<e;f++)s(f);return u}},function(n,t,i){"use strict";function wt(n,t){return null!=n?-1!==n.indexOf("%")?t/100*parseInt(n,10):parseInt(n,10):null}function ef(n){n.renderer=new ut.SvgRenderer(n.element.id),function(n){var t=n.element.clientWidth,i=n.element.clientHeight,r=(n.element.parentElement.clientHeight,n.element.parentElement.clientWidth,wt(n.element.style.width,t)),u=wt(n.element.style.height,t);n.availableSize="0px"===n.width||"0%"===n.width||"0%"===n.height||"0px"===n.height?new g(0,0):new g(wt(n.width,t)||t||r||600,wt(n.height,i)||i||u||(n.isDevice?Math.min(window.innerWidth,window.innerHeight):450))}(n);n.svgObject=n.renderer.createSvg({id:n.element.id+"_svg",width:n.availableSize.width,height:n.availableSize.height});"0px"!==n.width&&"0%"!==n.width&&"0%"!==n.height&&"0px"!==n.height||(n.svgObject.setAttribute("height","0"),n.svgObject.setAttribute("width","0"))}function tr(n,t,i){var r=i.getBoundingClientRect(),u=i.ownerDocument.defaultView.pageXOffset,f=i.ownerDocument.defaultView.pageYOffset,e=i.ownerDocument.documentElement.clientTop,o=i.ownerDocument.documentElement.clientLeft,s=r.left+u-o,h=r.top+f-e;return new rt(n-s,t-h)}function li(n){return n*(Math.PI/180)}function ir(n){return n*(180/Math.PI)}function w(n,t,i,u,f){var a,v,y,s,h,l,p=new g(f.mapAreaRect.width,f.mapAreaRect.height),it=f.baseMapBounds.longitude,rt=f.baseMapBounds.latitude,e=li(n),c=li(t),b=f.projectionType,w=f.isTileMap?256*Math.pow(2,1):Object(r.isNullOrUndefined)(i)?Math.min(p.width,p.height):Math.min(p.width,p.height)*i,k,d,nt,tt;if("Normal"===u.geometryType)a=Object(r.isNullOrUndefined)(i)?t:Math.abs((t-it.min)*i),v=Object(r.isNullOrUndefined)(i)?n:Math.abs((rt.max-n)*i);else if("Geographic"===u.geometryType){switch(b){case"Mercator":k=new o(w/2,w/2);a=k.x+t*(w/360);d=function(n,t,i){return Object(r.isNullOrUndefined)(t)||(n=Math.max(n,t)),Object(r.isNullOrUndefined)(i)||(n=Math.min(n,i)),n}(Math.sin(li(n)),-.9999,.9999);v=k.y+.5*Math.log((1+d)/(1-d))*(-w/(2*Math.PI));break;case"Winkel3":h=((y=rr(c,e)).x+c/(Math.PI/2))/2;s=(y.y+e)/2;break;case"Miller":h=c;s=1.25*Math.log(Math.tan(Math.PI/4+.4*e));break;case"Eckert3":h=2/(l=Math.sqrt(Math.PI*(4+Math.PI)))*c*(1+Math.sqrt(1-4*e*e/(Math.PI*Math.PI)));s=4/l*e;break;case"AitOff":h=(y=rr(c,e)).x;s=y.y;break;case"Eckert5":h=c*(1+Math.cos(e))/Math.sqrt(2+Math.PI);s=2*e/Math.sqrt(2+Math.PI);break;case"Equirectangular":h=c;s=e;break;case"Eckert6":for(l=(1+Math.PI/2)*Math.sin(e),nt=1/0,tt=0;tt<10&&Math.abs(nt)>1e-6;tt++)e-=nt=(e+Math.sin(e)-l)/(1+Math.cos(e));l=Math.sqrt(2+Math.PI);h=c*(1+Math.cos(e))/l;s=2*e/l}a="Mercator"===b?a:ur(function(n,t){var i=n.baseMapBounds.longitude,u=Object(r.isNullOrUndefined)(n.baseSize)?n.mapAreaRect.width:n.mapAreaRect.width+Math.abs(n.baseSize.width-n.mapAreaRect.width)/2;return Math.round(u*(t-i.min)/(i.max-i.min)*100)/100}(f,ir(h)),3);v="Mercator"===b?v:-ur(function(n,t){var i=n.baseMapBounds.latitude;return Math.round(n.mapAreaRect.height*(t-i.min)/(i.max-i.min)*100)/100}(f,ir(s)),3)}return new o(a,v)}function ft(n,t,i,r){var u=256*Math.pow(2,t),s=(n.x+180)/360,f=Math.sin(n.y*Math.PI/180),h=.5-Math.log((1+f)/(1-f))/(4*Math.PI),e=n.x,o=n.y;return r&&(e=s*u+.5+i.x,o=h*u+.5+i.y),{x:e,y:o}}function rr(n,t){var i,r=Math.cos(t),u=function(n){return n/Math.sin(n)}((i=r*Math.cos(n/=2),Math.acos(i)));return new o(2*r*Math.sin(n)*u,Math.sin(t)*u)}function ur(n,t){var i=Math.pow(10,t);return Math.round(n*i)/i}function v(n,t){var i=document.getElementById("mapsmeasuretext");return null===i&&(i=Object(r.createElement)("text",{id:"mapsmeasuretext"}),document.body.appendChild(i)),i.innerHTML=n,i.style.position="absolute",i.style.fontSize="number"==typeof t.size?t.size+"px":t.size,i.style.fontWeight=t.fontWeight,i.style.fontStyle=t.fontStyle,i.style.fontFamily=t.fontFamily,i.style.visibility="hidden",i.style.top="-100",i.style.left="0",i.style.whiteSpace="nowrap",i.style.lineHeight="normal",new g(i.clientWidth,i.clientHeight)}function st(n,t,i,r,u){var e,c;void 0===u&&(u=!1);var s,o,l={id:n.id,x:n.x,y:n.y,fill:i,"font-size":t.size,"font-style":t.fontStyle,"font-family":t.fontFamily,"font-weight":t.fontWeight,"text-anchor":n.anchor,transform:n.transform,opacity:t.opacity,"dominant-baseline":n.baseLine},a="string"==typeof n.text?n.text:u?n.text[n.text.length-1]:n.text[0],h=new ut.SvgRenderer(""),f=h.createText(l,a);if(f.style["user-select"]="none",f.style["font-family"]=t.fontFamily,f.style["font-Size"]=t.size,f.style["font-weight"]=t.fontWeight,f.style["font-color"]=t.color,f.style["-moz-user-select"]="none",f.style["-webkit-touch-callout"]="none",f.style["-webkit-user-select"]="none",f.style["-khtml-user-select"]="none",f.style["-ms-user-select"]="none",f.style["-o-user-select"]="none","string"!=typeof n.text&&n.text.length>1)for(e=1,c=n.text.length;e<c;e++)o=v(n.text[e],t).height,s=h.createTSpan({x:n.x,id:n.id,y:n.y+(u?-e*o:e*o)},u?n.text[n.text.length-(e+1)]:n.text[e]),f.appendChild(s);return r.appendChild(f),f}function ht(n,t){return t.format&&!isNaN(Number(n))?t.intl.getNumberFormat({format:t.format,useGrouping:t.useGroupingSeparator})(Number(n)):n}function or(n,t,i,r){for(var h,e,c,o=""===n?t:n,f=""===n?o.split("${"):o.split("{{:"),u=0;u<f.length;u++)if(f[u].indexOf("}}")>-1&&f[u].indexOf(".")>-1||f[u].indexOf("}")>-1&&f[u].search(".")>-1)for(h=""===n?f[u].split("}"):f[u].split("}}"),e=0;e<h.length;e++)h[e].indexOf(".")>-1&&(c=s(i,h[e]).toString(),o=""===n?o.split("${"+h[e]+"}").join(ht(c,r)):o.replace(new RegExp("{{:"+h[e]+"}}","g"),c));return o}function sr(n,t,i,u,f,e,o){var h,c,l,k,a,g,s=f.size,nt=f.borderColor,tt=parseFloat(f.borderWidth),v=f.fill,p=f.dashArray,it={color:nt,width:tt},w=f.opacity,rt;return(a=new b(u,v,tt,nt,w,p,""),"Circle"===n)?(rt=(s.width+s.height)/4,k=new bt(u,v,it,w,i.x,i.y,rt,p),h=o.renderer.drawCircle(k)):"Rectangle"===n?(c=i.x-s.width/2,l=i.y-s.height/2,g=new d(u,v,it,w,new y(c,l,s.width,s.height),null,null,"",p),h=o.renderer.drawRectangle(g)):"Image"===n?(c=i.x-s.width/2,l=i.y-s.height,Object(r.merge)(a,{href:t,height:s.height,width:s.width,x:c,y:l}),h=o.renderer.drawImage(a)):h=function(n,t,i,r,u,f){var o;switch(t){case"Balloon":o=function(n,t,i,r,u){var o=i.width,s=i.height,f;r.x-=o/2;r.y-=s;t.d="M15,0C8.8,0,3.8,5,3.8,11.2C3.8,17.5,9.4,24.4,15,30c5.6-5.6,11.2-12.5,11.2-18.8C26.2,5,21.2,0,15,0z M15,16c-2.8,0-5-2.2-5-5s2.2-5,5-5s5,2.2,5,5S17.8,16,15,16z";var e=n.renderer.drawPath(t),h=i.width/30,c=i.height/30;return e.setAttribute("transform","translate("+r.x+", "+r.y+") scale("+h+", "+c+")"),f=n.renderer.createGroup({id:t.id}),ti(e,f),ti(f,u)}(n,i,r,u,f);break;case"Cross":i.d="M "+u.x+" "+(u.y-r.height/2)+" L "+u.x+" "+(u.y+r.height/2)+" M "+(u.x-r.width/2)+" "+u.y+" L "+(u.x+r.width/2)+" "+u.y;break;case"Diamond":i.d="M "+u.x+" "+(u.y-r.height/2)+" L "+(u.x+r.width/2)+" "+u.y+" L "+u.x+" "+(u.y+r.height/2)+" L "+(u.x-r.width/2)+" "+u.y+" Z";break;case"Star":i.d="M "+(u.x+r.width/3)+" "+(u.y-r.height/2)+" L "+(u.x-r.width/2)+" "+(u.y+r.height/6)+" L "+(u.x+r.width/2)+" "+(u.y+r.height/6)+" L "+(u.x-r.width/3)+" "+(u.y-r.height/2)+" L "+u.x+" "+(u.y+r.height/2)+" L "+(u.x+r.width/3)+" "+(u.y-r.height/2)+" Z";break;case"Triangle":i.d="M "+u.x+" "+(u.y-r.height/2)+" L "+(u.x+r.width/2)+" "+(u.y+r.height/2)+" L "+(u.x-r.width/2)+" "+(u.y+r.height/2)+" Z";break;case"HorizontalLine":i.d=" M "+(u.x-r.width/2)+" "+u.y+" L "+(u.x+r.width/2)+" "+u.y;break;case"VerticalLine":i.d="M "+u.x+" "+(u.y-r.height/2)+" L "+u.x+" "+(u.y+r.height/2);break;case"InvertedTriangle":i.d="M "+(u.x-r.width/2)+" "+(u.y-r.height/2)+" L "+(u.x+r.width/2)+" "+(u.y-r.height/2)+" L "+u.x+" "+(u.y+r.height/2)+" Z";break;case"Pentagon":for(var s=void 0,h=void 0,e=0;e<5;e++)s=r.width/2*Math.cos(Math.PI/180*72*e),h=r.height/2*Math.sin(Math.PI/180*72*e),i.d+=(0==e?"M ":"L ")+(u.x+s)+" "+(u.y+h);i.d+=" Z"}return"Cross"!==t&&"HorizontalLine"!==t&&"VerticalLine"!==t||(i.stroke="transparent"===i.stroke?i.fill:i.stroke),"Balloon"===t?o:n.renderer.drawPath(i)}(o,n,a,s,i,e),h}function s(n,t){var i,u;if(!Object(r.isNullOrUndefined)(n)&&!Object(r.isNullOrUndefined)(t))if(i=t.replace(/\[/g,".").replace(/\]/g,"").split("."),1===i.length)n=n[i[0]];else for(u=0;u<i.length&&!Object(r.isNullOrUndefined)(n);u++)n=n[i[u]];return n}function kt(n,t){var i=Object(r.isNullOrUndefined)(n.colorValuePath)?t[n.colorValuePath]:n.colorValuePath.indexOf(".")>-1?s(t,n.colorValuePath).toString():t[n.colorValuePath];return n.fill=Object(r.isNullOrUndefined)(n.colorValuePath)||Object(r.isNullOrUndefined)(i)?n.fill:n.colorValuePath.indexOf(".")>-1?s(t,n.colorValuePath).toString():t[n.colorValuePath],n}function dt(n,t){var i,u,f;return Object(r.isNullOrUndefined)(n.shapeValuePath)||Object(r.isNullOrUndefined)(t[n.shapeValuePath])?(i=Object(r.isNullOrUndefined)(n.shapeValuePath)?n.shape:n.shapeValuePath.indexOf(".")>-1?s(t,n.shapeValuePath).toString():n.shape,n.shape=i,u=Object(r.isNullOrUndefined)(n.imageUrlValuePath)?n.imageUrl:n.imageUrlValuePath.indexOf(".")>-1?s(t,n.imageUrlValuePath).toString():n.imageUrl,n.imageUrl=u):(f=n.shapeValuePath.indexOf(".")>-1?s(t,n.shapeValuePath).toString():t[n.shapeValuePath],n.shape=f,"Image"==t[n.shapeValuePath]&&(n.imageUrl=Object(r.isNullOrUndefined)(n.imageUrlValuePath)||Object(r.isNullOrUndefined)(t[n.imageUrlValuePath])?n.imageUrl:n.imageUrlValuePath.indexOf(".")>-1?s(t,n.imageUrlValuePath).toString():t[n.imageUrlValuePath])),n}function gt(n,t,i,u,f,o,s,h){var a,y,ft,ot,tt,c,p,rt=[],w=[],k=0,d=0,ht=n.markerClusterSettings.labelStyle,ut=0,b=[],nt=n.markerClusterSettings,l=i.renderer.createGroup({id:i.element.id+"_LayerIndex_"+u+"_markerCluster"}),v={cancel:!1,name:le,fill:nt.fill,height:nt.height,width:nt.width,imageUrl:nt.imageUrl,shape:nt.shape,data:void 0,maps:i,cluster:nt,border:nt.border},ct;Object(r.isBlazor)()&&(v.data,v.maps,v.cluster,ct=nr(v,["data","maps","cluster"]),v=ct);i.trigger("markerClusterRendering",v,function(){for(var vt,pt,nt,gt,ni,ti,wt,lt,at,yt,ct=0;ct<t.childElementCount;ct++)if(b=[],"hidden"!==t.childNodes[ct].style.visibility){if(p=t.childNodes[ct],a=p.getBoundingClientRect(),b.push(ct),!Object(r.isNullOrUndefined)(a)){for(vt=ct+1;vt<t.childElementCount;vt++)"hidden"!==t.childNodes[vt].style.visibility&&(p=t.childNodes[vt],y=p.getBoundingClientRect(),Object(r.isNullOrUndefined)(y)||a.left>y.right||a.right<y.left||a.top>y.bottom||a.bottom<y.top||(rt.push(y),t.childNodes[vt].style.visibility="hidden",b.push(vt)));if(k=a.left+a.width/2,d=a.top+a.height,rt.length>0){b=b.filter(function(n,t,i){return i.indexOf(n)===t});pt=i.element.getBoundingClientRect();k-=pt.left;d-=i.availableSize.height<pt.height?pt.top:pt.bottom-pt.top;var ii=i.isTileMap?{}:et(i,n,!1),bt=i.isTileMap?{x:0,y:0}:0!==i.translatePoint.x?i.translatePoint:ii.location,kt=parseInt(t.childNodes[ct].id.split("_dataIndex_")[1].split("_")[0],10),dt=parseInt(t.childNodes[ct].id.split("_MarkerIndex_")[1].split("_")[0],10);t.childNodes[ct].style.visibility="hidden";nt=n.markerClusterSettings;v.cancel?((c={size:new g(nt.width,nt.height),fill:nt.fill,borderColor:nt.border.color,borderWidth:nt.border.width,opacity:nt.opacity,dashArray:nt.dashArray}).fill=nt.fill,c.size.width=nt.width,c.size.height=nt.height,c.imageUrl=nt.imageUrl,c.shape=nt.shape,c.borderColor=nt.border.color,c.borderWidth=nt.border.width):((c={size:new g(nt.width,nt.height),fill:nt.fill,borderColor:nt.border.color,borderWidth:nt.border.width,opacity:nt.opacity,dashArray:nt.dashArray}).fill=v.fill,c.size.width=v.width,c.size.height=v.height,c.imageUrl=v.imageUrl,c.shape=v.shape,c.borderColor=v.border.color,c.borderWidth=v.border.width);k=i.isTileMap||t.id.indexOf("_Markers_Group")>-1?k:(k+bt.x)*i.mapScaleValue;d=i.isTileMap||t.id.indexOf("_Markers_Group")>-1?d:(d+bt.y)*i.mapScaleValue;gt=i.element.id+"_LayerIndex_"+u+"_MarkerIndex_"+dt+"_dataIndex_"+kt+"_cluster_"+ut;ni=i.element.id+"_LayerIndex_"+u+"_MarkerIndex_"+dt+"_dataIndex_"+kt+"_cluster_"+ut+"_datalabel_"+ut;ut++;ti="Image"===c.shape?c.size.height/2:0;wt=sr(c.shape,c.imageUrl,{x:0,y:ti},gt,c,f,i);wt.setAttribute("transform","translate( "+k+" "+d+" )");"Balloon"===v.shape?wt.children[0].innerHTML=b.toString():wt.innerHTML=b.toString();ft=new it(ni,0,3.75,"middle",(rt.length+1).toString(),"","");(ot=st(ft,ht,ht.color,f)).setAttribute("transform","translate( "+k+" "+d+" )");l.appendChild(ot);l.appendChild(wt)}}rt=[]}for(o.appendChild(l),i.svgObject.appendChild(o),i.element.appendChild(i.svgObject),lt=0;lt<l.childElementCount;lt++)if("hidden"!==l.childNodes[lt].style.visibility&&(p=l.childNodes[lt],a=p.getBoundingClientRect(),!(Object(r.isNullOrUndefined)(a)||p.id.indexOf("_datalabel_")>-1))){for(at=lt+1;at<l.childElementCount;at++)"hidden"!==l.childNodes[at].style.visibility&&(tt=l.childNodes[at],y=tt.getBoundingClientRect(),Object(r.isNullOrUndefined)(y)||tt.id.indexOf("_datalabel_")>-1||a.left>y.right||a.right<y.left||a.top>y.bottom||a.bottom<y.top||(w.push(tt),w.push(l.childNodes[at-1]),l.childNodes[at].style.visibility="hidden",l.childNodes[at-1].style.visibility="hidden",b.push(at)));if(w.length>0)for(p=l.childNodes[lt],yt=0;yt<w.length;yt++)"g"===p.tagName?p.childNodes[0].textContent=p.childNodes[0].textContent+","+w[yt].textContent:p.textContent=p.textContent+","+w[yt].textContent,l.childNodes[lt-1].textContent=(+l.childNodes[lt-1].textContent+ +w[yt+1].textContent).toString(),yt++;w=[]}for(;0<l.childNodes.length;)f.insertBefore(l.childNodes[0],f.firstChild);s||e(i.element.id+"_Secondary_Element").appendChild(f);o.appendChild(f);document.getElementById(i.element.id+"_LayerIndex_0_markerCluster").remove();h&&document.getElementById(i.element.id+"_Layer_Collections").appendChild(o)})}function ai(n,t){var r=n[0].layerIndex,u=n[0].targetClusterIndex,f=n[0].markerIndex,c=n[0].dataIndex,e=t.element.id+"_LayerIndex_"+r+"_MarkerIndex_"+f,o=e+"_dataIndex_"+c+"_cluster_"+u,l=h(o),v=h(o+"_datalabel_"+u),s,i;for(l.setAttribute("visibility","visible"),v.setAttribute("visibility","visible"),s=n[0].data.length,i=0;i<s;i++)h(e+"_dataIndex_"+n[0].data[i].index).style.visibility="hidden";a(t.element.id+"_LayerIndex_"+r+"_MarkerIndex_"+f+"_markerClusterConnectorLine")}function hr(n,t,i,r){var f=n[0].layerIndex,l=n[0].markerIndex,ft=n[0].targetClusterIndex,k=n[0].dataIndex,e=r?h:i.querySelector.bind(i),a=r?"":"#",v=t.element.id+"_LayerIndex_"+f+"_MarkerIndex_"+l,et=v+"_dataIndex_"+k+"_cluster_"+ft,d=e(a+""+et),yt=e(a+""+et+"_datalabel_"+ft),it,rt,b,ut;d.setAttribute("visibility","hidden");yt.setAttribute("visibility","hidden");var ot=t.layers[f].markerSettings[l],st=e(a+""+v+"_dataIndex_"+k),g=ot.height,nt=ot.width,ht=+d.getAttribute("transform").split("translate(")[1].trim().split(" ")[0],ct=+d.getAttribute("transform").split("translate(")[1].trim().split(" ")[1].split(")")[0].trim(),y=nt+5,o=6.28*y,tt=0,u=Math.round(o/nt);tt+=u;for(var lt,p=n[0].data.length,s=Math.round(g/o*100),at=(s=p<u?100/p:s)/100*360,c=p<u?45:0,pt=1,wt="M "+ht+" "+ct+" ",vt="",w=0;w<p;w++){if(tt===w||Math.round(c)>=360){for(c=0,o=6.28*(y=(nt+5)*++pt),u=Math.round(o/g),s=Math.round(g/o*100);s*u<100;)u++;at=s/100*360;tt+=u}it=ht+y*Math.sin(2*Math.PI*c/360);rt=ct+y*Math.cos(2*Math.PI*c/360);vt+=wt+"L "+it+" "+rt+" ";(st=e(a+""+v+"_dataIndex_"+n[0].data[w].index)).setAttribute("transform","translate( "+it+" "+rt+")");st.style.visibility="visible";c+=at}b=t.layers[f].markerClusterSettings.connectorLineSettings;lt={d:vt,id:t.element.id+"_LayerIndex_"+f+"_MarkerIndex_"+l+"_dataIndex_"+k+"_markerClusterConnectorLine",stroke:b.color,opacity:b.opacity,"stroke-width":b.width};i=r?e(t.element.id+"_Markers_Group"):i;ut=t.renderer.createGroup({id:t.element.id+"_LayerIndex_"+f+"_MarkerIndex_"+l+"_markerClusterConnectorLine"});ut.appendChild(t.renderer.drawPath(lt));i.insertBefore(ut,i.querySelector("#"+v+"_dataIndex_0"))}function cr(n,t,i,r,u,f,e,s,h,c,l){var b={size:new g(n.width,n.height),fill:n.fill,borderColor:n.border.color,borderWidth:n.border.width,opacity:t.opacity,dashArray:t.dashArray},a=sr(n.shape,n.imageUrl,{x:0,y:0},e,b,l,c),v=(c.isTileMap?u.x:(u.x+f.x)*h)+s.x,y=(c.isTileMap?u.y:(u.y+f.y)*h)+s.y,p,w;return a.setAttribute("transform","translate( "+v+" "+y+" )"),ni(c.selectedMarkerElementId,c.markerSelectionClass,a,"MarkerselectionMapStyle"),l.appendChild(a),p=i.length-1===r?"marker":null,w=new o(v,y),t.animationDuration>0&&wr(a,t.animationDelay,t.animationDuration,w,c,p),l}function lr(n,t,i,u,f,o,s,h,c,l){var a,p,y,v;if((t=ui(n.template))&&(l.isBlazor||t(u,l,n.template,l.element.id+"_MarkerTemplate"+f,!1).length)){for(a=function(n,t,i,u,f){for(var s=Object(r.createElement)("div",{id:t,styles:"position: absolute;pointer-events: auto;"}),c=n.length;c>0;)s.appendChild(n[0]),c--;for(var h=s.innerHTML,o=Object.keys(i),e=0;e<o.length;e++)"object"==typeof i[o[e]]?h=or(h,"",i,f):"latitude"!==o[e].toLowerCase()&&"longitude"!==o[e].toLowerCase()&&(h=h.replace(new RegExp("{{:"+o[e]+"}}","g"),i[o[e].toString()]));return s.innerHTML=h,s}(t(u,l,n.template,l.element.id+"_MarkerTemplate"+f,!1),i,u,0,l),p=0;p<a.children.length;p++)a.children[p].style.pointerEvents="none";(a.style.left=(l.isTileMap?s.x:Math.abs(l.baseMapRectBounds.min.x-s.x)*h)+c.x+"px",a.style.top=(l.isTileMap?s.y:Math.abs(l.baseMapRectBounds.min.y-s.y)*h)+c.y+"px",o.appendChild(a),"GoogleStaticMap"===l.layers[l.baseLayerIndex].layerType)&&(y=e(l.element.id+"_StaticGoogleMap").getBoundingClientRect(),v=a.getBoundingClientRect(),(y.x>v.x||y.x+640<v.x+v.width)&&(y.y>v.y||y.y+y.height<v.y+v.height)&&(a.style.display="none"))}return o}function ni(n,t,i,u){if(n)for(var f=0;f<n.length;f++)i.getAttribute("id")===n[f]&&((Object(r.isNullOrUndefined)(h(t.id))||0===f)&&(document.body.appendChild(t),i.id.indexOf("_MarkerIndex_")>-1&&i.childElementCount>0&&i.children[0].setAttribute("class",u)),i.setAttribute("class",u))}function ti(n,t){return t&&t.appendChild(n),n}function ii(n,t,i,u){var f,o,e;if(!Object(r.isNullOrUndefined)(t))for(f=0;f<n.length;f++)if(o=i.indexOf(".")>-1?s(n[f],i):n[f][i],e=ri(o,u,t),(!Object(r.isNullOrUndefined)(o)&&isNaN(t[e])?o.toLowerCase():o)===(!Object(r.isNullOrUndefined)(t[e])&&isNaN(t[e])?t[e].toLowerCase():t[e]))return f;return null}function ri(n,t,i){if(!Object(r.isNullOrUndefined)(n)&&!Object(r.isNullOrUndefined)(i)&&!Object(r.isNullOrUndefined)(t))for(var f="[object Array]"===Object.prototype.toString.call(t)?t:[t],u=0;u<f.length;u++)if((Object(r.isNullOrUndefined)(n)?n:n.toLowerCase())===(!Object(r.isNullOrUndefined)(i[f[u]])&&isNaN(i[f[u]])?i[f[u]].toLowerCase():i[f[u]]))return f[u];return null}function vi(n,t){var i;if(!n.length)return null;for(var c,l,e,o,y=n.length,p=0,r=0,u=0,f=0;f<=y-1;f++)c=n[f].x,l="Mercator"===t?n[f].y:-n[f].y,f===y-1?(e=n[0].x,o="Mercator"===t?n[0].y:-n[0].y):(e=n[f+1].x,o="Mercator"===t?n[f+1].y:-n[f+1].y),p+=Math.abs(c*o-e*l),r+=Math.abs((c+e)*(c*o-e*l)),u+=Math.abs((l+o)*(c*o-e*l));r*=1/(4*(p*=.5));u*=1/(4*p);var w={x:0,y:0},a={x:0,y:0},b={x:0,y:0},v={x:0,y:0},k={x:0,y:0},s={x:0,y:0},d={x:0,y:0},h={x:0,y:0},g=0;for(f=0;f<=y-1;f++)i=n[f],i.y="Mercator"===t?i.y:-i.y,i.y>u?i.x<r&&r-i.x<r-k.x?k={x:i.x,y:i.y}:i.x>r&&(0===s.x||i.x-r<s.x-r)&&(s={x:i.x,y:i.y}):i.x<r&&r-i.x<r-d.x?d={x:i.x,y:i.y}:i.x>r&&(0===h.x||i.x-r<h.x-r)&&(h={x:i.x,y:i.y}),g=s.y-h.y+(s.y-h.y)/4,i.x>r?i.y<u&&u-i.y<u-w.y?w={x:i.x,y:i.y}:i.y>u&&(0===a.y||i.y-u<a.y-u)&&(a={x:i.x,y:i.y}):i.y<u&&u-i.y<u-b.y?b={x:i.x,y:i.y}:i.y>u&&(0===v.y||i.y-u<v.y-u)&&(v={x:i.x,y:i.y});return{x:r,y:u,rightMin:w,rightMax:a,leftMin:b,leftMax:v,points:n,topMax:h,topMin:d,bottomMax:s,bottomMin:k,height:g}}function ar(n){var t=!1;return"[object Array]"===Object.prototype.toString.call(n)&&Array.prototype.forEach.call(n,function(n){Object(r.isNullOrUndefined)(n.geometry)||"Path"!==n.geometry.type||(t=!0)}),t}function tt(n,t,i){var r=t,f=v(t,i).width,u;if(f>n)for(u=t.length-1;u>=0;--u)if((f=v(r=t.substring(0,u)+"...",i).width)<=n||r.length<4)return r.length<4&&(r=" "),r;return r}function a(n){var t=document.getElementById(n);return t?Object(r.remove)(t):null}function vr(n,t){var i=w(n.minLatOfGivenLocation,n.minLongOfGivenLocation,n.mapLayerPanel.calculateFactor(t),t,n),r=w(n.maxLatOfGivenLocation,n.maxLongOfGivenLocation,n.mapLayerPanel.calculateFactor(t),t,n),u=(i.x+r.x)/2,f=(i.y+r.y)/2;return new o(u,f)}function et(n,t,i){var f,v=n.zoomSettings.zoomFactor,p=n.centerPosition,b=p.latitude,k=p.longitude,d=!Object(r.isNullOrUndefined)(n.centerLatOfGivenLocation)&&!Object(r.isNullOrUndefined)(n.centerLongOfGivenLocation)&&n.zoomNotApplied,et,y,tt,it,ot;Object(r.isNullOrUndefined)(n.mapScaleValue)&&(n.mapScaleValue=v);n.zoomSettings.shouldZoomInitially&&n.zoomSettings.enable&&(n.mapScaleValue=f=v=(n.zoomSettings.shouldZoomInitially||n.enablePersistence)&&1==n.scale?n.scale:Object(r.isNullOrUndefined)(n.markerZoomFactor)?1:n.markerZoomFactor,n.mapScaleValue===n.markerZoomFactor||n.enablePersistence||(n.mapScaleValue=v=n.markerZoomFactor),Object(r.isNullOrUndefined)(n.markerCenterLatitude)||Object(r.isNullOrUndefined)(n.markerCenterLongitude)||(b=n.markerCenterLatitude,k=n.markerCenterLongitude));d&&(n.mapScaleValue=f=v=n.scaleOfGivenLocation);var l=n.baseMapRectBounds.min,rt=n.baseMapRectBounds.max,ut=i?1:n.mapScaleValue;Object(r.isNullOrUndefined)(n.currentShapeDataLength)&&(n.currentShapeDataLength=Object(r.isNullOrUndefined)(t.shapeData.features)?t.shapeData.geometries.length:t.shapeData.features.length);var h,c,u=n.totalRect&&n.legendSettings.visible?n.totalRect:n.mapAreaRect,ct=n.availableSize,e=Math.abs(rt.x-l.x),s=Math.abs(l.y-rt.y),ft=i?1:1===n.markerZoomFactor?n.mapScaleValue:v;if(p=n.zoomSettings.shouldZoomInitially&&n.markerZoomedState&&!n.zoomPersistence?n.markerZoomCenterPoint:n.centerPosition,(Object(r.isNullOrUndefined)(k)||Object(r.isNullOrUndefined)(b))&&!d)if(Object(r.isNullOrUndefined)(n.previousProjection)||n.previousProjection!==n.projectionType)e*=f=parseFloat(Math.min(u.width/e,u.height/s).toFixed(2)),s*=f,et=0!==l.x&&"layers"===n.translateType?ct.width-u.width:0,h=u.x+(-l.x+(u.width/2-e/2))-et,c=u.y+(-l.y+(u.height/2-s/2)),n.previousTranslate=new o(h,c);else if(n.zoomSettings.shouldZoomInitially||1!==n.markerZoomFactor||1!==n.mapScaleValue)if(f=n.mapScaleValue<1?n.mapScaleValue+1:n.mapScaleValue,n.mapScaleValue=n.zoomSettings.enable&&1!==n.mapScaleValue?n.mapScaleValue:1,n.currentShapeDataLength!==(Object(r.isNullOrUndefined)(t.shapeData.features)?t.shapeData.geometries.length:t.shapeData.features.length)&&"SubLayer"!==t.type)y=parseFloat(Math.min(u.height/s,u.width/e).toFixed(2)),s*=y,e*=y,c=u.y+(-l.y+(u.height/2-s/2)),f=y,h=u.x+(-l.x+(u.width/2-e/2));else if(n.availableSize.height!==n.heightBeforeRefresh||n.widthBeforeRefresh!==n.availableSize.width){tt=parseFloat(Math.min(u.width/e,u.height/s).toFixed(2));it=e;it*=tt;ot=s*tt;var st=u.x+(-l.x+(u.width/2-it/2)),ht=u.y+(-l.y+(u.height/2-ot/2)),lt=(n.translatePoint.x-n.previousTranslate.x)/n.widthBeforeRefresh,at=(n.translatePoint.y-n.previousTranslate.y)/n.heightBeforeRefresh;h=st+lt*n.availableSize.width;c=ht+at*n.availableSize.height;n.previousTranslate=new o(st,ht);n.zoomTranslatePoint.x=h;n.zoomTranslatePoint.y=c}else Object(r.isNullOrUndefined)(n.previousProjection)||1!==n.mapScaleValue||n.zoomModule.isDragZoom?(h=n.zoomTranslatePoint.x,c=n.zoomTranslatePoint.y,f=n.scale):(e*=f=parseFloat(Math.min(u.width/e,u.height/s).toFixed(2)),h=u.x+(-l.x+(u.width/2-e/2)),s*=f,c=u.y+(-l.y+(u.height/2-s/2)));else s*=f=parseFloat(Math.min(u.width/e,u.height/s).toFixed(2)),e*=f,c=u.y+(-l.y+(u.height/2-s/2)),h=u.x+(-l.x+(u.width/2-e/2));else{var g=((e+Math.abs(n.mapAreaRect.width-e))/2+n.mapAreaRect.x)/ft,nt=((s+Math.abs(n.mapAreaRect.height-s))/2+n.mapAreaRect.y)/ft,a=d?vr(n,t):w(b,k,n.mapLayerPanel.calculateFactor(t),t,n);Object(r.isNullOrUndefined)(n.previousProjection)||n.previousProjection!==n.projectionType?(h=-a.x+g,c=-a.y+nt,f=ut):(1!==Math.floor(n.scale)&&n.zoomSettings.shouldZoomInitially||n.zoomNotApplied?(h=-a.x+g,c=-a.y+nt):n.zoomSettings.shouldZoomInitially||n.zoomNotApplied?(h=-a.x+g,c=-a.y+nt,f=ut):(h=n.zoomTranslatePoint.x,c=n.zoomTranslatePoint.y),f=n.mapScaleValue)}return Object(r.isNullOrUndefined)(n.translatePoint)||(h=n.enablePersistence&&0!=n.translatePoint.x&&!n.zoomNotApplied?n.translatePoint.x:h,c=n.enablePersistence&&0!=n.translatePoint.y&&!n.zoomNotApplied?n.translatePoint.y:c),f=n.enablePersistence?n.mapScaleValue>=1?n.mapScaleValue:1:f,n.widthBeforeRefresh=n.availableSize.width,n.heightBeforeRefresh=n.availableSize.height,{scale:f,location:new o(h,c)}}function ct(n,t,i){var f,e=n.zoomSettings.zoomFactor,ft=n.centerPosition,d=ft.latitude,g=ft.longitude,nt=!Object(r.isNullOrUndefined)(n.centerLongOfGivenLocation)&&!Object(r.isNullOrUndefined)(n.centerLatOfGivenLocation)&&n.zoomNotApplied,v,ut,y,k,u;Object(r.isNullOrUndefined)(n.previousCenterLatitude)&&Object(r.isNullOrUndefined)(n.previousCenterLongitude)?(n.previousCenterLatitude=n.centerPosition.latitude,n.previousCenterLongitude=n.centerPosition.longitude):n.previousCenterLatitude!==n.centerPosition.latitude&&n.previousCenterLongitude!==n.centerPosition.longitude?(n.centerPositionChanged=!0,n.previousCenterLatitude=n.centerPosition.latitude,n.previousCenterLongitude=n.centerPosition.longitude):n.centerPositionChanged=!1;(Object(r.isNullOrUndefined)(n.mapScaleValue)||e>n.mapScaleValue)&&(n.mapScaleValue=n.isReset&&1===n.mapScaleValue?n.mapScaleValue:e);n.mapScaleValue=1!==n.zoomSettings.zoomFactor&&n.zoomSettings.zoomFactor===n.mapScaleValue||n.zoomSettings.zoomFactor===n.mapScaleValue||n.centerPositionChanged?n.zoomSettings.zoomFactor:n.mapScaleValue;n.zoomSettings.shouldZoomInitially&&(n.mapScaleValue=e=f=(n.enablePersistence||n.zoomSettings.shouldZoomInitially)&&1==n.scale?n.scale:Object(r.isNullOrUndefined)(n.markerZoomFactor)?n.mapScaleValue:n.markerZoomFactor,e=n.mapScaleValue,Object(r.isNullOrUndefined)(n.markerCenterLatitude)||Object(r.isNullOrUndefined)(n.markerCenterLongitude)||(d=n.markerCenterLatitude,g=n.markerCenterLongitude));nt&&(n.mapScaleValue=f=e=n.scaleOfGivenLocation);var h,c,tt=i?1:n.mapScaleValue,s=n.mapAreaRect,p=n.baseMapRectBounds.min,et=n.baseMapRectBounds.max,ot=i?1:n.mapScaleValue,it=Math.abs(et.x-p.x),rt=Math.abs(p.y-et.y);if((Object(r.isNullOrUndefined)(g)||Object(r.isNullOrUndefined)(d))&&!nt){if(v=0===n.zoomSettings.zoomFactor?1:n.zoomSettings.zoomFactor,f=v=v>10?10:v,ut=0===n.mapScaleValue?1:n.mapScaleValue>10?10:n.mapScaleValue,a=s.x+(-p.x+(s.width/2-it/2)),l=s.y+(-p.y+(s.height/2-rt/2)),!Object(r.isNullOrUndefined)(n.zoomTranslatePoint)||!Object(r.isNullOrUndefined)(n.previousProjection))if(n.previousProjection!==n.projectionType){for(y=[],k={x:a,y:l},y.push(k),u=1;u<10;u++)k={x:y[u-1].x-(s.width/u-s.width/(u+1))/2,y:y[u-1].y-(s.height/u-s.height/(u+1))/2},y.push(k);a=y[v-1].x;l=y[v-1].y}else a=n.zoomTranslatePoint.x,l=n.zoomTranslatePoint.y,v!==ut&&(f=ut);Object(r.isNullOrUndefined)(n.translatePoint)||(h=n.enablePersistence&&0!=n.translatePoint.x&&!n.zoomNotApplied?n.translatePoint.x:a,c=n.enablePersistence&&0!=n.translatePoint.y&&!n.zoomNotApplied?n.translatePoint.y:l)}else{var l=(rt+Math.abs(n.mapAreaRect.height-rt))/2/ot,a=(it+Math.abs(n.mapAreaRect.width-it))/2/ot,b=nt?vr(n,t):w(d,g,n.mapLayerPanel.calculateFactor(t),t,n);Object(r.isNullOrUndefined)(n.zoomTranslatePoint)&&Object(r.isNullOrUndefined)(n.previousProjection)||n.zoomNotApplied?(h=-b.x+a+n.mapAreaRect.x/tt,c=-b.y+l+n.mapAreaRect.y/tt):n.previousProjection!==n.projectionType?(h=-b.x+a,c=-b.y+l):(h=n.zoomTranslatePoint.x,c=n.zoomTranslatePoint.y,e=tt);Object(r.isNullOrUndefined)(n.translatePoint)||(c=n.enablePersistence&&0!=n.translatePoint.y&&!n.zoomNotApplied?n.translatePoint.y:c,h=n.enablePersistence&&0!=n.translatePoint.x&&!n.zoomNotApplied?n.translatePoint.x:h);f=0!==e?e:1}return f=n.enablePersistence?0==n.mapScaleValue?1:n.mapScaleValue:f,{scale:i?1:f,location:new o(h,c)}}function e(n){return document.getElementById(n)}function yr(n,t){return n.formatFunction=n.intl.getNumberFormat({format:n.format,useGrouping:n.useGroupingSeparator}),n.formatFunction(t)}function ui(n){var t=null;try{document.querySelectorAll(n).length&&(t=Object(r.compile)(document.querySelector(n).innerHTML.trim()))}catch(i){t=Object(r.compile)(n)}return t}function h(n){return document.getElementById(n)}function hf(n,t,i,r){var f=function(n,t){var r,f=parseInt(n.split("_LayerIndex_")[1].split("_")[0],10),e=parseInt(n.split("_shapeIndex_")[1].split("_")[0],10),i=t.layersCollection[f],u=i.layerData[e].property;return i.dataSource&&(r=i.dataSource[ii(i.dataSource,u,i.shapeDataPath,i.shapePropertyPath)]),{shapeData:u,data:r}}(n,i),u=t.enableMultiSelect?{cancel:!1,name:r,fill:t.fill,opacity:t.opacity,border:t.border,shapeData:f.shapeData,data:f.data,target:n,maps:i,shapeDataCollection:i.shapeSelectionItem}:{cancel:!1,name:r,fill:t.fill,opacity:t.opacity,border:t.border,shapeData:f.shapeData,data:f.data,target:n,maps:i};return i.isBlazor&&(u.maps,u.shapeData,u=nr(u,["maps","shapeData"])),i.trigger(r,u),u}function fi(n){return document.getElementsByClassName(n)}function c(n,t){var i=null;return document.getElementById(t)&&(i=document.getElementById(t).querySelector("#"+n)),i}function pr(n,t,i,r){for(var f,e=r.layers[n].shapeData.features,u=0;u<e.length;u++)if(e[u].properties.name===t){f=r.element.id+"_LayerIndex_"+n+"_shapeIndex_"+u+"_dataIndex_undefined";break}return h(f)}function ei(n,t,i){return Object(r.createElement)("style",{id:n,innerHTML:"."+t+"{fill:"+i.fill+";opacity:"+i.opacity.toString()+";stroke-width:"+i.border.width.toString()+";stroke:"+i.border.color+";}"})}function lt(n,t,i){h(n).innerHTML="."+t+"{fill:"+i.fill+";opacity:"+i.opacity.toString()+";stroke-width:"+i.border.width.toString()+";stroke:"+i.border.color+"}"}function cf(n,t,i,r,u){var e={color:n.border.color,width:n.border.width/t.scale},f={opacity:n.opacity,fill:n.fill,border:e,name:du,target:i.id,cancel:!1,shapeData:r,data:u,maps:t};t.trigger("itemSelection",f,function(){t.shapeSelectionItem.push(f.shapeData);h("ShapeselectionMap")?lt("ShapeselectionMap","ShapeselectionMapStyle",f):document.body.appendChild(ei("ShapeselectionMap","ShapeselectionMapStyle",f))})}function p(n){n.removeAttribute("class")}function wr(n,t,i,u,f,e,o){void 0===o&&(o=0);var h=u.x,c=u.y,s=0,l=n.getAttribute("transform")||"";new r.Animation({}).animate(n,{duration:i,delay:t,progress:function(t){t.timeStamp>t.delay&&(s=(t.timeStamp-t.delay)/t.duration,n.setAttribute("transform","translate( "+(h-o*s)+" "+(c-o*s)+" ) scale("+s+")"))},end:function(){if(n.setAttribute("transform",l),e){var t={cancel:!1,name:ku,element:e,maps:f.isBlazor?null:f};f.trigger(ku,t)}}})}function lf(n){a(n)}function yi(n,t,i,u,f,e,o,s,h){var b=tr(i,u,s),w;Object(r.isNullOrUndefined)(b)||(i=b.x,u=b.y);for(var l=document.getElementById(o),c=v(n,{fontFamily:"Segoe UI",size:"8px",fontStyle:"Normal",fontWeight:"Regular"}).width,a=n.split(" "),y=a[0].length,p=1;p<a.length;p++)y<a[p].length&&(y=a[p].length);l||(l=Object(r.createElement)("div",{id:o,styles:'background-color: rgb(255, 255, 255) !important; color:black !important; position:absolute;border:1px solid rgb(0, 0, 0); padding-left:5px;font-size:12px; font-family: "Segoe UI"; text-align:center'}));i<f-c?i=i:i>f-c&&i<f-8*y?c=f-i:i>=f-8*y&&(i>c?i-=c:(c=i,i=0));w=t.split("px");br(l,n,i,u,w,c,f,s);l.clientHeight+2*parseInt(w[0],10)>e&&(c=i,i=0);br(l,n,i,u,w,c,f,s);h&&setTimeout(lf,5e3,o)}function br(n,t,i,r,u,f,e,o){n.innerHTML=t;n.style.top=-1!==n.id.indexOf("_Legend")?(parseInt(u[0],10)+r).toString()+"px":(2*parseInt(u[0],10)).toString()+"px";n.style.left=i.toString()+"px";n.style.width=f.toString()+"px";n.style.maxWidth=e.toString()+"px";n.style.wordWrap="break-word";o.appendChild(n)}function af(n,t,i,u,f){var o=new ut.SvgRenderer(""),e=function(n,t,i,u,f){var s,v="Path",c=t.width,o=t.height,h=n.x,e=n.y,l=n.x+-c/2,w=n.y+-o/2;switch(i){case"Circle":case"Bubble":v="Ellipse";Object(r.merge)(u,{rx:c/2,ry:o/2,cx:h,cy:e});break;case"VerticalLine":s="M "+h+" "+(e+o/2)+" L "+h+" "+(e+-o/2);Object(r.merge)(u,{d:s});break;case"Diamond":s="M "+l+" "+e+" L "+h+" "+(e+-o/2)+" L "+(h+c/2)+" "+e+" L "+h+" "+(e+o/2)+" L "+l+" "+e+" z";Object(r.merge)(u,{d:s});break;case"Rectangle":s="M "+l+" "+(e+-o/2)+" L "+(h+c/2)+" "+(e+-o/2)+" L "+(h+c/2)+" "+(e+o/2)+" L "+l+" "+(e+o/2)+" L "+l+" "+(e+-o/2)+" z";Object(r.merge)(u,{d:s});break;case"Triangle":s="M "+l+" "+(e+o/2)+" L "+h+" "+(e+-o/2)+" L "+(h+c/2)+" "+(e+o/2)+" L "+l+" "+(e+o/2)+" z";Object(r.merge)(u,{d:s});break;case"InvertedTriangle":s="M "+(h+c/2)+" "+(e-o/2)+" L "+h+" "+(e+o/2)+" L "+(h-c/2)+" "+(e-o/2)+" L "+(h+c/2)+" "+(e-o/2)+" z";Object(r.merge)(u,{d:s});break;case"Pentagon":for(var y=void 0,p=void 0,a=0;a<=5;a++)y=c/2*Math.cos(Math.PI/180*72*a),p=c/2*Math.sin(Math.PI/180*72*a),s=0===a?"M "+(h+y)+" "+(e+p)+" ":s.concat("L "+(h+y)+" "+(e+p)+" ");s=s.concat("Z");Object(r.merge)(u,{d:s});break;case"Star":s="M "+(n.x+t.width/3)+" "+(n.y-t.height/2)+" L "+(n.x-t.width/2)+" "+(n.y+t.height/6)+" L "+(n.x+t.width/2)+" "+(n.y+t.height/6)+" L "+(n.x-t.width/3)+" "+(n.y-t.height/2)+" L "+n.x+" "+(n.y+t.height/2)+" L "+(n.x+t.width/3)+" "+(n.y-t.height/2)+" Z";Object(r.merge)(u,{d:s});break;case"Cross":s="M "+l+" "+e+" L "+(h+c/2)+" "+e+" M "+h+" "+(e+o/2)+" L "+h+" "+(e+-o/2);Object(r.merge)(u,{d:s});break;case"Image":v="Image";Object(r.merge)(u,{href:f,height:o,width:c,x:l,y:w})}return{renderOption:u,functionName:v}}(n,i,t,f,u);return o["draw"+e.functionName](e.renderOption)}function kr(n,t,i,r){for(var f,e,u=0;u<n.childElementCount;u++)(f=n.childNodes[u]).id.indexOf("_NavigationGroup")>-1?vf(f,t,i,r):(e=r.layersCollection[t].shapeSettings.border.width,f.setAttribute("stroke-width",(e/i).toString()))}function vf(n,t,i,r){for(var f,e,u=0;u<n.childElementCount;u++)"path"===(f=n.childNodes[u]).tagName&&(e=r.layersCollection[t].navigationLineSettings[parseFloat(f.id.split("_NavigationIndex_")[1].split("_")[0])].width,f.setAttribute("stroke-width",(e/i).toString()))}function dr(n){for(var r=[],i=n.touches,t=0;t<i.length;t++)r.push({pageX:i[t].pageX,pageY:i[t].pageY});return r}function gr(n,t){var i=n.pageX-t.pageX,r=n.pageY-t.pageY;return Math.sqrt(i*i+r*r)}function nu(n,t){return n+t}function tu(n,t,i,r,u){var e,o=this,f=null,s=function(t){f||(f=t);var h=t-f;h<i?(r.call(o,{element:n,delay:0,timeStamp:h,duration:i}),window.requestAnimationFrame(s)):(window.cancelAnimationFrame(e),u.call(o,{element:n}),n.setAttribute("style","visibility:visible"))};e=window.requestAnimationFrame(s)}function wi(n,t,i,r){var o=0,u=n.getAttribute("transform").split(" ");2===u.length&&(u[2]=u[1].split(")")[0],u[1]=u[0].split("(")[1]);var f=new rt(parseInt(u[1],10),parseInt(u[2],10)),s=r.x-f.x,h=r.y-f.y,e=new rt(0,0);tu(n,0,i,function(n){n.timeStamp>n.delay&&(o=(n.timeStamp-n.delay)/n.duration,e.x=f.x+o*s,e.y=f.y+o*h,n.element.setAttribute("transform","translate( "+e.x+" "+e.y+" )"))},function(){n.setAttribute("transform","translate( "+r.x+" "+r.y+" )")})}function eu(n,t){var u=Object(r.isNullOrUndefined)(t.shouldZoomPreviousFactor)?null:t.shouldZoomPreviousFactor,i=Object(r.isNullOrUndefined)(t.shouldZoomCurrentFactor)?null:t.shouldZoomCurrentFactor;Object(r.isNullOrUndefined)(i)?!Object(r.isNullOrUndefined)(u)&&Object(r.isNullOrUndefined)(i)&&t.shouldZoomPreviousFactor!==n?t.shouldZoomCurrentFactor=n:t.shouldZoomPreviousFactor=n:(t.shouldZoomCurrentFactor=null,t.shouldZoomPreviousFactor=null)}function ou(n,t,i,r,u,f,e){var h,c,o,l,a,v,y,p=Math.sin(t*Math.PI/180),g=Math.log((1+p)/(1-p))/2,nt=Math.max(Math.min(g,Math.PI),-Math.PI)/2,b=Math.sin(n*Math.PI/180),tt=Math.log((1+b)/(1-b))/2,it=Math.max(Math.min(tt,Math.PI),-Math.PI)/2,k,d,s;return e.zoomNotApplied&&!e.isTileMap&&(k=Math.abs((e.baseMapBounds.latitude.max-e.baseMapBounds.latitude.min)/(t-n)),d=Math.abs((e.baseMapBounds.longitude.max-e.baseMapBounds.longitude.min)/(r-i)),l=Math.min(k,d),w(n,i,1,e.layersCollection[0],e),w(t,r,1,e.layersCollection[0],e)),h=(nt-it)/Math.PI,s=r-i,c=(s<0?s+360:s)/360,a=Math.log(f/256/h)/Math.LN2,v=Math.log(u/256/c)/Math.LN2,y=e.zoomNotApplied&&!e.isTileMap?l:Math.min(a,v),o=Math.min(y,10),o=e.isTileMap||!e.zoomNotApplied?Math.floor(o):o,e.isTileMap||eu(o,e),o}function vt(n){var i,t=Object(r.isNullOrUndefined)(n.result)?n.actual:n.result;return Object(r.isNullOrUndefined)(t.length)?Object(r.isNullOrUndefined)(t.Items)||(i=t.Items):i=t,i}var at,iu,ru,uu,fu,pi,hi,ff;i.r(t);var ci,gi=i(4),r=i(0),ut=i(2),pt=(ci=function(n,t){return(ci=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])})(n,t)},function(n,t){function i(){this.constructor=n}ci(n,t);n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),nr=function(n,t){var u={},i,r;for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(u[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&(u[i[r]]=n[i[r]]);return u},g=function(){return function(n,t){this.width=n;this.height=t}}();var o=function(){return function(n,t){this.x=n;this.y=t}}(),fr=function(){return function(n,t){this.min=n;this.max=t}}(),er=function(){return function(n,t){this.latitude=new fr(n.min,n.max);this.longitude=new fr(t.min,t.max)}}();var it=function(){return function(n,t,i,r,u,f,e){void 0===f&&(f="");this.transform="";this.baseLine="auto";this.id=n;this.text=u;this.transform=f;this.anchor=r;this.x=t;this.y=i;this.baseLine=e}}(),b=function(){return function(n,t,i,r,u,f,e){this.id=n;this.opacity=u;this.fill=t;this.stroke=r;this["stroke-width"]=i;this["stroke-dasharray"]=f;this.d=e}}(),of=function(){return function(n,t,i){this.r=n;this.g=t;this.b=i}}(),d=function(n){function t(t,i,r,u,f,e,o,s,h){var c=n.call(this,t,i,r.width,r.color,u,h)||this;return c.y=f.y,c.x=f.x,c.height=f.height,c.width=f.width,c.rx=e||0,c.ry=o||0,c.transform=s||"",c["stroke-dasharray"]=h,c}return pt(t,n),t}(b),bt=function(n){function t(t,i,r,u,f,e,o,s){var h=n.call(this,t,i,r.width,r.color,u)||this;return h.cy=e,h.cx=f,h.r=o,h["stroke-dasharray"]=s,h}return pt(t,n),t}(b),sf=function(n){function t(t,i,r,u,f,e,o){return void 0===e&&(e=1),void 0===o&&(o=""),n.call(this,t,i,r,u,f,e,o)||this}return pt(t,n),t}(function(n){function t(t,i,r,u,f,e,o){void 0===e&&(e=1);void 0===o&&(o="");var s=n.call(this,t,r,u,f,e,o)||this;return s.points=i,s}return pt(t,n),t}(b)),rt=function(){return function(n,t){this.x=n;this.y=t}}(),y=function(){return function(n,t,i,r){this.x=n;this.y=t;this.width=i;this.height=r}}();pi=function(){return function(n,t,i,r,u){this.dataOptions=n;this.type=t||"GET";this.async=i||!0;this.contentType=r;this.sendData=u}}();!function(n){n.mapsTitleFont={size:"14px",fontWeight:"Medium",color:"#424242",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"};n.mapsSubTitleFont={size:"13px",fontWeight:"Medium",color:"#424242",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"};n.tooltipLabelFont={size:"12px",fontWeight:"Regular",color:"#FFFFFF",fontStyle:"Regular",fontFamily:"Roboto"};n.legendTitleFont={size:"14px",fontWeight:"Regular",color:"#757575",fontStyle:"Regular",fontFamily:"Roboto, Noto, Sans-serif"};n.legendLabelFont={size:"13px",fontWeight:"Medium",color:"#757575",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"};n.dataLabelFont={size:"12px",fontWeight:"Medium",color:"#000000",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"}}(at||(at={})),function(n){n.mapsTitleFont={size:"14px",fontWeight:"Semibold",color:"#424242",fontStyle:"Semibold",fontFamily:"SegoeUI, Helvetica Neue, Helvetica, Arial, sans-serif"};n.mapsSubTitleFont={size:"13px",fontWeight:"Regular",color:"#424242",fontStyle:"Regular",fontFamily:"SegoeUI, Helvetica Neue, Helvetica, Arial, sans-serif"};n.tooltipLabelFont={size:"12px",fontWeight:"Regular",color:"#FFFFFF",fontStyle:"Regular",fontFamily:"Roboto"};n.legendTitleFont={size:"14px",fontWeight:"Regular",color:"#757575",fontStyle:"Regular",fontFamily:"SegoeUI, Helvetica Neue, Helvetica, Arial, sans-serif"};n.legendLabelFont={size:"13px",fontWeight:"Medium",color:"#757575",fontStyle:"Medium",fontFamily:"SegoeUI, Helvetica Neue, Helvetica, Arial, sans-serif"};n.dataLabelFont={size:"12px",fontWeight:"Medium",color:"#000000",fontStyle:"Medium",fontFamily:"SegoeUI, Helvetica Neue, Helvetica, Arial, sans-serif"}}(iu||(iu={})),function(n){n.mapsTitleFont={size:"14px",fontWeight:"Semibold",color:"#424242",fontStyle:"Semibold",fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif"};n.mapsSubTitleFont={size:"13px",fontWeight:"Regular",color:"#424242",fontStyle:"Regular",fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif"};n.tooltipLabelFont={size:"12px",fontWeight:"Regular",color:"#FFFFFF",fontStyle:"Regular",fontFamily:"Roboto"};n.legendTitleFont={size:"14px",fontWeight:"Regular",color:"#757575",fontStyle:"Regular",fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif"};n.legendLabelFont={size:"13px",fontWeight:"Medium",color:"#757575",fontStyle:"Medium",fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif"};n.dataLabelFont={size:"12px",fontWeight:"Medium",color:"#000000",fontStyle:"Medium",fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif"}}(ru||(ru={})),function(n){n.mapsTitleFont={size:"14px",fontWeight:"Medium",color:"#FFFFFF",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"};n.mapsSubTitleFont={size:"13px",fontWeight:"Medium",color:"#FFFFFF",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"};n.tooltipLabelFont={size:"12px",fontWeight:"Regular",color:"#000000",fontStyle:"Regular",fontFamily:"Roboto"};n.legendTitleFont={size:"14px",fontWeight:"Regular",color:"#FFFFFF",fontStyle:"Regular",fontFamily:"Roboto, Noto, Sans-serif"};n.legendLabelFont={size:"13px",fontWeight:"Medium",color:"#FFFFFF",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"};n.dataLabelFont={size:"12px",fontWeight:"Medium",color:"#000000",fontStyle:"Medium",fontFamily:"Roboto, Noto, Sans-serif"}}(uu||(uu={})),function(n){n.mapsTitleFont={fontFamily:"Roboto, Noto, Sans-serif",fontWeight:"Medium",size:"14px",fontStyle:"Medium",color:"#FFFFFF"};n.mapsSubTitleFont={size:"13px",color:"#FFFFFF",fontWeight:"Medium",fontFamily:"Roboto, Noto, Sans-serif",fontStyle:"Medium"};n.tooltipLabelFont={size:"12px",color:"#282727",fontWeight:"Regular",fontFamily:"Roboto",fontStyle:"Regular"};n.legendTitleFont={size:"14px",fontWeight:"Regular",color:"#FFFFFF",fontStyle:"Regular",fontFamily:"Roboto, Noto, Sans-serif"};n.legendLabelFont={size:"13px",fontFamily:"Roboto, Noto, Sans-serif",fontWeight:"Medium",color:"#DADADA",fontStyle:"Medium"}}(fu||(fu={}));var l=function(){var n=function(t,i){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),u=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},yf=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return l(t,n),u([Object(r.Property)("")],t.prototype,"content",void 0),u([Object(r.Property)("0px")],t.prototype,"x",void 0),u([Object(r.Property)("0px")],t.prototype,"y",void 0),u([Object(r.Property)("None")],t.prototype,"verticalAlignment",void 0),u([Object(r.Property)("None")],t.prototype,"horizontalAlignment",void 0),u([Object(r.Property)("-1")],t.prototype,"zIndex",void 0),t}(r.ChildProperty),pf=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return l(t,n),u([Object(r.Property)("Start")],t.prototype,"position",void 0),u([Object(r.Property)("false")],t.prototype,"showArrow",void 0),u([Object(r.Property)(2)],t.prototype,"size",void 0),u([Object(r.Property)("black")],t.prototype,"color",void 0),u([Object(r.Property)(0)],t.prototype,"offSet",void 0),t}(r.ChildProperty),ot=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return l(t,n),u([Object(r.Property)("12px")],t.prototype,"size",void 0),u([Object(r.Property)(null)],t.prototype,"color",void 0),u([Object(r.Property)("Roboto, Noto, Sans-serif")],t.prototype,"fontFamily",void 0),u([Object(r.Property)("Medium")],t.prototype,"fontWeight",void 0),u([Object(r.Property)("Medium")],t.prototype,"fontStyle",void 0),u([Object(r.Property)(1)],t.prototype,"opacity",void 0),t}(r.ChildProperty),nt=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return l(t,n),u([Object(r.Property)("")],t.prototype,"color",void 0),u([Object(r.Property)(0)],t.prototype,"width",void 0),t}(r.ChildProperty),wf=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return l(t,n),u([Object(r.Property)(null)],t.prototype,"latitude",void 0),u([Object(r.Property)(null)],t.prototype,"longitude",void 0),t}(r.ChildProperty),bi=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return l(t,n),u([Object(r.Property)(!1)],t.prototype,"visible",void 0),u([Object(r.Property)("")],t.prototype,"template",void 0),u([Object(r.Property)("")],t.prototype,"fill",void 0),u([Object(r.Complex)({color:"transparent",width:1},nt)],t.prototype,"border",void 0),u([Object(r.Complex)(at.tooltipLabelFont,ot)],t.prototype,"textStyle",void 0),u([Object(r.Property)(null)],t.prototype,"format",void 0),u([Object(r.Property)(null)],t.prototype,"valuePath",void 0),t}(r.ChildProperty),bf=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return l(t,n),u([Object(r.Property)(10)],t.prototype,"left",void 0),u([Object(r.Property)(10)],t.prototype,"right",void 0),u([Object(r.Property)(10)],t.prototype,"top",void 0),u([Object(r.Property)(10)],t.prototype,"bottom",void 0),t}(r.ChildProperty),kf=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return l(t,n),u([Object(r.Property)("#000000")],t.prototype,"color",void 0),u([Object(r.Property)(1)],t.prototype,"width",void 0),u([Object(r.Property)(1)],t.prototype,"opacity",void 0),t}(r.ChildProperty),df=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return l(t,n),u([Object(r.Property)(!1)],t.prototype,"allowClustering",void 0),u([Object(r.Complex)({color:"transparent",width:1},nt)],t.prototype,"border",void 0),u([Object(r.Property)("#D2691E")],t.prototype,"fill",void 0),u([Object(r.Property)(1)],t.prototype,"opacity",void 0),u([Object(r.Property)("Rectangle")],t.prototype,"shape",void 0),u([Object(r.Property)(12)],t.prototype,"width",void 0),u([Object(r.Property)(12)],t.prototype,"height",void 0),u([Object(r.Property)(new o(0,0))],t.prototype,"offset",void 0),u([Object(r.Property)("")],t.prototype,"imageUrl",void 0),u([Object(r.Property)("")],t.prototype,"dashArray",void 0),u([Object(r.Complex)({},ot)],t.prototype,"labelStyle",void 0),u([Object(r.Property)(!1)],t.prototype,"allowClusterExpand",void 0),u([Object(r.Complex)({},kf)],t.prototype,"connectorLineSettings",void 0),t}(r.ChildProperty),su=(r.ChildProperty,function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return l(t,n),u([Object(r.Property)(null)],t.prototype,"from",void 0),u([Object(r.Property)(null)],t.prototype,"to",void 0),u([Object(r.Property)(null)],t.prototype,"value",void 0),u([Object(r.Property)(null)],t.prototype,"color",void 0),u([Object(r.Property)(null)],t.prototype,"minOpacity",void 0),u([Object(r.Property)(null)],t.prototype,"maxOpacity",void 0),u([Object(r.Property)(null)],t.prototype,"label",void 0),u([Object(r.Property)(!0)],t.prototype,"showLegend",void 0),t}(r.ChildProperty)),gf=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return l(t,n),u([Object(r.Property)(null)],t.prototype,"latitude",void 0),u([Object(r.Property)(null)],t.prototype,"longitude",void 0),t}(r.ChildProperty),ne=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return l(t,n),u([Object(r.Property)(null)],t.prototype,"shapePath",void 0),u([Object(r.Property)(null)],t.prototype,"shapeValue",void 0),t}(r.ChildProperty),oi=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return l(t,n),u([Object(r.Property)(!1)],t.prototype,"enable",void 0),u([Object(r.Property)(null)],t.prototype,"fill",void 0),u([Object(r.Property)(1)],t.prototype,"opacity",void 0),u([Object(r.Property)(!1)],t.prototype,"enableMultiSelect",void 0),u([Object(r.Complex)({color:"transparent",width:0},nt)],t.prototype,"border",void 0),t}(r.ChildProperty),si=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return l(t,n),u([Object(r.Property)(null)],t.prototype,"fill",void 0),u([Object(r.Property)(!1)],t.prototype,"enable",void 0),u([Object(r.Property)(1)],t.prototype,"opacity",void 0),u([Object(r.Complex)({color:"transparent",width:0},nt)],t.prototype,"border",void 0),t}(r.ChildProperty),te=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return l(t,n),u([Object(r.Property)(!1)],t.prototype,"visible",void 0),u([Object(r.Property)(1)],t.prototype,"width",void 0),u([Object(r.Property)(null)],t.prototype,"longitude",void 0),u([Object(r.Property)(null)],t.prototype,"latitude",void 0),u([Object(r.Property)("")],t.prototype,"dashArray",void 0),u([Object(r.Property)("black")],t.prototype,"color",void 0),u([Object(r.Property)(0)],t.prototype,"angle",void 0),u([Object(r.Complex)({showArrow:!1,position:"Start",size:5,color:"black"},pf)],t.prototype,"arrowSettings",void 0),u([Object(r.Complex)({},oi)],t.prototype,"selectionSettings",void 0),u([Object(r.Complex)({},si)],t.prototype,"highlightSettings",void 0),t}(r.ChildProperty),ie=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return l(t,n),u([Object(r.Complex)({},nt)],t.prototype,"border",void 0),u([Object(r.Property)(!1)],t.prototype,"visible",void 0),u([Object(r.Property)([])],t.prototype,"dataSource",void 0),u([Object(r.Property)()],t.prototype,"query",void 0),u([Object(r.Property)(1e3)],t.prototype,"animationDuration",void 0),u([Object(r.Property)(0)],t.prototype,"animationDelay",void 0),u([Object(r.Property)("")],t.prototype,"fill",void 0),u([Object(r.Property)(10)],t.prototype,"minRadius",void 0),u([Object(r.Property)(20)],t.prototype,"maxRadius",void 0),u([Object(r.Property)(1)],t.prototype,"opacity",void 0),u([Object(r.Property)(null)],t.prototype,"valuePath",void 0),u([Object(r.Property)("Circle")],t.prototype,"bubbleType",void 0),u([Object(r.Property)(null)],t.prototype,"colorValuePath",void 0),u([Object(r.Collection)([],su)],t.prototype,"colorMapping",void 0),u([Object(r.Complex)({},bi)],t.prototype,"tooltipSettings",void 0),u([Object(r.Complex)({},oi)],t.prototype,"selectionSettings",void 0),u([Object(r.Complex)({},si)],t.prototype,"highlightSettings",void 0),t}(r.ChildProperty),ki=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return l(t,n),u([Object(r.Property)("")],t.prototype,"text",void 0),u([Object(r.Property)("")],t.prototype,"description",void 0),t}(r.ChildProperty),re=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return l(t,n),u([Object(r.Complex)({size:at.mapsSubTitleFont.size},ot)],t.prototype,"textStyle",void 0),u([Object(r.Property)("Center")],t.prototype,"alignment",void 0),t}(ki),ue=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return l(t,n),u([Object(r.Complex)({size:at.mapsTitleFont.size},ot)],t.prototype,"textStyle",void 0),u([Object(r.Property)("Center")],t.prototype,"alignment",void 0),u([Object(r.Complex)({},re)],t.prototype,"subtitleSettings",void 0),t}(ki),fe=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return l(t,n),u([Object(r.Property)(!1)],t.prototype,"enable",void 0),u([Object(r.Property)(!0)],t.prototype,"enablePanning",void 0),u([Object(r.Property)(!0)],t.prototype,"enableSelectionZooming",void 0),u([Object(r.Property)("Horizontal")],t.prototype,"toolBarOrientation",void 0),u([Object(r.Property)(null)],t.prototype,"color",void 0),u([Object(r.Property)("#e61576")],t.prototype,"highlightColor",void 0),u([Object(r.Property)("#e61576")],t.prototype,"selectionColor",void 0),u([Object(r.Property)("Far")],t.prototype,"horizontalAlignment",void 0),u([Object(r.Property)("Near")],t.prototype,"verticalAlignment",void 0),u([Object(r.Property)(["ZoomIn","ZoomOut","Reset"])],t.prototype,"toolbars",void 0),u([Object(r.Property)(!0)],t.prototype,"mouseWheelZoom",void 0),u([Object(r.Property)(!1)],t.prototype,"doubleClickZoom",void 0),u([Object(r.Property)(!1)],t.prototype,"pinchZooming",void 0),u([Object(r.Property)(!1)],t.prototype,"zoomOnClick",void 0),u([Object(r.Property)(1)],t.prototype,"zoomFactor",void 0),u([Object(r.Property)(10)],t.prototype,"maxZoom",void 0),u([Object(r.Property)(1)],t.prototype,"minZoom",void 0),u([Object(r.Property)(!1)],t.prototype,"shouldZoomInitially",void 0),u([Object(r.Property)(!0)],t.prototype,"resetToInitial",void 0),t}(r.ChildProperty),hu=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return l(t,n),u([Object(r.Property)(!1)],t.prototype,"enable",void 0),u([Object(r.Property)(!0)],t.prototype,"applyShapeSettings",void 0),u([Object(r.Property)(1)],t.prototype,"opacity",void 0),u([Object(r.Property)("")],t.prototype,"fill",void 0),u([Object(r.Complex)({color:"",width:0},nt)],t.prototype,"border",void 0),t}(r.ChildProperty),ee=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return l(t,n),u([Object(r.Property)(!1)],t.prototype,"toggleVisibility",void 0),u([Object(r.Property)(!1)],t.prototype,"visible",void 0),u([Object(r.Property)("transparent")],t.prototype,"background",void 0),u([Object(r.Property)("Layers")],t.prototype,"type",void 0),u([Object(r.Property)(!1)],t.prototype,"invertedPointer",void 0),u([Object(r.Property)("After")],t.prototype,"labelPosition",void 0),u([Object(r.Property)("None")],t.prototype,"labelDisplayMode",void 0),u([Object(r.Property)("Circle")],t.prototype,"shape",void 0),u([Object(r.Property)("")],t.prototype,"width",void 0),u([Object(r.Property)("")],t.prototype,"height",void 0),u([Object(r.Complex)({},ot)],t.prototype,"textStyle",void 0),u([Object(r.Property)(15)],t.prototype,"shapeWidth",void 0),u([Object(r.Property)(15)],t.prototype,"shapeHeight",void 0),u([Object(r.Property)(10)],t.prototype,"shapePadding",void 0),u([Object(r.Complex)({color:"#000000",width:0},nt)],t.prototype,"border",void 0),u([Object(r.Complex)({color:"#000000",width:0},nt)],t.prototype,"shapeBorder",void 0),u([Object(r.Complex)({},ki)],t.prototype,"title",void 0),u([Object(r.Complex)({},ot)],t.prototype,"titleStyle",void 0),u([Object(r.Property)("Bottom")],t.prototype,"position",void 0),u([Object(r.Property)("Center")],t.prototype,"alignment",void 0),u([Object(r.Property)("None")],t.prototype,"orientation",void 0),u([Object(r.Property)({x:0,y:0})],t.prototype,"location",void 0),u([Object(r.Property)(null)],t.prototype,"fill",void 0),u([Object(r.Property)(1)],t.prototype,"opacity",void 0),u([Object(r.Property)("Default")],t.prototype,"mode",void 0),u([Object(r.Property)(null)],t.prototype,"showLegendPath",void 0),u([Object(r.Property)(null)],t.prototype,"valuePath",void 0),u([Object(r.Property)(!1)],t.prototype,"removeDuplicateLegend",void 0),u([Object(r.Complex)({},hu)],t.prototype,"toggleLegendSettings",void 0),t}(r.ChildProperty),oe=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return l(t,n),u([Object(r.Property)(!1)],t.prototype,"visible",void 0),u([Object(r.Complex)({width:0,color:"transparent"},nt)],t.prototype,"border",void 0),u([Object(r.Property)("black")],t.prototype,"fill",void 0),u([Object(r.Property)(1)],t.prototype,"opacity",void 0),u([Object(r.Property)(5)],t.prototype,"rx",void 0),u([Object(r.Property)(5)],t.prototype,"ry",void 0),u([Object(r.Complex)({},ot)],t.prototype,"textStyle",void 0),u([Object(r.Property)("")],t.prototype,"labelPath",void 0),u([Object(r.Property)("None")],t.prototype,"smartLabelMode",void 0),u([Object(r.Property)("None")],t.prototype,"intersectionAction",void 0),u([Object(r.Property)("")],t.prototype,"template",void 0),t}(r.ChildProperty),se=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return l(t,n),u([Object(r.Property)("#A6A6A6")],t.prototype,"fill",void 0),u([Object(r.Property)([])],t.prototype,"palette",void 0),u([Object(r.Property)(5)],t.prototype,"circleRadius",void 0),u([Object(r.Complex)({width:0,color:"#000000"},nt)],t.prototype,"border",void 0),u([Object(r.Property)("")],t.prototype,"dashArray",void 0),u([Object(r.Property)(1)],t.prototype,"opacity",void 0),u([Object(r.Property)(null)],t.prototype,"colorValuePath",void 0),u([Object(r.Property)(null)],t.prototype,"valuePath",void 0),u([Object(r.Collection)([],su)],t.prototype,"colorMapping",void 0),u([Object(r.Property)(!1)],t.prototype,"autofill",void 0),t}(r.ChildProperty),cu=function(n){function t(t,i,r,u){return n.call(this,t,i,r,u)||this}return l(t,n),t}(function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return l(t,n),u([Object(r.Complex)({color:"transparent",width:1},nt)],t.prototype,"border",void 0),u([Object(r.Property)(null)],t.prototype,"dashArray",void 0),u([Object(r.Property)(!1)],t.prototype,"visible",void 0),u([Object(r.Property)("#FF471A")],t.prototype,"fill",void 0),u([Object(r.Property)(10)],t.prototype,"height",void 0),u([Object(r.Property)(10)],t.prototype,"width",void 0),u([Object(r.Property)(1)],t.prototype,"opacity",void 0),u([Object(r.Property)(null)],t.prototype,"colorValuePath",void 0),u([Object(r.Property)(null)],t.prototype,"shapeValuePath",void 0),u([Object(r.Property)(null)],t.prototype,"imageUrlValuePath",void 0),u([Object(r.Property)("Balloon")],t.prototype,"shape",void 0),u([Object(r.Property)("")],t.prototype,"legendText",void 0),u([Object(r.Property)(new o(0,0))],t.prototype,"offset",void 0),u([Object(r.Property)("")],t.prototype,"imageUrl",void 0),u([Object(r.Property)(null)],t.prototype,"template",void 0),u([Object(r.Property)([])],t.prototype,"dataSource",void 0),u([Object(r.Property)()],t.prototype,"query",void 0),u([Object(r.Complex)({},bi)],t.prototype,"tooltipSettings",void 0),u([Object(r.Property)(1e3)],t.prototype,"animationDuration",void 0),u([Object(r.Property)(0)],t.prototype,"animationDelay",void 0),u([Object(r.Complex)({},oi)],t.prototype,"selectionSettings",void 0),u([Object(r.Complex)({},si)],t.prototype,"highlightSettings",void 0),u([Object(r.Property)(null)],t.prototype,"latitudeValuePath",void 0),u([Object(r.Property)(null)],t.prototype,"longitudeValuePath",void 0),u([Object(r.Collection)([],gf)],t.prototype,"initialMarkerSelection",void 0),t}(r.ChildProperty)),lu=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.isBaseLayer=!1,t}return l(t,n),u([Object(r.Property)(null)],t.prototype,"shapeData",void 0),u([Object(r.Property)()],t.prototype,"query",void 0),u([Object(r.Complex)({},se)],t.prototype,"shapeSettings",void 0),u([Object(r.Property)([])],t.prototype,"dataSource",void 0),u([Object(r.Property)("Layer")],t.prototype,"type",void 0),u([Object(r.Property)("Geographic")],t.prototype,"geometryType",void 0),u([Object(r.Property)("Aerial")],t.prototype,"bingMapType",void 0),u([Object(r.Property)("RoadMap")],t.prototype,"staticMapType",void 0),u([Object(r.Property)("")],t.prototype,"key",void 0),u([Object(r.Property)("Geometry")],t.prototype,"layerType",void 0),u([Object(r.Property)("https://a.tile.openstreetmap.org/level/tileX/tileY.png")],t.prototype,"urlTemplate",void 0),u([Object(r.Property)(!0)],t.prototype,"visible",void 0),u([Object(r.Property)("name")],t.prototype,"shapeDataPath",void 0),u([Object(r.Property)("name")],t.prototype,"shapePropertyPath",void 0),u([Object(r.Property)(0)],t.prototype,"animationDuration",void 0),u([Object(r.Collection)([],cu)],t.prototype,"markerSettings",void 0),u([Object(r.Complex)({},df)],t.prototype,"markerClusterSettings",void 0),u([Object(r.Complex)({},oe)],t.prototype,"dataLabelSettings",void 0),u([Object(r.Collection)([],ie)],t.prototype,"bubbleSettings",void 0),u([Object(r.Collection)([],te)],t.prototype,"navigationLineSettings",void 0),u([Object(r.Complex)({},bi)],t.prototype,"tooltipSettings",void 0),u([Object(r.Complex)({},oi)],t.prototype,"selectionSettings",void 0),u([Object(r.Complex)({},si)],t.prototype,"highlightSettings",void 0),u([Object(r.Complex)({},hu)],t.prototype,"toggleLegendSettings",void 0),u([Object(r.Collection)([],ne)],t.prototype,"initialShapeSelection",void 0),t}(r.ChildProperty),he=function(){return function(n,t,i,r,u,f,e){void 0===i&&(i=256);void 0===r&&(r=256);void 0===u&&(u=0);void 0===f&&(f=0);void 0===e&&(e=null);this.x=n;this.y=t;this.top=u;this.left=f;this.height=i;this.width=r;this.src=e}}(),ce=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return l(t,n),u([Object(r.Property)(null)],t.prototype,"background",void 0),u([Object(r.Complex)({color:"transparent",width:1},nt)],t.prototype,"border",void 0),t}(r.ChildProperty),yt=function(n,t){var u={},i,r;for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(u[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&(u[i[r]]=n[i[r]]);return u},au=function(){function n(n){this.maps=n;this.trackElements=[];this.sameMarkerData=[]}return n.prototype.markerRender=function(n,t,i,u){var f=this,c=0,l=0,a=0,o,h;this.maps.translateType="marker";o=this.maps.layersCollection[t];this.markerSVGObject=this.maps.renderer.createGroup({id:this.maps.element.id+"_Markers_Group","class":"GroupElement",style:"pointer-events: auto;"});h=Object(r.createElement)("div",{id:this.maps.element.id+"_LayerIndex_"+t+"_Markers_Template_Group",className:this.maps.element.id+"_template",styles:"overflow: hidden; position: absolute;pointer-events: none;top:"+this.maps.mapAreaRect.y+"px;left:"+this.maps.mapAreaRect.x+"px;height:"+this.maps.mapAreaRect.height+"px;width:"+this.maps.mapAreaRect.width+"px;"});o.markerSettings.map(function(v,y){var p=v.dataSource;Array.prototype.forEach.call(p,function(b,k){var d,g;f.maps.markerNullCount=y>0&&0===k?0:f.maps.markerNullCount;d={cancel:!1,name:vu,fill:v.fill,height:v.height,width:v.width,imageUrl:v.imageUrl,shape:v.shape,template:v.template,data:b,maps:f.maps,marker:v,border:v.border,colorValuePath:v.colorValuePath,shapeValuePath:v.shapeValuePath,imageUrlValuePath:v.imageUrlValuePath};(d=dt(d=kt(d,b),b),f.maps.isBlazor)&&(d.maps,d.marker,g=yt(d,["maps","marker"]),d=g,v.longitudeValuePath=Object(r.isNullOrUndefined)(v.longitudeValuePath)?Object(r.isNullOrUndefined)(b.Longitude)?Object(r.isNullOrUndefined)(b.longitude)?null:"longitude":"Longitude":v.longitudeValuePath,v.latitudeValuePath=Object(r.isNullOrUndefined)(v.latitudeValuePath)?Object(r.isNullOrUndefined)(b.Latitude)?Object(r.isNullOrUndefined)(b.latitude)?null:"latitude":"Latitude":v.latitudeValuePath);f.maps.trigger("markerRendering",d,function(){var nt,tt,ut,pt;if(v.colorValuePath!==d.colorValuePath&&(d=kt(d,b)),v.shapeValuePath!==d.shapeValuePath&&(d=dt(d,b)),nt=Object(r.isNullOrUndefined)(v.longitudeValuePath)?Object(r.isNullOrUndefined)(b.longitude)?Object(r.isNullOrUndefined)(b.Longitude)?0:parseFloat(b.Longitude):parseFloat(b.longitude):Number(s(b,v.longitudeValuePath)),tt=Object(r.isNullOrUndefined)(v.latitudeValuePath)?Object(r.isNullOrUndefined)(b.latitude)?Object(r.isNullOrUndefined)(b.Latitude)?0:parseFloat(b.Latitude):parseFloat(b.latitude):Number(s(b,v.latitudeValuePath)),f.maps.isBlazor){for(var ot={},st=[],ht=0,g=0;g<Object.keys(b).length;g++)"latitude"!==Object.keys(b)[g].toLowerCase()&&"longitude"!==Object.keys(b)[g].toLowerCase()&&"name"!==Object.keys(b)[g].toLowerCase()&&"blazortemplateid"!==Object.keys(b)[g].toLowerCase()&&"text"!==Object.keys(b)[g].toLowerCase()&&(st[ht]=b[Object.keys(b)[g].toLowerCase()],ot.text=st,ht++);b.text=ot.text}if(ut=v.offset,!d.cancel&&v.visible&&!Object(r.isNullOrUndefined)(nt)&&!Object(r.isNullOrUndefined)(tt)){var lt=f.maps.element.id+"_LayerIndex_"+t+"_MarkerIndex_"+y+"_dataIndex_"+k,it=f.maps.isTileMap?ft(new rt(nt,tt),i,f.maps.tileTranslatePoint,!0):w(tt,nt,i,o,f.maps),at=0!==o.animationDuration||Object(r.isNullOrUndefined)(f.maps.zoomModule),vt=f.maps.isTileMap?"SubLayer"===o.type&&Object(r.isNullOrUndefined)(f.maps.zoomModule)?it=ft(new rt(nt,tt),f.maps.tileZoomLevel,f.maps.tileTranslatePoint,!0):{}:!Object(r.isNullOrUndefined)(f.maps.zoomModule)&&f.maps.zoomSettings.zoomFactor>1?ct(f.maps,o,at):et(f.maps,o,at),yt="AddMarker"===u?f.maps.scale:vt.scale,wt="AddMarker"===u?f.maps.translatePoint:vt.location;!d.template||isNaN(it.x)||isNaN(it.y)?d.template||isNaN(it.x)||isNaN(it.y)||(c++,cr(d,v,p,k,it,wt,lt,ut,yt,f.maps,f.markerSVGObject)):(a++,lr(d,void 0,lt,b,y,h,it,yt,ut,f.maps),f.maps.renderReactTemplates())}l+=isNaN(tt)||isNaN(nt)?1:0;a+=d.cancel?1:0;c+=d.cancel?1:0;f.maps.markerNullCount=Object(r.isNullOrUndefined)(nt)||Object(r.isNullOrUndefined)(tt)?f.maps.markerNullCount+1:f.maps.markerNullCount;pt=p.length-f.maps.markerNullCount;f.markerSVGObject.childElementCount===pt-a-l&&"Template"!==u&&(n.appendChild(f.markerSVGObject),o.markerClusterSettings.allowClustering&&(f.maps.svgObject.appendChild(f.markerSVGObject),f.maps.element.appendChild(f.maps.svgObject),gt(o,f.markerSVGObject,f.maps,t,f.markerSVGObject,n,!0,!1),f.maps.renderReactTemplates()));h.childElementCount===p.length-c-l&&e(f.maps.element.id+"_Secondary_Element")&&(e(f.maps.element.id+"_Secondary_Element").appendChild(h),o.markerClusterSettings.allowClustering&&(gt(o,h,f.maps,t,f.markerSVGObject,n,!1,!1),f.maps.renderReactTemplates()))})})})},n.prototype.calculateIndividualLayerMarkerZoomLevel=function(n,t,i){var r,u,e,f,o=Math.abs(this.maps.baseMapBounds.latitude.max-this.maps.baseMapBounds.latitude.min),s=Math.abs(this.maps.baseMapBounds.longitude.max-this.maps.baseMapBounds.longitude.min);return r=(r=Math.floor(Math.log(t/o)))>i?i:r,u=(u=Math.floor(Math.log(n/s)))>i?i:u,e=Math.min(r,u),f=Math.min(e,i-1),this.maps.isTileMap||eu(f,this.maps),f},n.prototype.calculateZoomCenterPositionAndFactor=function(n){var o;if(this.maps.zoomSettings.shouldZoomInitially&&this.maps.markerModule){var i,u,f,e,t=void 0,s=void 0,h=void 0,c=this.maps.mapAreaRect.width,l=this.maps.mapAreaRect.height;(this.maps.markerZoomedState=this.maps.markerZoomedState?this.maps.markerZoomedState:Object(r.isNullOrUndefined)(this.maps.markerZoomFactor)?!this.maps.markerZoomedState:this.maps.markerZoomFactor>1?this.maps.markerZoomedState:!this.maps.markerZoomedState,this.maps.defaultState=this.maps.markerZoomedState?!this.maps.markerZoomedState:this.maps.defaultState,Array.prototype.forEach.call(n,function(n){0!==n.markerSettings.length&&Array.prototype.forEach.call(n.markerSettings,function(n){var t=n.dataSource;Array.prototype.forEach.call(t,function(n,t){var o=Object(r.isNullOrUndefined)(n.latitude)?Object(r.isNullOrUndefined)(n.Latitude)?null:parseFloat(n.Latitude):parseFloat(n.latitude),s=Object(r.isNullOrUndefined)(n.longitude)?Object(r.isNullOrUndefined)(n.Longitude)?null:parseFloat(n.Longitude):parseFloat(n.longitude);i=Object(r.isNullOrUndefined)(i)&&0===t?s:i;u=Object(r.isNullOrUndefined)(u)&&0===t?o:u;f=Object(r.isNullOrUndefined)(f)&&0===t?o:f;e=Object(r.isNullOrUndefined)(e)&&0===t?s:e;i>s&&(i=s);f>o&&(f=o);e<s&&(e=s);u<o&&(u=o)})})}),Object(r.isNullOrUndefined)(f)||Object(r.isNullOrUndefined)(i)||Object(r.isNullOrUndefined)(e)||Object(r.isNullOrUndefined)(u))||(s=(f+u)/2,h=(i+e)/2,this.maps.markerCenterLatitude=s,this.maps.markerCenterLongitude=h,(Object(r.isNullOrUndefined)(this.maps.markerZoomCenterPoint)||this.maps.markerZoomedState)&&(this.maps.markerZoomCenterPoint={latitude:s,longitude:h}),o=void 0,this.maps.isTileMap||0===this.maps.baseMapRectBounds.min.x?(t=ou(f,u,i,e,c,l,this.maps),this.maps.isTileMap?o=Object(r.isNullOrUndefined)(this.maps.markerZoomFactor)||Object(r.isNullOrUndefined)(this.maps.mapScaleValue)?t:this.maps.mapScaleValue>1&&1!==this.maps.markerZoomFactor?this.maps.mapScaleValue:t:(o=Object(r.isNullOrUndefined)(this.maps.mapScaleValue)?t:1!==Math.floor(this.maps.scale)&&this.maps.mapScaleValue!==t&&Object(r.isNullOrUndefined)(this.maps.shouldZoomCurrentFactor)?this.maps.mapScaleValue:t)!==this.maps.mapScaleValue||1!==this.maps.markerZoomFactor&&1!==this.maps.mapScaleValue||this.maps.enablePersistence||(o=t)):(t=this.calculateIndividualLayerMarkerZoomLevel(c,l,10),o=Object(r.isNullOrUndefined)(this.maps.mapScaleValue)?t:this.maps.mapScaleValue!==t?this.maps.mapScaleValue:t),this.maps.markerZoomFactor=o)}else this.maps.markerZoomedState=!1,this.maps.markerZoomFactor>1&&(this.maps.markerCenterLatitude=null,this.maps.markerCenterLongitude=null,this.maps.markerZoomFactor=1,this.maps.enablePersistence||(this.maps.mapScaleValue=1)),this.maps.isTileMap&&!this.maps.enablePersistence&&this.maps.mapScaleValue<=1&&(this.maps.tileZoomLevel=0===this.maps.mapScaleValue?1:this.maps.mapScaleValue,1===this.maps.mapScaleValue&&1===this.maps.markerZoomFactor&&(this.maps.tileTranslatePoint.x=0,this.maps.tileTranslatePoint.y=0))},n.prototype.markerClick=function(n){var u=n.target.id,t,i;-1===u.indexOf("_LayerIndex_")||u.indexOf("_cluster_")>0||(t=this.getMarker(u),Object(r.isNullOrUndefined)(t)||(i={cancel:!1,name:yu,data:t.data,maps:this.maps,marker:t.marker,target:u,x:n.clientX,y:n.clientY,latitude:t.data.latitude||t.data.Latitude,longitude:t.data.longitude||t.data.Longitude,value:t.data.name},this.maps.isBlazor&&(i.maps,i.marker,i=yt(i,["maps","marker"])),this.maps.trigger(yu,i)))},n.prototype.markerClusterClick=function(n){var u=n.target.id,t,i;-1!==u.indexOf("_LayerIndex_")&&-1!==u.indexOf("_cluster_")&&(t=this.getMarker(u),Object(r.isNullOrUndefined)(t)||(t.clusterCollection.length>0&&this.maps.markerClusterExpand&&(h(this.maps.element.id+"_mapsTooltip")&&this.maps.mapsTooltipModule.tooltipTargetID.indexOf("_MarkerIndex_")>-1&&a(this.maps.element.id+"_mapsTooltip"),this.sameMarkerData.length>0&&!this.maps.markerClusterExpandCheck?(this.maps.markerClusterExpandCheck=!0,ai(this.sameMarkerData,this.maps,this.markerSVGObject)):(this.sameMarkerData=t.clusterCollection,this.maps.markerClusterExpandCheck=!1,hr(this.sameMarkerData,this.maps,this.markerSVGObject,!0))),i={cancel:!1,name:pu,data:t,maps:this.maps,target:u,x:n.clientX,y:n.clientY,latitude:t.data.latitude||t.data.Latitude,longitude:t.data.longitude||t.data.Longitude,markerClusterCollection:t.markCollection},this.maps.isBlazor&&(i.maps,i.latitude,i.longitude,i=yt(i,["maps","latitude","longitude"])),this.maps.trigger(pu,i)))},n.prototype.getMarker=function(n){var i,t,o=n.split("_LayerIndex_"),s=parseInt(o[1].split("_")[0],10),l=this.maps.layers[s],a=[],v=[],f,h,r,y,e,c,u;if((this.maps.markerClusterExpand=l.markerClusterSettings.allowClusterExpand,n.indexOf("_MarkerIndex_")>-1)&&(f=parseInt(o[1].split("_MarkerIndex_")[1].split("_")[0],10),h=parseInt(o[1].split("_dataIndex_")[1].split("_")[0],10),t=l.markerSettings[f],!isNaN(f))){if(i=t.dataSource[h],r=[],!t.template&&n.indexOf("_cluster_")>-1&&this.maps.layers[s].markerClusterSettings.allowClusterExpand&&Array.prototype.forEach.call(t.dataSource,function(n,t){n.latitude===i.latitude&&n.longitude===i.longitude&&r.push({data:i,index:t})}),n.indexOf("_cluster_")>-1){for(y=document.getElementById(n.indexOf("_datalabel_")>-1?n.split("_datalabel_")[0]:n).innerHTML.split(",").map(Number),r=[],e=0,c=y;e<c.length;e++)u=c[e],r.push({data:t.dataSource[u],index:u}),this.maps.isBlazor&&(t.dataSource[u].text=""),a.push(t.dataSource[u]);v.push({data:r,layerIndex:s,markerIndex:f,dataIndex:h,targetClusterIndex:+(n.split("_cluster_")[1].indexOf("_datalabel_")>-1?n.split("_cluster_")[1].split("_datalabel_")[0]:n.split("_cluster_")[1]),isClusterSame:!1})}return{marker:t,data:i,clusterCollection:v,markCollection:a}}return null},n.prototype.markerMove=function(n){var i=n.target.id,u,t;-1===i.indexOf("_LayerIndex_")||i.indexOf("_cluster_")>0||(u=this.getMarker(i),Object(r.isNullOrUndefined)(u)||(t={cancel:!1,name:wu,data:u.data,maps:this.maps,target:i,x:n.clientX,y:n.clientY},this.maps.isBlazor&&(t.maps,t=yt(t,["maps"])),this.maps.trigger(wu,t)))},n.prototype.markerClusterMouseMove=function(n){var i=n.target.id,u,t;-1!==i.indexOf("_LayerIndex_")&&-1!==i.indexOf("_cluster_")&&(u=this.getMarker(i),(this.maps.markerClusterExpand&&n.target.setAttribute("style","cursor: pointer"),Object(r.isNullOrUndefined)(u))||(t={cancel:!1,name:bu,data:u.data,maps:this.maps,target:i,x:n.clientX,y:n.clientY},this.maps.isBlazor&&(t.maps,t=yt(t,["maps"])),this.maps.trigger(bu,t)))},n.prototype.getModuleName=function(){return"Marker"},n.prototype.destroy=function(){},n}(),vu="markerRendering",le="markerClusterRendering",yu="markerClick",pu="markerClusterClick",wu="markerMouseMove",bu="markerClusterMouseMove",ku="animationComplete",du="itemSelection",gu=function(){function n(n){this.maps=n}return n.prototype.getBingMap=function(n,t,i,r,u,f){for(var c,s,h,e="",o=Math.min(this.maps.tileZoomLevel,parseInt(this.maxZoom,10));o>0;o--)s=0,h=1<<o-1,0!=(n.x&h)&&s++,0!=(n.y&h)&&(s+=2),e=e+""+s;return c=f[Math.min(parseInt(e.substr(e.length-1,1),10),f.length)],(u=u.replace("{quadkey}",e).replace("{subdomain}",c))+"&mkt="+r+"&ur=IN&Key="+t},n}(),nf=function(){function n(n){this.maps=n}return n.prototype.getShapeColorMapping=function(n,t,i){var u=n.colorValuePath?n.colorValuePath:n.valuePath,f=Object(r.isNullOrUndefined)(u)?t[u]:u.indexOf(".")>-1?s(t,u):t[u],o=Number(f),e=this.getColorByValue(n.colorMapping,o,f);return Object(r.isNullOrUndefined)(e)?i:e},n.prototype.getColorByValue=function(n,t,i){var u;if(isNaN(t)&&Object(r.isNullOrUndefined)(i))return null;for(var o,f="",e=0,s=n;e<s.length;e++)u=s[e],(!Object(r.isNullOrUndefined)(u.from)&&!Object(r.isNullOrUndefined)(u.to)&&t>=u.from&&t<=u.to||u.value===i)&&(f="[object Array]"===Object.prototype.toString.call(u.color)?Object(r.isNullOrUndefined)(u.value)?this.getColor(u,t):u.color[0]:u.color),(t>=u.from&&t<=u.to||u.value===i)&&!Object(r.isNullOrUndefined)(u.minOpacity)&&!Object(r.isNullOrUndefined)(u.maxOpacity)&&f&&(o=this.deSaturationColor(u,f,t,i)),(""===f||Object(r.isNullOrUndefined)(f))&&Object(r.isNullOrUndefined)(u.from)&&Object(r.isNullOrUndefined)(u.to)&&Object(r.isNullOrUndefined)(u.minOpacity)&&Object(r.isNullOrUndefined)(u.maxOpacity)&&Object(r.isNullOrUndefined)(u.value)&&(f="[object Array]"===Object.prototype.toString.call(u.color)?u.color[0]:u.color);return{fill:f||(n.length?null:i),opacity:o}},n.prototype.deSaturationColor=function(n,t,i,r){var u=1;return(i>=n.from&&i<=n.to||n.value===r)&&(u=(isNaN(i)?n.from/(n.to-n.from):(i-n.from)/(n.to-n.from))*(n.maxOpacity-n.minOpacity)+n.minOpacity),u},n.prototype.rgbToHex=function(n,t,i){return"#"+this.componentToHex(n)+this.componentToHex(t)+this.componentToHex(i)},n.prototype.componentToHex=function(n){var t=n.toString(16);return 1===t.length?"0"+t:t},n.prototype.getColor=function(n,t){var i,r="";return Number(t)===n.from?r=n.color[0]:Number(t)===n.to?r=n.color[n.color.length-1]:(i=this.getGradientColor(Number(t),n),r=this.rgbToHex(i.r,i.g,i.b)),r},n.prototype.getGradientColor=function(n,t){var f,e,s=t.from,c=t.to,o=0,l=c-s,i;if(o=(n-s)/l,t.color.length<=2)f="#"===t.color[0].charAt(0)?t.color[0]:this._colorNameToHex(t.color[0]),e="#"===t.color[t.color.length-1].charAt(0)?t.color[t.color.length-1]:this._colorNameToHex(t.color[t.color.length-1]);else{f="#"===t.color[0].charAt(0)?t.color[0]:this._colorNameToHex(t.color[0]);e="#"===t.color[t.color.length-1].charAt(0)?t.color[t.color.length-1]:this._colorNameToHex(t.color[t.color.length-1]);for(var u=l/(t.color.length-1),v=t.color.length-1,r=[],a={},h=1;h<v;h++)a={b:s+h*u,color:t.color[h]},r.push(a);for(i=0;i<r.length;i++)s<=n&&n<=r[i].b&&0===i?(e="#"===r[i].color.charAt(0)?r[i].color:this._colorNameToHex(r[i].color),o=n<r[i].b?1-Math.abs((n-r[i].b)/u):(n-r[i].b)/u):r[i].b<=n&&n<=c&&i===r.length-1&&(f="#"===r[i].color.charAt(0)?r[i].color:this._colorNameToHex(r[i].color),o=n<r[i].b?1-Math.abs((n-r[i].b)/u):(n-r[i].b)/u),i!==r.length-1&&i<r.length&&r[i].b<=n&&n<=r[i+1].b&&(f="#"===r[i].color.charAt(0)?r[i].color:this._colorNameToHex(r[i].color),e="#"===r[i+1].color.charAt(0)?r[i+1].color:this._colorNameToHex(r[i+1].color),o=Math.abs(n-r[i+1].b)/u)}return this.getPercentageColor(o,f,e)},n.prototype.getPercentageColor=function(n,t,i){var r=i.split("#")[1],u=t.split("#")[1],f=this.getPercentage(n,parseInt(u.substr(0,2),16),parseInt(r.substr(0,2),16)),e=this.getPercentage(n,parseInt(u.substr(2,2),16),parseInt(r.substr(2,2),16)),o=this.getPercentage(n,parseInt(u.substr(4,2),16),parseInt(r.substr(4,2),16));return new of(f,e,o)},n.prototype.getPercentage=function(n,t,i){var r=i-t;return Math.round(t+r*n)},n.prototype._colorNameToHex=function(n){var t={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c","indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",orchid:"#da70d6",papayawhip:"#ffefd5",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};return"[object Array]"===Object.prototype.toString.call(n)?n:void 0!==t[n.toLowerCase()]?t[n.toLowerCase()]:n},n}(),tf=function(n,t){var u={},i,r;for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(u[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&(u[i[r]]=n[i[r]]);return u},ae=function(){function n(n){this.isMapCoordinates=!0;this.horizontalPan=!1;this.horizontalPanXCount=0;this.mapObject=n;this.ajaxModule=new r.Ajax;this.ajaxResponse=[]}return n.prototype.measureLayerPanel=function(){var i=this,f=this.mapObject.layersCollection,n=this.mapObject.mapAreaRect,u=e(this.mapObject.element.id+"_Secondary_Element"),t;this.mapObject.isTileMap&&u&&(this.tileSvgObject=this.mapObject.renderer.createSvg({id:this.mapObject.element.id+"_Tile_SVG",width:n.width,height:n.height}),t=Object(r.createElement)("div",{id:this.mapObject.element.id+"_Tile_SVG_Parent",styles:"position: absolute; height: "+n.height+"px; width: "+n.width+"px;"}),t.appendChild(this.tileSvgObject),u.appendChild(t));this.clipRectElement=(this.layerGroup=this.mapObject.renderer.createGroup({id:this.mapObject.element.id+"_Layer_Collections","clip-path":"url(#"+this.mapObject.element.id+"_MapArea_ClipRect)"}),"GoogleStaticMap"===this.mapObject.layers[this.mapObject.baseLayerIndex].layerType)?this.mapObject.renderer.drawClipPath(new d(this.mapObject.element.id+"_MapArea_ClipRect","transparent",{width:1,color:"Gray"},1,{x:(n.width-640)/2,y:0,width:640,height:n.height})):this.mapObject.renderer.drawClipPath(new d(this.mapObject.element.id+"_MapArea_ClipRect","transparent",{width:1,color:"Gray"},1,{x:this.mapObject.isTileMap?0:n.x,y:this.mapObject.isTileMap?0:n.y,width:n.width,height:n.height<0?0:n.height}));this.layerGroup.appendChild(this.clipRectElement);this.mapObject.baseMapBounds=null;this.mapObject.baseMapRectBounds=null;this.mapObject.baseSize=null;Array.prototype.forEach.call(f,function(n,t){i.currentLayer=n;i.processLayers(n,t)})},n.prototype.renderTileLayer=function(n,t,i,u){var s,e,f,c,h;n.currentFactor=n.calculateFactor(t);n.mapObject.defaultState=!(1!==n.mapObject.zoomSettings.zoomFactor&&!Object(r.isNullOrUndefined)(n.mapObject.tileZoomLevel)&&1!==n.mapObject.tileZoomLevel);Object(r.isNullOrUndefined)(n.mapObject.previousCenterLatitude)&&Object(r.isNullOrUndefined)(n.mapObject.previousCenterLongitude)?(n.mapObject.previousCenterLatitude=n.mapObject.centerPosition.latitude,n.mapObject.previousCenterLongitude=n.mapObject.centerPosition.longitude):n.mapObject.previousCenterLatitude!==n.mapObject.centerPosition.latitude&&n.mapObject.previousCenterLongitude!==n.mapObject.centerPosition.longitude?(n.mapObject.centerPositionChanged=!0,n.mapObject.previousCenterLatitude=n.mapObject.centerPosition.latitude,n.mapObject.previousCenterLongitude=n.mapObject.centerPosition.longitude):n.mapObject.centerPositionChanged=!1;s=new o(n.mapObject.centerPosition.longitude,n.mapObject.centerPosition.latitude);e=s;this.mapObject.isTileMap&&n.mapObject.markerModule&&n.mapObject.zoomSettings.enable&&(n.mapObject.markerModule.calculateZoomCenterPositionAndFactor(this.mapObject.layersCollection),Object(r.isNullOrUndefined)(this.mapObject.markerCenterLatitude)||Object(r.isNullOrUndefined)(this.mapObject.markerCenterLongitude)||(e=new o(n.mapObject.markerCenterLongitude,n.mapObject.markerCenterLatitude)));s=!n.mapObject.zoomSettings.shouldZoomInitially&&n.mapObject.centerPosition.longitude&&n.mapObject.centerPosition.latitude&&!n.mapObject.zoomPersistence&&n.mapObject.defaultState?new o(n.mapObject.centerPosition.longitude,n.mapObject.centerPosition.latitude):n.mapObject.zoomSettings.shouldZoomInitially&&n.mapObject.markerZoomedState&&!n.mapObject.zoomPersistence&&!Object(r.isNullOrUndefined)(n.mapObject.markerZoomCenterPoint)?new o(n.mapObject.markerZoomCenterPoint.longitude,n.mapObject.markerZoomCenterPoint.latitude):{x:null,y:null};f=n.mapObject.zoomSettings.shouldZoomInitially?Object(r.isNullOrUndefined)(n.mapObject.markerZoomFactor)?1:n.mapObject.markerZoomFactor:n.mapObject.zoomSettings.zoomFactor;(f=n.mapObject.enablePersistence?Object(r.isNullOrUndefined)(n.mapObject.mapScaleValue)?Object(r.isNullOrUndefined)(n.mapObject.markerZoomFactor)?n.mapObject.zoomSettings.zoomFactor:n.mapObject.markerZoomFactor:n.mapObject.mapScaleValue:f,f=n.mapObject.zoomSettings.enable?f:n.mapObject.zoomSettings.zoomFactor,Object(r.isNullOrUndefined)(n.mapObject.tileZoomLevel)?(n.mapObject.tileZoomLevel=f,n.mapObject.previousZoomFactor=f):this.mapObject.isReset&&1===n.mapObject.tileZoomLevel&&!n.mapObject.zoomSettings.shouldZoomInitially?n.mapObject.tileZoomLevel=n.mapObject.tileZoomLevel:(1!==n.mapObject.zoomSettings.zoomFactor||n.mapObject.zoomSettings.shouldZoomInitially)&&(n.mapObject.tileZoomLevel=n.mapObject.defaultState&&n.mapObject.zoomSettings.enable?n.mapObject.tileZoomLevel:n.mapObject.zoomSettings.shouldZoomInitially||n.mapObject.centerPositionChanged?f:n.mapObject.previousZoomFactor!==n.mapObject.zoomSettings.zoomFactor?n.mapObject.zoomSettings.zoomFactor:n.mapObject.tileZoomLevel,!Object(r.isNullOrUndefined)(n.mapObject.tileTranslatePoint)&&(n.mapObject.markerZoomFactor!==n.mapObject.mapScaleValue||Object(r.isNullOrUndefined)(n.mapObject.markerZoomFactor)&&Object(r.isNullOrUndefined)(n.mapObject.mapScaleValue))&&(n.mapObject.zoomSettings.zoomFactor<=1||n.mapObject.previousZoomFactor!==n.mapObject.zoomSettings.zoomFactor)&&(n.mapObject.tileTranslatePoint.x=0,n.mapObject.tileTranslatePoint.y=0)),f<=1&&!Object(r.isNullOrUndefined)(n.mapObject.height)&&!n.mapObject.zoomSettings.shouldZoomInitially&&n.mapObject.tileZoomLevel===n.mapObject.tileZoomScale&&this.mapObject.initialCheck&&function(n){n.tileZoomScale=n.tileZoomLevel=Math.floor(n.availableSize.height/512)+1;var i="GoogleStaticMap"!==n.layers[n.baseLayerIndex].layerType?20:0,t=256*Math.pow(2,n.tileZoomLevel);n.tileTranslatePoint.x=n.availableSize.width/2-t/2;n.tileTranslatePoint.y=n.availableSize.height/2-t/2+i;n.previousTileWidth=n.availableSize.width;n.previousTileHeight=n.availableSize.height}(this.mapObject),Object(r.isNullOrUndefined)(n.mapObject.centerLatOfGivenLocation)||Object(r.isNullOrUndefined)(n.mapObject.centerLongOfGivenLocation)||!n.mapObject.zoomNotApplied||(e.y=n.mapObject.centerLatOfGivenLocation,e.x=n.mapObject.centerLongOfGivenLocation,n.mapObject.tileZoomLevel=n.mapObject.mapScaleValue=n.mapObject.scaleOfGivenLocation),n.mapObject.tileTranslatePoint=n.panTileMap(n.mapObject.availableSize.width,n.mapObject.availableSize.height,e),this.mapObject.zoomSettings.resetToInitial&&this.mapObject.initialCheck&&!Object(r.isNullOrUndefined)(n.mapObject.height)&&this.mapObject.availableSize.height>512)&&(this.mapObject.applyZoomReset=!0,this.mapObject.initialZoomLevel=Math.floor(this.mapObject.availableSize.height/512)+1,c="GoogleStaticMap"!==this.mapObject.layers[this.mapObject.baseLayerIndex].layerType?20:0,h=256*Math.pow(2,this.mapObject.initialZoomLevel),this.mapObject.initialTileTranslate.x=this.mapObject.availableSize.width/2-h/2,this.mapObject.initialTileTranslate.y=this.mapObject.availableSize.height/2-h/2+c);n.generateTiles(n.mapObject.tileZoomLevel,n.mapObject.tileTranslatePoint,null,u);Object(r.isNullOrUndefined)(n.mapObject.previousZoomFactor)||n.mapObject.previousZoomFactor===n.mapObject.zoomSettings.zoomFactor||(n.mapObject.previousZoomFactor=n.mapObject.zoomSettings.zoomFactor);n.mapObject.navigationLineModule&&n.layerObject.appendChild(n.mapObject.navigationLineModule.renderNavigation(n.currentLayer,n.mapObject.tileZoomLevel,i));n.mapObject.markerModule&&n.mapObject.markerModule.markerRender(n.layerObject,i,n.mapObject.tileZoomLevel,null);n.translateLayerElements(n.layerObject,i);n.layerGroup.appendChild(n.layerObject)},n.prototype.processLayers=function(n,t){var i=this,f,u,e;(this.layerObject=this.mapObject.renderer.createGroup({id:this.mapObject.element.id+"_LayerIndex_"+t}),this.mapObject.enablePersistence)||(f=this.mapObject.getModuleName()+this.mapObject.element.id,-1===navigator.userAgent.indexOf("Edge")&&!Object(r.isNullOrUndefined)(window.localStorage)&&window.localStorage.getItem(f)&&window.localStorage.removeItem(f));u={cancel:!1,name:"layerRendering",index:t,layer:n,maps:this.mapObject,visible:n.visible};this.mapObject.isBlazor&&(u.maps,u.layer,e=tf(u,["maps","layer"]),u=e);this.mapObject.trigger("layerRendering",u,function(){var o,e;if(!u.cancel&&u.visible)if("Geometry"!==n.layerType){if("Bing"!==n.layerType||i.bing)i.renderTileLayer(i,n,t);else if(n.key&&n.key.length>1){var s=i,c=document.getElementById(i.mapObject.element.id+"_Markers_Group"),f=new gu(i.mapObject),l="https://dev.virtualearth.net/REST/V1/Imagery/Metadata/"+("AerialWithLabel"===n.bingMapType?"AerialWithLabelsOnDemand":n.bingMapType),h=new r.Ajax({url:l+"?output=json&include=ImageryProviders&urischeme=https&key="+n.key});h.onSuccess=function(u){var e=JSON.parse(u).resourceSets[0].resources[0],o=e.imageUrl,h=e.imageUrlSubdomains,l=e.zoomMax;null!=o&&o!==f.imageUrl&&(f.imageUrl=o);null!=h&&h!==f.subDomains&&(f.subDomains=h);null!=l&&l!==f.maxZoom&&(f.maxZoom=l);s.mapObject.bingMap=f;i.mapObject.isBlazor&&(Object(r.isNullOrUndefined)(c)||a(i.mapObject.element.id+"_Markers_Group"));s.renderTileLayer(s,n,t,f);i.mapObject.arrangeTemplate()};h.send()}}else Object(r.isNullOrUndefined)(n.shapeData)||Object(r.isNullOrUndefined)(n.shapeData.geometries)&&Object(r.isNullOrUndefined)(n.shapeData.features)||(o=!Object(r.isNullOrUndefined)(n.shapeData.geometries)&&n.shapeData.geometries.length>0?n.shapeData.geometries:n.shapeData.features,n.layerData=[],e=n.shapeData.bbox,!Object(r.isNullOrUndefined)(e)&&n.isBaseLayer?i.mapObject.baseMapBounds=new er({min:e[0][1],max:e[1][1]},{min:e[0][0],max:e[1][0]}):Object(r.isNullOrUndefined)(i.mapObject.baseMapBounds)&&!ar(o)&&i.calculateRectBounds(o),i.calculatePathCollection(t,o))});this.mapObject.isTileMap?this.tileSvgObject&&(this.tileSvgObject.appendChild(this.layerGroup),this.mapObject.baseMapBounds=null):this.mapObject.svgObject.appendChild(this.layerGroup)},n.prototype.bubbleCalculation=function(n,t){var f,i,u;if(null!=n.dataSource&&null!=n)for(f=n.dataSource,i=0;i<f.length;i++)u=Object(r.isNullOrUndefined)(n.valuePath)?parseFloat(n.dataSource[i][n.valuePath]):n.valuePath.indexOf(".")>-1?Number(s(n.dataSource[i],n.valuePath)):parseFloat(n.dataSource[i][n.valuePath]),0!==i?u>t.max?t.max=u:u<t.min&&(t.min=u):t.max=t.min=u},n.prototype.calculatePathCollection=function(n,t){var i=this,u,e,o;if(this.groupElements=[],ar(t)||(this.currentFactor=this.calculateFactor(this.currentLayer)),this.rectBounds=null,u=this.currentLayer.shapeSettings,this.currentLayer.bubbleSettings,Array.prototype.forEach.call(t,function(n){if(!Object(r.isNullOrUndefined)(n.geometry)||!Object(r.isNullOrUndefined)(n.coordinates)){var t=Object(r.isNullOrUndefined)(n.geometry)?n.type:n.geometry.type,u=Object(r.isNullOrUndefined)(n.geometry)?n.coordinates:n.geometry.coordinates,f=n.geometry,e=n.properties;"LineString"!==t&&i.generatePoints(t,u,f,e)}}),this.currentLayer.rectBounds=this.rectBounds,Object(r.isNullOrUndefined)(this.mapObject.baseMapRectBounds)&&this.currentLayer.isBaseLayer&&(this.mapObject.baseMapRectBounds=this.rectBounds),e=u.palette.length>1?u.palette:(this.mapObject.theme,["#B5E485","#7BC1E8","#DF819C","#EC9B79","#78D0D3","#D6D572","#9178E3","#A1E5B4","#87A4B4","#E4C16C"]),o=Object(r.createElement)("div",{id:this.mapObject.element.id+"_LayerIndex_"+n+"_Label_Template_Group",className:this.mapObject.element.id+"_template",styles:"pointer-events: none; overflow: hidden; position: absolute;top:"+this.mapObject.mapAreaRect.y+"px;left:"+this.mapObject.mapAreaRect.x+"px;height:"+this.mapObject.mapAreaRect.height+"px;width:"+this.mapObject.mapAreaRect.width+"px;"}),0!==this.currentLayer.layerData.length)for(var c=function(h){var g,tt,it,y,a,p,w=void 0,c=f.currentLayer.layerData[h],v="",rt="",l=u.autofill?e[h%e.length]:u.fill,k,d,nt;null===u.colorValuePath||Object(r.isNullOrUndefined)(c.property)||(null!==(w=ii(f.currentLayer.dataSource,c.property,f.currentLayer.shapeDataPath,f.currentLayer.shapePropertyPath,f.currentLayer))&&0===u.colorMapping.length?l=f.currentLayer.shapeSettings.colorValuePath.indexOf(".")>-1?s(f.currentLayer.dataSource[w],u.colorValuePath):f.currentLayer.dataSource[w][u.colorValuePath]:c.property[u.colorValuePath]&&0===f.currentLayer.dataSource.length&&0===u.colorMapping.length&&(l=f.currentLayer.shapeSettings.colorValuePath.indexOf(".")>-1?s(c.property,u.colorValuePath):c.property[u.colorValuePath]),l=Object(r.isNullOrUndefined)(l)?u.fill:l);k=f.mapObject.element.id+"_LayerIndex_"+n+"_shapeIndex_"+h+"_dataIndex_"+w;a=f.getShapeColorMapping(f.currentLayer,c.property,l);l="[object Object]"!==Object.prototype.toString.call(a)||Object(r.isNullOrUndefined)(a.fill)?l:a.fill;p="[object Object]"!==Object.prototype.toString.call(a)||Object(r.isNullOrUndefined)(a.opacity)?u.opacity:a.opacity;d={cancel:!1,name:"shapeRendering",index:h,data:f.currentLayer.dataSource?f.currentLayer.dataSource[w]:null,maps:f.mapObject,shape:u,fill:l,border:{width:u.border.width,color:u.border.color}};f.mapObject.isBlazor&&(d.maps,d=tf(d,["maps"]));nt=function(f){var s,a=Object(r.isNullOrUndefined)(c._isMultiPolygon)?Object(r.isNullOrUndefined)(c.type)?c[0].type:c.type:"MultiPolygon",d,ut,ft,nt;if(a="Polygon"===a||"MultiPolygon"===a?"Polygon":a,f.cancel?(f.fill=l,f.border.color=u.border.color,f.border.width=u.border.width,i.mapObject.layers[n].shapeSettings.border=u.border):(f.fill="#A6A6A6"===f.fill?f.shape.fill:f.fill,f.border.color="#000000"===f.border.color?f.shape.border.color:f.border.color,f.border.width=0===f.border.width?f.shape.border.width:f.border.width,i.mapObject.layers[n].shapeSettings.border=f.border),i.groupElements.length<1)y=i.mapObject.renderer.createGroup({id:i.mapObject.element.id+"_LayerIndex_"+n+"_"+a+"_Group",transform:""}),i.groupElements.push(y);else for(d=0;d<i.groupElements.length;d++){if(ut=i.groupElements[d],ut.id.indexOf(a)>-1){y=ut;break}if(d>=i.groupElements.length-1){y=i.mapObject.renderer.createGroup({id:i.mapObject.element.id+"_LayerIndex_"+n+"_"+a+"_Group"});i.groupElements.push(y);break}}switch(a){case"Polygon":c._isMultiPolygon?v=i.generateMultiPolygonPath(c):(v+="M"+c[0].point.x+" "+c[0].point.y,c.map(function(n){v+=" L "+n.point.x+" "+n.point.y}));(v+=" z ").length>3&&(g=new b(k,f.fill,f.border.width,f.border.color,p,u.dashArray,v),s=i.mapObject.renderer.drawPath(g));break;case"LineString":c.map(function(n){rt+=n.point.x+" , "+n.point.y+" "});tt=new sf(k,rt,f.fill,f.border.width,f.border.color,p,u.dashArray);s=i.mapObject.renderer.drawPolyline(tt);break;case"Point":ft=c.point;it=new bt(k,f.fill,f.border,p,ft.x,ft.y,u.circleRadius,null);s=i.mapObject.renderer.drawCircle(it);break;case"Path":v=c.point;g=new b(k,f.fill,f.border.width,f.border.color,p,u.dashArray,v);s=i.mapObject.renderer.drawPath(g)}if(!Object(r.isNullOrUndefined)(s)){for(var et="[object Array]"===Object.prototype.toString.call(i.currentLayer.shapePropertyPath)?i.currentLayer.shapePropertyPath:[i.currentLayer.shapePropertyPath],ot=void 0,w=0;w<et.length;w++)if(!Object(r.isNullOrUndefined)(c.property)){ot=et[w];break}if(s.setAttribute("aria-label",Object(r.isNullOrUndefined)(c.property)?"":c.property[ot]),s.setAttribute("tabindex",(i.mapObject.tabIndex+h+2).toString()),ni(i.mapObject.selectedElementId,i.mapObject.shapeSelectionClass,s,"ShapeselectionMapStyle"),i.mapObject.toggledShapeElementId)for(w=0;w<i.mapObject.toggledShapeElementId.length;w++)nt=i.mapObject.legendSettings.toggleLegendSettings.applyShapeSettings?i.currentLayer.shapeSettings:i.mapObject.legendSettings.toggleLegendSettings,i.mapObject.toggledShapeElementId[w]===s.id&&(s.setAttribute("fill",nt.fill),s.setAttribute("stroke",nt.border.color),s.setAttribute("opacity",nt.opacity.toString()),s.setAttribute("stroke-width",nt.border.width.toString()));y.appendChild(s)}h===i.currentLayer.layerData.length-1&&i.layerFeatures(n,e,t,o)};nt.bind(f);f.mapObject.trigger("shapeRendering",d,nt)},f=this,h=0;h<this.currentLayer.layerData.length;h++)c(h);else this.layerFeatures(n,e,t,o)},n.prototype.layerFeatures=function(n,t,i,r){var o,u=this,h,c;if(this.currentLayer.bubbleSettings.length&&this.mapObject.bubbleModule)for(var e,l=this.currentLayer.bubbleSettings.length,a=function(i){e=f.currentLayer.bubbleSettings[i];o=f.mapObject.renderer.createGroup({id:f.mapObject.element.id+"_LayerIndex_"+n+"_bubble_Group_"+i});var r={min:0,max:0};f.bubbleCalculation(e,r);e.dataSource.map(function(f,s){u.renderBubble(u.currentLayer,f,t[s%t.length],r,i,s,o,n,e)});f.groupElements.push(o)},f=this,s=0;s<l;s++)a(s);this.mapObject.markerModule&&!this.mapObject.isTileMap&&this.mapObject.zoomSettings.enable&&this.mapObject.markerModule.calculateZoomCenterPositionAndFactor(this.mapObject.layersCollection);h=this.mapObject.renderer.createGroup({id:this.mapObject.element.id+"_LayerIndex_"+n+"_dataLableIndex_Group",style:"pointer-events: none;"});this.mapObject.dataLabelModule&&this.currentLayer.dataLabelSettings.visible&&(c=[],i.map(function(t,i){u.renderLabel(u.currentLayer,n,t,h,i,r,c)}),this.groupElements.push(h));this.mapObject.navigationLineModule&&this.groupElements.push(this.mapObject.navigationLineModule.renderNavigation(this.currentLayer,this.currentFactor,n));this.groupElements.map(function(n){u.layerObject.appendChild(n)});this.mapObject.markerModule&&this.mapObject.markerModule.markerRender(this.layerObject,n,this.mapObject.isTileMap?Math.floor(this.currentFactor):this.currentFactor,null);this.translateLayerElements(this.layerObject,n);this.layerGroup.appendChild(this.layerObject)},n.prototype.renderLabel=function(n,t,i,r,u,f,e){this.mapObject.dataLabelModule.renderLabel(n,t,i,n.layerData,r,f,u,e)},n.prototype.generateMultiPolygonPath=function(n){for(var i="",t=0;t<n.length;t++)i+="M"+n[t][0].point.x+" "+n[t][0].point.y,n[t].map(function(n){i+=" L "+n.point.x+" "+n.point.y});return i},n.prototype.renderBubble=function(n,t,i,u,f,e,o,s,h){if(Object(r.isNullOrUndefined)(this.mapObject.bubbleModule)||!h.visible)return null;i=h.fill?h.fill:i;this.mapObject.bubbleModule.id=this.mapObject.element.id+"_LayerIndex_"+s+"_BubbleIndex_"+f+"_dataIndex_"+e;this.mapObject.bubbleModule.renderBubble(h,t,i,u,f,e,s,n,o,this.mapObject.bubbleModule.id)},n.prototype.getShapeColorMapping=function(n,t,i){if(i=i||n.shapeSettings.fill,0===n.shapeSettings.colorMapping.length&&Object(r.isNullOrUndefined)(n.dataSource))return i;var u=ii(n.dataSource,t,n.shapeDataPath,n.shapePropertyPath),f=new nf(this.mapObject);return Object(r.isNullOrUndefined)(n.dataSource[u])?i:f.getShapeColorMapping(n.shapeSettings,n.dataSource[u],i)},n.prototype.generatePoints=function(n,t,i,r){var f,e,o=this,u=[],s,h,c,l;switch(n.toLowerCase()){case"polygon":(u=this.calculatePolygonBox(t[0],i,r)).length>0&&(u.property=r,u.type=n,u._isMultiPolygon=!1,this.currentLayer.layerData.push(u));break;case"multipolygon":for(s=[],h=0;h<t.length;h++)(u=this.calculatePolygonBox(t[h][0],i,r)).length>0&&s.push(u);s.property=r;s.type=n;s._isMultiPolygon=!0;this.currentLayer.layerData.push(s);break;case"linestring":t.map(function(n){f=n[1];e=n[0];var t=w(f,e,o.currentFactor,o.currentLayer,o.mapObject);u.push({point:t,lat:f,lng:e})});u.property=r;u.type=n;this.currentLayer.layerData.push(u);break;case"point":c=!1;(t.map(function(t){if("[object Array]"===Object.prototype.toString.call(t)){f=t[1];e=t[0];c=!0;var i=w(f,e,o.currentFactor,o.currentLayer,o.mapObject);o.currentLayer.layerData.push({point:i,type:n,lat:f,lng:e,property:r})}}),c)||(f=t[1],e=t[0],l=w(f,e,this.currentFactor,this.currentLayer,this.mapObject),this.currentLayer.layerData.push({point:l,type:n,lat:f,lng:e,property:r}));break;case"path":this.currentLayer.layerData.push({point:i.d,type:n,property:r})}},n.prototype.calculateFactor=function(n){var o,i,r,s=1,u=this.mapObject.baseMapBounds,t=new g(this.mapObject.mapAreaRect.width,this.mapObject.mapAreaRect.height-5),f,e;return u?(f=w(u.latitude.min,u.longitude.min,null,n,this.mapObject),e=w(u.latitude.max,u.longitude.max,null,n,this.mapObject),i=e.y-f.y,r=e.x-f.x):i=r=500,o=i<t.height?parseFloat(Math.abs(100*Number(t.height/Number(i.toString()+"e+1"))).toString().split(".")[0])/10:t.height/i,s=r<t.width?parseFloat(Math.abs(100*Number(t.width/Number(r.toString()+"e+1"))).toString().split(".")[0])/10:t.width/r,Math.min(s,o)},n.prototype.translateLayerElements=function(n){var t,u,s,h,i,c,f,e,o;if(this.mapObject.translateType="layer",Object(r.isNullOrUndefined)(this.mapObject.baseMapRectBounds)){if(this.mapObject.isTileMap&&!Object(r.isNullOrUndefined)(this.mapObject.scale))for(u=0;u<n.childElementCount;u++)(t=n.childNodes[u]).id.indexOf("_Markers_Group")>-1||t.id.indexOf("_bubble_Group")>-1||t.id.indexOf("_dataLableIndex_Group")>-1||t.id.indexOf("_line_Group")>-1||(o="scale( "+this.mapObject.scale+" ) translate( "+this.mapObject.translatePoint.x+" "+this.mapObject.translatePoint.y+" ) ",t.setAttribute("transform",o))}else for(s=this.currentLayer.animationDuration,h=0!==s||Object(r.isNullOrUndefined)(this.mapObject.zoomModule),this.mapObject.baseTranslatePoint=this.mapObject.zoomTranslatePoint,i=void 0,i=this.mapObject.zoomSettings.zoomFactor>1&&!Object(r.isNullOrUndefined)(this.mapObject.zoomModule)?ct(this.mapObject,this.currentLayer,h):et(this.mapObject,this.currentLayer,h),c=this.mapObject.previousScale=i.scale,f=this.mapObject.previousPoint=i.location,this.mapObject.baseTranslatePoint=this.mapObject.translatePoint=f,this.mapObject.baseScale=this.mapObject.scale=c,e=0;e<n.childElementCount;e++)(t=n.childNodes[e]).id.indexOf("_Markers_Group")>-1||t.id.indexOf("_bubble_Group")>-1||t.id.indexOf("_dataLableIndex_Group")>-1||(o="scale( "+c+" ) translate( "+f.x+" "+f.y+" ) ",t.setAttribute("transform",o),s>0&&!Object(r.isNullOrUndefined)(this.mapObject.zoomModule)&&(i=this.mapObject.zoomSettings.zoomFactor>1?ct(this.mapObject,this.currentLayer):et(this.mapObject,this.currentLayer),this.mapObject.scale=i.scale,this.mapObject.zoomTranslatePoint=this.mapObject.translatePoint=i.location))},n.prototype.calculateRectBounds=function(n){var t=this;Array.prototype.forEach.call(n,function(n){if(!Object(r.isNullOrUndefined)(n.geometry)||!Object(r.isNullOrUndefined)(n.coordinates)){var u=Object(r.isNullOrUndefined)(n.geometry)?n.type:n.geometry.type,i=Object(r.isNullOrUndefined)(n.geometry)?n.coordinates:n.geometry.coordinates;switch(u.toLowerCase()){case"polygon":t.calculateRectBox(i[0]);break;case"multipolygon":i.map(function(n){t.calculateRectBox(n[0])})}}})},n.prototype.calculatePolygonBox=function(n){var t=this,u=[],i=this.mapObject.baseMapBounds;return n.map(function(n){var e=n[1],o=n[0],f;o>=i.longitude.min&&o<=i.longitude.max&&e>=i.latitude.min&&e<=i.latitude.max&&(f=w(e,o,t.currentFactor,t.currentLayer,t.mapObject),Object(r.isNullOrUndefined)(t.rectBounds)?t.rectBounds={min:{x:f.x,y:f.y},max:{x:f.x,y:f.y}}:(t.rectBounds.min.x=Math.min(t.rectBounds.min.x,f.x),t.rectBounds.min.y=Math.min(t.rectBounds.min.y,f.y),t.rectBounds.max.x=Math.max(t.rectBounds.max.x,f.x),t.rectBounds.max.y=Math.max(t.rectBounds.max.y,f.y)),u.push({point:f,lat:e,lng:o}))}),u},n.prototype.calculateRectBox=function(n){var t=this;Array.prototype.forEach.call(n,function(n){Object(r.isNullOrUndefined)(t.mapObject.baseMapBounds)?t.mapObject.baseMapBounds=new er({min:n[1],max:n[1]},{min:n[0],max:n[0]}):(t.mapObject.baseMapBounds.latitude.min=Math.min(t.mapObject.baseMapBounds.latitude.min,n[1]),t.mapObject.baseMapBounds.latitude.max=Math.max(t.mapObject.baseMapBounds.latitude.max,n[1]),t.mapObject.baseMapBounds.longitude.min=Math.min(t.mapObject.baseMapBounds.longitude.min,n[0]),t.mapObject.baseMapBounds.longitude.max=Math.max(t.mapObject.baseMapBounds.longitude.max,n[0]))})},n.prototype.generateTiles=function(n,t,i,u,f){var e,a,rt=this.mapObject.locale,h=this.mapObject.availableSize,y,p,v,c,l,w,b,k,o,ut,s,d,it,g,nt;this.tiles=[];e=a=Math.pow(2,n);y=0;p=0;t.x+256*e<h.width&&(y=t.x>0?Math.ceil(t.x/256):0,p=t.x+256*e<h.width?Math.ceil((h.width-(t.x+256*e))/256):0);e+=y+p;"Pan"===i?(e=this.horizontalPanXCount>=e?this.horizontalPanXCount:e,this.horizontalPan=!1):(this.horizontalPanXCount=e,this.horizontalPan=!0);v=this.mapObject.layers[this.mapObject.baseLayerIndex];this.urlTemplate=v.urlTemplate;var et=Math.min(a,(-t.y+h.height)/256+1),ot=Math.min(e,(-t.x+h.width+256*p)/256+1),st=-(t.x+256*y+256)/256,ht=-(t.y+256)/256;for(u=u||this.bing||this.mapObject.bingMap,c=Math.round(st);c<Math.round(ot);c++)for(l=Math.round(ht);l<Math.round(et);l++)w=256*c+t.x,b=256*l+t.y,w>-256&&w<=h.width&&b>-256&&b<h.height&&l>=0&&(k=c,c<0&&(k=k%a+a),o=new he(k%a,l),(o.left=w,o.top=b,"Bing"===v.layerType)?(ut=v.key,o.src=u.getBingMap(o,ut,v.bingMapType,rt,u.imageUrl,u.subDomains)):o.src=this.urlTemplate.replace("level",n.toString()).replace("tileX",o.x.toString()).replace("tileY",o.y.toString()),this.tiles.push(o));Object(r.isNullOrUndefined)(i)||(i.indexOf("wheel")>1?(this.animateToZoomX=this.mapObject.availableSize.width/2-f.x-10,this.animateToZoomY=-f.y):(this.animateToZoomX=-10,this.animateToZoomY=10-(this.mapObject.availableSize.height/2+11.5)));for(var ct=Object(r.extend)([],this.tiles,[],!0),tt=0,ft=this.mapObject.layers;tt<ft.length;tt++)if(s=ft[tt],"SubLayer"===s.type&&s.visible&&("OSM"===s.layerType||"Bing"===s.layerType))for(d=0,it=ct;d<it.length;d++)g=it[d],nt=Object(r.extend)({},g,{},!0),nt.src="Bing"===s.layerType?u.getBingMap(nt,s.key,s.bingMapType,rt,u.imageUrl,u.subDomains):s.urlTemplate.replace("level",n.toString()).replace("tileX",g.x.toString()).replace("tileY",g.y.toString()),this.tiles.push(nt);this.arrangeTiles(i,this.animateToZoomX,this.animateToZoomY)},n.prototype.arrangeTiles=function(n,t,i){var o,u=this,f=document.getElementById(this.mapObject.element.id+"_tile_parent"),e=document.getElementById(this.mapObject.element.id+"_tiles");Object(r.isNullOrUndefined)(n)||"Pan"===n||"Reset"===n||-1!==n.indexOf("ZoomOut")?o=0:(this.tileAnimation(n,t,i),o=250);"GoogleStaticMap"===this.mapObject.layers[this.mapObject.baseLayerIndex].layerType?this.renderGoogleMap(this.mapObject.layers[0].key,this.mapObject.staticMapZoom):setTimeout(function(){var t;f&&(f.style.zIndex="1");e&&(e.style.zIndex="0",e.style.visibility="hidden");!document.getElementById("animated_tiles")&&f?(Object(r.isNullOrUndefined)(document.getElementById(u.mapObject.element.id+"_animated_tiles"))||(document.getElementById(u.mapObject.element.id+"_animated_tiles").id=u.mapObject.element.id+"_animated_tiles_old"),t=Object(r.createElement)("div",{id:u.mapObject.element.id+"_animated_tiles"}),f.appendChild(t)):"Pan"!==n&&e&&f?(e.appendChild(f.children[0]),t=Object(r.createElement)("div",{id:u.mapObject.element.id+"_animated_tiles"}),f.appendChild(t)):t=f?f.children[0]:null;for(var i=0,h=function(f){var o=Object(r.createElement)("img"),e;o.setAttribute("src",f.src);e=u.mapObject.element.id;o.onload=function(){var s;document.getElementById(e+"_tile_"+i)&&"Pan"===n&&a(e+"_tile_"+i);(s=Object(r.createElement)("div",{id:e+"_tile_"+i})).style.position="absolute";s.style.left=f.left+"px";s.style.top=f.top+"px";s.style.height=f.height+"px";s.style.width=f.width+"px";s.appendChild(o);t&&t.appendChild(s);++i===u.tiles.length&&document.getElementById(u.mapObject.element.id+"_animated_tiles_old")&&a(u.mapObject.element.id+"_animated_tiles_old")}},o=0,s=u.tiles;o<s.length;o++)h(s[o])},o)},n.prototype.tileAnimation=function(n,t,i){var o=document.getElementById(this.mapObject.element.id+"_tile_parent"),f=document.getElementById("animated_tiles"),u=document.getElementById(this.mapObject.element.id+"_tiles"),e="2";if(0===n.indexOf("ZoomOut")){for(u.style.zIndex="1",o.style.zIndex="0";u.childElementCount>=1;)u.removeChild(u.children[0]);t=0;i=105;e="0.5"}else if("Reset"===n){for(u.style.zIndex="1",o.style.zIndex="0";1!==u.childElementCount&&0!==u.childElementCount;)u.removeChild(u.children[1]);f=u.children[0];t=0;i=0;e="1"}Object(r.isNullOrUndefined)(f)||(f.style.transition="250ms",f.style.transform="translate("+t+"px, "+i+"px) scale("+e+")")},n.prototype.renderGoogleMap=function(n,t){var h,c,l,i=this.mapObject,u,f,e,s;t=this.mapObject.tileZoomLevel;u=256*Math.pow(2,t);c=i.mapAreaRect.width/2-u/2;l=i.mapAreaRect.height/2-u/2;var a=0,v=0,y=ft(new o(null,null),t,{x:c,y:l},this.isMapCoordinates);i.zoomModule&&i.zoomSettings.enable&&(a=i.zoomModule.mouseDownLatLong.x-i.zoomModule.mouseMoveLatLong.x,v=i.zoomModule.mouseDownLatLong.y-i.zoomModule.mouseMoveLatLong.y);s=i.pointToLatLong(y.x-a,y.y-v);i.centerPosition.latitude=s.latitude;i.centerPosition.longitude=s.longitude;var p=(f=Object(r.isNullOrUndefined)(parseInt(i.width,10))?parseInt(i.width,10)-22:Math.round(i.mapAreaRect.width))>640?(f-640)/2:0,w=(e=Object(r.isNullOrUndefined)(parseInt(i.height,10))?parseInt(i.height,10)-22:Math.round(i.mapAreaRect.height))>640?(e-640)/2:0,b=i.layers[i.layers.length-1].staticMapType.toString().toLowerCase();h="https://maps.googleapis.com/maps/api/staticmap?size="+f+"x"+e+"&zoom="+t+"&center="+(i.centerPosition.latitude&&i.centerPosition.longitude?i.centerPosition.latitude.toString()+","+i.centerPosition.longitude.toString():"0,0")+"&maptype="+b+"&key="+n;document.getElementById(this.mapObject.element.id+"_tile_parent").innerHTML='<div id="'+this.mapObject.element.id+'_StaticGoogleMap"style="position:absolute; left:'+p+"px; top:"+w+'px"><img src="'+h+'"><\/div>'},n.prototype.panTileMap=function(n,t,i){var l,a;this.mapObject.tileZoomLevel<=this.mapObject.tileZoomScale&&this.mapObject.initialCheck&&(this.mapObject.tileZoomLevel=this.mapObject.tileZoomScale);var f,u,e=this.mapObject.tileZoomLevel,s="GoogleStaticMap"!==this.mapObject.layers[this.mapObject.layers.length-1].layerType?20:0,h=256*Math.pow(2,e),c=ft(i,e,{x:f=n/2-h/2,y:u=t/2-h/2},this.isMapCoordinates);return(s=this.mapObject.zoomNotApplied?0:s,f-=c.x-n/2,u=u-(c.y-t/2)+s,this.mapObject.scale=Math.pow(2,e-1),(Object(r.isNullOrUndefined)(this.mapObject.tileTranslatePoint)||0===this.mapObject.tileTranslatePoint.y&&0===this.mapObject.tileTranslatePoint.x||Object(r.isNullOrUndefined)(this.mapObject.previousTileWidth)||Object(r.isNullOrUndefined)(this.mapObject.previousTileHeight))&&(this.mapObject.previousTileWidth=n,this.mapObject.previousTileHeight=t),Object(r.isNullOrUndefined)(this.mapObject.tileTranslatePoint)||!Object(r.isNullOrUndefined)(i.x)||1!==this.mapObject.zoomSettings.zoomFactor&&this.mapObject.zoomSettings.zoomFactor===e&&this.mapObject.defaultState||n===this.mapObject.previousTileWidth&&t===this.mapObject.previousTileHeight)||(l=f-(this.mapObject.previousTileWidth/2-h/2),a=u-(this.mapObject.previousTileHeight/2-h/2+s),this.mapObject.tileTranslatePoint.x=this.mapObject.tileTranslatePoint.x+l,this.mapObject.tileTranslatePoint.y=this.mapObject.tileTranslatePoint.y+a),Object(r.isNullOrUndefined)(this.mapObject.tileTranslatePoint)||this.mapObject.zoomNotApplied||(0===this.mapObject.tileTranslatePoint.x||this.mapObject.tileTranslatePoint.x===f||this.mapObject.centerPositionChanged||(f=this.mapObject.tileTranslatePoint.x),0===this.mapObject.tileTranslatePoint.y||this.mapObject.tileTranslatePoint.y===u||this.mapObject.centerPositionChanged||(u=this.mapObject.tileTranslatePoint.y)),this.mapObject.translatePoint=new o((f-.01*this.mapObject.zoomSettings.zoomFactor)/this.mapObject.scale,(u-.01*this.mapObject.zoomSettings.zoomFactor)/this.mapObject.scale),this.mapObject.previousTileWidth=n,this.mapObject.previousTileHeight=t,new o(f,u)},n}(),rf=function(){function n(n){this.map=n}return n.prototype.renderAnnotationElements=function(){var u=this,i=this.map.element.id+"_Secondary_Element",n=Object(r.createElement)("div",{id:this.map.element.id+"_Annotations_Group"}),t;if(n.style.position="absolute",n.style.top="0px",n.style.left="0px",this.map.annotations.map(function(t,i){null!==t.content&&u.createAnnotationTemplate(n,t,i)}),n.childElementCount>0&&!Object(r.isNullOrUndefined)(e(i)))for(e(i).appendChild(n),t=0;t<this.map.annotations.length;t++)Object(r.updateBlazorTemplate)(this.map.element.id+"_ContentTemplate_"+t,"ContentTemplate",this.map.annotations[t]);this.map.renderReactTemplates()},n.prototype.createAnnotationTemplate=function(n,t,i){var u,f,y,p,e=this,o=this.map,w=o.availableSize,s=(o.element.id,Object(r.createElement)("div",{id:o.element.id+"_Annotation_"+i,styles:"position: absolute; z-index:"+t.zIndex+";"})),h={cancel:!1,name:"annotationRendering",content:t.content,annotation:t},l,a;this.map.trigger("annotationRendering",h,function(){if(!h.cancel)if((y=ui(h.content))&&(window.Blazor||y(e.map,e.map,h.content,e.map.element.id+"_ContentTemplate_"+i).length))for(var t=(p=Array.prototype.slice.call(y(window.Blazor?{}:e.map,e.map,h.content,e.map.element.id+"_ContentTemplate_"+i))).length,n=0;n<t;n++)s.appendChild(p[n]);else s.appendChild(Object(r.createElement)("div",{innerHTML:h.content}))});var v=function(n,t){var i,r;return t.appendChild(n),i=n.offsetWidth,r=n.offsetHeight,t.removeChild(n),new g(i,r)}(s.cloneNode(!0),o.element),b=o.element.getBoundingClientRect(),c=o.svgObject.getBoundingClientRect();u=Math.abs(c.left-b.left);f=Math.abs(c.top-b.top);l=t.x.indexOf("%")>-1?w.width/100*parseFloat(t.x):parseFloat(t.x);a=t.y.indexOf("%")>-1?w.height/100*parseFloat(t.y):parseFloat(t.y);switch(u="None"===t.horizontalAlignment?u+l:u,f="None"===t.verticalAlignment?f+a:f,t.verticalAlignment){case"Near":f+=a;break;case"Center":f=f+a+(c.height/2-v.height/2);break;case"Far":f=f+c.height+a-v.height}switch(t.horizontalAlignment){case"Near":u+=l;break;case"Center":u=u+l+(c.width/2-v.width/2);break;case"Far":u=u+c.width+l-v.width}s.style.left=u+"px";s.style.top=f+"px";n.appendChild(s)},n.prototype.getModuleName=function(){return"Annotations"},n.prototype.destroy=function(){},n}(),k=i(1),ve=function(){var n=function(t,i){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),f=function(n,t,i,r){var f,e=arguments.length,u=e<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r,o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(f=n[o])&&(u=(e<3?f(u):e>3?f(t,i,u):f(t,i))||u);return e>3&&u&&Object.defineProperty(t,i,u),u},uf=function(n){function t(t,i){var u=n.call(this,t,i)||this;return u.isTileMap=!1,u.isResize=!1,u.baseSize=new g(0,0),u.translatePoint=new o(0,0),u.baseTranslatePoint=new o(0,0),u.zoomTranslatePoint=new o(0,0),u.markerZoomedState=!0,u.zoomPersistence=!1,u.defaultState=!0,u.centerPositionChanged=!1,u.isTileMapSubLayer=!1,u.markerNullCount=0,u.tileTranslatePoint=new o(0,0),u.baseTileTranslatePoint=new o(0,0),u.isDevice=!1,u.staticMapZoom=u.zoomSettings.enable?u.zoomSettings.zoomFactor:0,u.zoomNotApplied=!1,u.dataLabelShape=[],u.zoomShapeCollection=[],u.zoomLabelPositions=[],u.mouseDownEvent={x:null,y:null},u.mouseClickEvent={x:null,y:null},u.selectedElementId=[],u.selectedMarkerElementId=[],u.selectedBubbleElementId=[],u.selectedNavigationElementId=[],u.selectedLegendElementId=[],u.legendSelectionCollection=[],u.shapeSelections=!0,u.legendSelection=!0,u.toggledLegendId=[],u.toggledShapeElementId=[],u.checkInitialRender=!0,u.initialTileTranslate=new o(0,0),u.initialCheck=!0,u.applyZoomReset=!1,u.markerClusterExpandCheck=!1,u.markerClusterExpand=!1,u.shapeSelectionItem=[],Object(r.setValue)("mergePersistData",u.mergePersistMapsData,u),u}return ve(t,n),Object.defineProperty(t.prototype,"isShapeSelected",{get:function(){return this.mapSelect},enumerable:!0,configurable:!0}),t.prototype.mergePersistMapsData=function(){var t,i,e,u,f,n;if(Object(r.isNullOrUndefined)(window.localStorage)||(t=window.localStorage.getItem(this.getModuleName()+this.element.id)),!Object(r.isNullOrUndefined)(t)&&""!==t){for(i=JSON.parse(t),e=Object.keys(i),this.isProtectedOnChange=!0,u=0,f=e;u<f.length;u++)n=f[u],"object"!=typeof this[n]||Object(r.isNullOrUndefined)(this[n])?this[n]=i[n]:Object(r.extend)(this[n],i[n]);this.isProtectedOnChange=!1}},t.prototype.getLocalizedLabel=function(n){return this.localeObject.getConstant(n)},t.prototype.preRender=function(){this.isDevice=r.Browser.isDevice;this.isBlazor=Object(r.isBlazor)();this.initPrivateVariable();this.allowServerDataBinding=!1;this.unWireEVents();this.wireEVents();this.setCulture()},t.prototype.render=function(){this.trigger("load",this.isBlazor?{}:{maps:this});this.createSVG();this.findBaseAndSubLayers();this.createSecondaryElement();this.addTabIndex();this.themeStyle=function(n){var t,i;switch(n.toLowerCase()){case"materialdark":i="#303030";break;case"fabricdark":i="#201F1F";break;case"bootstrapdark":i="#1A1A1A"}switch(n.toLowerCase()){case"materialdark":case"fabricdark":case"bootstrapdark":t={backgroundColor:i,areaBackgroundColor:i,titleFontColor:"#FFFFFF",subTitleFontColor:"#FFFFFF",legendTitleFontColor:"#DADADA",legendTextColor:"#DADADA",dataLabelFontColor:"#DADADA",tooltipFontColor:"#ffffff",tooltipFillColor:"#363F4C",zoomFillColor:"#FFFFFF",labelFontFamily:"Roboto, Noto, Sans-serif"};break;case"highcontrast":t={backgroundColor:"#000000",areaBackgroundColor:"#000000",titleFontColor:"#FFFFFF",subTitleFontColor:"#FFFFFF",legendTitleFontColor:"#FFFFFF",legendTextColor:"#FFFFFF",dataLabelFontColor:"#000000",tooltipFontColor:"#000000",tooltipFillColor:"#ffffff",zoomFillColor:"#FFFFFF",labelFontFamily:"Roboto, Noto, Sans-serif"};break;case"bootstrap4":t={backgroundColor:"#FFFFFF",areaBackgroundColor:"#FFFFFF",titleFontColor:"#212529",subTitleFontColor:"#212529",legendTitleFontColor:"#212529",legendTextColor:"#212529",dataLabelFontColor:"#212529",tooltipFontColor:"#FFFFFF",tooltipFillColor:"#000000",zoomFillColor:"#5B6269",fontFamily:"HelveticaNeue-Medium",titleFontSize:"16px",legendFontSize:"14px",tooltipFillOpacity:1,tooltipTextOpacity:.9,labelFontFamily:"HelveticaNeue-Medium"};break;default:t={backgroundColor:"#FFFFFF",areaBackgroundColor:"#FFFFFF",titleFontColor:"#424242",subTitleFontColor:"#424242",legendTitleFontColor:"#757575",legendTextColor:"#757575",dataLabelFontColor:"#000000",tooltipFontColor:"#ffffff",tooltipFillColor:"#000000",zoomFillColor:"#737373",labelFontFamily:"Roboto, Noto, Sans-serif"}}return t}(this.theme);this.renderBorder();this.renderTitle(this.titleSettings,"title",null,null);this.renderArea();this.processRequestJsonData();this.renderComplete()},t.prototype.processRequestJsonData=function(){var t,i,n=this,u=this.layersCollection.length-1;this.serverProcess={request:0,response:0};Array.prototype.forEach.call(this.layersCollection,function(f,e){var s,o,h;if(f.shapeData instanceof k.DataManager?(n.serverProcess.request++,i=f.shapeData,t=f.query instanceof k.Query?f.query:n.isBlazor?(new k.Query).requiresCount():new k.Query,i.executeQuery(t).then(function(t){n.processResponseJsonData("DataManager",t,f,"ShapeData")})):(f.shapeData instanceof pi||f.shapeData)&&(Object(r.isNullOrUndefined)(f.shapeData.dataOptions)||n.processAjaxRequest(f,f.shapeData,"ShapeData")),f.dataSource instanceof k.DataManager&&(n.serverProcess.request++,i=f.dataSource,t=f.query instanceof k.Query?f.query:n.isBlazor?(new k.Query).requiresCount():new k.Query,i.executeQuery(t).then(function(n){f.dataSource=vt(n)})),f.markerSettings.length>0)for(s=function(r){f.markerSettings[r].dataSource instanceof k.DataManager&&(n.serverProcess.request++,i=f.markerSettings[r].dataSource,t=f.markerSettings[r].query instanceof k.Query?f.markerSettings[r].query:n.isBlazor?(new k.Query).requiresCount():new k.Query,i.executeQuery(t).then(function(n){f.markerSettings[r].dataSource=vt(n)}))},o=0;o<f.markerSettings.length;o++)s(o);if(f.bubbleSettings.length>0)for(h=function(r){f.bubbleSettings[r].dataSource instanceof k.DataManager&&(n.serverProcess.request++,i=f.bubbleSettings[r].dataSource,t=f.bubbleSettings[r].query instanceof k.Query?f.bubbleSettings[r].query:n.isBlazor?(new k.Query).requiresCount():new k.Query,i.executeQuery(t).then(function(n){f.bubbleSettings[r].dataSource=vt(n)}))},o=0;o<f.bubbleSettings.length;o++)h(o);(f.dataSource instanceof pi||!Object(r.isNullOrUndefined)(f.dataSource.dataOptions))&&n.processAjaxRequest(f,f.dataSource,"DataSource");n.serverProcess.request===n.serverProcess.response&&u===e&&n.processResponseJsonData(null)})},t.prototype.processAjaxRequest=function(n,t,i){var u,f=this;this.serverProcess.request++;(u=new r.Ajax(t.dataOptions,t.type,t.async,t.contentType)).onSuccess=function(t){f.processResponseJsonData("Ajax",t,n,i)};u.send(t.sendData)},t.prototype.processResponseJsonData=function(n,t,i,u){var f,e,o;if(this.serverProcess.response++,n&&("ShapeData"===u?i.shapeData="DataManager"===n?vt(t):JSON.parse(t):i.dataSource="DataManager"===n?vt(t):JSON.parse("["+t+"]")[0]),Object(r.isNullOrUndefined)(n)||this.serverProcess.request!==this.serverProcess.response)Object(r.isNullOrUndefined)(n)&&this.renderMap();else{for(f=this.layersCollection,this.layersCollection=[],e=0;e<f.length;e++)f[e].isBaseLayer&&this.layersCollection.push(f[e]);for(o=0;o<f.length;o++)f[o].isBaseLayer||this.layersCollection.push(f[o]);this.renderMap()}},t.prototype.renderMap=function(){var p,n,l,a,t,i,h,s,c;for(this.legendModule&&this.legendSettings.visible&&(this.isTileMap?(p=this.layersCollection.length-1,this.layersCollection[p].isBaseLayer||(this.isTileMapSubLayer=!0,this.legendModule.renderLegend())):this.legendModule.renderLegend()),this.createTile(),this.zoomSettings.enable&&this.zoomModule&&this.zoomModule.createZoomingToolbars(),Object(r.isNullOrUndefined)(this.dataLabelModule)||(this.dataLabelModule.dataLabelCollections=[],this.dataLabelShape=[]),this.mapLayerPanel.measureLayerPanel(),this.element.appendChild(this.svgObject),n=0;n<this.layers.length;n++){if(this.layers[n].selectionSettings&&this.layers[n].selectionSettings.enable&&this.layers[n].initialShapeSelection.length>0&&this.checkInitialRender){for(l=this.layers[n].selectionSettings.enableMultiSelect,this.layers[n].selectionSettings.enableMultiSelect=l||!0,a=this.layers[n].initialShapeSelection,t=0;t<this.layers[n].initialShapeSelection.length;t++)this.shapeSelection(n,a[t].shapePath,a[t].shapeValue,!0);this.layers[n].selectionSettings.enableMultiSelect=l;n===this.layers.length-1&&(this.checkInitialRender=!1)}for(i=0;i<this.layers[n].markerSettings.length;i++)if(this.layers[n].markerSettings[i].selectionSettings&&this.layers[n].markerSettings[i].selectionSettings.enable&&this.layers[n].markerSettings[i].initialMarkerSelection.length>0)for(h=this.layers[n].markerSettings[i].initialMarkerSelection,t=0;t<h.length;t++)this.markerInitialSelection(n,i,this.layers[n].markerSettings[i],h[t].latitude,h[t].longitude)}if(!Object(r.isNullOrUndefined)(document.getElementById(this.element.id+"_tile_parent"))){var f,b=this.svgObject.getBoundingClientRect(),e=document.getElementById(this.element.id),u=document.getElementById(this.element.id+"_tile_parent"),w=document.getElementById(this.element.id+"_tiles"),k=u.getBoundingClientRect(),y=void 0,o=void 0;o=parseFloat(u.style.left)+e.offsetLeft;s=v(this.titleSettings.text,this.titleSettings.textStyle);c=v(this.titleSettings.subtitleSettings.text,this.titleSettings.subtitleSettings.textStyle);this.isTileMap&&this.isTileMapSubLayer&&"Bottom"===this.legendSettings.position&&this.legendSettings.visible?"Default"!==this.legendSettings.mode?f=0!==s.width&&0!==s.height?parseFloat(u.style.top)+e.offsetTop+c.height/2-this.legendModule.legendBorderRect.height/2:parseFloat(u.style.top)+e.offsetTop-this.mapAreaRect.y:(o=this.legendModule.legendBorderRect.x,f=0!==s.width&&0!==s.height?parseFloat(u.style.top)+e.offsetTop+c.height/2-this.legendModule.legendBorderRect.y:parseFloat(u.style.top)+e.offsetTop+c.height/2):(y=b.bottom-k.bottom-e.offsetTop,f=parseFloat(u.style.top)+e.offsetTop);f=y<=11?f:2*f;o=y<=11?o:2*o;u.style.top=f+"px";u.style.left=o+"px";w.style.top=f+"px";w.style.left=o+"px"}for(this.arrangeTemplate(),this.isBlazor&&this.blazorTemplates(),this.annotationsModule&&"0px"!==this.width&&"0px"!==this.height&&"0%"!==this.width&&"0%"!==this.height&&this.annotationsModule.renderAnnotationElements(),this.element.style.outline="none",n=0;n<document.getElementsByTagName("path").length-1;n++)document.getElementsByTagName("path")[n].id.indexOf("shapeIndex")>-1&&(document.getElementsByTagName("path")[n].style.outline="none");this.zoomingChange();this.trigger("loaded",this.isBlazor?{isResized:this.isResize}:{maps:this,isResized:this.isResize});this.isResize=!1},t.prototype.markerSelection=function(n,t,i,r){var f={color:n.border.color,width:n.border.width/t.scale},u={opacity:n.opacity,fill:n.fill,border:f,target:i.id,cancel:!1,data:r,maps:t};h("MarkerselectionMap")?lt("MarkerselectionMap","MarkerselectionMapStyle",u):document.body.appendChild(ei("MarkerselectionMap","MarkerselectionMapStyle",u));(0===this.selectedMarkerElementId.length||n.enableMultiSelect)&&i.setAttribute("class","MarkerselectionMapStyle")},t.prototype.markerInitialSelection=function(n,t,i,r,u){var o=i.selectionSettings,f,e,s;if(o.enable)for(f=0;f<i.dataSource.length;f++)e=i.dataSource[f],e.latitude===r&&e.longitude===u&&(s=this.element.id+"_LayerIndex_"+n+"_MarkerIndex_"+t+"_dataIndex_"+f,this.markerSelection(o,this,h(s),e))},t.prototype.blazorTemplates=function(){for(var i,t,n=0;n<this.layers.length;n++)if(i=this.layers[n].markerSettings.length-1,i>=0&&(this.layers[n].dataLabelSettings.visible||this.layers[n].markerSettings[i].template))for(Object(r.updateBlazorTemplate)(this.element.id+"_LabelTemplate","LabelTemplate",this.layers[n].dataLabelSettings),t=0;t<this.layers[n].markerSettings.length;t++)Object(r.updateBlazorTemplate)(this.element.id+"_MarkerTemplate"+t,"MarkerTemplate",this.layers[n].markerSettings[t])},t.prototype.renderArea=function(){var i=this.mapsArea.border.width,n=this.mapsArea.background,t;(i>0||n||this.themeStyle.areaBackgroundColor)&&(t=new d(this.element.id+"_MapAreaBorder",n||this.themeStyle.areaBackgroundColor,this.mapsArea.border,1,this.mapAreaRect),this.svgObject.appendChild(this.renderer.drawRectangle(t)))},t.prototype.addTabIndex=function(){this.element.setAttribute("aria-label",this.description||"Maps Element");this.element.setAttribute("tabindex",this.tabIndex.toString())},t.prototype.zoomingChange=function(){var s,h,c,l,t,n,a,i,u,v,o,f;if((e(this.element.id+"_Layer_Collections")&&this.zoomModule&&(this.zoomModule.layerCollectionEle=e(this.element.id+"_Layer_Collections")),this.isTileMap&&e(this.element.id+"_Tile_SVG")&&e(this.element.id+"_tile_parent"))&&(c=e(this.element.id+"_tile_parent").getBoundingClientRect(),l=e(this.element.id+"_Tile_SVG").getBoundingClientRect(),s=c.left-l.left,h=c.top-l.top,e(this.element.id+"_Tile_SVG_Parent").style.left=s+"px",e(this.element.id+"_Tile_SVG_Parent").style.top=h+"px",t=document.getElementsByClassName("template"),!Object(r.isNullOrUndefined)(t)&&t.length>0))for(n=0;n<t.length;n++)a=t[n],a.style.left=s+"px",a.style.top=h+"px";if(this.zoomSettings.zoomFactor>=1){if(this.zoomModule&&this.zoomModule.toolBarGroup&&this.zoomSettings.enable&&this.zoomModule.alignToolBar(),i=document.getElementById(this.element.id+"_Layer_Collections"),!Object(r.isNullOrUndefined)(i)&&i.childElementCount>0)for(n=0;n<i.childNodes.length;n++)if(u=i.childNodes[n],"g"===u.tagName)for(v=parseFloat(u.id.split("_LayerIndex_")[1].split("_")[0]),o=0;o<u.childNodes.length;o++)f=u.childNodes[o],f.id.indexOf("_Markers_Group")>-1||f.id.indexOf("_bubble_Group")>-1||f.id.indexOf("_dataLableIndex_Group")>-1||kr(f,v,this.scale,this);this.zoomModule&&this.previousScale!==this.scale&&this.zoomModule.applyTransform(!0)}},t.prototype.createSecondaryElement=function(){if(Object(r.isNullOrUndefined)(document.getElementById(this.element.id+"_Secondary_Element"))){var n=Object(r.createElement)("div",{id:this.element.id+"_Secondary_Element",styles:"position: absolute;z-index:2;"});this.element.appendChild(n)}},t.prototype.arrangeTemplate=function(){var f,o,n,u;if(document.getElementById(this.element.id+"_Legend_Border")&&(document.getElementById(this.element.id+"_Legend_Border").style.pointerEvents="none"),f=document.getElementsByClassName(this.element.id+"_template"),!Object(r.isNullOrUndefined)(f)&&f.length>0&&e(this.element.id+"_Layer_Collections")&&"OSM"!==this.layers[this.layers.length-1].layerType)for(o=0;o<f.length;o++)if(n=f[o],!Object(r.isNullOrUndefined)(n)&&n.childElementCount>0)for(var t=e(this.element.id+"_Layer_Collections").getBoundingClientRect(),i=e(n.id).getBoundingClientRect(),h=this.isTileMap?0:t.left<i.left?-Math.abs(i.left-t.left):Math.abs(i.left-t.left),c=this.isTileMap?0:t.top<i.top?-Math.abs(i.top-t.top):Math.abs(i.top-t.top),s=0;s<n.childElementCount;s++)u=n.childNodes[s],u.style.left=parseFloat(u.style.left)+h+"px",u.style.top=parseFloat(u.style.top)+c+"px",u.style.transform="translate(-50%, -50%)"},t.prototype.createTile=function(){var n=this.layersCollection[0],t,i;n.isBaseLayer&&("OSM"===n.layerType||"Bing"===n.layerType||"GoogleStaticMap"===n.layerType||"Google"===n.layerType)&&("Google"===n.layerType&&(n.urlTemplate="https://mt1.google.com/vt/lyrs=m@129&hl=en&x=tileX&y=tileY&z=level"),a(this.element.id+"_tile_parent"),a(this.element.id+"_tiles"),a("animated_tiles"),t=Object(r.createElement)("div",{id:this.element.id+"_tile_parent",styles:"position: absolute; left: "+this.mapAreaRect.x+"px; right: "+this.margin.right+"px; top: "+(this.mapAreaRect.y+0)+"px; height: "+this.mapAreaRect.height+"px; width: "+this.mapAreaRect.width+"px; overflow: hidden;"}),i=Object(r.createElement)("div",{id:this.element.id+"_tiles",styles:"position: absolute; left: "+this.mapAreaRect.x+"px;  right: "+this.margin.right+"px; top: "+(this.mapAreaRect.y+0)+"px; height: "+this.mapAreaRect.height+"px; width: "+this.mapAreaRect.width+"px; overflow: hidden;"}),this.element.appendChild(t),this.element.appendChild(i))},t.prototype.initPrivateVariable=function(){if(""===this.element.id){var n=document.getElementsByClassName("e-maps").length;this.element.id="maps_control_"+n}this.renderer=new ut.SvgRenderer(this.element.id);this.mapLayerPanel=new ae(this)},t.prototype.findBaseAndSubLayers=function(){var u=this,f=this.baseLayerIndex,t=[],r=[],n,i;for(this.layersCollection=[],Array.prototype.forEach.call(this.layers,function(n){"Layer"===n.type?t.push(n):r.push(n)}),n=0;n<t.length;n++){if(i=t[n],i.visible&&f===n){i.isBaseLayer=!0;this.isTileMap="Geometry"!==i.layerType;this.layersCollection.push(i);break}if(n===t.length-1){this.layersCollection.push(t[0]);break}}r.map(function(n){n.visible&&u.layersCollection.push(n)})},t.prototype.renderBorder=function(){var n=this.border.width,t=this.svgObject.querySelector("#"+this.element.id+"_MapBorder"),i;(n>0||this.background||this.themeStyle.backgroundColor)&&Object(r.isNullOrUndefined)(t)?(i=new d(this.element.id+"_MapBorder",this.background||this.themeStyle.backgroundColor,this.border,1,new y(n/2,n/2,this.availableSize.width-n,this.availableSize.height-n)),this.svgObject.appendChild(this.renderer.drawRectangle(i))):t.setAttribute("fill",this.background||this.themeStyle.backgroundColor)},t.prototype.renderTitle=function(n,t,i,u){var e,f=n.textStyle,h=Math.abs(this.margin.left+this.margin.right-this.availableSize.width);if(f.fontFamily=this.themeStyle.fontFamily||f.fontFamily,f.size=this.themeStyle.titleFontSize||f.size,n.text){Object(r.isNullOrUndefined)(u)&&(u=this.renderer.createGroup({id:this.element.id+"_Title_Group"}));var a=tt(h,n.text,f),c=v(a,f),s=function(n,t,i,r){var u,f;switch(t){case"Near":u=n.x;break;case"Center":u="title"===r?n.width/2-i.width/2:n.x+n.width/2-i.width/2;break;case"Far":u="title"===r?n.width-n.y-i.width:n.x+n.width-i.width}return f="title"===r?n.y+i.height/2:n.y+n.height/2+i.height/2,new o(u,f)}(Object(r.isNullOrUndefined)(i)?new y(this.margin.left,this.margin.top,this.availableSize.width,this.availableSize.height):i,n.alignment,c,t),w=new it(this.element.id+"_Map_"+t,s.x,s.y,"start",a),l=new y(s.x,s.y,c.width,c.height),p=st(w,f,f.color||("title"===t?this.themeStyle.titleFontColor:this.themeStyle.subTitleFontColor),u);p.setAttribute("aria-label",this.description||n.text);p.setAttribute("tabindex",(this.tabIndex+("title"===t?1:2)).toString());("title"===t&&!n.subtitleSettings.text||"subtitle"===t)&&(e=Math.abs(l.y+this.margin.bottom-this.availableSize.height),this.mapAreaRect=new y(this.margin.left,l.y+10,h,e-10));"subtitle"!==t&&n.subtitleSettings.text?this.renderTitle(n.subtitleSettings,"subtitle",l,u):this.svgObject.appendChild(u)}else e=Math.abs(this.margin.top+this.margin.bottom-this.availableSize.height),this.mapAreaRect=new y(this.margin.left,this.margin.top,h,e)},t.prototype.createSVG=function(){var n,t;for(Object(r.resetBlazorTemplate)(this.element.id+"_LabelTemplate","LabelTemplate"),n=0;n<this.layers.length;n++)for(t=0;t<this.layers[n].markerSettings.length;t++)Object(r.resetBlazorTemplate)(this.element.id+"_MarkerTemplate"+t,"MarkerTemplate");this.removeSvg();ef(this)},t.prototype.removeSvg=function(){for(var n=0;n<this.annotations.length;n++)Object(r.resetBlazorTemplate)(this.element.id+"_ContentTemplate_"+n,"ContentTemplate");if(a(this.element.id+"_Secondary_Element"),a(this.element.id+"_tile_parent"),a(this.element.id+"_tiles"),this.svgObject){for(;this.svgObject.childNodes.length>0;)this.svgObject.removeChild(this.svgObject.firstChild);!this.svgObject.hasChildNodes()&&this.svgObject.parentNode&&Object(r.remove)(this.svgObject)}this.clearTemplate()},t.prototype.wireEVents=function(){r.EventHandler.add(this.element,"click",this.mapsOnClick,this);r.EventHandler.add(this.element,"dblclick",this.mapsOnDoubleClick,this);r.EventHandler.add(this.element,r.Browser.touchStartEvent,this.mouseDownOnMap,this);r.EventHandler.add(this.element,r.Browser.touchMoveEvent,this.mouseMoveOnMap,this);r.EventHandler.add(this.element,r.Browser.touchEndEvent,this.mouseEndOnMap,this);r.EventHandler.add(this.element,"pointerleave mouseleave",this.mouseLeaveOnMap,this);window.addEventListener(r.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.mapsOnResize.bind(this))},t.prototype.unWireEVents=function(){r.EventHandler.remove(this.element,"click",this.mapsOnClick);r.EventHandler.remove(this.element,"dblclick",this.mapsOnDoubleClick);r.EventHandler.remove(this.element,r.Browser.touchStartEvent,this.mouseDownOnMap);r.EventHandler.remove(this.element,r.Browser.touchMoveEvent,this.mouseMoveOnMap);r.EventHandler.remove(this.element,r.Browser.touchEndEvent,this.mouseEndOnMap);r.EventHandler.remove(this.element,"pointerleave mouseleave",this.mouseLeaveOnMap);window.removeEventListener(r.Browser.isTouch&&"orientation"in window&&"onorientationchange"in window?"orientationchange":"resize",this.mapsOnResize)},t.prototype.mouseLeaveOnMap=function(){document.getElementsByClassName("highlightMapStyle").length>0&&this.legendModule&&(this.legendModule.removeShapeHighlightCollection(),p(document.getElementsByClassName("highlightMapStyle")[0]))},t.prototype.SelectedElement=function(n){var t=!1;return"ShapeselectionMapStyle"===n.getAttribute("class")&&(t=!0),t},t.prototype.mapsOnClick=function(n){var u,t=this,i=n.target,s=i.id,c=0,e=null,o=null,f;(this.mouseClickEvent={x:n.x,y:n.y},-1===i.id.indexOf("_ToolBar"))&&(-1===i.id.indexOf("_LayerIndex_")||this.isTileMap||this.mouseDownEvent.x!==this.mouseClickEvent.x||this.mouseDownEvent.y!==this.mouseClickEvent.y?this.isTileMap&&this.mouseDownEvent.x===this.mouseClickEvent.x&&this.mouseDownEvent.y===this.mouseClickEvent.y&&(e=(u=this.getTileGeoLocation(n)).latitude,o=u.longitude):(c=parseFloat(i.id.split("_LayerIndex_")[1].split("_")[0]),e=(u=this.getGeoLocation(c,n)).latitude,o=u.longitude),f={cancel:!1,name:"click",target:s,x:n.clientX,y:n.clientY,latitude:e,longitude:o,isShapeSelected:this.SelectedElement(i)},this.trigger("click",f,function(){if(i.id.indexOf("shapeIndex")>-1&&(t.markerModule&&t.markerModule.sameMarkerData.length>0&&(!t.zoomModule||t.zoomModule.isSingleClick)&&(ai(t.markerModule.sameMarkerData,t,h(t.element.id+"_Markers_Group")),t.markerModule.sameMarkerData=[]),h(t.element.id+"_mapsTooltip")&&t.mapsTooltipModule.tooltipTargetID.indexOf("_MarkerIndex_")>-1&&a(t.element.id+"_mapsTooltip")),t.markerModule&&(t.markerModule.markerClick(n),t.markerModule.markerClusterClick(n)),t.bubbleModule&&t.bubbleModule.bubbleClick(n),f.cancel||t.notify("click",i),!f.cancel&&-1!==i.id.indexOf("shapeIndex")){var e=parseInt(i.id.split("_LayerIndex_")[1].split("_")[0],10),u=hf(s,t.layers[e].selectionSettings,t,"shapeSelected");u.cancel||!t.selectionModule||Object(r.isNullOrUndefined)(t.shapeSelected)?u.cancel&&t.selectionModule&&Object(r.isNullOrUndefined)(u.data)&&(p(i),t.selectionModule.removedSelectionList(i)):lt(t.selectionModule.selectionType+"selectionMap",t.selectionModule.selectionType+"selectionMapStyle",u)}}))},t.prototype.mouseEndOnMap=function(n){var t,i,u;return n.target.id,this.element.getBoundingClientRect(),n.target,-1!==n.type.indexOf("touch")?(this.isTouch=!0,t=(u=n).changedTouches[0].pageX,i=u.changedTouches[0].pageY,u.target):(this.isTouch="touch"===n.pointerType,t=n.pageX,i=n.pageY,n.target),this.isTouch&&(this.titleTooltip(n,t,i,!0),Object(r.isNullOrUndefined)(this.legendModule)||this.legendTooltip(n,n.pageX,n.pageY,!0)),this.notify(r.Browser.touchEndEvent,n),n.preventDefault(),!1},t.prototype.mouseDownOnMap=function(n){var i,t;this.mouseDownEvent={x:n.x,y:n.y};this.element.getBoundingClientRect();i=n.target;-1===i.id.indexOf("_ToolBar")&&(t=this.markerModule,(i.id.indexOf("shapeIndex")>-1||i.id.indexOf("Tile")>-1)&&t&&t.sameMarkerData.length>0&&(!this.zoomModule||this.zoomModule.isSingleClick)&&(ai(t.sameMarkerData,this,h(this.element.id+"_Markers_Group")),t.sameMarkerData=[]),t&&(t.markerClick(n),t.markerClusterClick(n)),this.bubbleModule&&this.bubbleModule.bubbleClick(n));this.notify(r.Browser.touchStartEvent,n)},t.prototype.mapsOnDoubleClick=function(n){var o,s;this.notify("dblclick",n);var t,i=n.target,f=i.id,e=0,r=null,u=null;-1===i.id.indexOf("_ToolBar")&&(-1===i.id.indexOf("_LayerIndex_")||this.isTileMap||this.mouseDownEvent.x!==n.clientX||this.mouseDownEvent.y!==n.clientY?this.isTileMap&&this.mouseDownEvent.x===n.clientX&&this.mouseDownEvent.y===n.clientY&&(r=(t=this.getTileGeoLocation(n)).latitude,u=t.longitude):(e=parseFloat(i.id.split("_LayerIndex_")[1].split("_")[0]),r=(t=this.getGeoLocation(e,n)).latitude,u=t.longitude),o={cancel:!1,name:"doubleClick",x:n.clientX,y:n.clientY,target:f,latitude:r,longitude:u,isShapeSelected:null},s={cancel:!1,name:"doubleClick",x:n.clientX,y:n.clientY,target:f,latitude:r,longitude:u,isShapeSelected:null},this.trigger("doubleClick",this.isBlazor?s:o))},t.prototype.mouseMoveOnMap=function(n){"touchmove"===n.type?n.target:n.target;this.markerModule&&(this.markerModule.markerMove(n),this.markerModule.markerClusterMouseMove(n));this.bubbleModule&&this.bubbleModule.bubbleMove(n);this.onMouseMove(n);this.notify(r.Browser.touchMoveEvent,n)},t.prototype.onMouseMove=function(n){return n.target,this.isTouch||(this.titleTooltip(n,n.pageX,n.pageY),Object(r.isNullOrUndefined)(this.legendModule)||this.legendTooltip(n,n.pageX,n.pageY,!0)),!1},t.prototype.legendTooltip=function(n,t,i,r){var s,c,e=n.target.id,o=this.legendModule.currentPage,u=n.target.id.split("_Index_")[1],l,f;for(o=this.legendModule.totalPages.length<=this.legendModule.currentPage?this.legendModule.totalPages.length-1:this.legendModule.currentPage<0?0:this.legendModule.currentPage,l=0!==this.legendModule.totalPages.length?this.legendModule.totalPages[o].Collection.length:this.legendModule.totalPages.length,f=0;f<l;f++)s=(c=this.legendModule.totalPages[o].Collection[f]).DisplayText,e=n.target.id,u=n.target.id.split("_Index_")[1],e===this.element.id+"_Legend_Text_Index_"+u&&n.target.textContent.indexOf("...")>-1&&c.idIndex===parseInt(u,10)&&yi(s,this.legendSettings.textStyle.size,t,i,this.element.offsetWidth,this.element.offsetHeight,this.element.id+"_EJ2_Legend_Text_Tooltip",h(this.element.id+"_Secondary_Element"),r);e!==this.element.id+"_Legend_Text_Index_"+u&&a(this.element.id+"_EJ2_Legend_Text_Tooltip")},t.prototype.titleTooltip=function(n,t,i,r){var u=n.target.id;u===this.element.id+"_LegendTitle"&&-1===n.target.textContent.indexOf("...")?yi(this.legendSettings.title.text,this.legendSettings.titleStyle.size,t,i,this.element.offsetWidth,this.element.offsetHeight,this.element.id+"_EJ2_LegendTitle_Tooltip",h(this.element.id+"_Secondary_Element"),r):a(this.element.id+"_EJ2_LegendTitle_Tooltip");u===this.element.id+"_Map_title"&&n.target.textContent.indexOf("...")>-1?yi(this.titleSettings.text,this.titleSettings.textStyle.size,t,i,this.element.offsetWidth,this.element.offsetHeight,this.element.id+"_EJ2_Title_Tooltip",h(this.element.id+"_Secondary_Element"),r):a(this.element.id+"_EJ2_Title_Tooltip")},t.prototype.mapsOnResize=function(){var n=this,t;return this.isResize=!0,t={name:"resize",previousSize:this.availableSize,currentSize:new g(0,0),maps:this.isBlazor?null:this},this.resizeTo&&clearTimeout(this.resizeTo),this.element.classList.contains("e-maps")&&(this.resizeTo=setTimeout(function(){n.unWireEVents();n.createSVG();n.refreshing=!0;n.wireEVents();t.currentSize=n.availableSize;n.trigger("resize",t);n.render()},500)),!1},t.prototype.zoomByPosition=function(n,t){var i,o=this.mapLayerPanel.calculateFactor(this.layersCollection[0]),u=this.mapAreaRect;if(!this.isTileMap&&this.zoomModule)if(Object(r.isNullOrUndefined)(n))i={x:u.width/2,y:u.height/2},this.zoomModule.performZooming(i,t,t>this.scale?"ZoomIn":"ZoomOut");else{i=w(n.latitude,n.longitude,o,this.layersCollection[0],this);var f=document.getElementById(this.element.id+"_Layer_Collections").getBoundingClientRect(),e=this.svgObject.getBoundingClientRect(),s=Math.abs(f.left-e.left)/this.scale,h=Math.abs(f.top-e.top)/this.scale,c=this.translatePoint.x+s,l=this.translatePoint.y+h;this.scale=t;this.translatePoint.x=((f.left<e.left?c:0)+u.width/2-i.x*t)/t;this.translatePoint.y=((f.top<e.top?l:0)+u.height/2-i.y*t)/t;this.zoomModule.applyTransform()}else this.zoomModule&&(this.tileZoomLevel=t,this.tileTranslatePoint=this.mapLayerPanel.panTileMap(this.availableSize.width,this.availableSize.height,{x:n.longitude,y:n.latitude}),this.mapLayerPanel.generateTiles(t,this.tileTranslatePoint,null,new gu(this)))},t.prototype.panByDirection=function(n,t){var i=0,r=0;switch(n){case"Left":i=-this.mapAreaRect.width/7;break;case"Right":i=this.mapAreaRect.width/7;break;case"Top":r=-this.mapAreaRect.height/7;break;case"Bottom":r=this.mapAreaRect.height/7}this.zoomModule&&this.zoomModule.panning(n,i,r,t)},t.prototype.addLayer=function(n){this.layers.push(new lu(this.layers[0],"layers",n));this.refresh()},t.prototype.removeLayer=function(n){this.layers.splice(n,1);this.refresh()},t.prototype.addMarker=function(n,t){var u=document.getElementById(this.element.id+"_LayerIndex_"+n),i,r,f;if(t.length>0&&u){for(i=0,r=t;i<r.length;i++)f=r[i],this.layersCollection[n].markerSettings.push(new cu(this,"markerSettings",f));new au(this).markerRender(u,n,this.mapLayerPanel.currentFactor,"AddMarker");this.arrangeTemplate()}},t.prototype.shapeSelection=function(n,t,i,u){var f,l=Array.isArray(t)?t:Array(t),e,s,v,b;if(Object(r.isNullOrUndefined)(u)&&(u=!0),e=this.layers[n].selectionSettings,!e.enableMultiSelect&&this.legendSelection&&u&&this.removeShapeSelection(),e.enable)for(var y=void 0,w=void 0,k=void 0,a=void 0,c=this.layers[n].shapeData.features,o=0;o<c.length;o++)for(s=0;s<l.length;s++)if((!Object(r.isNullOrUndefined)(c[o].properties[l[s]])&&isNaN(c[o].properties[l[s]])?c[o].properties[l[s]].toLowerCase():c[o].properties[l[s]])===(Object(r.isNullOrUndefined)(i)?i:i.toLowerCase()))if(v=ii(this.layers[n].dataSource,c[o].properties,this.layers[n].shapeDataPath,this.layers[n].shapePropertyPath,this.layers[n]),f=h(this.element.id+"_LayerIndex_"+n+"_shapeIndex_"+o+"_dataIndex_"+(Object(r.isNullOrUndefined)(v)?"undefined":v.toString())),Object(r.isNullOrUndefined)(v)&&Object(r.isNullOrUndefined)(f)&&(f=h(this.element.id+"_LayerIndex_"+n+"_shapeIndex_"+o+"_dataIndex_null")),w=parseInt(f.id.split("_shapeIndex_")[1].split("_")[0],10),k=this.layers[n].shapeData.features.length>w?this.layers[n].shapeData.features[w].properties:null,y=parseInt(f.id.split("_dataIndex_")[1].split("_")[0],10),a=Object(r.isNullOrUndefined)(y)?null:this.layers[n].dataSource[y],u){if(cf(e,this,f,k,a),this.shapeSelectionClass=h("ShapeselectionMap"),this.legendSettings.visible&&-1===f.id.indexOf("_MarkerIndex_")&&this.legendModule.shapeHighLightAndSelection(f,a,e,"selection",n),(!this.legendSettings.visible||this.legendModule.shapeToggled)&&(f.setAttribute("class","ShapeselectionMapStyle"),-1===this.selectedElementId.indexOf(f.getAttribute("id"))&&this.selectedElementId.push(f.getAttribute("id")),!e.enableMultiSelect))return}else(this.legendSelection=!e.enableMultiSelect&&!this.legendSelection||this.legendSelection,this.legendSettings.visible&&-1===f.id.indexOf("_MarkerIndex_")&&"ShapeselectionMapStyle"===f.getAttribute("class")&&this.legendModule.shapeHighLightAndSelection(f,a,e,"selection",n),!this.legendSettings.visible||this.legendModule.shapeToggled)&&(p(f),b=this.selectedElementId.indexOf(f.getAttribute("id")),-1!==b&&(this.selectedElementId.splice(b,1),!e.enableMultiSelect&&this.legendSelection&&this.selectedElementId.length>0&&this.removeShapeSelection()))},t.prototype.zoomToCoordinates=function(n,t,i,u){var o,s,f,e,h,c=!1;(Object(r.isNullOrUndefined)(i)&&Object(r.isNullOrUndefined)(u)||Object(r.isNullOrUndefined)(n)&&Object(r.isNullOrUndefined)(t))&&(n=Object(r.isNullOrUndefined)(n)?0:n,t=Object(r.isNullOrUndefined)(n)?0:t,i=Object(r.isNullOrUndefined)(i)?n:i,u=Object(r.isNullOrUndefined)(u)?t:u,c=!0);n>i&&(n=(o=[i,n])[0],i=o[1]);t>u&&(t=(s=[u,t])[0],u=s[1]);c?(f=n+i,e=t+u):(f=(n+i)/2,e=(t+u)/2);this.centerLatOfGivenLocation=f;this.centerLongOfGivenLocation=e;this.minLatOfGivenLocation=n;this.minLongOfGivenLocation=t;this.maxLatOfGivenLocation=i;this.maxLongOfGivenLocation=u;this.zoomNotApplied=!0;this.scaleOfGivenLocation=ou(n,i,t,u,this.mapAreaRect.width,this.mapAreaRect.height,this);h={cancel:!1,name:"zoom",type:"zoomIn",maps:this.isBlazor?null:this,tileTranslatePoint:{},translatePoint:{},tileZoomLevel:this.isTileMap?{previous:this.tileZoomLevel,current:this.scaleOfGivenLocation}:{},scale:this.isTileMap?{previous:this.tileZoomLevel,current:this.scaleOfGivenLocation}:{previous:this.scale,current:this.scaleOfGivenLocation}};this.trigger("zoom",h);this.refresh()},t.prototype.removeShapeSelection=function(){for(var i,t=this.selectedElementId.length,n=0;n<t;n++)p(e(this.selectedElementId[0])),this.selectedElementId.splice(0,1);if(this.legendSettings.visible)for(i=this.legendSelectionCollection.length,n=0;n<i;n++)p(e(this.legendSelectionCollection[n].legendElement.id)),this.selectedLegendElementId.splice(0,1);this.shapeSelectionItem=[];this.legendSelectionCollection=[]},t.prototype.setCulture=function(){this.intl=new r.Internationalization;this.setLocaleConstants();this.localeObject=new r.L10n(this.getModuleName(),this.defaultLocalConstants,this.locale)},t.prototype.setLocaleConstants=function(){this.defaultLocalConstants={ZoomIn:"Zoom in",Zoom:"Zoom",ZoomOut:"Zoom out",Pan:"Pan",Reset:"Reset"}},t.prototype.destroy=function(){this.unWireEVents();this.shapeSelectionItem=[];this.toggledShapeElementId=[];this.toggledLegendId=[];this.legendSelectionCollection=[];this.selectedLegendElementId=[];this.selectedNavigationElementId=[];this.selectedBubbleElementId=[];this.selectedMarkerElementId=[];this.selectedElementId=[];this.dataLabelShape=[];this.zoomShapeCollection=[];this.zoomLabelPositions=[];this.mouseDownEvent={x:null,y:null};this.mouseClickEvent={x:null,y:null};document.getElementById("mapsmeasuretext")&&document.getElementById("mapsmeasuretext").remove();this.removeSvg();n.prototype.destroy.call(this)},t.prototype.getModuleName=function(){return"maps"},t.prototype.getPersistData=function(){return this.addOnPersist(["translatePoint","zoomSettings","mapScaleValue","tileTranslatePoint","baseTranslatePoint","scale","zoomPersistence","defaultState","markerZoomedState","initialCheck","initialZoomLevel","initialTileTranslate","applyZoomReset","markerZoomFactor"])},t.prototype.onPropertyChanged=function(t){var c=!1,l=!1,v=!1,y,u,e,o,p,i,f,s,h;for(t.layers&&(y=Object.keys(t.layers).length,document.getElementById(this.element.id+"_LayerIndex_"+(y-1))),u=0,e=Object.keys(t);u<e.length;u++){o=e[u];switch(o){case"background":this.renderBorder();break;case"height":case"width":case"layers":case"projectionType":case"centerPosition":case"legendSettings":case"zoomSettings":case"baseLayerIndex":if("layers"===o)for(p=Object.keys(t.layers).length,i=0;i<p;i++)if(!Object(r.isNullOrUndefined)(t.layers[i]))for(f=0,s=Object.keys(t.layers[i]);f<s.length;f++)h=s[f],"markerSettings"===h?l=!0:"staticMapType"===h&&(v=!0);c=!0;break;case"locale":case"currencyCode":n.prototype.refresh.call(this)}}c&&(t.layers&&l?(a(this.element.id+"_Markers_Group"),this.isTileMap?this.isBlazor?this.render():this.mapLayerPanel.renderTileLayer(this.mapLayerPanel,this.layers.currentFactor,this.layers.length-1):this.render()):t.layers&&v?this.mapLayerPanel.renderGoogleMap(this.layers[this.layers.length-1].key,this.staticMapZoom):(this.createSVG(),this.render()))},t.prototype.requiredModules=function(){var n=[],t=this.findVisibleLayers(this.layers),i=!1;return this.annotations.map(function(n){i=null!=n.content}),this.isBubbleVisible()&&n.push({member:"Bubble",args:[this]}),t.highlight&&n.push({member:"Highlight",args:[this]}),t.selection&&n.push({member:"Selection",args:[this]}),this.legendSettings.visible&&n.push({member:"Legend",args:[this]}),(this.zoomSettings.enable||this.zoomSettings.zoomFactor>this.zoomSettings.minZoom)&&n.push({member:"Zoom",args:[this]}),this.isMarkersVisible()&&n.push({member:"Marker",args:[this]}),this.isDataLabelVisible()&&n.push({member:"DataLabel",args:[this]}),this.isNavigationVisible()&&n.push({member:"NavigationLine",args:[this]}),t.tooltip&&n.push({member:"MapsTooltip",args:[this]}),i&&n.push({member:"Annotations",args:[this,rf]}),this.allowPrint&&n.push({member:"Print",args:[this]}),this.allowImageExport&&n.push({member:"ImageExport",args:[this]}),this.allowPdfExport&&n.push({member:"PdfExport",args:[this]}),n},t.prototype.isMarkersVisible=function(){var n=!1;return Array.prototype.forEach.call(this.layers,function(t){for(var i=0;i<t.markerSettings.length;i++)if(t.markerSettings[i].visible){n=!0;break}}),n},t.prototype.isDataLabelVisible=function(){for(var t=!1,n=0;n<this.layers.length;n++)if(this.layers[n].dataLabelSettings.visible){t=!0;break}return t},t.prototype.isNavigationVisible=function(){var n=!1;return Array.prototype.forEach.call(this.layers,function(t){for(var i=0;i<t.navigationLineSettings.length;i++)if(t.navigationLineSettings[i].visible){n=!0;break}}),n},t.prototype.isBubbleVisible=function(){for(var r,t=!1,n=0,i=this.layers;n<i.length;n++)if(r=i[n],this.getBubbleVisible(r)){t=!0;break}return t},t.prototype.getBubbleVisible=function(n){for(var i=!1,t=0,r=n.bubbleSettings;t<r.length;t++)if(r[t].visible){i=!0;break}return i},t.prototype.print=function(n){this.allowPrint&&this.printModule&&this.printModule.print(n)},t.prototype.export=function(n,t,i,u){var f=this;return Object(r.isNullOrUndefined)(u)&&(u=!0),"PDF"!==n&&this.allowImageExport&&this.imageExportModule?new Promise(function(i){i(f.imageExportModule.export(n,t,u))}):this.allowPdfExport&&this.pdfExportModule?new Promise(function(r){r(f.pdfExportModule.export(n,t,u,i))}):null},t.prototype.findVisibleLayers=function(n,t,i,r,u,f){var k,d,h,y,e,c,p,l,a,w,o,v,b,s;for(void 0===t&&(t=!1),void 0===i&&(i=!1),void 0===r&&(r=!1),void 0===u&&(u=!1),void 0===f&&(f=!1),h=0,y=n;h<y.length;h++){if(e=y[h],t=e.visible||t,e.visible){for(k=e.bubbleSettings,d=e.markerSettings,c=0,p=e.navigationLineSettings;c<p.length;c++)l=p[c],l.visible&&(u=l.highlightSettings.enable||u,f=l.selectionSettings.enable||f);for(a=0,w=d;a<w.length;a++)if(o=w[a],o.visible&&(r=o.tooltipSettings.visible||r,u=o.selectionSettings.enable||u,f=o.highlightSettings.enable||f),r)break;for(v=0,b=k;v<b.length;v++)if(s=b[v],s.visible&&(r=s.tooltipSettings.visible||r,u=s.selectionSettings.enable||u,f=s.highlightSettings.enable||f),r)break;r=e.tooltipSettings.visible||r;u=e.selectionSettings.enable||u;f=e.highlightSettings.enable||f}if(t&&i&&r)break}return{layer:t,bubble:i,tooltip:r,selection:u,highlight:f}},t.prototype.getGeoLocation=function(n,t){var r=document.getElementById(this.element.id),f=t.layerX-r.offsetLeft,e=t.layerY-r.offsetTop,u=et(this,this.layersCollection[n],!1).location,o=u.x*this.scale,s=u.y*this.scale,i=Math.min(this.mapAreaRect.height,this.mapAreaRect.width)*this.mapLayerPanel.currentFactor*this.scale,h=this.clip(f-o,0,i-1)/i-.5,c=.5-this.clip(e-s,0,i-1)/i;return{latitude:90-360*Math.atan(Math.exp(2*-c*Math.PI))/Math.PI,longitude:360*h}},t.prototype.clip=function(n,t,i){return Math.min(Math.max(n,t),i)},t.prototype.getTileGeoLocation=function(n){var t,i=document.getElementById(this.element.id),r=document.getElementById(this.element.id+"_tile_parent");return{latitude:(t=this.pointToLatLong(n.layerX+this.mapAreaRect.x-(r.offsetLeft-i.offsetLeft),n.layerY+this.mapAreaRect.y-(r.offsetTop-i.offsetTop))).latitude,longitude:t.longitude}},t.prototype.pointToLatLong=function(n,t){var r="GoogleStaticMap"===this.layers[this.layers.length-1].layerType?0:10;t=this.zoomSettings.enable?t+r:t;var i=256*Math.pow(2,this.tileZoomLevel),u=this.clip(n-this.translatePoint.x*this.scale,0,i-1)/i-.5,f=.5-this.clip(t-this.translatePoint.y*this.scale,0,i-1)/i;return{latitude:90-360*Math.atan(Math.exp(2*-f*Math.PI))/Math.PI,longitude:360*u}},f([Object(r.Property)(null)],t.prototype,"background",void 0),f([Object(r.Property)(!1)],t.prototype,"useGroupingSeparator",void 0),f([Object(r.Property)(null)],t.prototype,"format",void 0),f([Object(r.Property)(null)],t.prototype,"width",void 0),f([Object(r.Property)(null)],t.prototype,"height",void 0),f([Object(r.Property)("MouseMove")],t.prototype,"tooltipDisplayMode",void 0),f([Object(r.Property)(!1)],t.prototype,"allowPrint",void 0),f([Object(r.Property)(!1)],t.prototype,"allowImageExport",void 0),f([Object(r.Property)(!1)],t.prototype,"allowPdfExport",void 0),f([Object(r.Complex)({},ue)],t.prototype,"titleSettings",void 0),f([Object(r.Complex)({},fe)],t.prototype,"zoomSettings",void 0),f([Object(r.Complex)({},ee)],t.prototype,"legendSettings",void 0),f([Object(r.Collection)([],lu)],t.prototype,"layers",void 0),f([Object(r.Collection)([],yf)],t.prototype,"annotations",void 0),f([Object(r.Complex)({},bf)],t.prototype,"margin",void 0),f([Object(r.Complex)({color:"#DDDDDD",width:0},nt)],t.prototype,"border",void 0),f([Object(r.Property)("Material")],t.prototype,"theme",void 0),f([Object(r.Property)("Mercator")],t.prototype,"projectionType",void 0),f([Object(r.Property)(0)],t.prototype,"baseLayerIndex",void 0),f([Object(r.Property)(null)],t.prototype,"description",void 0),f([Object(r.Property)(1)],t.prototype,"tabIndex",void 0),f([Object(r.Complex)({latitude:null,longitude:null},wf)],t.prototype,"centerPosition",void 0),f([Object(r.Complex)({},ce)],t.prototype,"mapsArea",void 0),f([Object(r.Event)()],t.prototype,"load",void 0),f([Object(r.Event)()],t.prototype,"beforePrint",void 0),f([Object(r.Event)()],t.prototype,"loaded",void 0),f([Object(r.Event)()],t.prototype,"click",void 0),f([Object(r.Event)()],t.prototype,"doubleClick",void 0),f([Object(r.Event)()],t.prototype,"rightClick",void 0),f([Object(r.Event)()],t.prototype,"resize",void 0),f([Object(r.Event)()],t.prototype,"tooltipRender",void 0),f([Object(r.Event)()],t.prototype,"legendRendering",void 0),f([Object(r.Event)()],t.prototype,"tooltipRenderComplete",void 0),f([Object(r.Event)()],t.prototype,"shapeSelected",void 0),f([Object(r.Event)()],t.prototype,"itemSelection",void 0),f([Object(r.Event)()],t.prototype,"itemHighlight",void 0),f([Object(r.Event)()],t.prototype,"shapeHighlight",void 0),f([Object(r.Event)()],t.prototype,"layerRendering",void 0),f([Object(r.Event)()],t.prototype,"shapeRendering",void 0),f([Object(r.Event)()],t.prototype,"markerRendering",void 0),f([Object(r.Event)()],t.prototype,"markerClusterRendering",void 0),f([Object(r.Event)()],t.prototype,"markerClick",void 0),f([Object(r.Event)()],t.prototype,"markerClusterClick",void 0),f([Object(r.Event)()],t.prototype,"markerClusterMouseMove",void 0),f([Object(r.Event)()],t.prototype,"markerMouseMove",void 0),f([Object(r.Event)()],t.prototype,"dataLabelRendering",void 0),f([Object(r.Event)()],t.prototype,"bubbleRendering",void 0),f([Object(r.Event)()],t.prototype,"bubbleClick",void 0),f([Object(r.Event)()],t.prototype,"bubbleMouseMove",void 0),f([Object(r.Event)()],t.prototype,"animationComplete",void 0),f([Object(r.Event)()],t.prototype,"annotationRendering",void 0),f([Object(r.Event)()],t.prototype,"zoom",void 0),f([Object(r.Event)()],t.prototype,"pan",void 0),t=f([r.NotifyPropertyChanges],t)}(r.Component),di=function(n,t){var u={},i,r;for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(u[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&(u[i[r]]=n[i[r]]);return u},ye=function(){function n(n){this.id="";this.maps=n;this.bubbleCollection=[]}return n.prototype.renderBubble=function(n,t,i,u,f,e,o,h,c,l){var vt,yt,p=this,nt=h.layerData,b=n.colorValuePath,ii=Object(r.isNullOrUndefined)(b)?t[b]:b.indexOf(".")>-1?s(t,n.colorValuePath):t[b],ui=Object(r.isNullOrUndefined)(b)?Number(t[b]):b.indexOf(".")>-1?Number(s(t,n.colorValuePath)):Number(t[b]),fi=Object(r.isNullOrUndefined)(n.valuePath)?Number(t[n.valuePath]):n.valuePath.indexOf(".")>-1?Number(s(t,n.valuePath)):Number(t[n.valuePath]),it,pt,ei,st,wt,kt,w,tt,v,g,ut,gt,at,oi,a,si,ft,ot,hi;if(isNaN(fi)&&isNaN(ui)&&Object(r.isNullOrUndefined)(ii))return null;w=(it=n.minRadius,pt=n.maxRadius,ei=fi,st=u.min,wt=u.max,kt=(pt-it)/100*100/(wt-st)*(ei-st)+it,wt===st&&(kt=(pt-it)/100+it),kt);tt=new nf(this.maps).getColorByValue(n.colorMapping,ui,ii);yt="[object Object]"!==Object.prototype.toString.call(tt)||Object(r.isNullOrUndefined)(tt.fill)?i:tt.fill;vt="[object Object]"!==Object.prototype.toString.call(tt)||Object(r.isNullOrUndefined)(tt.opacity)?n.opacity:tt.opacity;v=[[]];this.maps.translateType="bubble";for(var dt=0,ht=0,lt=0,k=0,ci=nt.length;k<ci;k++)if(g=nt[k],g=g.property,ut=ri(t[h.shapeDataPath],h.shapePropertyPath,g),(!Object(r.isNullOrUndefined)(t[h.shapeDataPath])&&isNaN(t[h.shapeDataPath])?t[h.shapeDataPath].toLowerCase():t[h.shapeDataPath])===(!Object(r.isNullOrUndefined)(g[ut])&&isNaN(g[ut])?g[ut].toLowerCase():g[ut]))if("Point"===nt[k].type)v.push(this.getPoints(nt[k],[]));else if(nt[k]._isMultiPolygon)for(gt=nt[k],at=0;at<gt.length;at++)v.push(this.getPoints(gt[at],[])),ht<(lt=v[v.length-1].length)&&(ht=lt,dt=v.length-1);else v.push(this.getPoints(nt[k],[])),ht<(lt=v[v.length-1].length)&&(ht=lt,dt=v.length-1);if(si=this.maps.projectionType,ft=vi(v[dt],si),n.visible){if(Object(r.isNullOrUndefined)(ft)){if(ot=v.length-1,!v[ot].x||!v[ot].y)return;(a={cancel:!1,name:"bubbleRendering",border:n.border,cx:v[ot].x,cy:v[ot].y,data:t,fill:yt,maps:this.maps.isBlazor?null:this.maps,radius:w},this.maps.isBlazor)&&(a.maps,hi=di(a,["maps"]),a=hi)}else oi="Mercator"===this.maps.projectionType?ft.y:-ft.y,a={cancel:!1,name:"bubbleRendering",border:n.border,cx:ft.x,cy:oi,data:t,fill:yt,maps:this.maps.isBlazor?null:this.maps,radius:w};this.maps.trigger("bubbleRendering",a,function(){var t,u,v,b,k,s,tt;if(!a.cancel){"Circle"===n.bubbleType?(v=new bt(l,a.fill,a.border,vt,0,0,a.radius,null),t=function(n,t,i){return ti(n.renderer.drawCircle(t),i)}(p.maps,v,c)):(b="Mercator"===p.maps.projectionType?a.cy-w:a.cy+w,k=new d(l,a.fill,a.border,vt,new y(0,0,2*w,2*w),2,2),a.cx-=w,a.cy=b,t=function(n,t,i){return ti(n.renderer.drawRectangle(t),i)}(p.maps,k,c));ni(p.maps.selectedBubbleElementId,p.maps.bubbleSelectionClass,t,"BubbleselectionMapStyle");p.bubbleCollection.push({LayerIndex:o,BubbleIndex:f,DataIndex:e,element:t,center:{x:a.cx,y:a.cy}});s=0!==h.animationDuration||Object(r.isNullOrUndefined)(p.maps.zoomModule);u=p.maps.zoomSettings.zoomFactor>1&&!Object(r.isNullOrUndefined)(p.maps.zoomModule)?ct(p.maps,h,s):et(p.maps,h,s);var it=n.dataSource,g=u.scale,nt=u.location,i=new rt(p.maps.isTileMap?a.cx:(a.cx+nt.x)*g,p.maps.isTileMap?a.cy:(a.cy+nt.y)*g);t.setAttribute("transform","translate( "+i.x+" "+i.y+" )");tt=it.length-1===e?"bubble":null;"Square"===n.bubbleType?(i.x+=w,i.y+=w*("Mercator"===p.maps.projectionType?1:-1)):w=0;n.animationDuration>0&&wr(t,n.animationDelay,n.animationDuration,i,p.maps,tt,w)}})}},n.prototype.getPoints=function(n,t){return Object(r.isNullOrUndefined)(n.map)?t=n.point:n.map(function(n){t.push(new o(n.point.x,n.point.y))}),t},n.prototype.bubbleClick=function(n){var i=n.target.id,u,t;-1!==i.indexOf("_LayerIndex_")&&(u=this.getbubble(i),Object(r.isNullOrUndefined)(u)||(t={cancel:!1,name:"bubbleClick",data:u,maps:this.maps,target:i,x:n.clientX,y:n.clientY},this.maps.isBlazor&&(t.maps,t=di(t,["maps"])),this.maps.trigger("bubbleClick",t)))},n.prototype.getbubble=function(n){var t=n.split("_LayerIndex_"),u=parseInt(t[1].split("_")[0],10),f=this.maps.layers[u],i,r;return n.indexOf("_BubbleIndex_")>-1&&(i=parseInt(t[1].split("_BubbleIndex_")[1],10),r=parseInt(t[1].split("_BubbleIndex_")[1].split("_dataIndex_")[1],10),!isNaN(i))?f.bubbleSettings[i].dataSource[r]:null},n.prototype.bubbleMove=function(n){var i=n.target.id,u,t;-1!==i.indexOf("_LayerIndex_")&&(u=this.getbubble(i),Object(r.isNullOrUndefined)(u)||(t={cancel:!1,name:"bubbleMouseMove",data:u,maps:this.maps,target:i,x:n.clientX,y:n.clientY},this.maps.isBlazor&&(t.maps,t=di(t,["maps"])),this.maps.trigger("bubbleMouseMove",t)))},n.prototype.getModuleName=function(){return"Bubble"},n.prototype.destroy=function(){},n}(),pe=function(n,t){var u={},i,r;for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(u[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&(u[i[r]]=n[i[r]]);return u},we=function(){function n(n){this.value={rightWidth:0,leftWidth:0,heightTop:0,heightBottom:0};this.maps=n;this.dataLabelCollections=[]}return n.prototype.getDataLabel=function(n,t,i,u){for(var o,s,f,e=0;e<n.length;e++)if(f=n[e],s=!Object(r.isNullOrUndefined)(f[u])&&isNaN(f[u])?f[u].toLowerCase():f[u],i=Object(r.isNullOrUndefined)(i)?i:i.toString(),s===(Object(r.isNullOrUndefined)(i)?i:i.toLowerCase())){o=f;break}return o},n.prototype.renderLabel=function(n,t,i,u,f,e,s,h){var ii,ot,bt,k,ri,l,fi,ai,c=this,kt=n.dataLabelSettings,nt=n.dataLabelSettings.textStyle,ut=n.dataLabelSettings,ei=n.dataLabelSettings.labelPath,p=[[]],ht=0,vt=0,rt=i,a="",yt=0,oi=!1,nr=i.properties,at=this.maps.element.id+"_LayerIndex_"+t+"_shapeIndex_"+s+"_LabelIndex_"+s,g=new o(0,0),yi=u[s],ft,ti,li,dt,gt,w,gi;nt.fontFamily="material"!==this.maps.theme.toLowerCase()?this.maps.themeStyle.labelFontFamily:nt.fontFamily;i=yi.property;var si,pi,hi="[object Array]"===Object.prototype.toString.call(n.shapePropertyPath)?n.shapePropertyPath:[n.shapePropertyPath],ci=!1,wi=0!==n.animationDuration||Object(r.isNullOrUndefined)(this.maps.zoomModule),bi=this.maps.isTileMap?{}:this.maps.zoomSettings.zoomFactor>1&&!Object(r.isNullOrUndefined)(this.maps.zoomModule)?ct(this.maps,n,wi):et(this.maps,n,wi),b=this.maps.isTileMap?this.maps.scale:bi.scale,lt=this.maps.isTileMap?this.maps.translatePoint:bi.location,ni=this.maps.zoomTranslatePoint,pt=Object(r.isNullOrUndefined)(this.maps.scale)?1:Math.floor(this.maps.scale),wt=this.maps.zoomSettings.enable?!Object(r.isNullOrUndefined)(this.maps.zoomShapeCollection)&&this.maps.zoomShapeCollection.length>0:this.maps.zoomSettings.enable;for(this.maps.translateType="labels",ft=0;ft<hi.length&&!(nr[hi[ft]]&&(si=hi[ft],k=this.getDataLabel(n.dataSource,n.shapeDataPath,rt.properties[si],n.shapeDataPath)));ft++);if(k=this.getDataLabel(n.dataSource,n.shapeDataPath,rt.properties[si],n.shapeDataPath),!Object(r.isNullOrUndefined)(yi.property))if(p=[[]],u[s]._isMultiPolygon||"Point"===u[s].type)for(ti=u[s],"Point"===ti.type&&(ci=!0,li=[],li.push(this.getPoint(u,[])),vt<(yt=(p=li)[p.length-1].length)&&(vt=yt,ht=p.length-1)),ft=0;ft<ti.length;ft++)p.push(this.getPoint(ti[ft],[])),vt<(yt=p[p.length-1].length)&&(vt=yt,ht=p.length-1);else p.push(this.getPoint(u[s],[])),vt<(yt=p[p.length-1].length)&&(vt=yt,ht=p.length-1);if(a=Object(r.isNullOrUndefined)(k)?rt.properties[ei]:Object(r.isNullOrUndefined)(k[ei])?k[n.shapeDataPath]:k[n.shapeDataPath].toString(),"[object Array]"===Object.prototype.toString.call(n.shapePropertyPath)&&Object(r.isNullOrUndefined)(a)&&0===n.dataSource.length)for(dt=0;dt<n.shapePropertyPath.length;dt++)if(rt.properties[n.shapePropertyPath[dt]]){a=rt.properties[n.shapePropertyPath[dt]];break}Object(r.isNullOrUndefined)(a)&&""!==n.dataLabelSettings.template&&0===n.dataSource.length&&(a=rt.properties[n.shapePropertyPath]);var tr=a,ki=this.maps.projectionType,di=l=ci?{x:p[ht][s].x,y:p[ht][s].y,rightMin:0,rightMax:0,leftMin:0,leftMax:0,points:p[ht][s],topMax:0,topMin:0,bottomMax:0,bottomMin:0,height:0}:vi(p[ht],ki);if(!Object(r.isNullOrUndefined)(a)&&!Object(r.isNullOrUndefined)(l)){if(wt&&pt>1&&!this.maps.zoomNotApplied&&""===kt.template){if(t>0)for(gt=0;gt<this.maps.zoomLabelPositions.length;gt++)if(this.maps.zoomLabelPositions[gt].dataLabelText===a){ri=s;s=gt;oi=!0;break}fi=l.x;ai=l.y;l.x=(l.x+ni.x)*b;l.y=(l.y+ni.y)*b}l.y="Mercator"===this.maps.projectionType?l.y:-l.y;l;Object(r.isNullOrUndefined)(this.maps.format)||isNaN(parseFloat(a))||this.maps.useGroupingSeparator&&(a=yr(this.maps,parseFloat(a)),Object(r.isNullOrUndefined)(k)||(k[ei]=a));w={name:"dataLabelRendering",maps:this.maps,cancel:!1,border:kt.border,datalabel:kt,fill:kt.fill,template:kt.template,text:a};this.maps.isBlazor&&(w.maps,w.datalabel,gi=pe(w,["maps","datalabel"]),w=gi);this.maps.trigger("dataLabelRendering",w,function(){var vt,ft,et,ct,ei,si,kt,o,i,dt,hi,li;if(!w.cancel){ft=wt&&pt>1&&!c.maps.zoomNotApplied&&c.maps.zoomShapeCollection.length>s?c.maps.zoomShapeCollection[s].width:(l.rightMax.x-l.leftMax.x)*b;Object(r.isNullOrUndefined)(c.maps.dataLabelShape)||(pi=di.rightMax.x-di.leftMax.x,c.maps.dataLabelShape.push(pi));w.text===a||w.cancel||(a=w.text);var n=v(a,nt),u=a,yt=n,yi=l.y-n.height/4,wi=l.y+n.height/4,bi=(l.y+lt.y)*b-n.height/4,gi=(l.y+lt.y)*b+n.height/4;if((vt=function(n,t,i){for(var u,f=[],r=0;r<n.length;r++)u=n[r],t<=u.y&&i>=u.y&&f.push(u);return f}(p[ht],yi,wi),!ci&&vt.length>5&&"MultiPolygon"!==rt.geometry.type&&"MultiPolygon"!==rt.type)&&(et=vi(vt,ki),wt&&pt>1&&!c.maps.zoomNotApplied&&""===w.template&&(et.x=(c.maps.zoomLabelPositions[s].location.x+ni.x)*b,et.y=(c.maps.zoomLabelPositions[s].location.y+ni.y)*b),fi=et.x,l.x=et.x,ft=wt&&pt>1&&!c.maps.zoomNotApplied&&c.maps.zoomShapeCollection.length>s?c.maps.zoomShapeCollection[s].width:(et.rightMax.x-et.leftMax.x)*b),ei=(l.x+lt.x)*b+n.width/2,si=(l.x+lt.x)*b-n.width/2,c.value[s]={rightWidth:ei,leftWidth:si,heightTop:bi,heightBottom:gi},""!==w.template)kt=(ii=ui(w.template))?ii(Object(r.isNullOrUndefined)(k)?rt.properties:k,c.maps,w.template,c.maps.element.id+"_LabelTemplate",!1):document.createElement("div"),kt.innerHTML=ii?"":w.template,(ct=function(n,t,i){for(var f=(Object(r.isNullOrUndefined)(n.childElementCount)?n[0]:n).outerHTML,e=Object.keys(i),u=0;u<e.length;u++)f=f.replace(new RegExp("{{:"+e[u]+"}}","g"),i[e[u].toString()]);return Object(r.createElement)("div",{id:t,innerHTML:f,styles:"position: absolute"})}(kt,at,Object(r.isNullOrUndefined)(k)?rt.properties:k,0,c.maps)).style.left=Math.abs(c.maps.baseMapRectBounds.min.x-l.x)*b+"px",ct.style.top=Math.abs(c.maps.baseMapRectBounds.min.y-l.y)*b+"px",e.appendChild(ct);else{if("Trim"===ut.smartLabelMode&&(yt=v(u=tt(ft,a,nt),nt),ot=new it(at,g.x,g.y,"middle",u,"","")),"None"===ut.smartLabelMode&&(ot=new it(at,g.x,g.y,"middle",a,"","")),"Hide"===ut.smartLabelMode&&(a=ft>=n.width?a:"",ot=new it(at,g.x,g.y,"middle",a,"","")),a=ot.text,"Hide"===ut.intersectionAction){for(o=0;o<h.length;o++)if(!Object(r.isNullOrUndefined)(h[o])){if(!(c.value[s].leftWidth>h[o].rightWidth||c.value[s].rightWidth<h[o].leftWidth||c.value[s].heightTop>h[o].heightBottom||c.value[s].heightBottom<h[o].heightTop)){a="";break}a=a}h.push(c.value[s]);ot=new it(at,g.x,g.y,"middle",a,"","")}if("Trim"===ut.intersectionAction){for(i=0;i<h.length;i++)if(!Object(r.isNullOrUndefined)(h[i]))if(h[i].rightWidth<c.value[s].leftWidth||h[i].leftWidth>c.value[s].rightWidth||h[i].heightBottom<c.value[s].heightTop||h[i].heightTop>c.value[s].heightBottom)u=a,0;else{if(c.value[s].leftWidth>h[i].leftWidth){u=tt((ft=h[i].rightWidth-c.value[s].leftWidth)-(c.value[s].rightWidth-c.value[s].leftWidth),a,nt);break}if(c.value[s].leftWidth<h[i].leftWidth){ft=c.value[s].rightWidth-h[i].leftWidth;u=tt(Math.abs(ft-(c.value[s].rightWidth-c.value[s].leftWidth)),a,nt);break}}yt=v(u,nt);h.push(c.value[s]);ot=new it(at,g.x,g.y,"middle",u,"","")}if(("None"===ut.intersectionAction&&(ot=new it(at,g.x,g.y,"middle",a,"","")),u.length>1)&&(dt=w.border,dt.width>1)){var nr=w.fill,ir=ut.opacity,rr=ut.rx,ur=ut.ry,gt=void 0,ti=void 0;wt&&pt>1&&!c.maps.zoomNotApplied?(gt=l.x-n.width/2,ti=l.y-n.height/2-5):(gt=(l.x+lt.x)*b-n.width/2,ti=(l.y+lt.y)*b-n.height/2);hi=new d(c.maps.element.id+"_LayerIndex_"+t+"_shapeIndex_"+s+"_rectIndex_"+s,nr,dt,ir,new y(gt,ti,n.width,n.height),rr,ur);li=c.maps.renderer.drawRectangle(hi);f.appendChild(li)}bt=st(ot,nt,nt.color||c.maps.themeStyle.dataLabelFontColor,f);wt&&pt>1&&!c.maps.zoomNotApplied?(bt.setAttribute("transform","translate( "+l.x+" "+l.y+" )"),l.x=fi,l.y=ai):bt.setAttribute("transform","translate( "+(l.x+lt.x)*b+" "+((l.y+lt.y)*b+yt.height/4)+" )");f.appendChild(bt)}c.dataLabelCollections.push({location:{x:l.x,y:l.y},element:Object(r.isNullOrUndefined)(ct)?bt:ct,layerIndex:t,shapeIndex:oi?ri:s,labelIndex:oi?ri:s,dataLabelText:tr});e.childElementCount>0&&!c.maps.element.contains(e)&&(document.getElementById(c.maps.element.id+"_Secondary_Element").appendChild(e),c.maps.renderReactTemplates())}})}},n.prototype.getPoint=function(n,t){return n.map(function(n){t.push(new o(n.point.x,n.point.y))}),t},n.prototype.getModuleName=function(){return"DataLabel"},n.prototype.destroy=function(){},n}(),be=function(){function n(n){this.maps=n}return n.prototype.renderNavigation=function(n,t,i){var a,h,p,v,kt,u,dt,nt,tt,gt,it,l;h=n.navigationLineSettings;for(var rt,lt,e,ot,st,ht,ut,k,at,vt,d,c,g,yt,pt,y,ct,et,wt,f=[],bt=this.maps.renderer.createGroup({id:this.maps.element.id+"_LayerIndex_"+i+"_line_Group"}),s=0;s<h.length;s++){if(rt=h[s].properties.latitude,p=h[s].properties.longitude,lt=h[s].properties.visible,e=h[s].angle,ot=h[s].width||1,st=h[s].color,ht=h[s].properties.dashArray,c=h[s].properties.arrowSettings,at=!Object(r.isNullOrUndefined)(c)&&c.properties.showArrow,p.length===rt.length&&lt)for(v=0;v<p.length;v++)kt=this.maps.isTileMap?ft(new o(p[v],rt[v]),t,this.maps.tileTranslatePoint,!0):w(rt[v],p[v],t,n,this.maps),f.push(kt);for(et=this.maps.renderer.createGroup({id:this.maps.element.id+"_LayerIndex_"+i+"_NavigationGroup"+s}),u=0;u<f.length-1;u++)e=1<(e=-1>e?-1:e)?1:e,dt=this.maps.element.id+"_LayerIndex_"+i+"_NavigationIndex_"+s+"_Line"+u,nt=this.convertRadius(f[u],f[u+1]),(e<=1&&e>0&&(k=0,f[u].x>f[u+1].x&&(k=1)),e>=-1&&e<0&&(k=1,f[u].x>f[u+1].x&&(k=0)),f[u].x!==f[u+1].x)&&(at&&(vt=c.properties.color,d=c.properties.size,ct=void 0===c.properties.offSet?0:c.properties.offSet,tt=Math.round(d/2),yt="Start"===(g=c.properties.position)?"url(#triangle"+s+")":null,pt="End"===g?"url(#triangle"+s+")":null,0!==y&&0===e&&(y="Start"===g?ct:-ct),y=Object(r.isNullOrUndefined)(y)?0:y,gt=this.maps.element.id+"_triangle",it=this.maps.renderer.createDefs(),it.innerHTML+='<marker id="triangle'+s+'"><\/marker>',l=it.querySelector("#triangle"+s),l.setAttribute("markerWidth",d.toString()),l.setAttribute("markerHeight",d.toString()),l.setAttribute("refX",(tt-y).toString()),l.setAttribute("refY",tt.toString()),l.setAttribute("orient","auto"),ut=new b(gt,vt,ot,st,1,ht,"M 0,0  L 0,"+d+" L "+tt+", "+tt+" Z"),a=this.maps.renderer.drawPath(ut),l.appendChild(a),it.appendChild(l),et.appendChild(it)),wt=0===(e=Math.abs(e))?"M "+f[u].x+","+f[u].y+"L "+f[u+1].x+","+f[u+1].y+" ":"M "+f[u].x+","+f[u].y+" A "+(nt/2+(1-e)*nt/(10*e))+" "+(nt/2+(1-e)*nt/(10*e))+" 0,0,"+k+" , "+f[u+1].x+","+f[u+1].y+" ",ut=new b(dt,"none",ot,st,1,ht,wt),a=this.maps.renderer.drawPath(ut),Object(r.isNullOrUndefined)(g)||("Start"===g?a.setAttribute("marker-start",yt):a.setAttribute("marker-end",pt)),ni(this.maps.selectedNavigationElementId,this.maps.navigationSelectionClass,a,"navigationlineselectionMapStyle"),et.appendChild(a),bt.appendChild(et));f=[]}return bt},n.prototype.convertRadius=function(n,t){var i=t.x-n.x,r=t.y-n.y;return Math.sqrt(Math.pow(i,2)+Math.pow(r,2))},n.prototype.getModuleName=function(){return"NavigationLine"},n.prototype.destroy=function(){},n}(),ke=function(){function n(n){this.legendBorderRect=new y(0,0,0,0);this.totalPages=[];this.page=0;this.currentPage=0;this.legendItemRect=new y(0,0,0,0);this.heightIncrement=0;this.widthIncrement=0;this.textMaxWidth=0;this.shapeHighlightCollection=[];this.legendHighlightCollection=[];this.shapePreviousColor=[];this.selectedNonLegendShapes=[];this.shapeToggled=!0;this.legendElement=null;this.maps=n;this.addEventListener()}return n.prototype.renderLegend=function(){this.legendRenderingCollections=[];this.legendCollection=[];this.totalPages=[];this.widthIncrement=0;this.heightIncrement=0;this.defsElement=this.maps.renderer.createDefs();this.maps.svgObject.appendChild(this.defsElement);this.calculateLegendBounds();this.drawLegend()},n.prototype.calculateLegendBounds=function(){var rt=this,w=this.maps,n=w.legendSettings,ot,i,ut,fi,ei,b,k,lt,ht,et,c,t,l,e,dt,ti,ii,ri,ui,gt;if(this.legendCollection=[],ot=w.mapAreaRect.y,this.legendRenderingCollections=[],Array.prototype.forEach.call(w.layersCollection,function(t,i){var o,h,u;if(!Object(r.isNullOrUndefined)(t.shapeData)){var c=t.shapeData.features,l=t.shapeDataPath,a=t.shapePropertyPath,s=t.dataSource,f=void 0,e=void 0;if("Layers"===n.type&&t.visible)f=t.shapeSettings.colorValuePath,e=t.shapeSettings.colorMapping,rt.getLegends(i,c,e,s,l,f,a);else if("Bubbles"===n.type)for(o=0,h=t.bubbleSettings;o<h.length;o++)u=h[o],u.visible&&(f=u.colorValuePath,e=u.colorMapping,s=u.dataSource,rt.getLegends(i,c,e,s,l,f,a));else rt.getMarkersLegendCollections(i,t.markerSettings)}}),this.legendCollection.length>0)for(i=0;i<this.legendCollection.length;i++)ut={name:"legendRendering",cancel:!1,fill:(l=this.legendCollection[i]).fill,shape:n.shape,shapeBorder:n.shapeBorder,text:"number"==typeof l.text?l.text.toString():l.text},w.trigger("legendRendering",ut),l.fill=ut.fill,l.shape=ut.shape,l.shapeBorder=ut.shapeBorder,l.text=ut.text,ut.cancel&&(this.legendCollection.splice(i,1),i--);if(fi=w.legendSettings.title.text,ei=w.legendSettings.titleStyle,this.legendCollection.length>0){var oi,si,ai=n.mode,d=0,nt=0,ct=0,st=0,ni=n.shapePadding,a=n.shapeHeight,ft=n.shapeWidth,o=[],it=[],hi=n.position,ci=n.labelDisplayMode,p="None"===n.orientation?"Top"===hi||"Bottom"===hi?"Horizontal":"Vertical":n.orientation,u=n.width.length>1?n.width.indexOf("%")>-1?w.availableSize.width/100*parseInt(n.width,10):parseInt(n.width,10):null,f=n.height.length>1?n.height.indexOf("%")>-1?w.availableSize.height/100*parseInt(n.height,10):parseInt(n.height,10):null,s=0,h=0,li=v(fi,ei);if("Interactive"===ai){lt=n.textStyle;ht=this.legendCollection.length;b="Horizontal"===p?Object(r.isNullOrUndefined)(u)?w.mapAreaRect.width/ht:u/ht:Object(r.isNullOrUndefined)(u)?25:u;k="Horizontal"===p?Object(r.isNullOrUndefined)(f)?25:f:Object(r.isNullOrUndefined)(f)?w.mapAreaRect.height/ht:f/ht;s=0;h=li.height+10;var at=n.labelPosition,vt=0,yt=0,pt=0,wt=0,bt=0,kt=0;for(i=0;i<this.legendCollection.length;i++)s="Horizontal"===p?s+b:s,h="Horizontal"===p?h:h+k,et=this.legendCollection[i].text,c=new g(0,0),"None"===ci?c=v(et,lt):"Trim"===ci?c=v(et=tt("Horizontal"===p?b:k,et,lt),lt):et="",bt=Math.max(bt,c.height),kt=Math.max(kt,c.width),c.width>0&&c.height>0&&("Horizontal"===p?(vt=s+b/2,yt="After"===at?h+k+c.height/2+10:h-10):(vt="After"===at?s-c.width/2-10:s+b+c.width/2+10,yt=h+k/2+c.height/4)),0===i?(pt="Horizontal"===p?s:"After"===at?vt-c.width/2:s,wt="Horizontal"===p?"After"===at?h:yt-c.height/2:h,1===this.legendCollection.length&&(u="Horizontal"===p?Math.abs(s+b-pt):b+kt+10,f="Horizontal"===p?k+bt/2+10:Math.abs(h+k-wt))):i===this.legendCollection.length-1&&(u="Horizontal"===p?Math.abs(s+b-pt):b+kt+10,f="Horizontal"===p?k+bt/2+10:Math.abs(h+k-wt)),this.legendRenderingCollections.push({fill:this.legendCollection[i].fill,x:s,y:h,width:b,height:k,text:et,textX:vt,textY:yt,textWidth:c.width,textHeight:c.height,shapeBorder:this.legendCollection[i].shapeBorder});1===this.legendCollection.length&&(f=k,u=b);this.legendItemRect={x:pt,y:wt,width:u,height:f}}else{for(u=Object(r.isNullOrUndefined)(u)?w.mapAreaRect.width:u,f=Object(r.isNullOrUndefined)(f)?w.mapAreaRect.height:f,t=0,this.page=0,i=0;i<this.legendCollection.length;i++)l=this.legendCollection[i],Object(r.isNullOrUndefined)(this.totalPages[this.page])&&(this.totalPages[this.page]={Page:this.page+1,Collection:[]}),e=v(l.text,n.textStyle),(this.textMaxWidth=Math.max(this.textMaxWidth,e.width),0===i)?(s=d=10+ft/2,h=nt=ot+li.height+(a>e.height?a/2:e.height/4)):(dt=e.height>a?e.height:a,"Horizontal"===p?(ti=it[t-1].x+it[t-1].width+10+ft,ti+ni+e.width>u?(ii=(it[t-1].y>o[t-1].y+a/2?it[t-1].y:o[t-1].y+a/2)+ot,ii+dt>f?(this.getPageChanged(),t=0,o=[],it=[],[],d=s,nt=h):(d=o[0].x,nt=ii+dt/2)):(d=ti-ft/2,nt=o[t-1].y)):(ri=it[t-1].y>o[t-1].y+a/2?it[t-1].y:o[t-1].y+a/2,ri+ot+dt>f?(ui=it[t-1].x+this.textMaxWidth+10,ui+ni+e.width>u?(d=s,nt=h,[],it=[],o=[],this.getPageChanged(),t=0):(d=ui+ft/2,nt=o[0].y)):(d=o[t-1].x,nt=ri+ot+a/2))),ct=d+ft/2+ni,st=nt+e.height/4,o.push({x:d,y:nt}),it.push({x:ct,y:st,width:e.width,height:e.height/2}),this.totalPages[this.page].Collection.push({DisplayText:l.text,ImageSrc:l.imageSrc,Shape:{x:d,y:nt},Text:{x:ct,y:st},Fill:l.fill,legendShape:l.shape,shapeBorder:l.shapeBorder,idIndex:i,Rect:{x:o[t].x-ft/2,y:o[t].y-a/2<st-e.height?o[t].y-a/2:st-e.height,width:Math.abs(o[t].x-ft/2-(ct+e.width)),height:a>e.height?a:e.height}}),t++;gt=this.totalPages[0].Collection;Array.prototype.forEach.call(gt,function(n,t){var i=new y(n.Rect.x,n.Rect.y,n.Rect.width,n.Rect.height);0===t&&(oi=i.x,si=i.y);rt.widthIncrement=Math.max(rt.widthIncrement,Math.abs(oi-(i.x+i.width)));rt.heightIncrement=Math.max(rt.heightIncrement,Math.abs(si-(i.y+i.height)))});u=this.widthIncrement<u?this.widthIncrement:u;f=this.heightIncrement<f?this.heightIncrement:f;this.legendItemRect={x:gt[0].Rect.x,y:gt[0].Rect.y,width:u,height:f}}}},n.prototype.getLegends=function(n,t,i,r,u,f,e){this.getRangeLegendCollection(n,t,i,r,u,f,e);this.getEqualLegendCollection(n,t,i,r,u,f,e);this.getDataLegendCollection(n,t,i,r,u,f,e)},n.prototype.getPageChanged=function(){this.page++;Object(r.isNullOrUndefined)(this.totalPages[this.page])&&(this.totalPages[this.page]={Page:this.page+1,Collection:[]})},n.prototype.legendTextTrim=function(n,t,i,r){var u=t,e=v(t,i).width,o=r-e,f;if(r>n)for(f=t.length-1;f>=0;--f)if(o+(e=v(u=t.substring(0,f)+"...",i).width)<=n||u.length<4)return u.length<4&&(u=" "),u;return u},n.prototype.drawLegend=function(){var e,i=this.maps,u=i.legendSettings,s=i.renderer,n=u.textStyle,r,f,h;if(this.legendGroup=s.createGroup({id:i.element.id+"_Legend_Group"}),"Interactive"===u.mode)for(r=0;r<this.legendRenderingCollections.length;r++){var c=i.element.id+"_Legend_Index_"+r,l=i.element.id+"_Legend_Index_"+r+"_Text",t=this.legendRenderingCollections[r],a=new y(t.x,t.y,t.width,t.height);0===r&&this.renderLegendBorder();f=new o(t.textX,t.textY);n.color=null!==n.color?n.color:this.maps.themeStyle.legendTextColor;h=new d(c,t.fill,t.shapeBorder,u.opacity,a);e=new it(l,f.x,f.y,"middle",t.text,"","");n.fontFamily=i.themeStyle.fontFamily||n.fontFamily;n.size=i.themeStyle.legendFontSize||n.size;st(e,n,n.color,this.legendGroup);this.legendGroup.appendChild(s.drawRectangle(h));this.legendToggle()}else this.drawLegendItem(this.currentPage)},n.prototype.drawLegendItem=function(n){var i=this.maps,t=i.legendSettings,at=new g(t.shapeWidth,t.shapeHeight),f=i.renderer,o,rt,s,ot,ht,ct,lt;if(n>=0&&n<this.totalPages.length)for(c(this.legendGroup.id,this.maps.element.id)&&Object(r.remove)(c(this.legendGroup.id,this.maps.element.id)),o=0;o<this.totalPages[n].Collection.length;o++){var u=this.totalPages[n].Collection[o],k=u.shapeBorder,nt=f.createGroup({id:i.element.id+"_Legend_Index_"+u.idIndex}),tt=u.DisplayText,vt="Markers"===t.type?Object(r.isNullOrUndefined)(u.ImageSrc)?t.shape:"Image":u.legendShape,yt="HorizontalLine"===t.shape||"VerticalLine"===t.shape||"Cross"===t.shape?Object(r.isNullOrUndefined)(t.fill)?"#000000":t.fill:k.color,pt=("HorizontalLine"===t.shape||"VerticalLine"===t.shape||"Cross"===t.shape)&&0===k.width?1:k.width,wt=i.element.id+"_Legend_Shape_Index_"+u.idIndex,bt=i.element.id+"_Legend_Text_Index_"+u.idIndex,kt=u.Shape,ft=u.Text,dt=(Object(r.isNullOrUndefined)(u.ImageSrc)?t.shape:u.ImageSrc,new b(wt,u.Fill,pt,yt,t.opacity,""));if(t.textStyle.color=null!==t.textStyle.color?t.textStyle.color:this.maps.themeStyle.legendTextColor,t.textStyle.fontFamily=i.themeStyle.fontFamily||t.textStyle.fontFamily,t.textStyle.size=i.themeStyle.legendFontSize||t.textStyle.size,0===o&&this.renderLegendBorder(),nt.appendChild(af(kt,vt,at,u.ImageSrc,dt)),rt=u.Rect.x+u.Rect.width,rt>this.legendBorderRect.width&&(tt=this.legendTextTrim(this.legendBorderRect.width,tt,t.textStyle,rt)),st(new it(bt,ft.x,ft.y,"start",tt,"",""),t.textStyle,t.textStyle.color,nt),this.legendGroup.appendChild(nt),o===this.totalPages[n].Collection.length-1){if(s=void 0,0!==this.page){var et=n+1+"/"+this.totalPages.length,l=t.textStyle,ut=v(et,l),a=this.legendItemRect.x+this.legendItemRect.width-ut.width-30,h=this.legendItemRect.x+this.legendItemRect.width,e=this.legendItemRect.y+this.legendItemRect.height+2.5+10,gt=h-10-ut.width/2-5;s=f.createGroup({id:i.element.id+"_Legend_Paging_Group"});var p=f.createGroup({id:i.element.id+"_Legend_Left_Paging_Group"}),w=f.createGroup({id:i.element.id+"_Legend_Right_Paging_Group"}),ni=" M "+h+" "+e+" L "+(h-10)+" "+(e-5)+" L "+(h-10)+" "+(e+5)+" z ",ti=" M "+a+" "+e+" L "+(a+10)+" "+(e-5)+" L "+(a+10)+" "+(e+5)+" z ",ii=new b(i.element.id+"_Left_Page","#a6a6a6",0,"#a6a6a6",1,"",ti);p.appendChild(f.drawPath(ii));ot=new d(i.element.id+"_Left_Page_Rect","transparent",{},1,new y(a-5,e-10,20,20),null,null,"","");p.appendChild(f.drawRectangle(ot));this.wireEvents(p);ht=new b(i.element.id+"_Right_Page","#a6a6a6",0,"#a6a6a6",1,"",ni);w.appendChild(f.drawPath(ht));ct=new d(i.element.id+"_Right_Page_Rect","transparent",{},1,new y(h-10,e-5,10,10),null,null,"","");w.appendChild(f.drawRectangle(ct));this.wireEvents(w);s.appendChild(p);s.appendChild(w);lt={id:i.element.id+"_Paging_Text",x:gt,y:e+ut.height/4,fill:"#a6a6a6","font-size":"14px","font-style":l.fontStyle,"font-family":l.fontFamily,"font-weight":l.fontWeight,"text-anchor":"middle",transform:"",opacity:1,"dominant-baseline":""};s.appendChild(f.createText(lt,et));this.legendGroup.appendChild(s)}this.legendToggle()}}},n.prototype.legendHighLightAndSelection=function(n,t){var g,nt,tt,it,ut,b,u,y,f,ft,e,o,k,p,ot,st,ht,ct,d;it="Default"===this.maps.legendSettings.mode?document.getElementById(n.id.replace("Shape","Text")):document.getElementById(n.id+"_Text");var h,s=this.maps.legendModule.legendCollection,a=this.maps.layers[s[0].data[0].layerIndex].selectionSettings.enableMultiSelect,v=0,w=!0,rt=parseFloat(n.id.charAt(n.id.length-1));if(this.updateLegendElement(),ut=this.maps.toggledLegendId.indexOf(rt),this.maps.legendSettings.toggleLegendSettings.enable&&"highlight"===t&&-1!==ut)return b=this.getIndexofLegend(this.legendHighlightCollection,n),-1!==b&&this.legendHighlightCollection.splice(b,1),this.removeLegendHighlightCollection(),null;if("selection"===t){if(this.shapeHighlightCollection=[],this.maps.shapeSelections||a||(this.removeAllSelections(),this.maps.shapeSelections=!0),this.maps.legendSelectionCollection.length>0&&(a||this.maps.shapeSelections))for(u=0;u<this.maps.legendSelectionCollection.length;u++){if(n===this.maps.legendSelectionCollection[u].legendElement){this.maps.legendSelectionCollection[u].legendElement=n;w=!1;this.removeLegendSelectionCollection(this.maps.legendSelectionCollection[u].legendElement);this.maps.selectedLegendElementId.splice(this.maps.selectedLegendElementId.indexOf(rt),1);this.maps.legendSelectionCollection.splice(u,1);this.maps.legendSelection=!(this.maps.legendSelectionCollection.length>0);break}if(!a)if(this.maps.legendSelectionCollection.length>1){for(y=0;y<this.maps.legendSelectionCollection.length;y++)this.removeLegendSelectionCollection(this.maps.legendSelectionCollection[y].legendElement);this.maps.legendSelectionCollection=[]}else this.removeLegendSelectionCollection(this.maps.legendSelectionCollection[u].legendElement),this.maps.legendSelectionCollection.splice(u,1)}}else{if(this.maps.legendSelectionCollection.length>0)for(u=0;u<this.maps.legendSelectionCollection.length;u++){if((n.id.indexOf("_Legend_Shape")>-1||n.id.indexOf("_Legend_Index"))&&n===this.maps.legendSelectionCollection[u].legendElement){w=!1;break}this.removeLegendHighlightCollection()}this.removeLegendHighlightCollection()}if(w)for(f=0;f<s.length;f++)if(ft="Interactive"===this.maps.legendSettings.mode?parseFloat(n.id.split("_Legend_Index_")[1]):parseFloat(n.id.split("_Legend_Shape_Index_")[1]),it.textContent===s[f].text&&s[f].data.length>0&&ft===f){var c=this.maps.layers[s[f].data[0].layerIndex],et=void 0,i=void 0,l=void 0;if(Object(r.isNullOrUndefined)(c)||(et="selection"===t?c.selectionSettings.enable:c.highlightSettings.enable,i=void 0,i="selection"===t?c.selectionSettings:c.highlightSettings,l=s[f].data),et)for(e=0;e<l.length;e++)if(g=l[e].shapeIndex,nt=l[e].layerIndex,tt=l[e].dataIndex,o=document.getElementById(this.maps.element.id+"_LayerIndex_"+nt+"_shapeIndex_"+g+"_dataIndex_"+tt),null!==o){if(k=!0,null!==this.maps.legendSelectionCollection)for(p=0;p<this.maps.legendSelectionCollection.length;p++)if(this.maps.legendSelectionCollection[p].legendElement===n){k=!1;break}"highlight"===t&&k?(0===e&&(this.legendHighlightCollection=[],this.pushCollection(n,this.legendHighlightCollection,s[f],c.shapeSettings)),h=this.legendHighlightCollection.length,ot=this.legendHighlightCollection[h-1].legendOldFill,this.legendHighlightCollection[h-1].MapShapeCollection.Elements.push(o),st=this.legendHighlightCollection[h-1].MapShapeCollection.Elements.length-1,ht=o.getAttribute("fill"),this.legendHighlightCollection[h-1].shapeOldFillColor.push(ht),ct=this.legendHighlightCollection[h-1].shapeOldFillColor[st],this.shapePreviousColor=this.legendHighlightCollection[h-1].shapeOldFillColor,this.setColor(o,Object(r.isNullOrUndefined)(i.fill)?ct:i.fill,i.opacity.toString(),i.border.color,i.border.width.toString(),"highlight"),this.setColor(n,Object(r.isNullOrUndefined)(i.fill)?ot:i.fill,i.opacity.toString(),i.border.color,i.border.width.toString(),"highlight")):"selection"===t&&(this.legendHighlightCollection=[],this.maps.legendSelectionClass=i,0===e&&(this.pushCollection(n,this.maps.legendSelectionCollection,s[f],c.shapeSettings),a||0===this.maps.selectedLegendElementId.length||(this.maps.selectedLegendElementId=[]),this.maps.selectedLegendElementId.push(f)),v=this.maps.legendSelectionCollection.length,d=this.maps.legendSelectionCollection[v-1].legendOldFill,this.maps.legendSelectionCollection[v-1].MapShapeCollection.Elements.push(o),this.maps.legendSelectionCollection[v-1].shapeOldFillColor=this.shapePreviousColor,this.setColor(n,Object(r.isNullOrUndefined)(i.fill)?d:i.fill,i.opacity.toString(),i.border.color,i.border.width.toString(),"selection"),this.setColor(o,Object(r.isNullOrUndefined)(i.fill)?d:i.fill,i.opacity.toString(),i.border.color,i.border.width.toString(),"selection"),-1===this.maps.selectedElementId.indexOf(o.getAttribute("id"))&&this.maps.selectedElementId.push(o.getAttribute("id")),e===l.length-1&&(this.maps.legendSelection=!1,this.removeLegend(this.maps.legendSelectionCollection)))}}},n.prototype.setColor=function(n,t,i,u,f,e){"selection"===e?(!function(n,t,i,u,f,e,o){var s;h(n)||(s=Object(r.createElement)("style",{id:n,innerHTML:"."+t+"{fill:"+i+";opacity:"+u+";stroke-width:"+e+";stroke:"+f+";}"}),o.shapeSelectionClass=s,document.body.appendChild(s))}("ShapeselectionMap","ShapeselectionMapStyle",t,i,u,f,this.maps),n.setAttribute("class","ShapeselectionMapStyle")):(n.setAttribute("fill",t),n.setAttribute("opacity",i),n.setAttribute("stroke",u),n.setAttribute("stroke-width",(Number(f)/this.maps.scale).toString()))},n.prototype.pushCollection=function(n,t,i,r){t.push({legendElement:n,legendOldFill:i.fill,legendOldOpacity:i.opacity,legendOldBorderColor:i.borderColor,legendOldBorderWidth:i.borderWidth,shapeOpacity:r.opacity,shapeOldBorderColor:r.border.color,shapeOldBorderWidth:r.border.width});length=t.length;t[length-1].MapShapeCollection={Elements:[]};t[length-1].shapeOldFillColor=[]},n.prototype.removeLegend=function(n){for(var t,u,i,f,r=0;r<n.length;r++)for(t=n[r],this.setColor(t.legendElement,t.legendOldFill,t.legendOldOpacity,t.legendOldBorderColor,t.legendOldBorderWidth,"highlight"),u=t.MapShapeCollection.Elements.length,i=0;i<u;i++)f=-1!==t.legendOldFill.indexOf("url")?t.shapeOldFillColor[i]:t.legendOldFill,this.setColor(t.MapShapeCollection.Elements[i],f,t.shapeOpacity,t.shapeOldBorderColor,t.shapeOldBorderWidth,"highlight")},n.prototype.removeLegendHighlightCollection=function(){this.legendHighlightCollection.length>0&&(this.removeLegend(this.legendHighlightCollection),this.legendHighlightCollection=[])},n.prototype.removeLegendSelectionCollection=function(n){var t,u;if(this.maps.legendSelectionCollection.length>0){p(n);for(var r=this.shapesOfLegend(n),f=r.length,i=0;i<f;i++)t=h(r[i]),"ShapeselectionMapStyle"===t.getAttribute("class")&&(p(t),-1!==(u=this.maps.selectedElementId.indexOf(t.id))&&this.maps.selectedElementId.splice(u,1))}},n.prototype.removeShapeHighlightCollection=function(){var t;if(this.shapeHighlightCollection.length>0)for(t=0;t<this.shapeHighlightCollection.length;t++){for(var n=this.shapeHighlightCollection[t],r=!0,i=0;i<this.maps.legendSelectionCollection.length;i++)this.maps.legendSelectionCollection[i].legendElement===n.legendElement&&(r=!1);r&&this.setColor(n.legendElement,n.legendOldFill,n.legendOldOpacity,n.legendOldBorderColor,n.legendOldBorderWidth,"highlight")}},n.prototype.shapeHighLightAndSelection=function(n,t,i,u,f){var b,v,h,y,a,d,o,l,g,rt,nt,tt,it;if(void 0!==t){this.updateLegendElement();this.shapeToggled=!0;var w=this.maps.legendModule.legendCollection,e=this.legendIndexOnShape(t,f),s=this.shapeDataOnLegend(n),ut=this.maps.toggledLegendId.indexOf(e.actualIndex);if(this.maps.legendSettings.toggleLegendSettings.enable&&-1!==ut)return this.shapeToggled=!1,this.legendHighlightCollection=[],b=this.getIndexofLegend(this.shapeHighlightCollection,s.LegendEle),-1!==b&&this.shapeHighlightCollection.splice(b,1),this.removeShapeHighlightCollection(),null;if(void 0===e.currentIndex&&void 0===e.actualIndex)return this.removeShapeHighlightCollection(),null;if(void 0!==e.currentIndex||"selection"!==u||this.maps.layers[f].selectionSettings.enableMultiSelect||"ShapeselectionMapStyle"===n.getAttribute("class")||(this.maps.legendSelection=!1),"selection"!==u||this.maps.layers[f].selectionSettings.enableMultiSelect||this.maps.legendSelection||(this.removeAllSelections(),this.maps.legendSelection=!0),void 0===e.currentIndex){if("selection"===u&&void 0!==e.actualIndex){for(v=0,h=0;h<s.Elements.length;h++)"ShapeselectionMapStyle"===s.Elements[h].getAttribute("class")&&v++;y=this.maps.selectedLegendElementId.indexOf(e.actualIndex);-1===y?(this.maps.selectedLegendElementId.push(e.actualIndex),this.maps.legendSelectionClass=i):v<=1&&"ShapeselectionMapStyle"===n.getAttribute("class")&&(this.maps.layers[f].selectionSettings.enableMultiSelect?v<=1&&"ShapeselectionMapStyle"===n.getAttribute("class")&&this.maps.selectedLegendElementId.splice(y,1):this.maps.selectedLegendElementId.splice(y,1))}return this.removeShapeHighlightCollection(),null}var ft=w[e.actualIndex].text,k=void 0,c=void 0;if("Default"===this.maps.legendSettings.mode?void 0!==e.currentIndex&&(k=document.getElementById(this.maps.element.id+"_Legend_Text_Index_"+e.actualIndex).textContent,c=document.getElementById(this.maps.element.id+"_Legend_Shape_Index_"+e.actualIndex)):(k=document.getElementById(this.maps.element.id+"_Legend_Index_"+e.actualIndex+"_Text").textContent,c=document.getElementById(this.maps.element.id+"_Legend_Index_"+e.actualIndex)),this.oldShapeElement=s.LegendEle,a=this.maps.legendSelectionCollection.length,ft===k){if(d=!0,this.maps.legendSelectionCollection)for(h=0;h<this.maps.legendSelectionCollection.length;h++)if(this.maps.legendSelectionCollection[h].legendElement===s.LegendEle){d=!1;break}if("highlight"===u&&d){for((void 0===(l=this.isTargetSelected(s,this.shapeHighlightCollection))||l&&!l.IsSelected)&&this.pushCollection(c,this.shapeHighlightCollection,w[e.actualIndex],this.maps.layers[f].shapeSettings),o=0;o<this.shapeHighlightCollection.length;o++)s.LegendEle.id===this.shapeHighlightCollection[o].legendElement.id&&(this.shapeHighlightCollection[o].legendElement=s.LegendEle);if(a>0)for(o=0;o<a;o++){if(s.LegendEle===this.maps.legendSelectionCollection[o].legendElement){this.maps.legendSelectionCollection[o].legendElement=s.LegendEle;this.removeShapeHighlightCollection();break}o===a-1&&(this.removeShapeHighlightCollection(),this.setColor(c,Object(r.isNullOrUndefined)(i.fill)?c.getAttribute("fill"):i.fill,i.opacity.toString(),i.border.color,i.border.width.toString(),"highlight"))}else this.removeShapeHighlightCollection(),this.setColor(c,Object(r.isNullOrUndefined)(i.fill)?c.getAttribute("fill"):i.fill,i.opacity.toString(),i.border.color,i.border.width.toString(),"highlight")}else if("selection"===u){if(l=this.isTargetSelected(s,this.maps.legendSelectionCollection),a>0)for(o=0;o<this.maps.legendSelectionCollection.length;)s.LegendEle===this.maps.legendSelectionCollection[o].legendElement||i.enableMultiSelect?o++:(g=this.maps.legendSelectionCollection[o],rt=this.maps.selectedLegendElementId.indexOf(e.actualIndex),this.maps.selectedLegendElementId.splice(rt,1),this.maps.legendSelectionCollection.splice(o,1),p(g.legendElement),this.maps.shapeSelections=!0,o=0);if(l&&l.IsSelected&&"ShapeselectionMapStyle"===n.getAttribute("class")){if(g=this.maps.legendSelectionCollection[l.SelectionIndex],nt=0,i.enableMultiSelect)for(h=0;h<s.Elements.length;h++)n.getAttribute("class")===s.Elements[h].getAttribute("class")&&nt++;nt<=1&&(i.enableMultiSelect||this.maps.legendSelection)&&(this.maps.selectedLegendElementId.splice(this.maps.selectedLegendElementId.indexOf(e.actualIndex),1),Object(r.isNullOrUndefined)(s.LegendEle)||p(s.LegendEle),this.maps.legendSelectionCollection.splice(l.SelectionIndex,1),this.maps.shapeSelections=!0)}else{for(void 0!==l&&(!l||l.IsSelected)||Object(r.isNullOrUndefined)(c)||-1===(it=this.getIndexofLegend(this.maps.legendSelectionCollection,c))&&this.pushCollection(c,this.maps.legendSelectionCollection,w[e.actualIndex],this.maps.layers[f].shapeSettings),tt=!0,h=0;h<this.maps.selectedLegendElementId.length;h++)e.actualIndex===this.maps.selectedLegendElementId[h]&&(tt=!1);(tt&&this.maps.selectedLegendElementId.push(e.actualIndex),this.maps.legendSelectionClass=i,this.removeLegend(this.shapeHighlightCollection),Object(r.isNullOrUndefined)(c))||(this.setColor(c,Object(r.isNullOrUndefined)(i.fill)?c.getAttribute("fill"):i.fill,i.opacity.toString(),i.border.color,i.border.width.toString(),"selection"),it=this.getIndexofLegend(this.maps.legendSelectionCollection,c),this.maps.legendSelectionCollection[it].MapShapeCollection.Elements.push(n));this.maps.shapeSelections=!1}}else document.getElementsByClassName("highlightMapStyle").length>0&&(this.removeShapeHighlightCollection(),p(document.getElementsByClassName("highlightMapStyle")[0]))}}else this.removeShapeHighlightCollection()},n.prototype.isTargetSelected=function(n,t){for(var u,i=0;i<t.length;i++)Object(r.isNullOrUndefined)(n.LegendEle.getAttribute("id"))||n.LegendEle.getAttribute("id")!==t[i].legendElement.getAttribute("id")||(u={IsSelected:!0,SelectionIndex:i});return u},n.prototype.updateLegendElement=function(){for(var n=0;n<this.maps.legendSelectionCollection.length;n++)document.getElementById(this.maps.legendSelectionCollection[n].legendElement.id)&&(this.maps.legendSelectionCollection[n].legendElement=document.getElementById(this.maps.legendSelectionCollection[n].legendElement.id))},n.prototype.getIndexofLegend=function(n,t){return n.map(function(n){return n.legendElement}).indexOf(t)},n.prototype.removeAllSelections=function(){for(var t,i,u,n=0;n<this.maps.selectedElementId.length;n++)p(i=document.getElementById(this.maps.selectedElementId[n]));for(t=0;t<this.maps.selectedLegendElementId.length;t++)i=("Interactive"===this.maps.legendSettings.mode?"container_Legend_Index_":"container_Legend_Shape_Index_")+this.maps.selectedLegendElementId[t],u=document.getElementById(i),Object(r.isNullOrUndefined)(u)||p(document.getElementById(i));this.maps.legendSelectionCollection=[];this.maps.selectedLegendElementId=[];this.maps.selectedElementId=[]},n.prototype.legendIndexOnShape=function(n,t){var c,l,o,a=n[this.maps.layers[t].shapeDataPath],s=this.maps.legendSettings.mode,h=this.maps.legendModule.legendCollection,v,u,f,e,i;for("Default"!==s||Object(r.isNullOrUndefined)(this.maps.legendModule.totalPages)||(o=this.maps.legendModule.totalPages[this.maps.legendModule.currentPage].Collection),v="Default"===s?o.length:1,u=0;u<h.length;u++){for(f=h[u].data,e=0;e<v;e++)if("Default"!==s||h[u].text===o[e].DisplayText)for(i=0;i<f.length;i++)a===f[i].name&&(c=e);for(i=0;i<f.length;i++)a===f[i].name&&(l=u)}return{currentIndex:c,actualIndex:l}},n.prototype.shapeDataOnLegend=function(n){for(var e,o,s,h,c=this.maps.legendModule.legendCollection,v=this.maps.legendSettings,t=0;t<c.length;t++){for(var u=c[t].data,l=!1,a=[],f={Elements:[]},i=0;i<u.length;i++)o=u[i].shapeIndex,s=u[i].layerIndex,h=u[i].dataIndex,e=document.getElementById(this.maps.element.id+"_LayerIndex_"+s+"_shapeIndex_"+o+"_dataIndex_"+h),n===e&&(l=!0),a.push(e);if(l)return Object(r.isNullOrUndefined)(f.LegendEle)&&(f.LegendEle="Default"===v.mode?document.getElementById(this.maps.element.id+"_Legend_Shape_Index_"+t):document.getElementById(this.maps.element.id+"_Legend_Index_"+t)),f.Elements=a,f}return null},n.prototype.shapesOfLegend=function(n){for(var u,f,e,o,h=parseFloat(n.id.charAt(n.id.length-1)),i=this.maps.legendModule.legendCollection[h].data,s=[],t=0;t<i.length;t++)f=i[t].shapeIndex,e=i[t].layerIndex,o=i[t].dataIndex,u=document.getElementById(this.maps.element.id+"_LayerIndex_"+e+"_shapeIndex_"+f+"_dataIndex_"+o),Object(r.isNullOrUndefined)(u)||s.push(u.id);return s},n.prototype.legendToggle=function(){var u=this.maps,f=u.legendSettings,n,s,t,h,i,c,l,e,a,o;if(this.maps.selectedLegendElementId)for(n=0;n<this.maps.selectedLegendElementId.length;n++)if(s="Interactive"===f.mode?this.maps.element.id+"_Legend_Index_":this.maps.element.id+"_Legend_Shape_Index_",t=u.svgObject.querySelector("#"+s+this.maps.selectedLegendElementId[n]),!Object(r.isNullOrUndefined)(t)){for(h=Object(r.isNullOrUndefined)(this.maps.legendSelectionClass.fill)?t.getAttribute("fill"):this.maps.legendSelectionClass.fill,this.setColor(t,h,this.maps.legendSelectionClass.opacity.toString(),this.maps.legendSelectionClass.border.color,this.maps.legendSelectionClass.border.width.toString(),"selection"),i=0;i<this.maps.legendSelectionCollection.length;i++)this.maps.legendSelectionCollection[i].legendElement.id===t.id&&(this.maps.legendSelectionCollection[i].legendElement=t);-1===this.getIndexofLegend(this.maps.legendSelectionCollection,t)&&(c=this.maps.legendModule.legendCollection[this.maps.selectedLegendElementId[n]].data[n].layerIndex,this.pushCollection(t,this.maps.legendSelectionCollection,this.maps.legendModule.legendCollection[this.maps.selectedLegendElementId[n]],this.maps.layers[c].shapeSettings))}if(this.maps.toggledLegendId)for(n=0;n<this.maps.toggledLegendId.length;n++)l="Interactive"===f.mode?"#"+this.maps.element.id+"_Legend_Index_"+this.maps.toggledLegendId[n]+"_Text":"#"+this.maps.element.id+"_Legend_Text_Index_"+this.maps.toggledLegendId[n],e=u.svgObject.querySelector(l),Object(r.isNullOrUndefined)(e)||e.setAttribute("fill","#E5E5E5"),a="Interactive"===f.mode?"#"+this.maps.element.id+"_Legend_Index_"+this.maps.toggledLegendId[n]:"#"+this.maps.element.id+"_Legend_Shape_Index_"+this.maps.toggledLegendId[n],o=u.svgObject.querySelector(a),Object(r.isNullOrUndefined)(o)||o.setAttribute("fill","#E5E5E5")},n.prototype.renderLegendBorder=function(){var t=this.maps,i=t.legendSettings,u=i.title.text,n=i.titleStyle,f=tt(this.legendItemRect.width+20,u,n),r=v(f,n),e;this.legendBorderRect=new y(this.legendItemRect.x-10,this.legendItemRect.y-10-r.height,this.legendItemRect.width+20,this.legendItemRect.height+20+r.height+("Interactive"===i.mode?0:0!==this.page?10:0));e=new d(t.element.id+"_Legend_Border",i.background,i.border,1,this.legendBorderRect,null,null,"","");this.legendGroup.appendChild(t.renderer.drawRectangle(e));this.getLegendAlignment(t,this.legendBorderRect.width,this.legendBorderRect.height,i);this.legendGroup.setAttribute("transform","translate( "+(this.translate.x+-this.legendBorderRect.x)+" "+(this.translate.y+-this.legendBorderRect.y)+" )");t.svgObject.appendChild(this.legendGroup);u&&(n.color=null!==n.color?n.color:this.maps.themeStyle.legendTextColor,st(new it(t.element.id+"_LegendTitle",this.legendItemRect.x+this.legendItemRect.width/2,this.legendItemRect.y-r.height/2-5,"middle",f,""),n,n.color,this.legendGroup))},n.prototype.changeNextPage=function(n){this.currentPage=n.target.id.indexOf("_Left_Page_")>-1?this.currentPage-1:this.currentPage+1;this.legendGroup=this.maps.renderer.createGroup({id:this.maps.element.id+"_Legend_Group"});this.drawLegendItem(this.currentPage);c(this.maps.element.id+"_Legend_Border",this.maps.element.id)&&(c(this.maps.element.id+"_Legend_Border",this.maps.element.id).style.pointerEvents="none")},n.prototype.getLegendAlignment=function(n,t,i,u){var e,s,f,h=(f=Object(r.extend)({},n.mapAreaRect,f,!0)).x,c=f.y,v=f.height,y=f.width,l=n.availableSize.width,a=n.availableSize.height;if("Float"===u.position)this.translate=u.location;else{switch(u.position){case"Top":case"Bottom":f.height=v-i;e=l/2-t/2;s="Top"===u.position?c:c+f.height;f.y="Top"===u.position?c+i+10:c;break;case"Left":case"Right":f.width=y-t;e="Left"===u.position?h:h+f.width-10;s=a/2-i/2;f.x="Left"===u.position?h+t:h}switch(u.alignment){case"Near":"Top"===u.position||"Bottom"===u.position?e=f.x:s=f.y;break;case"Far":"Top"===u.position||"Bottom"===u.position?e=l-t-10:s=a-i}(u.height||u.width)&&"Interactive"!==u.mode?n.totalRect=f:((u.height||u.width)&&"Interactive"===u.mode&&(n.totalRect=f),n.mapAreaRect=f);this.translate=new o(e,s)}},n.prototype.getMarkersLegendCollections=function(n,t){var i=this;Array.prototype.forEach.call(t,function(t,u){var e=t.dataSource,f=t.legendText;Array.prototype.forEach.call(e,function(e,o){var c=null,l=!!Object(r.isNullOrUndefined)(e[i.maps.legendSettings.showLegendPath])||e[i.maps.legendSettings.showLegendPath],s,h;t.visible&&l&&!Object(r.isNullOrUndefined)(e.latitude)&&!Object(r.isNullOrUndefined)(e.longitude)&&(t.template&&(s=ui(t.template)(i.maps),c=(Object(r.isNullOrUndefined)(s.childElementCount)?s[0]:s).querySelector("img").src),h=Object(r.isNullOrUndefined)(e[f])?"":e[f],!!i.maps.legendSettings.removeDuplicateLegend&&i.removeDuplicates(i.legendCollection,h)||i.legendCollection.push({layerIndex:n,markerIndex:u,dataIndex:o,fill:t.fill,text:h,imageSrc:c}))})})},n.prototype.getRangeLegendCollection=function(n,t,i,u,f,e,o){for(var l,w=this,a=0,v=this.maps.legendSettings.fill,h=[],b=function(i){var c,p;Object(r.isNullOrUndefined)(i.from)||Object(r.isNullOrUndefined)(i.to)||(l=Object(r.isNullOrUndefined)(i.label)?i.from+" - "+i.to:i.label,h=[],c=!1,Array.prototype.forEach.call(u,function(r,u){var l=e.indexOf(".")>-1?Number(s(r,e)):parseFloat(r[e]);l>=i.from&&l<=i.to&&(c=!0,h.push(w.getLegendData(n,u,r,f,t,o,l)))}),c||h.push({layerIndex:n,shapeIndex:null,dataIndex:null,name:null,value:null}),p=Object(r.isNullOrUndefined)(v)?"[object Array]"===Object.prototype.toString.call(i.color)?Object(r.isNullOrUndefined)(i.value)?y.legendGradientColor(i,a):i.color[0]:i.color:v,a++,y.getOverallLegendItemsCollection(l,p,h,i.showLegend))},y=this,c=0,p=i;c<p.length;c++)b(p[c])},n.prototype.getOverallLegendItemsCollection=function(n,t,i,r){var f=[],s=this.maps.legendSettings,u,e,o;if(i.length>0&&r){for(u=0;u<i.length;u++){if(e=i[u],e.length>0)for(o=0;o<e.length;o++)f.push(e[o]);else f.push(i[u]);f._isVisible=!0}!!this.maps.legendSettings.removeDuplicateLegend&&this.removeDuplicates(this.legendCollection,n)||this.legendCollection.push({text:n,fill:t,data:f,opacity:s.opacity,borderColor:s.shapeBorder.color,borderWidth:s.shapeBorder.width})}},n.prototype.removeDuplicates=function(n,t){for(var r=!1,i=0;i<n.length;i++)if(n[i].text===t){r=!0;break}return r},n.prototype.getEqualLegendCollection=function(n,t,i,u,f,e,o){for(var l,v=this,w=this.maps.legendSettings.fill,c=[],a=[],h=[],y=[],d=function(p){var k,tt,nt,d,g,it,rt;if(Object(r.isNullOrUndefined)(p.value))Object(r.isNullOrUndefined)(p.minOpacity)&&Object(r.isNullOrUndefined)(p.maxOpacity)&&Object(r.isNullOrUndefined)(p.value)&&Object(r.isNullOrUndefined)(p.from)&&Object(r.isNullOrUndefined)(p.to)&&!Object(r.isNullOrUndefined)(p.color)&&((Array.prototype.forEach.call(u,function(i,r){for(var c=e.indexOf(".")>-1?s(i,e):i[e],u=0;u<h.length;u++)c===h[u]&&y.push(v.getLegendData(n,r,i,f,t,o,c))}),0===h.length)&&(k=!1,Array.prototype.forEach.call(u,function(u,s){k=!1;for(var h=u[e],c=0;c<i.length;c++)Object(r.isNullOrUndefined)(h)||isNaN(h)?k||(k=!1):h>=i[c].from&&h<=i[c].to&&(k=!0);k||y.push(v.getLegendData(n,s,u,f,t,o,h))})),l=Object(r.isNullOrUndefined)(p.label)?"Others":p.label,tt="[object Array]"===Object.prototype.toString.call(p.color)?p.color[0]:p.color,b.getOverallLegendItemsCollection(l,tt,y,p.showLegend));else{for(l=Object(r.isNullOrUndefined)(p.label)?p.value:p.label,a=[],nt=!1,Array.prototype.forEach.call(u,function(i,r){var u=e.indexOf(".")>-1?s(i,e):i[e];u===p.value?(nt=!0,-1===c.indexOf(u)&&c.push(u),a.push(v.getLegendData(n,r,i,f,t,o,u))):-1===h.indexOf(u)&&h.push(u)}),d=0;d<c.length;d++)for(g=0;g<h.length;g++)c[d]===h[g]&&(it=h.indexOf(c[d]),h.splice(it,1));nt||a.push({layerIndex:n,shapeIndex:null,dataIndex:null,name:null,value:null});rt=Object(r.isNullOrUndefined)(w)?"[object Array]"===Object.prototype.toString.call(p.color)?p.color[0]:p.color:w;b.getOverallLegendItemsCollection(l,rt,a,p.showLegend)}},b=this,p=0,k=i;p<k.length;p++)d(k[p])},n.prototype.getDataLegendCollection=function(n,t,i,u,f,e,o){var l,h=this,a=this.maps.legendSettings.fill,c=this.maps.legendSettings.valuePath;Object(r.isNullOrUndefined)(e)||Object(r.isNullOrUndefined)(u)||Array.prototype.forEach.call(u,function(u,v){var w=!!Object(r.isNullOrUndefined)(h.maps.legendSettings.showLegendPath)||!Object(r.isNullOrUndefined)(u[h.maps.legendSettings.showLegendPath])&&u[h.maps.legendSettings.showLegendPath],y=e.indexOf(".")>-1?s(u,e):u[e],p=[],b=Object(r.isNullOrUndefined)(a)?y:a;Object(r.isNullOrUndefined)(y)||0!==i.length||(l=Object(r.isNullOrUndefined)(u[c])?f.indexOf(".")>-1?s(u,f):u[f]:c.indexOf(".")>-1?s(u,c):u[c],p.push(h.getLegendData(n,v,u,f,t,o,y)));h.getOverallLegendItemsCollection(l,b,p,w)})},n.prototype.interactiveHandler=function(n){var e=n.target,t=this.maps.legendSettings,i=this.maps.element.id+"_Interactive_Legend",g="Layers"===t.type?"_shapeIndex_":"Markers"===t.type?"_MarkerIndex_":"_BubbleIndex_",l,b,a,u,s,f;if(e.id.indexOf(g)>1){var h=parseFloat(e.id.split("_LayerIndex_")[1].split("_")[0]),nt=parseFloat(e.id.split(/_dataIndex_/i)[1].split("_")[0]),v=void 0,p=void 0,w=void 0;if(Object(r.isNullOrUndefined)(c(i,this.maps.element.id))||Object(r.remove)(c(i,this.maps.element.id)),l=this.maps.layersCollection[h],b="Layers"===t.type?l.visible:"Markers"===t.type?l.markerSettings[parseFloat(e.id.split("_MarkerIndex_")[1].split("_")[0])].visible:this.maps.getBubbleVisible(this.maps.layersCollection[h]),t.visible&&this.legendRenderingCollections.length>0&&"Interactive"===t.mode&&b)for(a=this.maps.svgObject.getBoundingClientRect(),u=0;u<this.legendCollection.length;u++){var k=this.legendCollection[u],d=c(this.maps.element.id+"_Legend_Index_"+u,this.maps.element.id),o=d.getBoundingClientRect(),tt=new y(Math.abs(o.left-a.left),Math.abs(o.top-a.top),o.width,o.height);if(v=d.getAttribute("fill"),p=t.shapeBorder.color,w=t.shapeBorder.width,!Object(r.isNullOrUndefined)(k.data))for(s=k.data,f=0;f<s.length;f++)if(nt===s[f].dataIndex&&h===s[f].layerIndex){this.renderInteractivePointer(t,v,p,i,w,tt);break}}}else Object(r.isNullOrUndefined)(c(i,this.maps.element.id))||Object(r.remove)(c(i,this.maps.element.id))},n.prototype.renderInteractivePointer=function(n,t,i,r,u,f){var s,h,e,o;s="Horizontal"===("None"===n.orientation?"Top"===n.position||"Bottom"===n.position?"Horizontal":"Vertical":n.orientation)?n.invertedPointer?" M "+(e=f.x+f.width/2)+" "+(o=f.y+f.height)+" L "+(e-10)+" "+(o+10)+" L "+(e+10)+" "+(o+10)+" Z ":" M "+(e=f.x+f.width/2)+" "+(o=f.y)+" L "+(e-10)+" "+(o-10)+" L "+(e+10)+" "+(o-10)+" Z ":n.invertedPointer?" M "+(e=f.x)+" "+(o=f.y+f.height/2)+" L "+(e-10)+" "+(o-10)+" L "+(e-10)+" "+(o+10)+" z ":" M "+(e=f.x+f.width)+" "+(o=f.y+f.height/2)+" L "+(e+10)+" "+(o-10)+" L "+(e+10)+" "+(o+10)+" z ";h=new b(r,t,u,i,1,"",s);this.maps.svgObject.appendChild(this.maps.renderer.drawPath(h))},n.prototype.wireEvents=function(n){r.EventHandler.add(n,r.Browser.touchStartEvent,this.changeNextPage,this)},n.prototype.addEventListener=function(){this.maps.isDestroyed||(this.maps.on(r.Browser.touchMoveEvent,this.interactiveHandler,this),this.maps.on(r.Browser.touchEndEvent,this.interactiveHandler,this),this.maps.on("click",this.legendClick,this))},n.prototype.legendClick=function(n){var w=this.maps.legendSettings.toggleLegendSettings.fill,b=this.maps.legendSettings.toggleLegendSettings.opacity,k=this.maps.legendSettings.toggleLegendSettings.border.color,d=this.maps.legendSettings.toggleLegendSettings.border.width,i,u,f,e,g,v,a,s,y,o,nt;if(n.parentNode.id.indexOf(this.maps.element.id+"_Legend_Index_")>-1){var h=void 0,t=parseFloat(n.parentElement.id.substr((this.maps.element.id+"_Legend_Index_").length)),l=(a=this.legendCollection[t].data)._isVisible,p=void 0;if(this.maps.legendSettings.toggleLegendSettings.enable&&"Bubbles"===this.maps.legendSettings.type)for(i=0;i<this.maps.layers.length;i++)for(u=0;u<this.maps.layers[i].bubbleSettings.length;u++){for(f=0;f<a.length;f++)p=this.legendCollection[t].data[f],h=c(this.maps.element.id+"_LayerIndex_"+p.layerIndex+"_BubbleIndex_"+u+"_dataIndex_"+p.dataIndex,this.maps.element.id),l&&null!==h?(this.maps.legendSettings.toggleLegendSettings.applyShapeSettings?(h.setAttribute("fill",this.maps.layers[i].shapeSettings.fill),h.setAttribute("stroke",this.maps.layers[i].shapeSettings.border.color),h.setAttribute("opacity",this.maps.layers[i].shapeSettings.opacity.toString()),h.setAttribute("stroke-width",this.maps.layers[i].shapeSettings.border.width.toString())):(h.setAttribute("fill",w),h.setAttribute("opacity",b.toString()),h.setAttribute("stroke",k),h.setAttribute("stroke-width",d.toString())),null!==n&&(c(this.maps.element.id+"_Legend_Shape_Index_"+t,this.maps.element.id).setAttribute("fill","#E5E5E5"),c(this.maps.element.id+"_Legend_Text_Index_"+t,this.maps.element.id).setAttribute("fill","#E5E5E5"))):(h.setAttribute("fill",this.legendCollection[t].fill),h.setAttribute("stroke",this.maps.layers[i].bubbleSettings[u].border.color),h.setAttribute("opacity",this.maps.layers[i].bubbleSettings[u].opacity.toString()),h.setAttribute("stroke-width",this.maps.layers[i].bubbleSettings[u].border.width.toString()),null!==n&&(c(this.maps.element.id+"_Legend_Shape_Index_"+t,this.maps.element.id).setAttribute("fill",this.legendCollection[t].fill),c(this.maps.element.id+"_Legend_Text_Index_"+t,this.maps.element.id).setAttribute("fill","#757575")));a._isVisible=!l}if("Layers"===this.maps.legendSettings.type&&this.maps.legendSettings.toggleLegendSettings.enable){for(e=void 0,this.removeCollections(n,t),g=this.maps.toggledLegendId.indexOf(t),-1!==g&&(l=!1),u=0;u<this.maps.layers.length;u++)for(f=0;f<a.length;f++)(p=this.legendCollection[t].data[f],null!==(e=c(this.maps.element.id+"_LayerIndex_"+p.layerIndex+"_shapeIndex_"+p.shapeIndex+"_dataIndex_"+p.dataIndex,this.maps.element.id)))&&(v=this.maps.toggledShapeElementId.indexOf(e.id),l?(0===f&&this.maps.toggledLegendId.push(t),-1===v&&this.maps.toggledShapeElementId.push(e.id),this.maps.legendSettings.toggleLegendSettings.applyShapeSettings?(e.setAttribute("fill",this.maps.layers[u].shapeSettings.fill),e.setAttribute("opacity",this.maps.layers[u].shapeSettings.opacity.toString()),e.setAttribute("stroke",this.maps.layers[u].shapeSettings.border.color),e.setAttribute("stroke-width",this.maps.layers[u].shapeSettings.border.width.toString())):(e.setAttribute("fill",w),e.setAttribute("opacity",b.toString()),e.setAttribute("stroke",k),e.setAttribute("stroke-width",d.toString())),null!==n&&(c(this.maps.element.id+"_Legend_Text_Index_"+t,this.maps.element.id).setAttribute("fill","#E5E5E5"),c(this.maps.element.id+"_Legend_Shape_Index_"+t,this.maps.element.id).setAttribute("fill","#E5E5E5"))):(-1!==g&&0===f&&this.maps.toggledLegendId.splice(g,1),-1!==v&&this.maps.toggledShapeElementId.splice(v,1),e.setAttribute("fill",this.legendCollection[t].fill),e.setAttribute("opacity",this.maps.layers[u].shapeSettings.opacity.toString()),e.setAttribute("stroke",this.maps.layers[u].shapeSettings.border.color),e.setAttribute("stroke-width",this.maps.layers[u].shapeSettings.border.width.toString()),null!==n&&(c(this.maps.element.id+"_Legend_Text_Index_"+t,this.maps.element.id).setAttribute("fill","#757575"),c(this.maps.element.id+"_Legend_Shape_Index_"+t,this.maps.element.id).setAttribute("fill",this.legendCollection[t].fill))));a._isVisible=!l}}else if(!Object(r.isNullOrUndefined)(n.id)&&(n.id.indexOf(this.maps.element.id+"_Legend_Shape_Index")>-1||-1!==n.id.indexOf(this.maps.element.id+"_Legend_Index"))&&this.maps.legendSettings.visible&&-1===n.id.indexOf("_Text")){if(s=void 0,y=(t=parseFloat(n.id.substr((this.maps.element.id+"_Legend_Index_").length)),void 0),l=(a=this.legendCollection[t].data)._isVisible,"Bubbles"===this.maps.legendSettings.type&&this.maps.legendSettings.toggleLegendSettings.enable)for(i=0;i<this.maps.layers.length;i++)for(u=0;u<this.maps.layers[i].bubbleSettings.length;u++){for(f=0;f<a.length;f++)y=this.legendCollection[t].data[f],s=c(this.maps.element.id+"_LayerIndex_"+y.layerIndex+"_BubbleIndex_"+u+"_dataIndex_"+y.dataIndex,this.maps.element.id),l&&null!==s?(this.maps.legendSettings.toggleLegendSettings.applyShapeSettings?(s.setAttribute("fill",this.maps.layers[i].shapeSettings.fill),s.setAttribute("stroke",this.maps.layers[i].shapeSettings.border.color),s.setAttribute("stroke-width",this.maps.layers[i].shapeSettings.border.width.toString()),s.setAttribute("opacity",this.maps.layers[i].shapeSettings.opacity.toString())):(s.setAttribute("fill",w),s.setAttribute("opacity",b.toString()),s.setAttribute("stroke",k),s.setAttribute("stroke-width",d.toString())),null!==n&&(c(this.maps.element.id+"_Legend_Index_"+t+"_Text",this.maps.element.id).setAttribute("fill","#E5E5E5"),c(this.maps.element.id+"_Legend_Index_"+t,this.maps.element.id).setAttribute("fill","#E5E5E5"))):(s.setAttribute("fill",this.legendCollection[t].fill),s.setAttribute("stroke",this.maps.layers[i].bubbleSettings[u].border.color),s.setAttribute("stroke-width",this.maps.layers[i].bubbleSettings[u].border.width.toString()),s.setAttribute("opacity",this.maps.layers[i].bubbleSettings[u].opacity.toString()),null!==n&&(c(this.maps.element.id+"_Legend_Index_"+t,this.maps.element.id).setAttribute("fill",this.legendCollection[t].fill),c(this.maps.element.id+"_Legend_Index_"+t+"_Text",this.maps.element.id).setAttribute("fill","#757575")));a._isVisible=!l}if("Layers"===this.maps.legendSettings.type&&this.maps.legendSettings.toggleLegendSettings.enable){for(o=void 0,this.removeCollections(n,t),nt=this.maps.toggledLegendId.indexOf(t),-1!==nt&&(l=!1),i=0;i<this.maps.layers.length;i++)for(f=0;f<a.length;f++)(y=this.legendCollection[t].data[f],null!==(o=c(this.maps.element.id+"_LayerIndex_"+y.layerIndex+"_shapeIndex_"+y.shapeIndex+"_dataIndex_"+y.dataIndex,this.maps.element.id)))&&(v=this.maps.toggledShapeElementId.indexOf(o.id),l?(0===f&&this.maps.toggledLegendId.push(t),-1===v&&this.maps.toggledShapeElementId.push(o.id),this.maps.legendSettings.toggleLegendSettings.applyShapeSettings?(o.setAttribute("fill",this.maps.layers[0].shapeSettings.fill),o.setAttribute("stroke",this.maps.layers[0].shapeSettings.border.color),o.setAttribute("opacity",this.maps.layers[i].shapeSettings.opacity.toString()),o.setAttribute("stroke-width",this.maps.layers[i].shapeSettings.border.width.toString())):(o.setAttribute("fill",w),o.setAttribute("opacity",b.toString()),o.setAttribute("stroke",k),o.setAttribute("stroke-width",d.toString())),null!==n&&(c(this.maps.element.id+"_Legend_Index_"+t,this.maps.element.id).setAttribute("fill","#E5E5E5"),c(this.maps.element.id+"_Legend_Index_"+t+"_Text",this.maps.element.id).setAttribute("fill","#E5E5E5"))):(-1!==nt&&0===f&&this.maps.toggledLegendId.splice(nt,1),-1!==v&&this.maps.toggledShapeElementId.splice(v,1),o.setAttribute("fill",this.legendCollection[t].fill),o.setAttribute("stroke",this.maps.layers[0].shapeSettings.border.color),o.setAttribute("opacity",this.maps.layers[i].shapeSettings.opacity.toString()),o.setAttribute("stroke-width",this.maps.layers[i].shapeSettings.border.width.toString()),null!==n&&(c(this.maps.element.id+"_Legend_Index_"+t+"_Text",this.maps.element.id).setAttribute("fill","#757575"),c(this.maps.element.id+"_Legend_Index_"+t,this.maps.element.id).setAttribute("fill",this.legendCollection[t].fill))));a._isVisible=!l}}},n.prototype.removeCollections=function(n,t){var i,r,u;this.removeLegendSelectionCollection(n);i=this.getIndexofLegend(this.maps.legendSelectionCollection,n);-1!==i&&this.maps.legendSelectionCollection.splice(i,1);-1!==this.getIndexofLegend(this.legendHighlightCollection,n)&&this.legendHighlightCollection.splice(i,1);r=this.getIndexofLegend(this.shapeHighlightCollection,n);-1!==r&&this.shapeHighlightCollection.splice(r,1);u=this.maps.selectedLegendElementId.indexOf(t);-1!==u&&this.maps.selectedLegendElementId.splice(u,1)},n.prototype.removeEventListener=function(){this.maps.isDestroyed||(this.maps.off(r.Browser.touchMoveEvent,this.interactiveHandler),this.maps.off(r.Browser.touchEndEvent,this.interactiveHandler),this.maps.off("click",this.legendClick))},n.prototype.getLegendData=function(n,t,i,u,f,e,o){var v=[],h;if("[object Array]"===Object.prototype.toString.call(f))for(h=0;h<f.length;h++){var c=f[h],a=u.indexOf(".")>-1?s(i,u):i[u],l=ri(i[u],e,c.properties),y=Object(r.isNullOrUndefined)(a)?a:a.toLowerCase();(!Object(r.isNullOrUndefined)(c.properties[l])&&isNaN(c.properties[l])?c.properties[l].toLowerCase():c.properties[l])===y&&v.push({layerIndex:n,shapeIndex:h,dataIndex:t,name:i[u],value:o})}return v},n.prototype.legendGradientColor=function(n,t){var o,s="http://www.w3.org/2000/svg",h,c,i,u,f,l,e,a;if(!Object(r.isNullOrUndefined)(n.color)&&"object"==typeof n.color){for(i=document.createElementNS(s,"linearGradient"),u=this.maps.legendSettings.position,h="Top"===u||"Bottom"===u?"100":"0",c="Top"===u||"Bottom"===u?"0":"100",i.setAttribute("id","linear_"+t+"_"+this.maps.element.id),i.setAttribute("x1","0%"),i.setAttribute("y1","0%"),i.setAttribute("x2",h+"%"),i.setAttribute("y2",c+"%"),f=0;f<n.color.length;f++)l=100/(n.color.length-1),e=document.createElementNS(s,"stop"),e.setAttribute("offset",f*l+"%"),e.setAttribute("stop-color",n.color[f]),e.setAttribute("stop-opacity",1..toString()),i.appendChild(e);this.legendLinearGradient=i;a="url(#linear_"+t+"_"+this.maps.element.id+")";this.defsElement.appendChild(i);o=a}return o},n.prototype.getModuleName=function(){return"Legend"},n.prototype.destroy=function(){this.removeEventListener()},n}(),de=function(n,t){var u={},i,r;for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(u[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&(u[i[r]]=n[i[r]]);return u},ge=function(){function n(n){this.maps=n;this.addEventListener()}return n.prototype.addEventListener=function(){this.maps.isDestroyed||(this.maps.on(r.Browser.touchMoveEvent,this.mouseMove,this),this.maps.on(r.Browser.touchStartEvent,this.mouseMove,this))},n.prototype.removeEventListener=function(){this.maps.isDestroyed||(this.maps.off(r.Browser.touchMoveEvent,this.mouseMove),this.maps.off(r.Browser.touchStartEvent,this.mouseMove))},n.prototype.addHighlight=function(n,t,i){var r=pr(n,t,0,this.maps);i?this.mapHighlight(r,null,null):p(r)},n.prototype.mouseMove=function(n){var i,t=n.target,v="touch"===n.pointerType||"2"===n.pointerType||n.type.indexOf("touch")>-1,h,c,u,f,l;if((-1!==t.id.indexOf("LayerIndex")||t.id.indexOf("NavigationIndex")>-1)&&"ShapeselectionMapStyle"!==t.getAttribute("class")&&!v&&"MarkerselectionMapStyle"!==t.getAttribute("class")&&"BubbleselectionMapStyle"!==t.getAttribute("class")&&"navigationlineselectionMapStyle"!==t.getAttribute("class")){i=parseInt(t.id.split("_LayerIndex_")[1].split("_")[0],10);var s=void 0,o=void 0,a=void 0,e=void 0;t.id.indexOf("shapeIndex")>-1?(a=parseInt(t.id.split("_shapeIndex_")[1].split("_")[0],10),s=this.maps.layers[i].shapeData.features?this.maps.layers[i].shapeData.features[a].properties:null,e=parseInt(t.id.split("_dataIndex_")[1].split("_")[0],10),o=Object(r.isNullOrUndefined)(e)?null:this.maps.layers[i].dataSource[e],this.highlightSettings=this.maps.layers[i].highlightSettings):t.id.indexOf("BubbleIndex")>-1?(h=parseInt(t.id.split("_BubbleIndex_")[1].split("_")[0],10),e=parseInt(t.id.split("_dataIndex_")[1].split("_")[0],10),o=this.maps.layers[i].bubbleSettings[h].dataSource[e],this.highlightSettings=this.maps.layers[i].bubbleSettings[h].highlightSettings):t.id.indexOf("MarkerIndex")>-1?(c=parseInt(t.id.split("_MarkerIndex_")[1].split("_")[0],10),e=parseInt(t.id.split("_dataIndex_")[1].split("_")[0],10),o=this.maps.layers[i].markerSettings[c].dataSource[e],this.highlightSettings=this.maps.layers[i].markerSettings[c].highlightSettings):(u=parseInt(t.id.split("_NavigationIndex_")[1].split("_")[0],10),i=parseInt(t.id.split("_LayerIndex_")[1].split("_")[0],10),s=null,o={latitude:this.maps.layers[i].navigationLineSettings[u].latitude,longitude:this.maps.layers[i].navigationLineSettings[u].longitude},this.highlightSettings=this.maps.layers[i].navigationLineSettings[u].highlightSettings);this.highlightSettings.enable?(this.maps.legendSettings.visible&&-1===t.id.indexOf("_MarkerIndex_")&&this.maps.legendModule.shapeHighLightAndSelection(t,o,this.highlightSettings,"highlight",i),t.id.indexOf("shapeIndex")>-1&&this.maps.legendSettings.visible&&!this.maps.legendModule.shapeToggled||this.mapHighlight(t,s,o)):(f=document.getElementsByClassName("highlightMapStyle")[0],!Object(r.isNullOrUndefined)(f)&&(p(f),f.id.indexOf("NavigationIndex")>-1)&&(u=parseInt(f.id.split("_NavigationIndex_")[1].split("_")[0],10),l=parseInt(f.parentElement.id.split("_LayerIndex_")[1].split("_")[0],10),f.setAttribute("stroke-width",this.maps.layers[l].navigationLineSettings[u].width.toString()),f.setAttribute("stroke",this.maps.layers[l].navigationLineSettings[u].color)))}else fi("highlightMapStyle").length>0?((t=fi("highlightMapStyle")[0]).id.indexOf("NavigationIndex")>-1&&(u=parseInt(t.id.split("_NavigationIndex_")[1].split("_")[0],10),i=parseInt(t.parentElement.id.split("_LayerIndex_")[1].split("_")[0],10),t.setAttribute("stroke-width",this.maps.layers[i].navigationLineSettings[u].width.toString()),t.setAttribute("stroke",this.maps.layers[i].navigationLineSettings[u].color)),p(t),this.maps.legendSettings.visible&&this.maps.legendModule.removeShapeHighlightCollection()):-1===t.id.indexOf(this.maps.element.id+"_Legend_Shape_Index")&&-1===t.id.indexOf(this.maps.element.id+"_Legend_Index")||!this.maps.legendSettings.visible||-1!==t.id.indexOf("_Text")?this.maps.legendSettings.visible&&this.maps.legendModule.removeLegendHighlightCollection():this.maps.legendModule.legendHighLightAndSelection(t,"highlight")},n.prototype.mapHighlight=function(n,t,i){var h=this,c=parseInt(n.id.split("_LayerIndex_")[1].split("_")[0],10),f=!1,e,o,u,s;n.id.indexOf("MarkerIndex")>-1&&(e=parseInt(n.id.split("_MarkerIndex_")[1].split("_")[0],10),f=this.maps.layers[c].markerSettings[e].highlightSettings.enable);o={color:this.highlightSettings.border.color,width:this.highlightSettings.border.width/(f?1:this.maps.scale)};u={opacity:this.highlightSettings.opacity,fill:-1===n.id.indexOf("NavigationIndex")?Object(r.isNullOrUndefined)(this.highlightSettings.fill)?n.getAttribute("fill"):this.highlightSettings.fill:"none",border:o,name:"itemHighlight",target:n.id,cancel:!1,shapeData:t,data:i,maps:this.maps};this.maps.isBlazor&&(u.shapeData,u.maps,s=de(u,["shapeData","maps"]),u=s);this.maps.trigger("itemHighlight",u,function(){h.highlightMap(n,u)})},n.prototype.highlightMap=function(n,t){var i,r,u;"highlightMapStyle"!==n.getAttribute("class")&&(fi("highlightMapStyle").length>0&&(i=fi("highlightMapStyle")[0],(p(i),i.id.indexOf("NavigationIndex")>-1)&&(r=parseInt(i.id.split("_NavigationIndex_")[1].split("_")[0],10),u=parseInt(i.parentElement.id.split("_LayerIndex_")[1].split("_")[0],10),i.setAttribute("stroke-width",this.maps.layers[u].navigationLineSettings[r].width.toString()),i.setAttribute("stroke",this.maps.layers[u].navigationLineSettings[r].color))),h("highlightMap")?lt("highlightMap","highlightMapStyle",t):document.body.appendChild(ei("highlightMap","highlightMapStyle",t)),n.setAttribute("class","highlightMapStyle"))},n.prototype.getModuleName=function(){return"Highlight"},n.prototype.destroy=function(){this.removeEventListener()},n}(),no=function(n,t){var u={},i,r;for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(u[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&(u[i[r]]=n[i[r]]);return u},to=function(){function n(n){this.maps=n;this.addEventListener()}return n.prototype.addEventListener=function(){this.maps.isDestroyed||(this.maps.on("click",this.mouseClick,this),this.maps.on(r.Browser.touchEndEvent,this.mouseClick,this))},n.prototype.removeEventListener=function(){this.maps.isDestroyed||(this.maps.off("click",this.mouseClick),this.maps.off(r.Browser.touchEndEvent,this.mouseClick))},n.prototype.mouseClick=function(n){var s,h,f;if(!Object(r.isNullOrUndefined)(n.type)&&-1!==n.type.indexOf("touch")&&Object(r.isNullOrUndefined)(n.id)&&(n=n.target),!Object(r.isNullOrUndefined)(n.id)&&(n.id.indexOf("LayerIndex")>-1||n.id.indexOf("NavigationIndex")>-1)){var t,e=void 0,u=void 0,o=void 0,i=void 0;(t=parseInt(n.id.split("_LayerIndex_")[1].split("_")[0],10),n.id.indexOf("shapeIndex")>-1)?(o=parseInt(n.id.split("_shapeIndex_")[1].split("_")[0],10),e=this.maps.layers[t].shapeData.features.length>o?this.maps.layers[t].shapeData.features[o].properties:null,i=parseInt(n.id.split("_dataIndex_")[1].split("_")[0],10),u=Object(r.isNullOrUndefined)(i)?null:this.maps.layers[t].dataSource[i],this.selectionsettings=this.maps.layers[t].selectionSettings,this.selectionType="Shape"):n.id.indexOf("BubbleIndex")>-1?(s=parseInt(n.id.split("_BubbleIndex_")[1].split("_")[0],10),i=parseInt(n.id.split("_dataIndex_")[1].split("_")[0],10),u=this.maps.layers[t].bubbleSettings[s].dataSource[i],this.selectionsettings=this.maps.layers[t].bubbleSettings[s].selectionSettings,this.selectionType="Bubble"):n.id.indexOf("MarkerIndex")>-1?(h=parseInt(n.id.split("_MarkerIndex_")[1].split("_")[0],10),i=parseInt(n.id.split("_dataIndex_")[1].split("_")[0],10),u=this.maps.layers[t].markerSettings[h].dataSource[i],this.selectionsettings=this.maps.layers[t].markerSettings[h].selectionSettings,this.selectionType="Marker"):(f=parseInt(n.id.split("_NavigationIndex_")[1].split("_")[0],10),e=null,u={latitude:this.maps.layers[t].navigationLineSettings[f].latitude,longitude:this.maps.layers[t].navigationLineSettings[f].longitude},this.selectionsettings=this.maps.layers[t].navigationLineSettings[f].selectionSettings,this.selectionType="navigationline");this.selectionsettings.enable&&(this.maps.mapSelect=!!n,this.maps.legendSettings.visible&&-1===n.id.indexOf("_MarkerIndex_")&&this.maps.legendModule.shapeHighLightAndSelection(n,u,this.selectionsettings,"selection",t),(!(n.id.indexOf("shapeIndex")>-1&&this.maps.legendSettings.visible)||this.maps.legendModule.shapeToggled)&&this.selectMap(n,e,u))}else this.maps.legendSettings.visible&&!this.maps.legendSettings.toggleLegendSettings.enable&&!Object(r.isNullOrUndefined)(n.id)&&-1===n.id.indexOf("_Text")&&(n.id.indexOf(this.maps.element.id+"_Legend_Shape_Index")>-1||-1!==n.id.indexOf(this.maps.element.id+"_Legend_Index"))&&this.maps.legendModule.legendHighLightAndSelection(n,"selection")},n.prototype.addSelection=function(n,t,i){var r=pr(n,t,0,this.maps);i?this.selectMap(r,null,null):p(r)},n.prototype.selectMap=function(n,t,i){var r=this,o=(this.selectionsettings,{color:this.selectionsettings.border.color,width:this.selectionsettings.border.width/("Marker"===this.selectionType?1:this.maps.scale)}),u={opacity:this.selectionsettings.opacity,fill:"navigationline"!==this.selectionType?this.selectionsettings.fill:"none",border:o,name:du,target:n.id,cancel:!1,shapeData:t,data:i,maps:this.maps},f;this.maps.isBlazor&&(u.shapeData,u.maps,f=no(u,["shapeData","maps"]),u=f);this.maps.trigger("itemSelection",u,function(){var o,i,f,s,a,c,v;if(!u.cancel)if(n.getAttribute("class")===r.selectionType+"selectionMapStyle"){for(p(n),r.removedSelectionList(n),o=0;o<r.maps.shapeSelectionItem.length;o++)if(r.maps.shapeSelectionItem[o]===u.shapeData){r.maps.shapeSelectionItem.splice(o,1);break}n.id.indexOf("NavigationIndex")>-1&&(i=parseInt(n.id.split("_NavigationIndex_")[1].split("_")[0],10),f=parseInt(n.parentElement.id.split("_LayerIndex_")[1].split("_")[0],10),n.setAttribute("stroke-width",r.maps.layers[f].navigationLineSettings[i].width.toString()),n.setAttribute("stroke",r.maps.layers[f].navigationLineSettings[i].color))}else{if(s=e(r.maps.element.id+"_Layer_Collections"),!r.selectionsettings.enableMultiSelect&&s.getElementsByClassName(r.selectionType+"selectionMapStyle").length>0){for(var y=s.getElementsByClassName(r.selectionType+"selectionMapStyle").length,t=void 0,l=0;l<y;l++)p(t=s.getElementsByClassName(r.selectionType+"selectionMapStyle")[0]),r.removedSelectionList(t);if("Shape"===r.selectionType)for(r.maps.shapeSelectionItem=[],a=r.maps.selectedElementId.length,c=0;c<a;c++)p(t=s.getElementsByClassName(r.selectionType+"selectionMapStyle")[0]),v=r.maps.selectedElementId.indexOf(t.getAttribute("id")),r.maps.selectedElementId.splice(v,1);t.id.indexOf("NavigationIndex")>-1&&(i=parseInt(n.id.split("_NavigationIndex_")[1].split("_")[0],10),f=parseInt(n.parentElement.id.split("_LayerIndex_")[1].split("_")[0],10),t.setAttribute("stroke-width",r.maps.layers[f].navigationLineSettings[i].width.toString()),t.setAttribute("stroke",r.maps.layers[f].navigationLineSettings[i].color))}h(r.selectionType+"selectionMap")?lt(r.selectionType+"selectionMap",r.selectionType+"selectionMapStyle",u):document.body.appendChild(ei(r.selectionType+"selectionMap",r.selectionType+"selectionMapStyle",u));n.setAttribute("class",r.selectionType+"selectionMapStyle");"ShapeselectionMapStyle"===n.getAttribute("class")&&(r.maps.shapeSelectionClass=h(r.selectionType+"selectionMap"),r.maps.selectedElementId.push(n.getAttribute("id")),r.maps.shapeSelectionItem.push(u.shapeData));"MarkerselectionMapStyle"===n.getAttribute("class")&&(r.maps.markerSelectionClass=h(r.selectionType+"selectionMap"),r.maps.selectedMarkerElementId.push(n.getAttribute("id")));"BubbleselectionMapStyle"===n.getAttribute("class")&&(r.maps.bubbleSelectionClass=h(r.selectionType+"selectionMap"),r.maps.selectedBubbleElementId.push(n.getAttribute("id")));"navigationlineselectionMapStyle"===n.getAttribute("class")&&(r.maps.navigationSelectionClass=h(r.selectionType+"selectionMap"),r.maps.selectedNavigationElementId.push(n.getAttribute("id")))}})},n.prototype.removedSelectionList=function(n){"Shape"===this.selectionType&&this.maps.selectedElementId.splice(this.maps.selectedElementId.indexOf(n.getAttribute("id")),1);"Bubble"===this.selectionType&&this.maps.selectedBubbleElementId.splice(this.maps.selectedBubbleElementId.indexOf(n.getAttribute("id")),1);"Marker"===this.selectionType&&this.maps.selectedMarkerElementId.splice(this.maps.selectedMarkerElementId.indexOf(n.getAttribute("id")),1);"navigationline"===this.selectionType&&this.maps.selectedBubbleElementId.splice(this.maps.selectedBubbleElementId.indexOf(n.getAttribute("id")),1)},n.prototype.getModuleName=function(){return"Selection"},n.prototype.destroy=function(){this.removeEventListener()},n}(),io=function(){function n(n){this.maps=n;this.tooltipId=this.maps.element.id+"_mapsTooltip";this.addEventListener()}return n.prototype.renderTooltip=function(n){var et,ot,d,st,e,y,t,i=this,lt,p,nt,tt,it,vt,pt,l,rt,ft,k;-1!==n.type.indexOf("touch")?(this.isTouch=!0,et=(st=n).changedTouches[0].pageX,ot=st.changedTouches[0].pageY,d=st.target):(this.isTouch="touch"===n.pointerType,et=n.pageX,ot=n.pageY,d=n.target);var g,ct,h="",f=d.id,b=[],c=f.indexOf("_LayerIndex_")>-1&&parseFloat(f.split("_LayerIndex_")[1].split("_")[0]),u=this.maps.layersCollection[c];if(ct=tr(et,ot,this.maps.svgObject),this.tooltipTargetID=f,f.indexOf("_shapeIndex_")>-1||f.indexOf("_MarkerIndex_")>-1||f.indexOf("_BubbleIndex_")>-1){if(f.indexOf("_shapeIndex_")>-1){if((t=u.tooltipSettings).textStyle.fontFamily=this.maps.themeStyle.fontFamily||t.textStyle.fontFamily,t.textStyle.opacity=this.maps.themeStyle.tooltipTextOpacity||t.textStyle.opacity,lt=parseInt(f.split("_shapeIndex_")[1].split("_")[0],10),Object(r.isNullOrUndefined)(u.layerData)||Object(r.isNullOrUndefined)(u.layerData[lt]))return;var v=u.layerData[lt].property,at=!1,w="[object Array]"===Object.prototype.toString.call(u.shapePropertyPath)?u.shapePropertyPath:[u.shapePropertyPath];if(!Object(r.isNullOrUndefined)(w)){for(p=0;p<w.length;p++)for(nt=0;nt<u.dataSource.length;nt++)if(tt=u.dataSource[nt],it=u.shapeDataPath.indexOf(".")>-1?s(tt,u.shapeDataPath):tt[u.shapeDataPath],(!Object(r.isNullOrUndefined)(it)&&isNaN(tt[u.shapeDataPath])?it.toLowerCase():it)===(!Object(r.isNullOrUndefined)(v[w[p]])&&isNaN(v[w[p]])?v[w[p]].toLowerCase():v[w[p]])){at=!0;c=nt;p=w.length;break}c=at?c:null;b=u.dataSource[c]}!t.visible||(Object(r.isNullOrUndefined)(c)||isNaN(c))&&Object(r.isNullOrUndefined)(v)||(u.tooltipSettings.format?h=this.formatter(u.tooltipSettings.format,u.dataSource[c]):(vt=ri(u.shapeDataPath,u.shapePropertyPath,v),h=Object(r.isNullOrUndefined)(u.dataSource)||Object(r.isNullOrUndefined)(c)?v[vt]:ht(t.valuePath.indexOf(".")>-1?s(u.dataSource[c],t.valuePath):u.dataSource[c][t.valuePath],this.maps),Object(r.isNullOrUndefined)(h)&&(h=t.valuePath.indexOf(".")>-1?s(v,t.valuePath):v[t.valuePath])))}else if(f.indexOf("_MarkerIndex_")>-1){var yt=parseInt(f.split("_MarkerIndex_")[1].split("_")[0],10),a=parseInt(f.split("_MarkerIndex_")[1].split("_")[2],10),o=u.markerSettings[yt];t=o.tooltipSettings;b=o.dataSource[a];t.visible&&!isNaN(yt)&&(h=o.tooltipSettings.format?this.formatter(o.tooltipSettings.format,o.dataSource[a]):o.template&&!o.tooltipSettings.valuePath?o.template.split(">")[1].split("<")[0]:ht(o.tooltipSettings.valuePath.indexOf(".")>-1?s(o.dataSource[a],o.tooltipSettings.valuePath):o.dataSource[a][o.tooltipSettings.valuePath],this.maps))}else f.indexOf("_BubbleIndex_")>-1&&(pt=parseInt(f.split("_BubbleIndex_")[1].split("_")[0],10),l=(a=parseInt(f.split("_BubbleIndex_")[1].split("_")[2],10),u.bubbleSettings[pt]),t=l.tooltipSettings,b=l.dataSource[a],t.visible&&!isNaN(a)&&(h=l.tooltipSettings.format?this.formatter(l.tooltipSettings.format,l.dataSource[a]):ht(l.tooltipSettings.valuePath.indexOf(".")>-1?s(l.dataSource[a],l.tooltipSettings.valuePath):l.dataSource[a][l.tooltipSettings.valuePath],this.maps)));document.getElementById(this.tooltipId)?g=document.getElementById(this.tooltipId):(g=Object(r.createElement)("div",{id:this.maps.element.id+"_mapsTooltip",className:"EJ2-maps-Tooltip",styles:"position: absolute;pointer-events:none;"}),document.getElementById(this.maps.element.id+"_Secondary_Element").appendChild(g));null!==t.template&&1===Object.keys("object"==typeof t.template?t.template:{}).length&&(t.template=t.template[Object.keys(t.template)[0]]);rt={location:ct,text:[],data:b=this.setTooltipContent(t,b),textStyle:t.textStyle,template:t.template};(e={cancel:!1,name:"tooltipRender",options:rt,fill:t.fill,maps:this.maps,element:d,eventArgs:n},this.maps.isBlazor)?(ft={location:ct},k={name:"tooltipRender",cancel:!1,options:ft,data:b,textStyle:e.options.textStyle,fill:e.fill,element:d,eventArgs:n},this.maps.trigger("tooltipRender",k,function(){if(k.cancel||!t.visible||Object(r.isNullOrUndefined)(h)||-1!==f.indexOf("_cluster_")||-1!==f.indexOf("_dataLabel_"))i.removeTooltip(),i.maps.clearTemplate();else{f.indexOf("MarkerIndex")>0?"MarkerTooltipTemplate":f.indexOf("BubbleIndex")>0?"BubbleTooltipTemplate":"LayerTooltipTemplate";i.maps.isProtectedOnChange=!0;i.svgTooltip=k.cancel?new ut.Tooltip({enable:!0,header:"",content:[h.toString()],shapes:[],location:ft.location,palette:[void 0],areaBounds:i.maps.mapAreaRect,textStyle:e.options.textStyle,availableSize:i.maps.availableSize,fill:e.fill}):new ut.Tooltip({enable:!0,header:"",content:[h.toString()],shapes:[],location:ft.location,palette:[void 0],areaBounds:i.maps.mapAreaRect,textStyle:k.textStyle,availableSize:i.maps.availableSize,fill:k.fill});var n=g;i.svgTooltip.opacity=i.maps.themeStyle.tooltipFillOpacity||i.svgTooltip.opacity;i.svgTooltip.appendTo(n);i.maps.renderReactTemplates()}})):this.maps.trigger("tooltipRender",e,function(){if(e.cancel||!t.visible||Object(r.isNullOrUndefined)(h)||-1!==f.indexOf("_cluster_")||-1!==f.indexOf("_dataLabel_"))i.removeTooltip(),i.maps.clearTemplate();else if(i.maps.isProtectedOnChange=!0,e.options.textStyle.color=i.maps.themeStyle.tooltipFontColor||e.options.textStyle.color,i.svgTooltip=e.cancel?new ut.Tooltip({enable:!0,header:"",data:t.data,template:t.template,content:[h.toString()],shapes:[],location:t.location,palette:[void 0],areaBounds:i.maps.mapAreaRect,textStyle:t.textStyle,availableSize:i.maps.availableSize,fill:t.fill||i.maps.themeStyle.tooltipFillColor}):new ut.Tooltip({enable:!0,header:"",data:e.options.data,template:e.options.template,content:[h.toString()],shapes:[],location:e.options.location,palette:[void 0],areaBounds:i.maps.mapAreaRect,textStyle:e.options.textStyle,availableSize:i.maps.availableSize,fill:e.fill||i.maps.themeStyle.tooltipFillColor}),i.svgTooltip.opacity=i.maps.themeStyle.tooltipFillOpacity||i.svgTooltip.opacity,i.svgTooltip.appendTo(g),i.maps.renderReactTemplates(),null!==(y=document.getElementById(i.maps.element.id+"_mapsTooltip"))&&-1!==y.innerHTML.indexOf("href")&&-1!==y.innerHTML.indexOf("<\/a>")){var n=y.getAttribute("style");n=n.replace("pointer-events: none;","position-events:all;");y.setAttribute("style",n)}});this.svgTooltip&&this.maps.trigger("tooltipRenderComplete",{cancel:!1,name:"tooltipRenderComplete",maps:this.maps,options:rt,element:this.svgTooltip.element});this.svgTooltip?this.maps.trigger("tooltipRenderComplete",{cancel:!1,name:"tooltipRenderComplete",maps:this.maps,options:rt,element:this.svgTooltip.element}):(this.removeTooltip(),this.maps.clearTemplate())}else null!==(y=document.getElementById(this.maps.element.id+"_mapsTooltip"))&&-1!==y.innerHTML.indexOf("href")&&-1!==y.innerHTML.indexOf("<\/a>")?this.maps.notify("click",this):(this.removeTooltip(),this.maps.clearTemplate())},n.prototype.setTooltipContent=function(n,t){var i=Object(r.extend)({},t,null,!0);return this.maps.format&&!isNaN(Number(i[n.valuePath]))?i[n.valuePath]=yr(this.maps,Number(i[n.valuePath])):i=Object.keys(i).length?i:void 0,i},n.prototype.formatter=function(n,t){var i,u,r;for(void 0===t&&(t={}),i=0,u=Object.keys(t);i<u.length;i++)r=u[i],n="object"==typeof t[r]?or("",n,t,this.maps):n.split("${"+r+"}").join(ht(t[r],this.maps));return n},n.prototype.mouseUpHandler=function(n){this.renderTooltip(n);"MouseMove"===this.maps.tooltipDisplayMode&&(clearTimeout(this.clearTimeout),this.clearTimeout=setTimeout(this.removeTooltip.bind(this),2e3))},n.prototype.removeTooltip=function(){document.getElementsByClassName("EJ2-maps-Tooltip").length>0&&Object(r.remove)(document.getElementsByClassName("EJ2-maps-Tooltip")[0])},n.prototype.addEventListener=function(){this.maps.isDestroyed||("DoubleClick"===this.maps.tooltipDisplayMode?this.maps.on("dblclick",this.renderTooltip,this):"Click"===this.maps.tooltipDisplayMode?this.maps.on(r.Browser.touchEndEvent,this.mouseUpHandler,this):this.maps.on(r.Browser.touchMoveEvent,this.renderTooltip,this),this.maps.element.addEventListener("contextmenu",this.removeTooltip),this.maps.on(r.Browser.touchCancelEvent,this.removeTooltip,this))},n.prototype.removeEventListener=function(){this.maps.isDestroyed||("DoubleClick"===this.maps.tooltipDisplayMode?this.maps.off("dblclick",this.removeTooltip):"Click"===this.maps.tooltipDisplayMode?this.maps.off(r.Browser.touchEndEvent,this.mouseUpHandler):this.maps.off(r.Browser.touchMoveEvent,this.renderTooltip),this.maps.off(r.Browser.touchCancelEvent,this.removeTooltip))},n.prototype.getModuleName=function(){return"MapsTooltip"},n.prototype.destroy=function(){this.removeEventListener()},n}(),ro=function(n,t){var u={},i,r;for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(u[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols)for(r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)t.indexOf(i[r])<0&&(u[i[r]]=n[i[r]]);return u},uo=function(){function n(n){this.isPanning=!1;this.mouseEnter=!1;this.isTouch=!1;this.rectZoomingStart=!1;this.pinchRect=new y(0,0,0,0);this.browserName=r.Browser.info.name;this.isPointer=r.Browser.isPointer;this.handled=!1;this.pinchFactor=1;this.startTouches=[];this.shapeZoomLocation=[];this.intersect=[];this.mouseDownLatLong={x:0,y:0};this.mouseMoveLatLong={x:0,y:0};this.isSingleClick=!1;this.maps=n;this.wheelEvent="mozilla"===this.browserName?this.isPointer?"mousewheel":"DOMMouseScroll":"mousewheel";this.cancelEvent=this.isPointer?"pointerleave":"mouseleave";this.selectionColor=this.maps.zoomSettings.selectionColor;this.fillColor=this.maps.zoomSettings.color;this.addEventListener();this.groupElements=[]}return n.prototype.performZooming=function(n,t,i){var s=this,r=this.maps,c;r.previousProjection=r.projectionType;r.defaultState=!1;r.initialCheck=!1;r.markerZoomedState=!1;r.zoomPersistence=r.enablePersistence;var h=r.tileZoomLevel,v=r.previousScale=r.scale,y=r.zoomSettings.maxZoom,f=r.zoomSettings.minZoom;if(t=f>t&&"ZoomIn"===i?f+1:t,c=r.tileTranslatePoint,!r.isTileMap&&("ZoomIn"===i?t>=f&&t<=y:t>=f)){var u=r.mapAreaRect,e=r.baseMapRectBounds.min,p=r.baseMapRectBounds.max,k=Math.abs(e.x-p.x),d=Math.abs(e.y-p.y),w=r.translatePoint,l=w.x-(u.width/v-u.width/t)/(u.width/n.x),a=w.y-(u.height/v-u.height/t)/(u.height/n.y),b=Math.abs(r.baseMapRectBounds.max.y-r.baseMapRectBounds.min.y)*t;l=b<r.mapAreaRect.height?u.x+(-e.x+(u.width/2-k/2)):l;a=b<r.mapAreaRect.height?u.y+(-e.y+(u.height/2-d/2)):a;r.translatePoint=new o(l,a);r.scale=t;this.triggerZoomEvent(c,h,i);this.applyTransform()}else r.isTileMap&&t>=f&&t<=y&&(this.getTileTranslatePosition(h,t,n,i),r.tileZoomLevel=t,r.scale=Math.pow(2,t-1),"ZoomOut"===i&&r.zoomSettings.resetToInitial&&r.applyZoomReset&&t<=r.initialZoomLevel&&(r.initialCheck=!0,r.zoomPersistence=!1,r.tileTranslatePoint.x=r.initialTileTranslate.x,r.tileTranslatePoint.y=r.initialTileTranslate.y,t=r.tileZoomLevel=r.mapScaleValue=r.initialZoomLevel,r.scale=Math.pow(2,t-1)),r.translatePoint.y=(r.tileTranslatePoint.y-.01*r.mapScaleValue)/r.scale,r.translatePoint.x=(r.tileTranslatePoint.x-.01*r.mapScaleValue)/r.scale,this.triggerZoomEvent(c,h,i),document.querySelector(".GroupElement")&&(document.querySelector(".GroupElement").style.display="none"),document.getElementById(this.maps.element.id+"_LayerIndex_1")&&(document.getElementById(this.maps.element.id+"_LayerIndex_1").style.display="none"),r.mapLayerPanel.generateTiles(t,r.tileTranslatePoint,i+"wheel",null,n),document.getElementById(this.maps.element.id+"_tiles"),setTimeout(function(){s.applyTransform();document.getElementById(s.maps.element.id+"_LayerIndex_1")&&(document.getElementById(s.maps.element.id+"_LayerIndex_1").style.display="block")},250));this.maps.zoomNotApplied=!1},n.prototype.triggerZoomEvent=function(n,t,i){var u,r=this.maps;u=r.isTileMap?{cancel:!1,name:"zoom",type:i,maps:r.isBlazor?null:r,tileTranslatePoint:{previous:n,current:r.tileTranslatePoint},translatePoint:{previous:r.previousPoint,current:r.translatePoint},tileZoomLevel:{previous:t,current:r.tileZoomLevel},scale:{previous:r.previousScale,current:r.scale}}:{cancel:!1,name:"zoom",type:i,maps:r.isBlazor?null:r,tileTranslatePoint:{},translatePoint:{previous:r.previousPoint,current:r.translatePoint},tileZoomLevel:{},scale:{previous:r.previousScale,current:r.scale}};r.trigger("zoom",u)},n.prototype.getTileTranslatePosition=function(n,t,i,r){var u=this.maps,s="ZoomOut"===r?10:"Reset"===r&&t>1?0:10,f=u.availableSize,e=256*Math.pow(2,n),o=256*Math.pow(2,t),h=(i.x-u.tileTranslatePoint.x)/e*100,c=(i.y-u.tileTranslatePoint.y)/e*100;u.tileTranslatePoint.x=1===t?f.width/2-256:i.x-h*o/100;u.tileTranslatePoint.y=1===t?f.height/2-256+2*s:i.y-c*o/100},n.prototype.performRectZooming=function(){var n,i,f;this.isDragZoom=!0;n=this.maps;i=n.availableSize;n.previousProjection=n.projectionType;var u=n.tileZoomLevel,e=n.tileTranslatePoint,r=this.zoomingRect,s=n.zoomSettings.maxZoom,a=n.zoomSettings.minZoom;if(r.height>0&&r.width>0){var h=this.zoomingRect.x+this.zoomingRect.width/2,c=this.zoomingRect.y+this.zoomingRect.height/2,t=void 0;if(n.isTileMap)t=(t=u+Math.round(u+(i.width/r.width+i.height/r.height)/2))>=a&&t<=s?t:s,this.getTileTranslatePosition(u,t,{x:h,y:c}),n.tileZoomLevel=t,n.translatePoint.x=(n.tileTranslatePoint.x-.5*Math.pow(2,t))/Math.pow(2,t),n.translatePoint.y=(n.tileTranslatePoint.y-.5*Math.pow(2,t))/Math.pow(2,t),n.scale=Math.pow(2,t),this.triggerZoomEvent(e,u,""),n.mapLayerPanel.generateTiles(t,n.tileTranslatePoint);else{f=n.previousScale=n.scale;t=f+Math.round((i.width/r.width+i.height/r.height)/2);var l=n.previousPoint=n.translatePoint,v=l.x-(i.width/f-i.width/t)/(i.width/h),y=l.y-(i.height/f-i.height/t)/(i.height/c);n.translatePoint=new o(v,y);n.scale=t;this.triggerZoomEvent(e,u,"")}n.mapScaleValue=t;this.applyTransform(!0);this.maps.zoomNotApplied=!1;this.zoomingRect=null}},n.prototype.setInteraction=function(n){this.lastScale=1;this.interaction=n},n.prototype.updateInteraction=function(){2===this.fingers?this.setInteraction("zoom"):this.setInteraction(null)},n.prototype.performPinchZooming=function(){var n=this.maps,e=n.tileZoomLevel,t=n.mapAreaRect,r,i;n.previousScale=n.scale;n.previousPoint=n.translatePoint;var s,h,v,y,p,c,w,b,k=n.tileTranslatePoint,d=(s=this.touchStartList,h=this.touchMoveList,v=gr(s[0],s[1]),gr(h[0],h[1])/v),u=function(n){return{x:n.map(function(n){return n.x}).reduce(nu)/n.length,y:n.map(function(n){return n.y}).reduce(nu)/n.length}}((y=this.touchMoveList,p=this.maps,c=p.element.getBoundingClientRect(),w=c.top+document.defaultView.pageXOffset,b=c.left+document.defaultView.pageYOffset,Array.prototype.slice.call(y).map(function(n){return{x:n.pageX-b,y:n.pageY-w}}))),it=d/this.lastScale;if(this.lastScale=d,this.pinchFactor*=it,this.pinchFactor=Math.min(this.maps.zoomSettings.maxZoom,Math.max(this.pinchFactor,this.maps.zoomSettings.minZoom)),r=this.pinchFactor,n.isTileMap)i=r,this.getTileTranslatePosition(e,i,{x:u.x,y:u.y}),n.tileZoomLevel=i,n.translatePoint.x=(n.tileTranslatePoint.x-.5*Math.pow(2,i))/Math.pow(2,i),n.translatePoint.y=(n.tileTranslatePoint.y-.5*Math.pow(2,i))/Math.pow(2,i),n.scale=Math.pow(2,i),this.triggerZoomEvent(k,e,""),n.mapLayerPanel.generateTiles(i,n.tileTranslatePoint);else{var f=n.baseMapRectBounds.min,g=n.baseMapRectBounds.max,rt=Math.abs(f.x-g.x),ut=Math.abs(f.y-g.y),nt=n.translatePoint,tt=Math.abs(n.baseMapRectBounds.max.y-n.baseMapRectBounds.min.y)*r,l=nt.x-(t.width/n.scale-t.width/r)/(t.width/u.x),a=nt.y-(t.height/n.scale-t.height/r)/(t.height/u.y);l=tt<n.mapAreaRect.height?t.x+(-f.x+(t.width/2-rt/2)):l;a=tt<n.mapAreaRect.height?t.y+(-f.y+(t.height/2-ut/2)):a;n.translatePoint=new o(l,a);n.scale=r;this.triggerZoomEvent(k,e,"")}this.applyTransform()},n.prototype.drawZoomRectangle=function(){var i,r,f,o,n=this.maps,t=this.mouseDownPoints,u=this.mouseMovePoints,s,h;f=Math.abs(u.x-t.x);o=Math.abs(u.y-t.y);i=u.x>t.x?t.x:t.x-f;r=u.y>t.y?t.y:t.y-o;e(n.element.id).getBoundingClientRect();i>n.mapAreaRect.x&&i<n.mapAreaRect.x+n.mapAreaRect.width&&r>n.mapAreaRect.y&&r<n.mapAreaRect.y+n.mapAreaRect.height&&(this.zoomingRect=new y(i,r,f,o),s=n.renderer.createSvg({id:n.element.id+"_Selection_Rect_Zooming",width:n.availableSize.width,height:n.availableSize.height}),h=new d(n.element.id+"_ZoomRect","#d3d3d3",{width:1,color:"#009900"},.5,this.zoomingRect,0,0,"","3"),s.appendChild(n.renderer.drawRectangle(h)),e(n.element.id+"_Secondary_Element").appendChild(s))},n.prototype.animateTransform=function(n,t,i,r,u){var f=this.currentLayer.animationDuration;t&&0!==f?function(n,t,i,r,u,f,e){var c=0,o=e.previousPoint,l=e.previousScale,v=u-l,s=new rt(0,0),h=1;if(u!==l){var a=function(n,t){return n.x===t.x?null:(t.y-n.y)/(t.x-n.x)}(o,r),y=function(n,t){return null===t?n.x:n.y-t*n.x}(o,a),p=r.x-o.x,w=r.y-o.y;tu(n,t,i,function(n){n.timeStamp>n.delay&&(c=(n.timeStamp-n.delay)/n.duration,h=l+c*v,s.x=o.x+c*p/(h/u),s.y=null==a?o.y+c*w:a*s.x+y,n.element.setAttribute("transform","scale( "+h+" ) translate( "+s.x+" "+s.y+" )"),e.translatePoint=s,e.scale=h,e.zoomModule.processTemplate(r.x,r.y,h,e))},function(){e.translatePoint=r;e.scale=u;n.setAttribute("transform","scale( "+u+" ) translate( "+r.x+" "+r.y+" )");e.zoomModule.processTemplate(r.x,r.y,u,e)})}else n.setAttribute("transform","scale( "+u+" ) translate( "+r.x+" "+r.y+" )")}(n,0,f,new rt(i,r),u,this.maps.mapAreaRect,this.maps):n.setAttribute("transform","scale("+u+") translate( "+i+" "+r+" )")},n.prototype.applyTransform=function(n){var ft,b,u,k,y,t,i,p,w,it,ut,s,ot,nt,l,tt,lt;this.templateCount=0;var f=this.maps.scale,e=this.maps.translatePoint.x,o=this.maps.translatePoint.y;if(this.maps.zoomShapeCollection=[],document.getElementById(this.maps.element.id+"_mapsTooltip")&&a(this.maps.element.id+"_mapsTooltip"),this.layerCollectionEle){for(b=0;b<this.layerCollectionEle.childElementCount;b++){if(u=this.layerCollectionEle.childNodes[b],"g"===u.tagName)for(this.templateCount++,this.index=u.id.indexOf("_LayerIndex_")>-1&&parseFloat(u.id.split("_LayerIndex_")[1].split("_")[0]),this.currentLayer=this.maps.layersCollection[this.index],k=this.maps.mapLayerPanel.calculateFactor(this.currentLayer),y=0;y<u.childElementCount;y++)if(t=u.childNodes[y],t.id.indexOf("_Markers_Group")>-1||t.id.indexOf("_bubble_Group")>-1||t.id.indexOf("_dataLableIndex_Group")>-1){if(t.id.indexOf("_Markers_Group")>-1){if(this.isPanning&&!this.maps.isBlazor||this.markerTranslates(t.childNodes[0],k,e,o,f,"Marker",u,n),t=u.childNodes[y],!Object(r.isNullOrUndefined)(t)){for(i=0;i<t.childElementCount;i++){this.markerTranslate(t.childNodes[i],k,e,o,f,"Marker",n);parseInt(t.childNodes[i].id.split("_LayerIndex_")[1].split("_")[0],10);for(var d=parseInt(t.childNodes[i].id.split("_dataIndex_")[1].split("_")[0],10),c=parseInt(t.childNodes[i].id.split("_MarkerIndex_")[1].split("_")[0],10),et=this.currentLayer.markerSettings[c].dataSource[d],g=0;g<this.currentLayer.markerSettings[c].initialMarkerSelection.length;g++)this.currentLayer.markerSettings[c].initialMarkerSelection[g].latitude!==et.latitude&&this.currentLayer.markerSettings[c].initialMarkerSelection[g].longitude!==et.longitude||this.maps.markerSelection(this.currentLayer.markerSettings[c].selectionSettings,this.maps,t.children[i],this.currentLayer.markerSettings[c].dataSource[d]);!this.maps.isTileMap&&this.currentLayer.animationDuration>0&&t.setAttribute("style","visibility:hidden")}(this.isPanning&&this.maps.markerModule.sameMarkerData.length>0?hr(this.maps.markerModule.sameMarkerData,this.maps,t,!0):this.maps.markerModule.sameMarkerData.length>0&&(this.maps.markerModule.sameMarkerData=[],document.getElementById(this.maps.element.id+"_mapsTooltip")&&a(this.maps.element.id+"_mapsTooltip")),document.getElementById(this.maps.element.id+"_mapsTooltip")&&this.maps.mapsTooltipModule.tooltipTargetID.indexOf("_MarkerIndex_")&&!this.isPanning)&&(p=this.maps.mapsTooltipModule,w=t.querySelector("#"+p.tooltipTargetID),Object(r.isNullOrUndefined)(w)||("hidden"===w.style.visibility?a(this.maps.element.id+"_mapsTooltip"):(it=parseFloat(w.getAttribute("transform").split("(")[1].split(")")[0].split(" ")[1]),ut=parseFloat(w.getAttribute("transform").split("(")[1].split(")")[0].split(" ")[2]),this.maps.isTileMap&&(it+=+h(this.maps.element.id+"_tile_parent").style.left.split("px")[0],ut+=+h(this.maps.element.id+"_tile_parent").style.top.split("px")[0]),p.svgTooltip.location.x=it,p.svgTooltip.location.y=ut,p.svgTooltip.enableAnimation=!1)))}}else if(t.id.indexOf("_bubble_Group")>-1){for(s=void 0,i=0;i<t.childElementCount;i++)for((s=t.childNodes[i]).getAttribute("transform"),ft=parseFloat(s.id.split("_LayerIndex_")[1].split("_")[0]),ot=parseFloat(s.id.split("_BubbleIndex_")[1].split("_")[0]),nt=(d=parseFloat(s.id.split("_BubbleIndex_")[1].split("_")[2]),0);nt<this.maps.bubbleModule.bubbleCollection.length;nt++)if(l=this.maps.bubbleModule.bubbleCollection[nt],l.LayerIndex===ft&&l.BubbleIndex===ot&&l.DataIndex===d){var st=(l.center.x+e)*f,ht=(l.center.y+o)*f,ct=this.currentLayer.animationDuration;n&&0!==ct?wi(s,0,ct,new rt(st,ht)):s.setAttribute("transform","translate( "+st+" "+ht+" )");break}}else if(t.id.indexOf("_dataLableIndex_Group")>-1)for(this.intersect=[],this.maps.zoomLabelPositions=[],this.maps.zoomLabelPositions=this.maps.dataLabelModule.dataLabelCollections,i=0;i<t.childElementCount;i++)if(t.childNodes[i].id.indexOf("_LabelIndex_")>-1&&(tt=parseFloat(t.childNodes[i].id.split("_LabelIndex_")[1].split("_")[0]),this.zoomshapewidth=this.shapeZoomLocation[tt].getBoundingClientRect(),this.maps.zoomShapeCollection.push(this.zoomshapewidth),this.dataLabelTranslate(t.childNodes[i],k,e,o,f,"DataLabel",n),lt=this.maps.layers[this.index].dataLabelSettings.border,i>0&&lt.width>1&&t.childNodes[i-1].id.indexOf("_rectIndex_")>-1)){var yt=(this.maps.zoomLabelPositions[tt].location.x+e)*f,pt=(this.maps.zoomLabelPositions[tt].location.y+o)*f,at=v(t.childNodes[i].innerHTML,this.maps.layers[this.index].dataLabelSettings.textStyle),vt=t.childNodes[i-1],wt=yt-at.width/2,bt=pt-at.height/2-5;vt.setAttribute("x",wt);vt.setAttribute("y",bt)}}else this.maps.isTileMap&&t.id.indexOf("_line_Group")>-1?(t.remove(),u.children.length>0&&u.children[0]?u.insertBefore(this.maps.navigationLineModule.renderNavigation(this.currentLayer,this.maps.tileZoomLevel,this.index),u.children[0]):u.appendChild(this.maps.navigationLineModule.renderNavigation(this.currentLayer,this.maps.tileZoomLevel,this.index))):(kr(t,this.index,f,this.maps),this.maps.zoomTranslatePoint=this.maps.translatePoint,this.animateTransform(t,n,e,o,f),this.shapeZoomLocation=t.childNodes);this.maps.arrangeTemplate();this.maps.isBlazor&&this.maps.blazorTemplates()}Object(r.isNullOrUndefined)(this.currentLayer)||n&&0!==this.currentLayer.animationDuration||this.processTemplate(e,o,f,this.maps)}},n.prototype.markerTranslates=function(n,t,i,u,f,o,h,c){var v,l=this,k,p,y;void 0===c&&(c=!1);var d=0,g=0,nt=0,b=parseInt((n||h).id.split("_LayerIndex_")[1].split("_")[0],10);v=this.maps.renderer.createGroup({id:this.maps.element.id+"_Markers_Group","class":"GroupElement",style:"pointer-events: auto;"});document.getElementById(v.id)&&a(v.id);k=this.maps.mapAreaRect;p=Object(r.createElement)("div",{id:this.maps.element.id+"_LayerIndex_"+b+"_Markers_Template_Group",className:"template",styles:"overflow: hidden; position: absolute;pointer-events: none;top:"+k.y+"px;left:"+k.x+"px;height:"+k.height+"px;width:"+k.width+"px;"});document.getElementById(p.id)&&a(p.id);y=this.maps.layersCollection[b];y.markerSettings.map(function(n,c){var a=n.dataSource;Array.prototype.forEach.call(a,function(k,tt){var it,ut;l.maps.markerNullCount=c>=0&&0===tt?0:l.maps.markerNullCount;it={template:n.template,data:k,maps:l.maps,marker:n,cancel:!1,name:vu,fill:n.fill,colorValuePath:n.colorValuePath,shapeValuePath:n.shapeValuePath,height:n.height,width:n.width,imageUrl:n.imageUrl,shape:n.shape,border:n.border};(it=kt(it=dt(it,k),k),l.maps.isBlazor)&&(it.maps,it.marker,ut=ro(it,["maps","marker"]),it=ut,n.longitudeValuePath=Object(r.isNullOrUndefined)(n.longitudeValuePath)?Object(r.isNullOrUndefined)(k.Longitude)?Object(r.isNullOrUndefined)(k.longitude)?null:"longitude":"Longitude":n.longitudeValuePath,n.latitudeValuePath=Object(r.isNullOrUndefined)(n.latitudeValuePath)?Object(r.isNullOrUndefined)(k.Latitude)?Object(r.isNullOrUndefined)(k.latitude)?null:"latitude":"Latitude":n.latitudeValuePath);l.maps.trigger("markerRendering",it,function(){var et,ot,ht;if(n.shapeValuePath!==it.shapeValuePath&&(it=dt(it,k)),n.colorValuePath!==it.colorValuePath&&(it=kt(it,k)),et=Object(r.isNullOrUndefined)(n.latitudeValuePath)?Object(r.isNullOrUndefined)(k.latitude)?Object(r.isNullOrUndefined)(k.Latitude)?0:k.Latitude:parseFloat(k.latitude):Number(s(k,n.latitudeValuePath)),ot=Object(r.isNullOrUndefined)(n.longitudeValuePath)?Object(r.isNullOrUndefined)(k.longitude)?Object(r.isNullOrUndefined)(k.Longitude)?0:k.Longitude:parseFloat(k.longitude):Number(s(k,n.longitudeValuePath)),l.maps.isBlazor){for(var ct={},lt=0,at=[],ut=0;ut<Object.keys(k).length;ut++)"text"!==Object.keys(k)[ut].toLowerCase()&&"latitude"!==Object.keys(k)[ut].toLowerCase()&&"blazortemplateid"!==Object.keys(k)[ut].toLowerCase()&&"longitude"!==Object.keys(k)[ut].toLowerCase()&&"name"!==Object.keys(k)[ut].toLowerCase()&&(ct.text=at,at[lt]=k[Object.keys(k)[ut].toLowerCase()],lt++);k.text=ct.text}if(ht=n.offset,!it.cancel&&n.visible&&!Object(r.isNullOrUndefined)(ot)&&!Object(r.isNullOrUndefined)(et)){var vt=l.maps.element.id+"_LayerIndex_"+b+"_MarkerIndex_"+c+"_dataIndex_"+tt,st=l.maps.isTileMap?ft(new rt(ot,et),l.maps.tileZoomLevel,l.maps.tileTranslatePoint,!0):w(et,ot,t,y,l.maps),yt=(0!==y.animationDuration||Object(r.isNullOrUndefined)(l.maps.zoomModule),{x:i,y:u});!it.template||isNaN(st.x)||isNaN(st.y)?it.template||isNaN(st.x)||isNaN(st.y)||(g++,cr(it,n,a,tt,st,yt,vt,ht,f,l.maps,v)):(nt++,lr(it,void 0,vt,k,c,p,st,f,ht,l.maps))}d+=isNaN(et)||isNaN(ot)?1:0;nt+=it.cancel?1:0;g+=it.cancel?1:0;l.maps.markerNullCount=Object(r.isNullOrUndefined)(et)&&Object(r.isNullOrUndefined)(ot)?l.maps.markerNullCount+1:l.maps.markerNullCount;a.length;l.maps.markerNullCount;v.childElementCount===a.length-nt-d&&"Template"!==o&&(h.appendChild(v),y.markerClusterSettings.allowClustering&&(l.maps.svgObject.appendChild(v),l.maps.element.appendChild(l.maps.svgObject),gt(y,v,l.maps,b,v,h,!0,!0)));p.childElementCount===a.length-g-d&&e(l.maps.element.id+"_Secondary_Element")&&(e(l.maps.element.id+"_Secondary_Element").appendChild(p),y.markerClusterSettings.allowClustering&&gt(y,p,l.maps,b,v,h,!1,!0))})})})},n.prototype.processTemplate=function(n,t,i,u){for(var f,o=0;o<this.templateCount;o++){this.currentLayer=u.layersCollection[o];var c=u.mapLayerPanel.calculateFactor(this.currentLayer),s=e(u.element.id+"_LayerIndex_"+o+"_Markers_Template_Group"),h=e(u.element.id+"_LayerIndex_"+o+"_Label_Template_Group");if(!Object(r.isNullOrUndefined)(s)&&s.childElementCount>0)for(f=0;f<s.childElementCount;f++)this.markerTranslate(s.childNodes[f],c,n,t,i,"Template");if(!Object(r.isNullOrUndefined)(h)&&h.childElementCount>0)for(f=0;f<h.childElementCount;f++)this.dataLabelTranslate(h.childNodes[f],c,n,t,i,"Template")}},n.prototype.dataLabelTranslate=function(n,t,i,u,f,o,s){var it,nt,d,p,w,ot,b,l,ut;void 0===s&&(s=!1);var h,a,y,g,ft,et=this.maps.dataLabelModule.dataLabelCollections,k=(n.getBoundingClientRect(),this.maps.layers[this.index].dataLabelSettings.textStyle),lt=(this.maps.layers[this.index].dataLabelSettings.labelPath,parseFloat(n.id.split("_LayerIndex_")[1].split("_")[0])),at=parseFloat(n.id.split("_shapeIndex_")[1].split("_")[0]);for(n.id.indexOf("_LabelIndex_")>-1&&(ft=parseFloat(n.id.split("_LabelIndex_")[1].split("_")[0])),it=this.currentLayer.animationDuration,nt=0;nt<et.length;nt++)if(d=et[nt],d.layerIndex===lt&&d.shapeIndex===at&&d.labelIndex===ft)if(p=d.location.x,w=d.location.y,"Template"===o){ot=e(this.maps.element.id+"_Layer_Collections");p=Math.abs(this.maps.baseMapRectBounds.min.x-p)*f;w=Math.abs(this.maps.baseMapRectBounds.min.y-w)*f;var st=n.getBoundingClientRect(),ht=ot.getBoundingClientRect(),ct=n.parentElement.getBoundingClientRect(),vt=p+(ht.left-ct.left)-st.width/2,yt=w+(ht.top-ct.top)-st.height/2;n.style.left=vt+"px";n.style.top=yt+"px"}else{p=(p+i)*f;var pt=(w=(w+u)*f)-(g=v(y=d.dataLabelText,k)).height/4,wt=w+g.height/4,c={rightWidth:p+g.width/2,leftWidth:p-g.width/2,heightTop:pt,heightBottom:wt};if(s&&0!==it||n.setAttribute("transform","translate( "+p+" "+w+" )"),"Hide"===this.maps.layers[this.index].dataLabelSettings.smartLabelMode&&(f>1?(h=this.zoomshapewidth.width>=g.width?y:"",n.innerHTML=h):(h=this.maps.dataLabelShape[nt]>=g.width?y:"",n.innerHTML=h)),"Trim"===this.maps.layers[this.index].dataLabelSettings.smartLabelMode&&(f>1?(h=tt(this.zoomshapewidth.width,y,k),n.innerHTML=h):(h=tt(this.maps.dataLabelShape[nt],y,k),n.innerHTML=h)),"Hide"===this.maps.layers[this.index].dataLabelSettings.intersectionAction){for(b=0;b<this.intersect.length;b++)if(!Object(r.isNullOrUndefined)(this.intersect[b])){if(!(c.leftWidth>this.intersect[b].rightWidth||c.rightWidth<this.intersect[b].leftWidth||c.heightTop>this.intersect[b].heightBottom||c.heightBottom<this.intersect[b].heightTop)){h="";n.innerHTML=h;break}h=Object(r.isNullOrUndefined)(h)?y:h;n.innerHTML=h}this.intersect.push(c)}if("Trim"===this.maps.layers[this.index].dataLabelSettings.intersectionAction){for(l=0;l<this.intersect.length;l++)if(!Object(r.isNullOrUndefined)(this.intersect[l]))if(c.rightWidth<this.intersect[l].leftWidth||c.leftWidth>this.intersect[l].rightWidth||c.heightBottom<this.intersect[l].heightTop||c.heightTop>this.intersect[l].heightBottom)a=Object(r.isNullOrUndefined)(h)?y:h,f>1&&(a=tt(this.zoomshapewidth.width,a,k)),n.innerHTML=a;else{if(c.leftWidth>this.intersect[l].leftWidth){a=tt((ut=this.intersect[l].rightWidth-c.leftWidth)-(c.rightWidth-c.leftWidth),h=Object(r.isNullOrUndefined)(h)?y:h,k);n.innerHTML=a;break}if(c.leftWidth<this.intersect[l].leftWidth){ut=c.rightWidth-this.intersect[l].leftWidth;a=tt(Math.abs(ut-(c.rightWidth-c.leftWidth)),h=Object(r.isNullOrUndefined)(h)?y:h,k);n.innerHTML=a;break}}this.intersect.push(c);Object(r.isNullOrUndefined)(a)&&(a=tt(this.zoomshapewidth.width,y,k),n.innerHTML=a)}else wi(n,0,it,new rt(p,w))}},n.prototype.markerTranslate=function(n,t,i,u,f,h,c){var y,b,k,d;void 0===c&&(c=!1);var ot=parseInt(n.id.split("_LayerIndex_")[1].split("_")[0],10),st=parseInt(n.id.split("_MarkerIndex_")[1].split("_")[0],10),a=parseInt(n.id.split("_dataIndex_")[1].split("_")[0],10),g=this.maps.layersCollection[ot],l=g.markerSettings[st];if(!Object(r.isNullOrUndefined)(l)&&!Object(r.isNullOrUndefined)(l.dataSource)&&!Object(r.isNullOrUndefined)(l.dataSource[a])){if(this.maps.isBlazor){l.longitudeValuePath=Object(r.isNullOrUndefined)(l.longitudeValuePath)?Object(r.isNullOrUndefined)(l.dataSource[a].Longitude)?Object(r.isNullOrUndefined)(l.dataSource[a].longitude)?null:"longitude":"Longitude":l.longitudeValuePath;l.latitudeValuePath=Object(r.isNullOrUndefined)(l.latitudeValuePath)?Object(r.isNullOrUndefined)(l.dataSource[a].Latitude)?Object(r.isNullOrUndefined)(l.dataSource[a].latitude)?null:"latitude":"Latitude":l.latitudeValuePath;for(var nt={},tt=0,it=[],p=0;p<Object.keys(l.dataSource[a]).length;p++)"text"!==Object.keys(l.dataSource[a])[p].toLowerCase()&&"longitude"!==Object.keys(l.dataSource[a])[p].toLowerCase()&&"latitude"!==Object.keys(l.dataSource[a])[p].toLowerCase()&&"blazortemplateid"!==Object.keys(l.dataSource[a])[p].toLowerCase()&&"name"!==Object.keys(l.dataSource[a])[p].toLowerCase()&&(nt.text=it,it[tt]=l.dataSource[a][Object.keys(l.dataSource[a])[p].toLowerCase()],tt++);l.dataSource[a].text=nt.text}var rt=Object(r.isNullOrUndefined)(l.longitudeValuePath)?Object(r.isNullOrUndefined)(l.dataSource[a].longitude)?Object(r.isNullOrUndefined)(l.dataSource[a].Latitude)?0:parseFloat(l.dataSource[a].Latitude):parseFloat(l.dataSource[a].longitude):Number(s(l.dataSource[a],l.longitudeValuePath)),ut=Object(r.isNullOrUndefined)(l.latitudeValuePath)?Object(r.isNullOrUndefined)(l.dataSource[a].latitude)?Object(r.isNullOrUndefined)(l.dataSource[a].Latitude)?0:parseFloat(l.dataSource[a].Latitude):parseFloat(l.dataSource[a].latitude):Number(s(l.dataSource[a],l.latitudeValuePath)),et=this.currentLayer.animationDuration,v=this.maps.isTileMap?ft(new o(rt,ut),this.maps.tileZoomLevel,this.maps.tileTranslatePoint,!0):w(ut,rt,t,g,this.maps);this.maps.isTileMap?"Template"===h?(y=n.getBoundingClientRect(),(n.style.left=v.x-y.width/2+l.offset.x+"px",n.style.top=v.y-y.height/2+l.offset.y+"px","GoogleStaticMap"===this.maps.layers[this.maps.baseLayerIndex].layerType)&&(b=e(this.maps.element.id+"_StaticGoogleMap").getBoundingClientRect(),"none"!==n.style.display&&((b.x>y.x||b.x+640<y.x+y.width)&&(b.y>y.y||b.y+b.height<y.y+y.height)||b.x>y.x||b.x+640<y.x+y.width)&&(n.style.display="none"))):(v.x+=l.offset.x,v.y+=l.offset.y,n.setAttribute("transform","translate( "+v.x+" "+v.y+" )")):"Template"===h?(v.x=Math.abs(this.maps.baseMapRectBounds.min.x-v.x)*f,v.y=Math.abs(this.maps.baseMapRectBounds.min.y-v.y)*f,k=e(this.maps.element.id+"_Layer_Collections").getBoundingClientRect(),d=n.parentElement.getBoundingClientRect(),n.style.left=v.x+(k.left-d.left)+l.offset.x+"px",n.style.top=v.y+(k.top-d.top)+l.offset.y+"px",n.style.transform="translate(-50%, -50%)"):(v.x=(v.x+i)*f+l.offset.x,v.y=(v.y+u)*f+l.offset.y,c&&0!==et?wi(n,0,et,v):n.setAttribute("transform","translate( "+v.x+" "+v.y+" )"))}},n.prototype.panning=function(n,t,i,u){var a,f=this.maps,p=this.mouseDownPoints,w=this.mouseMovePoints,b=f.scale,s,h,v,k,y;if(f.markerZoomedState=!1,f.zoomPersistence=f.enablePersistence,f.defaultState=!1,f.initialCheck=!1,v=f.translatePoint,k=f.tileTranslatePoint,t=Object(r.isNullOrUndefined)(t)?p.x-w.x:t,i=Object(r.isNullOrUndefined)(i)?p.y-w.y:i,f.isTileMap)this.maps.tileZoomLevel>1&&(s=f.tileTranslatePoint.x-t,h=f.tileTranslatePoint.y-i,this.distanceX=s-f.tileTranslatePoint.x,this.distanceY=h-f.tileTranslatePoint.y,f.tileTranslatePoint.x=s,f.tileTranslatePoint.y=h,(f.tileTranslatePoint.y>-10&&i<0||f.tileTranslatePoint.y<-256*(Math.pow(2,this.maps.tileZoomLevel)-2)&&i>0)&&(f.tileTranslatePoint.x=s+t,f.tileTranslatePoint.y=h+i),f.translatePoint.x=(f.tileTranslatePoint.x-t)/f.scale,f.translatePoint.y=(f.tileTranslatePoint.y-i)/f.scale,y=this.maps.getTileGeoLocation(u),a={cancel:!1,name:"pan",maps:f.isBlazor?null:f,tileTranslatePoint:{previous:k,current:f.tileTranslatePoint},translatePoint:{previous:v,current:f.translatePoint},scale:f.scale,tileZoomLevel:f.tileZoomLevel,latitude:y.latitude,longitude:y.longitude},f.trigger("pan",a),f.mapLayerPanel.generateTiles(f.tileZoomLevel,f.tileTranslatePoint,"Pan"),this.applyTransform());else{s=v.x-t/b;h=v.y-i/b;var c=e(f.element.id+"_Layer_Collections").getBoundingClientRect(),l=e(f.element.id+"_svg").getBoundingClientRect(),d=t<0?c.left<=l.left+f.mapAreaRect.x:c.left+c.width>=l.left+l.width+f.mapAreaRect.x+f.margin.left,g=i<0?c.top<=l.top+f.mapAreaRect.y:c.top+c.height+f.margin.top>=l.top+l.height,nt=this.maps.getGeoLocation(this.maps.layersCollection.length-1,u);a={cancel:!1,name:"pan",maps:f.isBlazor?null:f,tileTranslatePoint:{},translatePoint:{previous:v,current:new o(s,h)},scale:f.scale,tileZoomLevel:f.tileZoomLevel,latitude:nt.latitude,longitude:nt.longitude};f.trigger("pan",a);a.cancel||(d&&g?(f.translatePoint=new o(s,h),this.applyTransform()):d?(f.translatePoint=new o(s,f.translatePoint.y),this.applyTransform()):g&&(f.translatePoint=new o(f.translatePoint.x,h),this.applyTransform()));this.maps.zoomNotApplied=!1}f.zoomTranslatePoint=f.translatePoint;this.mouseDownPoints=this.mouseMovePoints;this.maps.zoomNotApplied=!1;this.isSingleClick=!1},n.prototype.toAlignSublayer=function(){this.maps.translatePoint.x=Object(r.isNullOrUndefined)(this.distanceX)?this.maps.translatePoint.x:this.maps.translatePoint.x-this.distanceX/this.maps.scale;this.maps.translatePoint.y=Object(r.isNullOrUndefined)(this.distanceY)?this.maps.translatePoint.y:this.maps.translatePoint.y-this.distanceY/this.maps.scale;this.applyTransform(!1)},n.prototype.toolBarZooming=function(n,t){var h=this,i=this.maps,e,c,f,k;i.initialCheck=!1;i.defaultState="Reset"===t&&1===n&&!(i.zoomSettings.resetToInitial&&i.applyZoomReset)||"ZoomOut"===t&&1===n;e=i.tileZoomLevel;c=i.previousScale=i.scale;i.markerZoomedState=!1;i.zoomPersistence=i.enablePersistence;i.mapScaleValue=n;var v=i.zoomSettings.maxZoom,u=i.zoomSettings.minZoom,r=i.mapAreaRect,y=i.previousPoint=i.translatePoint,p=i.tileTranslatePoint;if(i.previousProjection=i.projectionType,n="ZoomOut"===t&&1===Math.round(n)?1:n,n=u>(n="Reset"===t||0===Math.round(n)?1:n)&&"ZoomIn"===t?u+1:n,!i.isTileMap&&("ZoomIn"===t?n>=u&&n<=v:n>=u||i.isReset)){var s=i.baseMapRectBounds.min,w=i.baseMapRectBounds.max,d=Math.abs(w.x-s.x),g=Math.abs(s.y-w.y),l=y.x-(r.width/c-r.width/n)/2,a=y.y-(r.height/c-r.height/n)/2,b=Math.abs(i.baseMapRectBounds.max.y-i.baseMapRectBounds.min.y)*n;l=b<i.mapAreaRect.height?r.x+(-s.x+(r.width/2-d/2)):l;a=b<i.mapAreaRect.height?r.y+(-s.y+(r.height/2-g/2)):a;i.translatePoint=new o(l,a);i.zoomTranslatePoint=i.translatePoint;i.scale=n;this.triggerZoomEvent(p,e,t);this.applyTransform(!0)}else i.isTileMap&&(n>=u&&n<=v||i.isReset)&&(f=e<u&&!i.isReset?u:n,i.scale=Math.pow(2,f-1),i.tileZoomLevel=f,k={x:i.availableSize.width/2,y:i.availableSize.height/2},this.getTileTranslatePosition(e,f,k,t),(i.zoomSettings.resetToInitial&&i.applyZoomReset&&"Reset"===t||"ZoomOut"===t&&i.zoomSettings.resetToInitial&&i.applyZoomReset&&f<=i.initialZoomLevel)&&(i.initialCheck=!0,i.zoomPersistence=!1,i.tileTranslatePoint.x=i.initialTileTranslate.x,i.tileTranslatePoint.y=i.initialTileTranslate.y,f=i.tileZoomLevel=i.mapScaleValue=i.initialZoomLevel),this.triggerZoomEvent(p,e,t),i.translatePoint.y=(i.tileTranslatePoint.y-.01*i.mapScaleValue)/i.scale,i.translatePoint.x=(i.tileTranslatePoint.x-.01*i.mapScaleValue)/i.scale,document.getElementById(this.maps.element.id+"_LayerIndex_1")&&(document.getElementById(this.maps.element.id+"_LayerIndex_1").style.display="none"),document.querySelector(".GroupElement")&&(document.querySelector(".GroupElement").style.display="none"),i.mapLayerPanel.generateTiles(f,i.tileTranslatePoint,t),document.getElementById(this.maps.element.id+"_tiles"),setTimeout(function(){h.applyTransform(!0);document.getElementById(h.maps.element.id+"_LayerIndex_1")&&(document.getElementById(h.maps.element.id+"_LayerIndex_1").style.display="block")},250));this.maps.zoomNotApplied=!1},n.prototype.createZoomingToolbars=function(){var n=this.maps,l,a,c,i,u,t,f,e,r;this.toolBarGroup=n.renderer.createGroup({id:n.element.id+"_Zooming_KitCollection",opacity:.3});var o=15,s=15,v=n.zoomSettings.toolBarOrientation,p=n.zoomSettings.toolbars,h=n.zoomSettings.toolbars.length,w="Horizontal"===n.zoomSettings.toolBarOrientation?16*h+20*h:32,k="Horizontal"===n.zoomSettings.toolBarOrientation?32:16*h+20*h;for(this.toolBarGroup.appendChild(n.renderer.drawRectangle(new d(n.element.id+"_Zooming_Rect","transparent",{color:"transparent",width:1},1,new y(0,0,w,k),0,0))),l=n.renderer.createDefs(),l.innerHTML='<filter id="chart_shadow" height="130%"><feGaussianBlur in="SourceAlpha" stdDeviation="5"/><feOffset dx="-3" dy="4" result="offsetblur"/><feComponentTransfer><feFuncA type="linear" slope="1"/><\/feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/><\/feMerge><\/filter>',this.toolBarGroup.appendChild(l),a=n.renderer.drawRectangle(new d(n.element.id+"_Zooming_Rect","transparent",{color:"transparent",width:1},.1,new y(0,0,w,k),0,0)),a.setAttribute("filter","url(#chart_shadow)"),this.toolBarGroup.appendChild(a),c=0;c<p.length;c++){i=p[c];this.currentToolbarEle=n.renderer.createGroup({id:n.element.id+"_Zooming_ToolBar_"+i+"_Group",transform:"translate( "+o+" "+s+" ) "});this.currentToolbarEle.setAttribute("class","e-maps-toolbar");u="transparent";t="";switch(i.toLowerCase()){case"zoom":f=void 0;e=void 0;t="M0.001,14.629L1.372,16l4.571-4.571v-0.685l0.228-0.274c1.051,0.868,2.423,1.417,3.885,1.417c3.291,0,";t+="5.943-2.651,5.943-5.943S13.395,0,10.103,0S4.16,2.651,4.16,5.943c0,1.508,0.503,2.834,1.417,3.885l-0.274,0.228H4.571";t+="L0.001,14.629L0.001,14.629z M5.943,5.943c0-2.285,1.828-4.114,4.114-4.114s4.114,1.828,4.114,";this.maps.zoomSettings.enablePanning&&!this.maps.zoomSettings.enableSelectionZooming||this.maps.zoomSettings.enablePanning&&this.maps.zoomSettings.enableSelectionZooming?(f=u,e=this.maps.themeStyle.zoomFillColor):this.maps.zoomSettings.enablePanning||this.maps.zoomSettings.enableSelectionZooming?(f=this.selectionColor,e=this.selectionColor):(f=u,e=this.maps.themeStyle.zoomFillColor);this.currentToolbarEle.appendChild(n.renderer.drawPath(new b(n.element.id+"_Zooming_ToolBar_"+i,f,1,e,1,null,t+"4.114s-1.828,4.114-4.114,4.114S5.943,8.229,5.943,5.943z")));this.zoomElements=this.currentToolbarEle;this.wireEvents(this.currentToolbarEle,this.performToolBarAction);break;case"zoomin":t="M 8, 0 L 8, 16 M 0, 8 L 16, 8";this.currentToolbarEle.appendChild(n.renderer.drawPath(new b(n.element.id+"_Zooming_ToolBar_"+i+"_Path",u,3,this.maps.themeStyle.zoomFillColor,1,null,t)));this.zoomInElements=this.currentToolbarEle;this.wireEvents(this.currentToolbarEle,this.performToolBarAction);break;case"zoomout":t="M 0, 8 L 16, 8";this.currentToolbarEle.appendChild(n.renderer.drawPath(new b(n.element.id+"_Zooming_ToolBar_"+i,u,3,this.maps.themeStyle.zoomFillColor,1,null,t)));this.zoomOutElements=this.currentToolbarEle;this.wireEvents(this.currentToolbarEle,this.performToolBarAction);break;case"pan":r=void 0;t="M5,3h2.3L7.275,5.875h1.4L8.65,3H11L8,0L5,3z M3,11V8.7l2.875,0.025v-1.4L3,7.35V5L0,8L3,";t+="11z M11,13H8.7l0.025-2.875h-1.4L7.35,13H5l3,3L11,13z M13,5v2.3l-2.875-0.025v1.4L13,8.65V11l3-3L13,5z";this.maps.zoomSettings.enablePanning&&this.maps.zoomModule.isDragZoom?r="#737373":this.maps.zoomSettings.enablePanning?r=this.selectionColor:(r="#737373",this.currentToolbarEle.setAttribute("class",""));this.currentToolbarEle.appendChild(n.renderer.drawPath(new b(n.element.id+"_Zooming_ToolBar_"+i,r,1,r,1,null,t)));this.panColor=r;this.panElements=this.currentToolbarEle;this.wireEvents(this.currentToolbarEle,this.performToolBarAction);break;case"reset":t="M12.364,8h-2.182l2.909,3.25L16,8h-2.182c0-3.575-2.618-6.5-5.818-6.5c-1.128,0-2.218,0.366-3.091,";t+="1.016l1.055,1.178C6.581,3.328,7.272,3.125,8,3.125C10.4,3.125,12.363,5.319,12.364,8L12.364,8z M11.091,";t+="13.484l-1.055-1.178C9.419,12.672,8.728,12.875,8,12.875c-2.4,0-4.364-2.194-4.364-4.875h2.182L2.909,4.75L0,8h2.182c0,";this.currentToolbarEle.appendChild(n.renderer.drawPath(new b(n.element.id+"_Zooming_ToolBar_"+i,this.fillColor,null,this.maps.themeStyle.zoomFillColor,1,null,t+"3.575,2.618,6.5,5.818,6.5C9.128,14.5,10.219,14.134,11.091,13.484L11.091,13.484z")));this.wireEvents(this.currentToolbarEle,this.performToolBarAction)}this.currentToolbarEle.appendChild(n.renderer.drawCircle(new bt(n.element.id+"_Zooming_ToolBar_"+i+"_Rect",u,{color:this.maps.themeStyle.zoomFillColor,width:1},1,8,8,16,"")));o="Horizontal"===v?o+36:o;s="Horizontal"===v?s:s+36;this.toolBarGroup.appendChild(this.currentToolbarEle)}},n.prototype.performToolBarAction=function(n){var r=n.target,i,t;n.stopImmediatePropagation();i="touch"===n.pointerType||"2"===n.pointerType||n.type.indexOf("touch")>-1;t=r.id.split("_Zooming_ToolBar_")[1].split("_")[0];i?(this.handled=!0,this.performZoomingByToolBar(t)):"mousedown"!==n.type&&"pointerdown"!==n.type||this.handled?this.handled=!1:(this.handled=!1,this.performZoomingByToolBar(t))},n.prototype.performZoomingByToolBar=function(n){var t=this.maps;switch(t.isReset=!1,n.toLowerCase()){case"zoom":this.panColor=this.fillColor;this.zoomColor=this.selectionColor;this.applySelection(this.zoomElements,this.selectionColor);this.applySelection(this.panElements,this.fillColor);break;case"pan":this.panColor=this.maps.zoomSettings.enablePanning?this.selectionColor:"#737373";this.zoomColor=this.fillColor;this.maps.zoomSettings.enablePanning?(this.applySelection(this.zoomElements,this.fillColor),this.applySelection(this.panElements,this.panColor)):(this.applySelection(this.zoomElements,this.selectionColor),this.applySelection(this.panElements,this.panColor));break;case"zoomin":t.staticMapZoom=t.tileZoomLevel;t.staticMapZoom>0&&t.staticMapZoom<22&&(t.staticMapZoom+=1);this.toolBarZooming((t.isTileMap?t.tileZoomLevel:t.scale)+1,"ZoomIn");break;case"zoomout":t.staticMapZoom=t.tileZoomLevel;t.markerCenterLatitude=null;t.markerCenterLongitude=null;this.toolBarZooming((t.isTileMap?t.tileZoomLevel:t.scale)-1,"ZoomOut");break;case"reset":t.staticMapZoom=t.zoomSettings.enable?t.zoomSettings.zoomFactor:0;t.markerCenterLatitude=null;t.markerCenterLongitude=null;this.toolBarZooming(1,"Reset");this.maps.zoomSettings.enablePanning?(this.applySelection(this.zoomElements,this.fillColor),this.applySelection(this.panElements,this.selectionColor)):(this.applySelection(this.zoomElements,this.selectionColor),this.applySelection(this.panElements,"#737373"))}this.panningStyle(n.toLowerCase())},n.prototype.panningStyle=function(n){var t=e(this.maps.element.id+"_svg");"pan"===n||this.isPanning?t.setAttribute("class","e-maps-panning"):t.setAttribute("class","")},n.prototype.applySelection=function(n,t){if(n)for(var i,r=0;r<n.childElementCount;r++)"circle"!==(i=n.childNodes[r]).tagName&&(i.setAttribute("fill",t),i.setAttribute("stroke",t))},n.prototype.showTooltip=function(n){var t=n.target.id.split("_Zooming_ToolBar_")[1].split("_")[0];this.isTouch||function(n,t,i,u,f){var e=h(n),o="top:"+i.toString()+"px;left:"+u.toString()+"px;color: #000000; background:#FFFFFF;position:absolute;border:1px solid #707070;font-size:"+f+";border-radius:2px;";e?(e.setAttribute("innerHTML","&nbsp;"+t+"&nbsp;"),e.setAttribute("styles",o)):(e=Object(r.createElement)("div",{id:n,innerHTML:"&nbsp;"+t+"&nbsp;",styles:o}),document.body.appendChild(e))}("EJ2_Map_Toolbar_Tip",this.maps.getLocalizedLabel(t),n.pageY+10,n.pageX+10,"10px")},n.prototype.removeTooltip=function(){e("EJ2_Map_Toolbar_Tip")&&Object(r.remove)(e("EJ2_Map_Toolbar_Tip"))},n.prototype.alignToolBar=function(){var n=this.maps,u=Object(r.createElement)("div",{id:n.element.id+"_ToolBar",styles:"position:absolute;z-index:2"}),f=n.renderer.createSvg({id:n.element.id+"_Zooming_ToolBar",width:10,height:10}),t;f.appendChild(this.toolBarGroup);u.appendChild(f);e(n.element.id+"_Secondary_Element")&&e(n.element.id+"_Secondary_Element").appendChild(u);t=this.toolBarGroup.getBoundingClientRect();f.setAttribute("height",(t.height+5).toString());f.setAttribute("width",(t.width+5).toString());var i=Object(r.isNullOrUndefined)(n.totalRect)?n.mapAreaRect:n.totalRect,o=0,s=0;switch(n.zoomSettings.verticalAlignment){case"Near":s=i.y;break;case"Center":s=i.height/2-t.height/2;break;case"Far":s=i.height-t.height-10}switch(n.zoomSettings.horizontalAlignment){case"Near":o=i.x;break;case"Center":o=i.width/2-t.width/2;break;case"Far":o=i.width-t.width-10}u.style.left=o+"px";u.style.top=s+"px";var h=this.maps.zoomSettings.highlightColor,l=" .e-maps-toolbar:hover > circle { stroke:"+h+"; } .e-maps-toolbar:hover > path { fill: "+h+" ;  stroke: "+h+"; }.e-maps-toolbar:hover { cursor: pointer; } .e-maps-cursor-disable:hover { cursor: not-allowed; } .e-maps-panning:hover { cursor: pointer; } .e-maps-popup-close { display: block; opacity: 0; }",c=document.createElement("style");c.appendChild(document.createTextNode(l));u.appendChild(c)},n.prototype.wireEvents=function(n,t){r.EventHandler.add(n,r.Browser.touchStartEvent,t,this);r.EventHandler.add(n,"mouseover",this.showTooltip,this);r.EventHandler.add(n,"mouseout",this.removeTooltip,this)},n.prototype.mapMouseWheel=function(n){var t,u;if(this.maps.zoomSettings.enable&&this.maps.zoomSettings.mouseWheelZoom){t=this.maps;t.availableSize;t.markerZoomedState=!1;t.zoomPersistence=t.enablePersistence;var i=this.getMousePosition(n.pageX,n.pageY),f=t.tileZoomLevel,e=t.scale,r=t.isTileMap?f:e;i.x>t.mapAreaRect.x&&i.x<t.mapAreaRect.x+t.mapAreaRect.width&&i.y>t.mapAreaRect.y&&i.y<t.mapAreaRect.y+t.mapAreaRect.height&&(n.preventDefault(),u="mozilla"!==this.browserName||this.isPointer?n.wheelDelta/120>0?"ZoomIn":"ZoomOut":-n.detail/3>0?"ZoomIn":"ZoomOut","ZoomIn"===u?(t.mapScaleValue=r+1,t.staticMapZoom=t.tileZoomLevel,t.staticMapZoom>0&&t.staticMapZoom<22&&(t.staticMapZoom+=1),this.performZooming(i,r+1,u)):(t.mapScaleValue=r-1,t.staticMapZoom=t.tileZoomLevel,1===t.mapScaleValue&&(t.markerCenterLatitude=null,t.markerCenterLongitude=null),t.staticMapZoom>1&&t.staticMapZoom<22&&(t.staticMapZoom-=1),this.performZooming(i,r-1,u)))}},n.prototype.doubleClick=function(n){var u=n.pageX,f=n.pageY,r;if(n.target,this.maps.zoomSettings.enable&&this.maps.zoomSettings.doubleClickZoom&&!(n.target.id.indexOf("_Zooming_")>-1)){var i=this.getMousePosition(u,f),t=this.maps,e=(t.availableSize,t.tileZoomLevel),o=t.scale;t.mapScaleValue=t.mapScaleValue+1;r=t.isTileMap?e:o;i.x>t.mapAreaRect.x&&i.x<t.mapAreaRect.x+t.mapAreaRect.width&&i.y>t.mapAreaRect.y&&i.y<t.mapAreaRect.y+t.mapAreaRect.height&&this.performZooming(i,r+1,"ZoomIn")}},n.prototype.mouseDownHandler=function(n){var t,i,r=null;n.target;"touchstart"===n.type?(this.isTouch=!0,r=n.touches,n.target,t=r[0].clientX,i=r[0].clientY):(t=n.pageX,i=n.pageY,n.target);this.isPanning=this.maps.zoomSettings.enablePanning?this.panColor===this.selectionColor?this.maps.zoomSettings.enablePanning:this.zoomColor!==this.selectionColor:this.panColor!==this.selectionColor?this.maps.zoomSettings.enablePanning:this.zoomColor===this.selectionColor;this.mouseDownLatLong={x:t,y:i};this.rectZoomingStart=!this.isPanning&&this.maps.zoomSettings.enable;this.mouseDownPoints=this.getMousePosition(t,i);this.isTouch&&(this.firstMove=!0,this.pinchFactor=this.maps.scale,this.fingers=r.length);this.isSingleClick=!0},n.prototype.mouseMoveHandler=function(n){var u,f,o,t=this.maps,i=null,s=this.maps.zoomSettings;"touchmove"===n.type?(this.isTouch=!0,o=n.target,u=(i=n.touches)[0].clientX,f=i[0].clientY):(u=n.pageX,f=n.pageY,o=n.target);e(t.element.id+"_Zooming_KitCollection")&&(o.id.indexOf("_Zooming_")>-1?(e(t.element.id+"_Zooming_KitCollection").setAttribute("opacity","1"),document.getElementById(t.element.id+"_Zooming_ToolBar_Pan_Group")&&(this.maps.zoomSettings.enablePanning||(o.id.indexOf("_Zooming_ToolBar")>-1||o.id.indexOf("_Zooming_Rect")>-1)&&(e(t.element.id+"_Zooming_ToolBar_Pan_Rect").setAttribute("opacity","0.3"),e(t.element.id+"_Zooming_ToolBar_Pan").setAttribute("opacity","0.3")))):(e(t.element.id+"_Zooming_KitCollection").setAttribute("opacity","0.3"),!this.maps.zoomSettings.enablePanning&&document.getElementById(t.element.id+"_Zooming_ToolBar_Pan_Group")&&(e(t.element.id+"_Zooming_ToolBar_Pan_Rect").setAttribute("opacity","1"),e(t.element.id+"_Zooming_ToolBar_Pan").setAttribute("opacity","1"))));this.isTouch&&this.maps.zoomSettings.pinchZooming&&(this.firstMove&&2===i.length?(this.rectZoomingStart=!1,this.updateInteraction(),this.touchStartList=dr(n)):2===i.length&&2===this.touchStartList.length&&(this.touchMoveList=dr(n),n.preventDefault(),this.rectZoomingStart=!1,this.performPinchZooming(n)),this.firstMove=!1);this.mouseMovePoints=this.getMousePosition(u,f);n.target.id;n.target;s.enable&&this.isPanning&&(r.Browser.isDevice&&i.length>=1||!r.Browser.isDevice)&&(n.preventDefault(),this.maps.element.style.cursor="pointer",this.mouseMoveLatLong={x:u,y:f},this.mouseDownLatLong.x!==this.mouseMoveLatLong.x&&this.mouseDownLatLong.y!==this.mouseMoveLatLong.y&&(this.maps.zoomSettings.enablePanning&&this.panning("None",null,null,n),this.mouseDownLatLong.x=u,this.mouseDownLatLong.y=f));(this.isTouch?1===i.length&&this.rectZoomingStart:this.rectZoomingStart)&&(n.preventDefault(),this.maps.zoomSettings.enableSelectionZooming&&this.drawZoomRectangle())},n.prototype.mouseUpHandler=function(){this.maps;this.rectZoomingStart=!1;this.isPanning=!1;this.isSingleClick=!!this.isSingleClick;this.isTouch=!1;this.touchStartList=[];this.touchMoveList=[];this.lastScale=1;this.maps.element.style.cursor="auto";Object(r.isNullOrUndefined)(this.distanceX)&&Object(r.isNullOrUndefined)(this.distanceY)||Object(r.isNullOrUndefined)(this.currentLayer)||"SubLayer"!==this.currentLayer.type||(this.toAlignSublayer(),this.distanceX=this.distanceY=null);var n=e(this.maps.element.id+"_Selection_Rect_Zooming");n&&this.maps.zoomSettings.enable&&this.maps.zoomSettings.enableSelectionZooming&&(Object(r.remove)(n),this.performRectZooming());this.mouseMoveLatLong={x:0,y:0};this.mouseDownLatLong={x:0,y:0}},n.prototype.mouseCancelHandler=function(){this.isPanning=!1;this.isTouch=!1;this.rectZoomingStart=!1;var n=e(this.maps.element.id+"_Selection_Rect_Zooming");n&&this.maps.zoomSettings.enable&&(Object(r.remove)(n),this.performRectZooming())},n.prototype.click=function(n){var t=this.maps,r;if(t.markerModule&&t.markerModule.sameMarkerData.length>0||n.target.id.indexOf("MarkerIndex")>-1&&-1==n.target.id.indexOf("cluster"))return null;if(this.isSingleClick&&t.zoomSettings.zoomOnClick&&!(n.target.id.indexOf("_Zooming_")>-1)&&!t.zoomSettings.doubleClickZoom&&this.zoomColor!==this.selectionColor){var u=n.pageX,f=n.pageY,i=this.getMousePosition(u,f),e=t.tileZoomLevel,o=t.scale;t.mapScaleValue=t.mapScaleValue+1;r=t.isTileMap?e:o;i.x>t.mapAreaRect.x&&i.x<t.mapAreaRect.x+t.mapAreaRect.width&&i.y>t.mapAreaRect.y&&i.y<t.mapAreaRect.y+t.mapAreaRect.height&&this.performZooming(i,r+1,"ZoomIn")}},n.prototype.getMousePosition=function(n,t){var i=this.maps,r=i.element.getBoundingClientRect(),u=i.element.ownerDocument.defaultView.pageXOffset,f=i.element.ownerDocument.defaultView.pageYOffset,e=i.element.ownerDocument.documentElement.clientTop,s=i.element.ownerDocument.documentElement.clientLeft,h=r.left+u-s,c=r.top+f-e;return new o(Math.abs(n-h),Math.abs(t-c))},n.prototype.addEventListener=function(){this.maps.isDestroyed||(r.EventHandler.add(this.maps.element,this.wheelEvent,this.mapMouseWheel,this),r.EventHandler.add(this.maps.element,"click",this.click,this),r.EventHandler.add(this.maps.element,"dblclick",this.doubleClick,this),this.maps.on(r.Browser.touchMoveEvent,this.mouseMoveHandler,this),this.maps.on(r.Browser.touchStartEvent,this.mouseDownHandler,this),this.maps.on(r.Browser.touchEndEvent,this.mouseUpHandler,this),r.EventHandler.add(this.maps.element,this.cancelEvent,this.mouseCancelHandler,this))},n.prototype.removeEventListener=function(){this.maps.isDestroyed||(r.EventHandler.remove(this.maps.element,this.wheelEvent,this.mapMouseWheel),r.EventHandler.remove(this.maps.element,"click",this.click),r.EventHandler.remove(this.maps.element,"dblclick",this.doubleClick),this.maps.off(r.Browser.touchMoveEvent,this.mouseMoveHandler),this.maps.off(r.Browser.touchStartEvent,this.mouseDownHandler),this.maps.off(r.Browser.touchEndEvent,this.mouseUpHandler),this.maps.off(this.cancelEvent,this.mouseCancelHandler))},n.prototype.getModuleName=function(){return"Zoom"},n.prototype.destroy=function(){this.removeEventListener()},n}();i(3);uf.Inject(ye,ke,au,ge,to,io,uo,we,be,rf);hi={};hi.Maps=uf;ff={maps:hi=Object(gi.copy)(window.ejs?window.ejs.maps:{},hi)};window.ejs=Object(gi.copy)(window.ejs||{},ff);window.ejdashboard=window.ejs}]);
