@{
    var customDomain = ViewBag.CustomDomain != null ? ViewBag.CustomDomain : false;
    var whiteLabel = ViewBag.WhiteLabel != null ? ViewBag.WhiteLabel : false;
    var thirdPartyLogin = ViewBag.ThirdPartyLogins != null ? ViewBag.ThirdPartyLogins : false;
    var isEmbedBI = ViewBag.Embed != null ? ViewBag.Embed : true;
    var isSelfHosted = ServerAppConfig.IsSelfHosted;
    var showContactSales = Context.Request.Cookies["unlock.features"] == null;
    var manageLicenseSettingsUrl = ServerAppConfig.InternalAppIdpUrl + "/" + ServerAppConfig.TenantManagementHostName + "/administration/license-settings";
    var globalAppSettings = _globalAppSettings;
    var dashboardServerResourceUrl = globalAppSettings.SystemSettings.CDNLink.TrimEnd('/');
}

@section styles{
    <environment include="Development,CloudDevelopment">
        <link rel="stylesheet" asp-append-version="true" href="@dashboardServerResourceUrl/cdn/css/unlock-features.css" />
    </environment>"
    <environment exclude="Development,CloudDevelopment">
        <link rel="stylesheet" asp-append-version="true" href="@dashboardServerResourceUrl/cdn/css/unlock-features.min.css" />
    </environment>"
}


@section scripts{
    <environment include="Development,CloudDevelopment">        
        <script asp-append-version="true" src="@dashboardServerResourceUrl/cdn/scripts/unlock-features.js"></script>
    </environment>
    <environment exclude="Development,CloudDevelopment">        
        <script asp-append-version="true" src="@dashboardServerResourceUrl/js/unlock-features/unlock-features.min.js"></script>
    </environment>
    <script>
        var contactSalesTeamUrl = "@Url.Action("SendUnlockFeatureRequest", "UnlockFeatures")";
        var haveCustomDomainAccess = "@customDomain";
        var haveWhiteLabelAccess = "@whiteLabel";
        var haveThirdPartyLogins = "@thirdPartyLogin";
        var isEmbedBI = @Json.Serialize(isEmbedBI);
    </script>
}

<link asp-append-version="true" href="https://fonts.googleapis.com/css?family=Bitter:400,700" rel="stylesheet">
<div id="unlock-enterprise-features-container" class="col-xs-12 no-padding no-margin display-none">
    <div id="shield-container" class="no-padding @(isEmbedBI && !isSelfHosted ? "col-xs-4 cloud-hosted-shield" : "col-xs-12 self-hosted-shield")">
        <img id="unlock-shield" class="@(isEmbedBI && !isSelfHosted  ? "cloud-hosted-img" : "self-hosted-img")" src="@(GlobalAppSettings.CdnDomain)/static/enterprise-features/v1/unlock-feature.svg" />

        @if (!isEmbedBI)
        {
            <h1>[[[Unlock Embedded BI Feature!]]]</h1>
            <p id="feature-paragraph-content" class="self-hosted-feature">[[[Embedded BI comes with an additional cost. You can unlock this feature with the Embedded BI plan.]]]</p>
            if (isSelfHosted)
            {
                <span id="upgrade-license-contact-us" class="license-contact-us">
                    Please <a rel="alternate" hreflang="en" href="@manageLicenseSettingsUrl">[[[upgrade your plan]]]</a>  [[[or]]] <a target="_blank" href="https://www.@(GlobalAppSettings.BrandingDomain)/contact">[[[contact us]]]</a> [[[to unlock this Embedded BI feature.]]]
                </span>
            }
            else
            {
                <span id="upgrade-license-contact-us" class="license-contact-us">
                    Please <a id="embed-bi" class="request-concierge-support" href="javascript:void(0)">[[[contact us]]]</a> [[[to unlock this Embedded BI feature.]]]
                </span>
            }
        }
        else
        {
            <h1>[[[Unlock Enterprise Features!]]]</h1>
            if (isSelfHosted)
            {
                <p id="feature-paragraph-content" class="self-hosted-feature">[[[Enterprise features come with additional pricing. You can unlock the following features with the Enterprise plan:]]]</p>
                <span id="feature-list">
                    <ul>
                        <li>[[[Custom branding]]]</li>
                        <li>[[[Third-party logins]]]</li>
                    </ul>
                </span>
                <span id="upgrade-license-contact-us" class="license-contact-us">
                    Please <a rel="alternate" hreflang="en" href="@manageLicenseSettingsUrl">[[[upgrade your plan]]]</a>  [[[or]]] <a target="_blank" href="https://www.@(GlobalAppSettings.BrandingDomain)/contact">[[[contact us]]]</a> [[[to unlock these enterprise features.]]]
                </span>

            }
            else
            {
                if (showContactSales)
                {
                    <p id="feature-paragraph-content" class="cloud-hosted-feature">[[[Enterprise features come with additional pricing. We will get back to you with a personalized offer.]]]</p>
                    <button id="contact-sales-team" class="sf-primary-button">[[[Yes, I’m interested]]]</button>
                }
                else
                {
                    <img class="shield-container-divider" src="@Url.Content("~/content/images/divider_light.png")" alt="divider" />
                    <p id="contact-sales-cookie-content">[[[Your request for the enterprise plan has been submitted. Our client relations team will contact you soon.]]]</p>
                }
                <img id="unlock-shield-divider" class="shield-container-divider display-none" src="@Url.Content("~/content/images/divider_light.png")" alt="divider" />
                <p id="contact-sales-success" class="display-none">[[[Great! Our client relations team will contact you soon.]]]</p>
            }
        }
    </div>
    @if (isEmbedBI && !isSelfHosted)
    {
        <div id="feature-container" class="col-xs-8 no-padding">
            <h1 class="col-xs-12 no-padding">[[[What You Get with the Enterprise Plan]]]</h1>
            <div id="enterprise-features" class="col-xs-12 no-padding">
                <div id="features-container-segment-one" class="col-xs-12">
                    <div class="col-xs-6 no-padding features-container-data white-labeling">
                        <img src="@(GlobalAppSettings.CdnDomain)/static/enterprise-features/v1/white-labeling.svg" />
                        <h4>[[[Custom Branding]]]</h4>
                        <p>[[[Brand your dashboard site with your own name, logo.]]]</p>
                    </div>
                    <div class="col-xs-6 no-padding features-container-data custom-domain">
                        <img src="@(GlobalAppSettings.CdnDomain)/static/enterprise-features/v1/custom-domains.svg" />
                        <h4>[[[Custom Domain]]]</h4>
                        <p>[[[Use your own domain name for your Bold BI site.]]]</p>
                    </div>
                </div>
                <div id="features-container-segment-two" class="col-xs-12">
                    <div class="col-xs-6 no-padding features-container-data data-refresh">
                        <img src="@(GlobalAppSettings.CdnDomain)/static/enterprise-features/v1/data-refresh.svg" />
                        <h4>[[[Data Refresh]]]</h4>
                        <p>[[[Refresh your data extracts every five minutes.]]]</p>
                    </div>
                    <div class="col-xs-6 no-padding features-container-data third-party-login">
                        <img src="@(GlobalAppSettings.CdnDomain)/static/enterprise-features/v1/third-party-logins.svg" />
                        <h4>[[[Third Party Logins]]]</h4>
                        <p>[[[Configure SSO using your organization’s Azure AD.]]]</p>
                    </div>
                </div>
            </div>
        </div>
    }
</div>
