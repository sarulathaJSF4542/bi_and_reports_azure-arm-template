/*!
*  filename: datachanges.min.js
*  version : unknown version
*  Copyright Syncfusion Inc. 2001 - 2013. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function incrementVal(n){var t=n,i=t.attr("value");t.attr("value",parseInt(i)+1)}function refreshConditionCategory(){var n,t;for($(".condition-category-changes").find("select").html(""),$(".condition-category-changes").find("select").append('<option value="5" data-title="'+window.Server.App.LocalizationContent.ValueChange+'" name="ValueChanges" selected="selected">'+window.Server.App.LocalizationContent.ValueChangeOption+'<\/option><option value="1" data-title="'+window.Server.App.LocalizationContent.Increases+'" name="Increases">'+window.Server.App.LocalizationContent.IncreasesOption+'<\/option><option value="2" data-title="'+window.Server.App.LocalizationContent.ContinousIncreases+'" name="ContinousIncreases">'+window.Server.App.LocalizationContent.ContinousIncreasesOption+'<\/option><option value="3" data-title="'+window.Server.App.LocalizationContent.Decreases+'" name="Decreases">'+window.Server.App.LocalizationContent.DecreasesOption+'<\/option><option value="4" data-title="'+window.Server.App.LocalizationContent.ContinousDecreases+'" name="ContinousDecreases">'+window.Server.App.LocalizationContent.ContinousDecreasesOption+"<\/option>").selectpicker("refresh"),$("#selected-option").selectpicker("refresh"),n=0;n<$(".condition-category-changes select option").length;n++)t=$(".condition-category-changes select option").eq(n).attr("data-title"),$(".condition-category-changes .btn-group .dropdown-menu .selectpicker li ").eq(n).find("a").attr({title:t,"data-toggle":"tooltip","data-container":"body","data-placement":"right"});$(".condition-category-changes .btn-group .dropdown-menu .selectpicker li a").tooltip()}function refreshTarget(n){$(n).find("select").html("");$(n).find("select").append('<option value="" name="" class="hide-option" disabled="disabled" selected="selected">'+window.Server.App.LocalizationContent.SelectTarget+'<\/option><option value="0">Actual<\/option><option value="1">Custom<\/option>').selectpicker("refresh");$(n).find("select").selectpicker("refresh")}function renderDataCondition(n,t,i){var o=!1,s=t.length,u=$("#selected_dashboard").find("option:selected").val(),i,e,r;$("#selected_childdashboard").val()!=""&&(u=$("#selected_childdashboard").find("option:selected").val());i=$(".items-dropdown").find("option:selected").val();$("#add-condition").css("display","inline");$("#add-dimension-condition").css("display","inline");for(var f=0,h=0;f<s-1;)f==0?addMeasure(t[0]):addMeasureAgain(t[f]),f++;for(e=$(".condition-div-statement"),r=0;r<e.length;r++)e.eq(r).find(".filterareatext").html("Filter : "+(r+1)),e.eq(r).find(".filterareainput").val(r+1);if(t[s-1][1]!=""){while(h<t[s-1][1].length)h==0?addDimension():addDimensionAgain(),h++;$("#add-dimension-condition").remove()}n==1||n==2||n==3||n==4?($("#measure-div").find(".condition-type,.target-column,.column-condition").css("visibility","hidden"),$("#measure-div").find(".add-comparison").hide(),$("#measure-div").find(".add-comparison-target").css("display","none")):$("#measure-div").find(".condition-type,.target-column,.column-condition,#value").css("display","inline");$("#measure-div").find(".dimension-statement .dimension-each").find(".condition-type").css("visibility","visible");$("#measure-div .condition-div-statement .measure-statement .column-condition select").selectpicker("refresh");$("#measure-div .condition-div-statement .measure-statement .condition-type select").selectpicker("refresh");$.ajax({type:"POST",data:{itemId:u,name:i},url:getItemNamesUrl,async:!1,success:function(r){for(var s,e=r,f=0;f<e.data.length;f++)s=getSummaryType(e.data[f].SummaryType),e.data[f].IsWidgetBounded==!0&&(window.listItems+='<option value="'+e.data[f].ColumnName+'">'+s+" ("+e.data[f].DisplayName+")<\/option>"),e.data[f].CustomColumnType==2?(window.listDimensionItems+='<option value="'+e.data[f].ColumnName+'">'+e.data[f].DisplayName+"<\/option>",addTitleForColumns(),o=!0):($(".schedule-dialog #data-changes-container #add-dimension-condition").css("display","none"),$(".schedule-dialog #data-changes-container #add-dimensions").css("display","none"));$.ajax({type:"POST",data:{itemId:u,itemName:i,userId:$("#userid").val()},url:getCustomExpressionListUrl,success:function(r){var b,e,h,l,c,y,k,s,f,v;if(parent.$("#popup-container_wrapper").ejWaitingPopup("hide"),parent.$("#editpopup-container_wrapper").ejWaitingPopup("hide"),r!=null)for(e=0;e<r.Result.length;e++)window.listItems+='<option value="'+r.Result[e].Name+'">'+r.Result[e].Name+"<\/option>",window.listDimensionItems+='<option value="'+r.Result[e].Name+'">'+r.Result[e].Name+"<\/option>";for($("#widget-items option").remove(),$("#widget-items").append(window.listItems).selectpicker("refresh"),$(".measure-column select,.measure-column-col select").each(function(){if($(this).html()==""){$(this).html("");$(this).append('<option value="" disabled class="hide-option"selected="selected">Select Column<\/option>'+window.listItems).selectpicker("refresh");var n=$(this).closest(".condition-div-statement .measure-statement").find("#selected-col-option");refreshColumns(n);addTitleForColumns()}}),window.listDimensionItems==""?($("#dimension-div .join-div").html(""),$("#dimension-div .dimension-statement").html(""),$(".schedule-dialog #data-changes-container #add-dimension-condition").css("display","none"),$(".schedule-dialog #data-changes-container #add-dimensions").css("display","none")):$(".dimension-column select,.dimension-column-col select").html()==""&&($(".dimension-column select,.dimension-column-col select").html(""),$(".dimension-column select,.dimension-column-col select").append('<option value="" disabled class="hide-option"selected="selected">Select Column<\/option>'+window.listDimensionItems).selectpicker("refresh"),$("#add-dimension-condition").css("display","inline"),v=$(this).closest(".condition-div-statement .dimension-statement").find("#selected-col-option"),refreshColumns(v),addTitleForColumns()),f=0;f<t.length-1;f++)$("#measure-div .condition-div-statement:eq("+f+") .measure-statement").find(".column select").find("option").each(function(){var n=t[f][0][0][0][1],i=t[f][0][0][0][3];i&&(n=t[f][0][0][0][4]);$(this).val()==""?$(this).removeAttr("selected"):$(this).val()==n&&($(this).attr("selected","selected"),$(this).parents(".column").find(".bootstrap-select li").each(function(){if($(this).hasClass("disabled selected active")&&$(this).removeClass("selected active"),$(this).find(".text").text().trim()==n.trim()){$(this).addClass("selected active");var t=$(this).find(".text").text();$(this).parents(".bootstrap-select").find(".filter-option").html(t)}}));$("#measure-div .condition-div-statement .column select").selectpicker("refresh")}),$("#measure-div .condition-div-statement:eq("+f+") #selected-joins").find("select").find("option").each(function(){var i;i=n=="5"?t[f][0].length==2?t[f][0][1]:t[f][0][3]:t[f][0][1];$(this).val()==""?$(this).removeAttr("selected"):$(this).val()==i.toString()&&($(this).attr("selected","selected"),$(this).parents("#selected-joins").find(".bootstrap-select li").each(function(){if($(this).hasClass("disabled selected active")&&$(this).removeClass("selected active"),$(this).attr("data-original-index")==i.toString()){$(this).addClass("selected active");var n=$(this).find(".text").text();$(this).parents(".bootstrap-select").find(".filter-option").html(n)}}));$("#measure-div .condition-div-statement #selected-joins select").selectpicker("refresh")}),n=="5"&&(t[f][0].length==2?($("#measure-div .condition-div-statement:eq("+f+") .measure-statement").find(".add-comparison").show(),$("#measure-div .condition-div-statement:eq("+f+") .measure-statement").find(".add-comparison-target").css("display","none")):t[f][0][2][0].length==10?($("#measure-div .condition-div-statement:eq("+f+") .measure-statement").find(".condition-type select").find("option").each(function(){$(this).val()==""&&$(this).removeAttr("selected");$(this).val()=="0"&&($(this).attr("selected","selected"),$(this).parents(".add-comparison-target").prev(".add-comparison").hide(),$(this).parents(".add-comparison-target").css("display","block"),$(this).parents(".target-column").find(".bootstrap-select li").each(function(){if($(this).hasClass("disabled selected active")&&$(this).removeClass("selected active"),$(this).find(".text").text().trim()==a.trim()){$(this).addClass("selected active");var n=$(this).find(".text").text();$(this).parents(".bootstrap-select").find(".filter-option").html(n);$(this).parents(".condition-type").siblings(".target-column").css("visibility","visible")}}));$("#measure-div .condition-div-statement .condition-type select").selectpicker("refresh")}),$("#measure-div .condition-div-statement:eq("+f+") .measure-statement").find(".target-column select").find("option").each(function(){var n=t[f][0][2][0][6],i=t[f][0][2][0][8];i&&(n=t[f][0][2][0][9]);$(this).val()==""?$(this).removeAttr("selected"):$(this).val()==n.trim()&&($(this).attr("selected","selected"),$(this).parents(".add-comparison-target").css("display","block"),$(this).parents(".target-column").find(".bootstrap-select li").each(function(){if($(this).hasClass("disabled selected active")&&$(this).removeClass("selected active"),$(this).find(".text").text()==n.trim()){$(this).addClass("selected active");var t=$(this).find(".text").text();$(this).parents(".bootstrap-select").find(".filter-option").html(t)}}));$("#measure-div .condition-div-statement .target-column select").selectpicker("refresh")}),$("#measure-div .condition-div-statement:eq("+f+") .measure-statement").find(".target-column").css("visibility","visible"),$("#measure-div .condition-div-statement:eq("+f+")  .measure-statement").find(".add-value").css("display","none")):($("#measure-div .condition-div-statement:eq("+f+") .measure-statement").find(".condition-type select").find("option").each(function(){$(this).val()==""?$(this).removeAttr("selected"):$(this).val()=="1"&&($(this).attr("selected","selected"),$(this).parents(".add-comparison-target").prev(".add-comparison").hide(),$(this).parents(".add-comparison-target").css("display","block"),$(this).parents(".target-column").find(".bootstrap-select li").each(function(){if($(this).hasClass("disabled selected active")&&$(this).removeClass("selected active"),$(this).find(".text").text().trim()==a.trim()){$(this).addClass("selected active");var n=$(this).find(".text").text();$(this).parents(".bootstrap-select").find(".filter-option").html(n)}}))}),$("#measure-div").find(".condition-div-statement:eq("+f+") .measure-statement").find(".add-value input").val(t[f][0][2][0][5]),$("#measure-div .condition-div-statement:eq("+f+") .measure-statement").find(".add-value").css("display","inline"),$("#measure-div .condition-div-statement:eq("+f+") .measure-statement").find(".target-column").css("display","none"),$("#measure-div .condition-div-statement .condition-type select").selectpicker("refresh")),$("#measure-div .condition-div-statement:eq("+f+") .measure-statement .column-condition").find("select").find("option").each(function(){var n=t[f][0][1];$(this).val()==""||$(this).val()!=n.toString()?$(this).removeAttr("selected"):$(this).val()==n.toString()&&($(this).attr("selected","selected"),b=$(this).attr("class"),$(this).parents(".column-condition").find(".bootstrap-select .btn-default .filter-option").attr("id","option-selected"),$(this).parents(".column-condition").find(".bootstrap-select .btn-default #option-selected").removeAttr("class"),$(this).parents(".column-condition").find(".bootstrap-select .btn-default #option-selected").html(""),$(this).parents(".column-condition").find(".bootstrap-select .btn-default #option-selected").addClass(b).addClass("filter-option pull-left"),$(this).parents(".column-condition").find(".bootstrap-select .btn-default .filter-option").removeAttr("id"),$(this).parents(".column-condition").find(".bootstrap-select li").each(function(){$(this).hasClass("disabled selected active")&&$(this).removeClass("selected active");$(this).attr("data-original-index")==n.toString()&&$(this).addClass("selected active")}));$("#measure-div .condition-div-statement .measure-statement .column-condition select").selectpicker("refresh")})),o==!0&&(t[f][1]==null||t[f][1]=="")?$("#measure-div .condition-div-statement:eq("+f+") .measure-statement").find("#add-dimensions").css("display","inline"):(e=0,$("#measure-div .condition-div-statement:eq("+f+") .dimension-statement").find(".dimension-each").each(function(){var n=t[f][1],i=n[e][2],o=n[e][8],r,u,s;o.toLowerCase()=="true"&&(i=n[e][9]);r=n[e][5];u=[];u=r.split(",");s="";$(this).find(".actual-column select").find("option").each(function(){$(this).val()==""?$(this).removeAttr("selected"):$(this).val()==i.trim()&&($(this).attr("selected","selected"),$(this).parents(".actual-column").find(".bootstrap-select li").each(function(){if($(this).hasClass("disabled selected active")&&$(this).removeClass("selected active"),$(this).find(".text").text().trim()==i.trim()){$(this).addClass("selected active");var n=$(this).find(".text").text();$(this).parents(".bootstrap-select").find(".filter-option").html(n)}}))});e++;$("#measure-div .condition-div-statement .dimension-statement .dimension-each select").selectpicker("refresh")}),h=0,$("#measure-div .condition-div-statement:eq("+f+") .dimension-statement").find(".dimension-each").each(function(){var n=t[f][1],e=n[h][1],i=n[h][4],o=n[h][5],u=o.split(","),s=n[h][7],r;e.toLowerCase()=="date"?($(this).find(".column-dimension select").html(""),$(this).find(".column-dimension select").append('<option value="" disabled class="hide-option" selected="selected">Select Condition<\/option><option value="0">Include<\/option><option value="1">Exclude<\/option><option value="3">Between<\/option>').selectpicker("refresh"),$(this).find(".add-value-dimension .add-dimension-custom").html(window.Server.App.LocalizationContent.DateFormatvalidator+dateFormat+window.Server.App.LocalizationContent.Format),i=="3"&&($(this).find(".add-value-dimension").css("display","none"),$(this).find(".condition-type,.add-value-dimension").css("display","none"),$(this).find(".target-column-value").css("display","none"),$(this).find(".condition-type").before('<div class="col-sm-3 col-xs-3 no-padding pull-left from-date-div"><input type="text" class="form-control from-date validation-input"/><span class="date-error">'+window.Server.App.LocalizationContent.DateRangeValidator+"<\/span><\/div>"),r="datepicker"+$(this).parents(".condition-div-statement").index()+"id"+$(this).index(),$(this).find(".from-date").attr("id",r),$("#"+r).ejDateRangePicker({dateFormat:dateFormat,startDate:new Date(u[0]),endDate:new Date(u[1])}))):s=="True"?($(this).find(".column-dimension select").html(""),$(this).find(".column-dimension select").append('<option value="" disabled class="hide-option" selected="selected">Select Condition<\/option><option value="4">Include<\/option><option value="5">Exclude<\/option>').selectpicker("refresh"),$(this).find(".add-value-dimension .add-dimension-custom").html(window.Server.App.LocalizationContent.CustomValueValidator)):$(this).find(".add-value-dimension .add-dimension-custom").html(window.Server.App.LocalizationContent.CustomValueStringValidator);$(this).find(".column-dimension select").find("option").each(function(){$(this).val()==""?$(this).removeAttr("selected"):$(this).val()==i&&($(this).attr("selected","selected"),$(this).parents(".actual-column").find(".bootstrap-select li").each(function(){if($(this).hasClass("disabled selected active")&&$(this).removeClass("selected active"),$(this).attr("data-original-index")==i){$(this).addClass("selected active");var n=$(this).find(".text").text();$(this).parents(".bootstrap-select").find(".filter-option").html(n)}}))});h++;$("#measure-div .condition-div-statement .dimension-statement .dimension-each select").selectpicker("refresh")}),l=0,$("#measure-div .condition-div-statement:eq("+f+") .dimension-statement").find(".dimension-each").each(function(){var n=t[f][1],r=n[l][1],i=n[l][6];$(this).find(".join-div select").find("option").each(function(){$(this).val()==""?$(this).removeAttr("selected"):$(this).val()==i.toString()&&($(this).attr("selected","selected"),$(this).parents(".join-div").find(".bootstrap-select li").each(function(){if($(this).hasClass("disabled selected active")&&$(this).removeClass("selected active"),$(this).attr("data-original-index")==i.toString()){$(this).addClass("selected active");var n=$(this).find(".text").text();$(this).parents(".bootstrap-select").find(".filter-option").html(n)}}))});l++;$("#measure-div .condition-div-statement .dimension-statement .dimension-each select").selectpicker("refresh")}),c=0,$("#measure-div .condition-div-statement:eq("+f+") .dimension-statement").find(".dimension-each").each(function(){var e=t[f][1],a=e[c][2].trim(),v=e[c][1],y=e[c][4],p=e[c][5],s=p.split(",");var l=0,h="",r=$(this).find(".condition-type select"),n=$(this).find(".dimension-column-value-col select,.target-column-value select"),o=$(this).find(".add-value-dimension");$.ajax({type:"POST",async:!1,data:{itemId:u,columnName:a,widgetName:i},url:getColumnValuesUrl,success:function(t){for(var f,e,u=t,i=0;i<u.data.length;i++){for(f=0;f<s.length;f++)u.data[i].trim().toLowerCase()==s[f].trim().toLowerCase()&&l++;h+='<option value="'+u.data[i]+'">'+u.data[i]+"<\/option>"}$(n).append(h);v.toLowerCase()=="date"&&y=="3"?($(r).parent("div").css("display","none"),$(o).css("display","none"),$(n).parent("div").css("display","none")):l>0?($(r).find("option").each(function(){$(this).val()==""?$(this).removeAttr("selected"):$(this).val()=="0"&&($(this).attr("selected","selected"),$(this).parents(".condition-type").find(".bootstrap-select li").each(function(){if($(this).hasClass("disabled selected active")&&$(this).removeClass("selected active"),$(this).attr("data-original-index")=="0"){$(this).addClass("selected active");var t=$(this).find(".text").text();$(this).parents(".bootstrap-select").find(".filter-option").html(t)}$(n).selectpicker("refresh")}))}),$(r).parent("div").addClass("display"),$(n).parent("div").css("display","inline"),$(n).parent("div").addClass("margin-right"),$(n).html(""),$(n).append(h).selectpicker("refresh"),e=$("#dimension-div .dimension-statement"),refreshColumns(e),addTitleForColumnValues()):($(r).find("option").each(function(){$(this).val()==""?$(this).removeAttr("selected"):$(this).val()=="1"&&($(this).attr("selected","selected"),$(this).parents(".condition-type").find(".bootstrap-select li").each(function(){if($(this).hasClass("disabled selected active")&&$(this).removeClass("selected active"),$(this).attr("data-original-index")=="1"){$(this).addClass("selected active");var n=$(this).find(".text").text();$(this).parents(".bootstrap-select").find(".filter-option").html(n)}}))}),$(r).parent("div").addClass("display"),$(o).css("display","inline"),$(o).css("margin-right","10px"),$(o).find("input").val(s))}});c++;$("#popup-container_wrapper").ejWaitingPopup("hide");$("#editpopup-container_wrapper").ejWaitingPopup("hide");$("#measure-div .condition-div-statement .dimension-statement .dimension-each select").selectpicker("refresh")}),$("#measure-div .condition-div-statement:eq("+f+")").find(".dimension-statement .dimension-each").each(function(){$(this).next("div").length>0&&$(this).children(".add-dimension-after").html("")}),y=0,$("#measure-div .condition-div-statement:eq("+f+") .dimension-statement").find(".dimension-each").each(function(){for(var r=t[f][1],u=r[y][5],i=[],i=u.split(","),n=0;n<i.length;n++)$(this).find(".target-column-value select").find("option").each(function(){$(this).val()==""?$(this).removeAttr("selected"):$(this).text().trim().toLowerCase()==i[n].trim().toLowerCase()&&$(this).attr("selected","selected")});y++;$("#measure-div .condition-div-statement .dimension-statement .dimension-each select").selectpicker("refresh")}));if(k=t[t.length-1],s=k[1],o==!0&&(s==""||s==null))$("#add-dimension-condition").css("display","inline");else{for(f=0;f<s.length;f++){var a=s[f][2],d=s[f][1],p=s[f][5],w=s[f][4],g=s[f][6],nt=s[f][7];$("#dimension-div .dimension-statement .dimension-each:eq("+f+")").find(".actual-column select").find("option").each(function(){$(this).val()==""?$(this).removeAttr("selected"):$(this).val()==a.trim()&&($(this).attr("selected","selected"),$(this).parents(".actual-column").find(".bootstrap-select li").each(function(){if($(this).hasClass("disabled selected active")&&$(this).removeClass("selected active"),$(this).find(".text").text().trim()==a.trim()){$(this).addClass("selected active");var n=$(this).find(".text").text();$(this).parents(".bootstrap-select").find(".filter-option").html(n)}}));$("#measure-div .condition-div-statement .dimension-statement .dimension-each .actual-column select").selectpicker("refresh")});$("#dimension-div .dimension-statement").find(".dimension-each:eq("+f+")").each(function(){var n=[],t;n=p.split(",");d.toLowerCase()=="date"?($(this).find(".column-dimension select").html(""),$(this).find(".column-dimension select").append('<option value="" disabled class="hide-option" selected="selected">Select Condition<\/option><option value="0">Include<\/option><option value="1">Exclude<\/option><option value="3">Between<\/option>').selectpicker("refresh"),$(this).find(".add-value-dimension .add-dimension-custom").html(window.Server.App.LocalizationContent.DateFormatvalidator+dateFormat+window.Server.App.LocalizationContent.Format),w=="3"&&($(this).find(".add-value-dimension").css("display","none"),$(this).find(".condition-type,.add-value-dimension").css("display","none"),$(this).find(".target-column-value").css("display","none"),$(this).find(".condition-type").before('<div class="col-sm-3 col-xs-3 no-padding pull-left from-date-div"><input type="text" class="form-control from-date validation-input"/><span class="date-error">'+window.Server.App.LocalizationContent.DateRangeValidator+"<\/span><\/div>"),t="date"+$(this).parents(".condition-div-statement").index()+"id"+$(this).index(),$(this).find(".from-date").attr("id",t),$("#"+t).ejDateRangePicker({dateFormat:dateFormat,startDate:new Date(n[0]),endDate:new Date(n[1])}))):nt=="True"?($(this).find(".column-dimension select").html(""),$(this).find(".column-dimension select").append('<option value="" disabled class="hide-option" selected="selected">Select Condition<\/option><option value="4">Include<\/option><option value="5">Exclude<\/option>').selectpicker("refresh"),$(this).find(".add-value-dimension .add-dimension-custom").html(window.Server.App.LocalizationContent.CustomValueValidator)):$(this).find(".add-value-dimension .add-dimension-custom").html(window.Server.App.LocalizationContent.CustomValueStringValidator);$(this).find(".column-dimension select").find("option").each(function(){$(this).val()==""?$(this).removeAttr("selected"):$(this).val()==w&&$(this).attr("selected","selected")});$(".selectpicker").selectpicker("refresh")});$("#dimension-div .condition-div-statement").find(".dimension-statement .dimension-each").each(function(){$(this).next("div").length>0&&$(this).children(".add-dimension-after").html("")});$("#dimension-div .dimension-statement").find(".dimension-each:eq("+f+")").each(function(){$(this).find(".join-div select").find("option").each(function(){$(this).val()==""?$(this).removeAttr("selected"):$(this).val()==g.toString()&&($(this).attr("selected","selected"),$(this).parents(".join-div").find(".bootstrap-select li").each(function(){if($(this).hasClass("disabled selected active")&&$(this).removeClass("selected active"),$(this).attr("data-original-index")==g.toString()){$(this).addClass("selected active");var n=$(this).find(".text").text();$(this).parents(".bootstrap-select").find(".filter-option").html(n)}}))});l++});$("#dimension-div .condition-div-statement .dimension-statement").find(".dimension-each:eq("+f+")").each(function(){var f=p.split(",");var o=0,e="",t=$(this).find(".condition-type select"),n=$(this).find(".dimension-column-value-col select,.target-column-value select"),r=$(this).find(".add-value-dimension");$.ajax({type:"POST",async:!1,data:{itemId:u,columnName:a,widgetName:i},url:getColumnValuesUrl,success:function(i){for(var h,c,s=i,u=0;u<s.data.length;u++){for(h=0;h<f.length;h++)s.data[u].trim().toLowerCase()==f[h].trim().toLowerCase()&&o++;e+='<option value="'+s.data[u]+'">'+s.data[u]+"<\/option>"}$(n).append(e);d.toLowerCase()=="date"&&w=="3"?($(t).parent("div").css("display","none"),$(r).css("display","none"),$(n).parent("div").css("display","none")):o>0?($(t).find("option").each(function(){$(this).val()==""?$(this).removeAttr("selected"):$(this).val()=="0"&&$(this).attr("selected","selected");$(".selectpicker").selectpicker("refresh")}),$(t).parent("div").addClass("display"),$(n).parent("div").css("display","inline"),$(n).parent("div").addClass("margin-right"),$(n).html(""),$(n).append(e).selectpicker("refresh"),c=$("#dimension-div .dimension-statement"),refreshColumns(c),addTitleForColumnValues()):($(t).find("option").each(function(){$(this).val()==""?$(this).removeAttr("selected"):$(this).val()=="1"&&$(this).attr("selected","selected");$(".selectpicker").selectpicker("refresh")}),$(t).parent("div").addClass("display"),$(r).css("display","inline"),$(r).css("margin-right","10px"),$(r).find("input").val(f))}});$("#popup-container_wrapper").ejWaitingPopup("hide");$("#editpopup-container_wrapper").ejWaitingPopup("hide");$("#dimension-div .condition-div-statement .dimension-statement .dimension-each select").selectpicker("refresh")});$("#dimension-div .dimension-statement").find(".dimension-each:eq("+f+")").each(function(){for(var t=[],t=p.split(","),n=0;n<t.length;n++)$(this).find(".target-column-value select").find("option").each(function(){$(this).val()==""?$(this).removeAttr("selected"):$(this).text().trim()==t[n].trim()&&($(this).attr("selected","selected"),$(this).parents(".target-column-value").find(".bootstrap-select li").each(function(){if($(this).hasClass("disabled selected active")&&$(this).removeClass("selected active"),$(this).find(".text").text().trim()==t[n]){$(this).addClass("selected active");var i=$(this).find(".text").text();$(this).parents(".bootstrap-select").find(".filter-option").html(i)}}))})});v=$("#dimension-div .dimension-statement select");refreshColumns(v)}$("#dimension-div .condition-div-statement").find(".dimension-statement .dimension-each:eq(0)").each(function(){$(this).siblings(".dimension-each").length>0&&$(this).children(".add-dimension-after").html("")})}parent.$("#popup-container_wrapper").ejWaitingPopup("hide");parent.$("#editpopup-container_wrapper").ejWaitingPopup("hide")}})}})}function addMeasure(n){$("#measure-div").append('<span id="form-message" class="error-message-widget validate-error no-padding col-sm-8 col-xs-8"><\/span><label class="custom-expression-columns" style="top: 5px;">'+window.Server.App.LocalizationContent.CutomExpression+'<\/label><div class="col-sm-12 col-xs-12 condition-div-statement no-padding first-condition"><span class="filterarea"><span class="filterareatext"><\/span><input type="hidden" class="filterareainput"><\/span><a href="javascript:void(0);" title="" class="remove-measure-dimension pull-right su su-close"><\/a><div class="measure-statement col-sm-12 col-xs-12 no-padding"><div class="col-sm-3 col-xs-3 no-padding measure-column-col column" id="condition-first-col"><select id="selected-col-option" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectColumn+'" class="selectpicker select-condition col-sm-2 col-xs-2 no-padding no-margin" data-size="5"><\/select><\/div><input class="add-comparison btn"  type="button" value='+window.Server.App.LocalizationContent.AddComparisionTarget+'><div class="add-comparison-target col-sm-6 col-xs-6" ><span class="remove-comparison su su-close" data-toggle="tooltip" data-container="body" data-placement="right" title="'+window.Server.App.LocalizationContent.RemoveComparisionTarget+'"><\/span><div class="col-sm-2 col-xs-1 no-padding column-condition no-margin" id="where-condition"><select id="selected-condition" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectCondition+'" class="col-sm-1 col-xs-1 no-padding no-margin" data-size="5"><option value="0" selected="selected" class="su su-equals">Equals<\/option><option value="1" class="su su-not-equals">Not Equals<\/option><option value="2" class="su su-lesser-than">Less Than<\/option><option value="3" class="su su-greater-than">Greater Than<\/option><option value="4" class="su su-lesser-than-or-equal-to">Less Than Or Equals<\/option><option value="5" class="su su-greater-than-or-equal-to">Greater Than Or Equals<\/option><\/select><\/div><div class="col-sm-4 col-xs-3 no-padding condition-type no-margin" id="condition-type"><select id="switch-value" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectTarget+'" class="selectpicker col-sm-2 col-xs-2 no-padding no-margin select-value" data-size="5"><option value="" disabled class="hide-option"selected="selected">'+window.Server.App.LocalizationContent.SelectTarget+'<\/option><option value="0">Condition<\/option><option value="1">Custom<\/option><\/select><\/div><div class="col-sm-5 col-xs-4 no-padding  measure-column-col  target-column no-margin" id="condition-second-col"><select id="selected-col2-option" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectColumn+'" class="selectpicker select-condition col-sm-2 col-xs-2 no-padding no-margin" data-size="5"><\/select><\/div><div class="col-sm-4 col-xs-4 no-padding no-margin add-value"><input type= "text"  id="value" class=" form-control validation-input"><span class="add-custom">'+window.Server.App.LocalizationContent.CustomValueNumericValidator+'<\/span><\/div><\/div><a href="javascript:void(0);" class="col-md-12  col-sm-12 col-lg-12 col-xs-12 add-where-local" id="add-dimensions"><span class="su su-add"><\/span><span class="margin-alignment">Add Where condition<\/span><\/a><\/div><div class=" col-sm-12 col-xs-12 no-padding dimension-statement no-margin"><\/div><\/div>');var i=$("#measure-div").find(".condition-div-statement:last "),r=n[1].length,t=0;if(r!=null){while(t<r)t==0?addDimensionWithMeasure(i):addDimensionWithMeasureAgain(i),t++;t>0&&$("#measure-div .condition-div-statement").last().find("#add-dimensions").css("display","none")}}function addMeasureAgain(n){var t,r,i;if($("#measure-div").append('<div class="col-sm-12 col-xs-12 condition-div-statement no-padding margin-condition-div-statement"><span class="filterarea"><span class="filterareatext"><\/span><input type="hidden" class="filterareainput"><\/span><a href="javascript:void(0);" title="" class="remove-measure-dimension pull-right su su-close"><\/a><div class="col-sm-2 col-xs-2 no-padding selected-joins" id="selected-joins"><select id="selected-join-option" data-live-search="true" title='+selectJoinOption+' class="selectpicker col-sm-2 col-xs-2 join-option no-padding" data-size="5"><option value="0" class="and" selected="selected">AND<\/option><option value="1" class="or">OR<\/option><option value="2" class="nand">AND NOT<\/option><option value="3" class="nor">OR NOT<\/option><\/select><\/div><div class="measure-statement col-sm-12 col-xs-12 no-padding"><div class="col-sm-3 col-xs-3 no-padding measure-column-col column" id="condition-first-col"><select id="selected-col-option" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectColumn+'" class="selectpicker select-condition col-sm-2 col-xs-2 no-padding no-margin" data-size="5"><\/select><\/div><input class="add-comparison btn"  type="button" value="'+window.Server.App.LocalizationContent.AddComparisionTarget+'" tabindex="4" class="secondary-button"><div class="add-comparison-target col-sm-6 col-xs-6" ><span class="remove-comparison su su-close" data-toggle="tooltip" data-container="body" data-placement="right" title="'+window.Server.App.LocalizationContent.RemoveComparisionTarget+'"><\/span><div class="col-sm-2 col-xs-1 no-padding  column-condition no-margin" id="where-condition"><select id="selected-condition" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectCondition+'" class="col-sm-4 col-xs-4 no-padding no-margin" data-size="5"><option value="0" selected="selected" class="su su-equals">Equals<\/option><option value="1" class="su su-not-equals">Not Equals<\/option><option value="2" class="su su-lesser-than">Less Than<\/option><option value="3" class="su su-greater-than">Greater Than<\/option><option value="4" class="su su-lesser-than-or-equal-to">Less Than Or Equals<\/option><option value="5" class="su su-greater-than-or-equal-to">Greater Than Or Equals<\/option><\/select><\/div><div class="col-sm-4 col-xs-3 no-padding condition-type no-margin" id="condition-type"><select id="switch-value" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectTarget+'" class="selectpicker col-sm-2 col-xs-2 no-padding no-margin select-value" data-size="5"><option value="" disabled class="hide-option"selected="selected" >'+window.Server.App.LocalizationContent.SelectTarget+'<\/option><option value="0">Condition<\/option><option value="1">Custom<\/option><\/select><\/div><div class="col-sm-5 col-xs-4 no-padding  measure-column-col  target-column no-margin" id="condition-second-col"><select id="selected-col2-option" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectColumn+'" class="selectpicker select-condition col-sm-2 col-xs-2 no-padding no-margin" data-size="5"><\/select><\/div><div class="col-sm-4 col-xs-4 no-padding no-margin add-value"><input type= "text" id="value" class="form-control validation-input"><span class="add-custom">'+window.Server.App.LocalizationContent.CustomValueNumericValidator+'<\/span><\/div><\/div><a href="javascript:void(0);" class="col-md-12  col-sm-12 col-lg-12 col-xs-12 add-where-local" id="add-dimensions"><span class="su su-add"><\/span><span class="margin-alignment">Add Where condition<\/span><\/a><\/div><div class=" col-sm-12 col-xs-12 no-padding dimension-statement  no-margin"><\/div><\/div>'),t=$("#measure-div").find(".condition-div-statement:last"),$(t).find(".and").hasClass("and-img")||($(t).find(".and").prepend("<img class='and-img'/>"),$(t).find(".and-img").attr("src",dashboardServerResourceUrl+"/images/and.png"),$(t).find(".or").prepend("<img class='or-img'/>"),$(t).find(".or-img").attr("src",dashboardServerResourceUrl+"/images/or.png"),$(t).find(".nand").prepend("<img class='nand-img'/>"),$(t).find(".nand-img").attr("src",dashboardServerResourceUrl+"/images/nand.png"),$(t).find(".nor").prepend("<img class='nor-img'/>"),$(t).find(".nor-img").attr("src",dashboardServerResourceUrl+"/images/nor.png"),$(t).find("select").selectpicker("refresh")),r=n[1].length,i=0,r!=null){while(i<r)i==0?addDimensionWithMeasure(t):addDimensionWithMeasureAgain(t),i++;i>0&&$("#measure-div .condition-div-statement").last().find("#add-dimensions").css("display","none")}}function addDimension(){$("#dimension-div").append('<div class="col-sm-12 col-xs-12 condition-div-statement margin-dimension-statement no-padding"><div class="col-sm-12 col-xs-12 dimension-statement no-padding"><div class="col-sm-12 col-xs-12 no-padding dimension-each no-margin where"><div class="col-sm-1 col-xs-1 no-padding delete-button-dimension no-margin"><span class="su su-close action"><\/span><\/div><div class="col-sm-1 col-xs-1 where-class no-padding no-margin text-center"><span id="where">Where<\/span><\/div><div class="col-sm-2 col-xs-2 no-padding dimension-column-col actual-column no-margin" id="condition-first-col"><select id="selected-col-option" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectColumn+'" class="selectpicker col-sm-2 col-xs-2 no-padding select-condition" data-size="5"><\/select><span class="error-column"><\/span><\/div><div class="col-sm-2  col-xs-2 no-padding  column-dimension no-margin" id="where-condition"><select id="selected-condition" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectCondition+'" class="selectpicker col-sm-2 col-xs-2 no-padding" data-size="5"><option value = "" disabled class="hide-option" selected="selected">'+window.Server.App.LocalizationContent.SelectCondition+'<\/option><option value="0">Contains<\/option><option value="1">Starts With<\/option><option value="2">Ends With<\/option><option value="3">Not Contains<\/option><option value="4">Include<\/option><option value="5">Exclude<\/option><\/select><\/div><div class="col-sm-2 col-xs-2 no-padding condition-type no-margin" id="condition-type-dimension"><select id="switch-value" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectCondition+'" class="selectpicker col-sm-2 col-xs-2 no-padding no-margin select-value-dimension" data-size="5"><option value="" disabled class="hide-option" selected="selected">'+window.Server.App.LocalizationContent.SelectTarget+'<\/option><option value="0">Actual<\/option><option value="1">Custom<\/option><\/select><\/div><div class="col-sm-3 col-xs-3 no-padding dimension-column-value-col value target-column-value no-margin target-row" id="selected-value-condition"><select id="selected-value-condition" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectValue+'" class="selectpicker col-sm-3 col-xs-3 no-padding" data-size="5" multiple=""><\/select><\/div><div class="col-sm-3 col-xs-3 no-padding add-value-dimension"><input type= "text" class="form-control target-value validation-input" id="value-dimension"><span class="add-dimension-custom"><\/span><\/div><div class="col-sm-1 col-xs-1 no-padding add-dimension-after"><span class="su su-add add-dimension-condition-again" id=add-dimension-condition-again><\/span><\/div><\/div><a href="javascript:void(0);" title="" class="su su-close remove-dimension"><\/a><\/div><\/div>');$("#dimension-div .condition-div-statement .dimension-statement .dimension-each select").selectpicker("refresh");$("#dimension-div").find(".dimension-statement .dimension-each:last").find(".actual-column select").html("");$("#dimension-div").find(".dimension-statement .dimension-each:last").find(".actual-column select").html(dimensionColumns)}function addDimensionAgain(){$("#dimension-div .condition-div-statement .dimension-statement").append('<div class="col-sm-12 col-xs-12 no-padding dimension-each no-margin"><div class="col-sm-1 col-xs-1 no-padding delete-button-dimension no-margin"><span class="su su-close action"><\/span><\/div><div class="col-sm-2 col-xs-2 join-div no-padding no-margin"><select id="selected-join-option" data-live-search="true" title='+selectJoinOption+' class="selectpicker col-sm-2 col-xs-2 join-option no-padding" data-size="5"><option value="0" class="and" selected="selected">AND<\/option><option value="1" class="or">OR<\/option><\/select><\/div><div class="col-sm-2 col-xs-2 no-padding dimension-column-col actual-column no-margin" id="condition-first-col"><select id="selected-col-option" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectColumn+'" class="selectpicker col-sm-2 col-xs-2 no-padding select-condition" data-size="5"><\/select><span class="error-column"><\/span><\/div><div class="col-sm-2 col-xs-2 no-padding column-dimension no-margin" id="where-condition"><select id="selected-condition" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectCondition+'" class="selectpicker col-sm-2 col-xs-2 no-padding" data-size="5"><option value = "" disabled class="hide-option" selected="selected">'+window.Server.App.LocalizationContent.SelectCondition+'<\/option><option value="0">Contains<\/option><option value="1">Starts With<\/option><option value="2">Ends With<\/option><option value="3">Not Contains<\/option><option value="4">Include<\/option><option value="5">Exclude<\/option><\/select><\/div><div class="col-sm-2 col-xs-2 no-padding condition-type no-margin" id="condition-type-dimension"><select id="switch-value" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectCondition+'" class="selectpicker col-sm-2 col-xs-2 no-padding no-margin select-value-dimension" data-size="5"><option value="" name="" class="hide-option" disabled="disabled" selected="selected">'+window.Server.App.LocalizationContent.SelectTarget+'<\/option><option value="0">Actual<\/option><option value="1">Custom<\/option><\/select><\/div><div class="col-sm-3 col-xs-3  no-padding value dimension-column-value-col target-column-value no-margin target-row" id="selected-value-condition"><select id="select-value-condition" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectValue+'" class="selectpicker col-sm-3 col-xs-3 no-padding" data-size="5" multiple=""><\/select><\/div><div class="col-sm-3 col-xs-3 no-padding add-value-dimension"><input type= "text" class="form-control target-value validation-input" id="value-dimension"><span class="add-dimension-custom"><\/span><\/div><div class="col-sm-1 col-xs-1 no-padding  add-dimension-after"><span class="su su-add add-dimension-condition-again" id="add-dimension-condition-again"><\/span><\/div><\/div>');$("#dimension-div .condition-div-statement .dimension-statement .dimension-each select").selectpicker("refresh");var n=$("#dimension-div").find(".dimension-statement .dimension-each:last");$(n).find(".and").hasClass("and-img")||($(n).find(".and").prepend("<img class='and-img'/>"),$(n).find(".and-img").attr("src",dashboardServerResourceUrl+"iImages/and.png"),$(n).find(".or").prepend("<img class='or-img'/>"),$(n).find(".or-img").attr("src",dashboardServerResourceUrl+"/images/or.png"),$(n).find(".nand").prepend("<img class='nand-img'/>"),$(n).find(".nand-img").attr("src",dashboardServerResourceUrl+"/images/nand.png"),$(n).find(".nor").prepend("<img class='nor-img'/>"),$(n).find(".nor-img").attr("src",dashboardServerResourceUrl+"/images/nor.png"),$(n).find("select").selectpicker("refresh"))}function addDimensionWithMeasure(n){$(n).find(".dimension-statement").append('<div class="col-sm-12 col-xs-12 no-padding dimension-each no-margin where"><div class="col-sm-1 col-xs-1 no-padding delete-button no-margin"><span class="su su-close action"><\/span><\/div><div class="col-sm-1 col-xs-1 where-class no-padding no-margin text-center"><span id="where">Where<\/span><\/div><div class="col-sm-2 col-xs-2 no-padding dimension-column-col actual-column no-margin" id="condition-first-col"><select id="selected-col-option" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectColumn+'" class="selectpicker col-sm-2 col-xs-2 no-padding select-condition" data-size="5"><\/select><span class="error-column"><\/span><\/div><div class="col-sm-2 col-xs-2 no-padding  column-dimension no-margin" id="where-condition"><select id="selected-condition" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectCondition+'" class="selectpicker col-sm-2 col-xs-2 no-padding" data-size="5"><option value = "" disabled class="hide-option" selected="selected">'+window.Server.App.LocalizationContent.SelectCondition+'<\/option><option value="0">Contains<\/option><option value="1">Starts With<\/option><option value="2">Ends With<\/option><option value="3">Not Contains<\/option><option value="4">Include<\/option><option value="5">Exclude<\/option><\/select><\/div><div class="col-sm-2 col-xs-2 no-padding condition-type no-margin" id="condition-type-dimension"><select id="switch-value" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectCondition+'" class="selectpicker col-sm-2 col-xs-2 no-padding no-margin select-value-dimension" data-size="5"><option value="" disabled class="hide-option" selected="selected">'+window.Server.App.LocalizationContent.SelectTarget+'<\/option><option value="0">Actual<\/option><option value="1">Custom<\/option><\/select><\/div><div class="col-sm-3 col-xs-3 no-padding dimension-column-value-col value target-column-value no-margin target-row" id="selected-value-condition"><select id="selected-value-condition" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectValue+'" class="selectpicker col-sm-3 col-xs-3 no-padding" data-size="5" multiple=""><\/select><\/div><div class="col-sm-3 col-xs-3 no-padding add-value-dimension"><input type= "text" class="form-control target-value validation-input" id="value-dimension"><span class="add-dimension-custom"><\/span><\/div><div class="col-sm-1 col-xs-1 no-padding add-dimension-after"><span class="su su-add add-dimension-again" id=add-dimension-again><\/span><\/div><\/div>');$("#dimension-div .condition-div-statement .dimension-statement .dimension-each select").selectpicker("refresh");$("#dimension-div").find(".dimension-statement .dimension-each:last").find(".actual-column select").html("");$("#dimension-div").find(".dimension-statement .dimension-each:last").find(".actual-column select").html(dimensionColumns);$(n).find(".dropdown-class .where-local-add").css("display","none")}function addDimensionWithMeasureAgain(n){$(n).find(".dimension-statement").append('<div class="col-sm-12 col-xs-12 no-padding dimension-each no-margin"><div class="col-sm-1 col-xs-1 no-padding delete-button no-margin"><span class="su su-close action"><\/span><\/div><div class="col-sm-2 col-xs-2 join-div no-padding no-margin"><select id="selected-join-option" data-live-search="true" title='+selectJoinOption+' class="selectpicker col-sm-2 col-xs-2 join-option no-padding" data-size="5"><option value="0" class="and" selected="selected">AND<\/option><option value="1" class="or">OR<\/option><\/select><\/div><div class="col-sm-2 col-xs-2 no-padding dimension-column-col actual-column no-margin" id="condition-first-col"><select id="selected-col-option" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectColumn+'" class="selectpicker col-sm-2 col-xs-2 no-padding select-condition" data-size="5"><\/select><span class="error-column"><\/span><\/div><div class="col-sm-2 col-xs-2 no-padding column-dimension no-margin" id="where-condition"><select id="selected-condition" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectCondition+'" class="selectpicker col-sm-2 col-xs-2 no-padding" data-size="5"><option value = "" disabled class="hide-option" selected="selected">'+window.Server.App.LocalizationContent.SelectCondition+'<\/option><option value="0">Contains<\/option><option value="1">Starts With<\/option><option value="2">Ends With<\/option><option value="3">Not Contains<\/option><option value="4">Include<\/option><option value="5">Exclude<\/option><\/select><\/div><div class="col-sm-2 col-xs-2 no-padding condition-type no-margin" id="condition-type-dimension"><select id="switch-value" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectCondition+'" class="selectpicker col-sm-2 col-xs-2 no-padding no-margin select-value-dimension" data-size="5"><option value="" disabled class="hide-option" selected="selected">'+window.Server.App.LocalizationContent.SelectTarget+'<\/option><option value="0">Actual<\/option><option value="1">Custom<\/option><\/select><\/div><div class="col-sm-3 col-xs-3  no-padding value dimension-column-value-col target-column-value no-margin target-row" id="selected-value-condition"><select id="select-value-condition" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectValue+'" class="selectpicker col-sm-3 col-xs-3 no-padding" data-size="5" multiple=""><\/select><\/div><div class="col-sm-3 col-xs-3 no-padding add-value-dimension"><input type= "text" class="form-control target-value validation-input" id="value-dimension"><span class="add-dimension-custom"><\/span><\/div><div class="col-sm-1 col-xs-1 no-padding  add-dimension-after"><span class="su su-add add-dimension-again" id="add-dimension-again"><\/span><\/div><\/div>');var t=$("#measure-div").find(".dimension-statement .dimension-each:last .join-div");$(t).find(".and").hasClass("and-img")||($(t).find(".and").prepend("<img class='and-img'/>"),$(t).find(".and-img").attr("src",dashboardServerResourceUrl+"/images/and.png"),$(t).find(".or").prepend("<img class='or-img'/>"),$(t).find(".or-img").attr("src",dashboardServerResourceUrl+"/images/or.png"),$(t).find(".nand").prepend("<img class='nand-img'/>"),$(t).find(".nand-img").attr("src",dashboardServerResourceUrl+"/images/nand.png"),$(t).find(".nor").prepend("<img class='nor-img'/>"),$(t).find(".nor-img").attr("src",dashboardServerResourceUrl+"/images/nor.png"),$(t).find("select").selectpicker("refresh"));$("#dimension-div .condition-div-statement .dimension-statement .dimension-each select").selectpicker("refresh");$(n).find(".dropdown-class .where-local-add").css("display","none")}function saveCondition(){var o=[],u=[],i=[],s=[],r=[],f=[],h=[],c=[],l=$("#selected-items").find("option:selected").attr("data-itemid"),t,e;if(measure=[],dimensionArray=[],dimensionArrayValue=[],joinCondition=[],t=$("#condition-category").find("option:selected").html(),$("#data-changes-div-container").find("select").each(function(){($(this).find("option:selected").val()==""||$(this).find("option:selected").val()==null)&&$(this).parent("div").css("display")!="none"?($(this).siblings(".bootstrap-select").addClass("validation-error"),$(this).parent("div").addClass("validation")):($(this).siblings(".bootstrap-select").removeClass("validation-error"),$(this).parent("div").removeClass("validation"))}),$(".condition-div-statement .measure-statement").find(".add-comparison").each(function(){$(this).is(":visible")?($(this).next(".add-comparison-target").removeClass("validation"),$(this).next(".add-comparison-target").find("#condition-type").removeClass("validation"),$(this).next(".add-comparison-target").find("#condition-second-col").removeClass("validation")):($(this).next(".add-comparison-target").find("option:selected").val()==""||$(this).next(".add-comparison-target").find("option:selected").val()==null)&&$(this).next(".add-comparison-target").addClass("validation")}),$("#data-changes-div-container").find("div").hasClass("validation")&&(t=="Increases"||t=="Decreases"||t=="Continuously Increases"||t=="Continuously Decreases")&&$("#condition-div .measure-statement").find(".condition-type,.target-column").hasClass("validation")&&($("#condition-div .measure-statement").find(".condition-type,.target-column").removeClass("validation"),$("#condition-div .measure-statement").find(".condition-type .bootstrap-select,.target-column .bootstrap-select").removeClass("validation-error")),$("#data-changes-div-container").find(".validation-input").each(function(){$(this).hasClass("from-date")?$(this).val()==""?($(this).parent().addClass("validation-error"),$(".date-error").css("display","inline"),$(".date-error").css("visibility","visible"),$(this).parents("div").addClass("validation")):($(this).parent().removeClass("validation-error"),$(".date-error").css("display","none"),$(this).parents("div").removeClass("validation"),$(".date-error").css("visibility","hidden")):$(this).val()==""&&$(this).parent("div").css("display")!="none"?($(this).addClass("validation-error"),$(this).parent("div").children("span").css("display","inline"),$(this).parent("div").addClass("validation")):($(this).removeClass("validation-error"),$(this).parent("div").children("span").css("display","none"),$(this).parent("div").removeClass("validation"))}),$("#data-changes-div-container").find("div").hasClass("validation")||$("#data-changes-div-container #condition-div #measure-div").html().trim()==""?(validation=1,$(".items-dropdown").hasClass("validation")&&$(".condition-category-changes").hasClass("validation")?($("#widget-message").css("display","inline"),$(".error-message-condition-category").css("display","inline")):$(".items-dropdown").hasClass("validation")?$("#widget-message").css("display","inline"):$(".condition-category-changes").hasClass("validation")?$(".error-message-condition-category").css("display","inline"):$("#data-changes-div-container #condition-div #measure-div").html().trim()==""?($("#add-condition").addClass("add-first-condition-validation"),$(".add-error-msg").html(window.Server.App.LocalizationContent.AddContitionValidator).css("visibility","visible")):($("#add-condition").removeClass("add-first-condition-validation"),$(".add-error-msg").html(window.Server.App.LocalizationContent.AddContitionValidator).css("visibility","hidden"),$(".error-message-widget").css("display","none"),$(".error-message-condition-category").css("display","none"))):$("#data-changes-div-container #condition-div #measure-div .condition-div-statement").length<=1&&$("#data-changes-div-container #condition-div #dimension-div .dimension-each").length!=0?(validation=1,$("#add-condition").addClass("add-first-condition-validation"),$(".add-error-msg").html(window.Server.App.LocalizationContent.ConditionValidator).css("visibility","visible")):validation=0,validation!=1){e=$("#selected_dashboard").find("option:selected").val();createdItemId=e;$("#selected_childdashboard").val()!=""&&(e=$("#selected_childdashboard").find("option:selected").val(),createdItemId=e);$("#selected_childdashboard").val()==""&&$("#selected_childdashboard").attr("disabled")!="disabled"&&($("#schedule-submit").attr("data-report-id",$("#selected_childdashboard [data-designerid='"+$("#selected-items").find("option:selected").attr("data-itemid")+"']").val()),createdItemId=$("#selected_childdashboard [data-designerid='"+$("#selected-items").find("option:selected").attr("data-itemid")+"']").val());var a=$("#condition-category").find("option:selected").attr("name"),p=$(".condition-div-statement"),n=0,w=parseInt($("#count").val()),v=$(".condition-div-statement").length,y=$("#selected-items").find("option:selected").val();if(t=="Increases"||t=="Decreases"||t=="Continuously Increases"||t=="Continuously Decreases"||t=="Value Changes")while(n<v)$(".condition-div-statement").each(function(){var t=0,e=[],a;if(joinCondition[n]=$(this).find("#selected-joins").length>0?$(this).find(".join-option option:selected").val():"0",$(this).find(".measure-statement").find(".add-comparison-target").css("display")=="none"){if($(this).find(".measure-statement").length>0?(actualColumn=$(this).find(".column option:selected").val(),measure[n]=[actualColumn,$(this).find(".filterareainput").val()]):measure[n]=null,$(this).find(".dimension-statement").length>0)for(var l=$(this).find(".dimension-each").length,v=$(this).find(".join-div").length,y=[],p="";t<l;)$(this).find(".dimension-each").each(function(){var c,l,h;f[t]=$(this).find(".join-div .join-option option:selected").val()==""?null:$(this).find(".join-div .join-option option:selected").val();o[t]=$(this).find(".actual-column option:selected").val();c=$(this).find(".select-value-dimension option:selected").val();s[t]=$(this).find(".column-dimension option:selected").text();u[t]=$(this).find(".column-dimension option:selected").val();u[t]=="3"&&s[t]=="Between"?(l=$(this).find(".from-date").attr("id"),h=$("#"+l).val().split("-").map(function(n){return n.trim()}),i[t]=[h[0],h[1]],r[t]=null):c=="0"?(i[t]=$(this).find(".target-column-value .bootstrap-select .btn-default .filter-option").html().split(",").map(function(n){return n.trim()}),r[t]=null):(r[t]=$(this).find(".target-value").val(),i[t]=null);dimensionArray[t]=[o[t],r[t],u[t],i[t],f[t]];e.push(dimensionArray[t]);t++;dimensionArrayValue[n]=e});else dimensionArrayValue[n]=null;c[n]=[measure[n],dimensionArrayValue[n],joinCondition[n]];n++}else{if($(this).find(".measure-statement").length>0?(actualColumn=$(this).find(".column option:selected").val(),a=$(this).find(".select-value option:selected").val(),a=="1"?(h=$(this).find("#value").val(),targetColumn=null):(h=null,targetColumn=$(this).find(".target-column option:selected").val()),conditionMeasure=$(this).find(".column-condition option:selected").val(),measure[n]=[actualColumn,$(this).find(".filterareainput").val(),h,conditionMeasure,targetColumn]):measure[n]=null,$(this).find(".dimension-statement").length>0)for(var l=$(this).find(".dimension-each").length,p="",y=[],v=$(this).find(".join-div").length;t<l;)$(this).find(".dimension-each").each(function(){var c,l,h;f[t]=$(this).find(".join-div .join-option option:selected").val()==""?null:$(this).find(".join-div .join-option option:selected").val();o[t]=$(this).find(".actual-column option:selected").val();c=$(this).find(".select-value-dimension option:selected").val();s[t]=$(this).find(".column-dimension option:selected").text();u[t]=$(this).find(".column-dimension option:selected").val();u[t]=="3"&&s[t]=="Between"?(l=$(this).find(".from-date").attr("id"),h=$("#"+l).val().split("-").map(function(n){return n.trim()}),i[t]=[h[0],h[1]],r[t]=null):c=="0"?(i[t]=$(this).find(".target-column-value .bootstrap-select .btn-default .filter-option").html().split(",").map(function(n){return n.trim()}),r[t]=null):(r[t]=$(this).find(".target-value").val(),i[t]=null);u[t]=$(this).find(".column-dimension option:selected").val();dimensionArray[t]=[o[t],r[t],u[t],i[t],f[t]];e.push(dimensionArray[t]);t++;dimensionArrayValue[n]=e});else dimensionArrayValue[n]=null;c[n]=[measure[n],dimensionArrayValue[n],joinCondition[n]];n++}});parent.$("#popup-container_wrapper").ejWaitingPopup("show");parent.$("#editpopup-container_wrapper").ejWaitingPopup("show");$.ajax({type:"POST",data:{widgetdesignerId:l,itemId:e,columnInfo:JSON.stringify(c),itemName:y,conditionInfo:JSON.stringify(joinCondition),category:a},url:addConditionUrl,dataType:"json",success:function(n){parent.$("#popup-container_wrapper").ejWaitingPopup("hide");parent.$("#editpopup-container_wrapper").ejWaitingPopup("hide");n.hasError==!1?($("#serialize-columninfo").html("").append(n.columnInfo),$("#serialize-conditioninfo").html("").append(n.conditionInfo),$("#previous-data").html("").append(n.validationDetail),n.validationResult==!0&&$("#alert-value").html("").append(n.validationResult),$(".after-selection").css("display","inline"),$(".before-selection").css("display","none"),addButtonClicked++,$("#form-message").hide().html(""),url=emailEditor,enableEmailEditor()):$("#form-message").show().html(window.Server.App.LocalizationContent.EvaluatingCondition+(n.status==!1?n.validationDescription:""))}})}}function addTitleForWidgets(){var n,t;for($("#selected-items").selectpicker("refresh"),n=0;n<$(".items-dropdown  .btn-group .dropdown-menu .selectpicker li").length;n++)t=$(".items-dropdown .btn-group .dropdown-menu .selectpicker li").eq(n).find("a .text").text(),$(".items-dropdown .btn-group .dropdown-menu .selectpicker li ").eq(n).find("a").attr("title",t)}function refreshColumns(n){$(n).selectpicker("refresh")}function addTitleForColumns(){for(var t,n=0;n<$(".measure-column-col  .btn-group .dropdown-menu .selectpicker li,.dimension-column-col  .btn-group .dropdown-menu .selectpicker li").length;n++)t=$(".measure-column-col .btn-group .dropdown-menu .selectpicker li,.dimension-column-col  .btn-group .dropdown-menu .selectpicker li").eq(n).find("a .text").text(),$(".measure-column-col .btn-group .dropdown-menu .selectpicker li,.dimension-column-col  .btn-group .dropdown-menu .selectpicker li ").eq(n).find("a").attr("title",t)}function addTitleForColumnValues(){for(var t,n=0;n<$(".target-column-value  .btn-group .dropdown-menu .selectpicker li").length;n++)t=$(".target-column-value .btn-group .dropdown-menu .selectpicker li").eq(n).find("a .text").text(),$(".target-column-value .btn-group .dropdown-menu .selectpicker li").eq(n).find("a").attr("title",t)}function getSummaryType(n){return summaryType[n]}function getWidgets(){$.ajax({type:"POST",url:window.getwidgetUrl,data:{itemId:createdItemId},async:!1,success:function(n){for(var r,u,t=n,f="",i=0;i<t.data.length;i++)r="",u="",t.isMultiDashboard==!0&&(r=" ("+t.data[i].ParentName+")",u="data-itemid="+t.data[i].ParentId),f+="<option "+u+'  value="'+t.data[i].Name+'">'+t.data[i].Name+" "+r+"<\/option>";$(".items-dropdown select").append('<option disabled class="hide-option" selected="selected" value="">Select Widget<\/option>'+f).selectpicker("refresh");addTitleForWidgets();$("#selected-items").change();$("#data-changes-container #condition-div #measure-div,#data-changes-container #condition-div #dimension-div").html("");$("#data-changes-container #condition-div #add-condition,#data-changes-container #add-dimension-condition").css("display","none");refreshConditionCategory();$("span.loader-gif").remove();$(".items-dropdown").find("select").removeAttr("disabled");$(".items-dropdown").find(".bootstrap-select li,.bootstrap-select .btn-default").removeClass("disabled");$(".items-dropdown").find(".dropdown-menu").addClass("alignment-dropdown");$(".items-dropdown").find(".dropdown-menu .inner").addClass("alignment-dropdown-inner");$(".items-dropdown").find(".dropdown-menu li:first").css("height","0px");parent.$("#popup-container_wrapper").ejWaitingPopup("hide");parent.$("#editpopup-container_wrapper").ejWaitingPopup("hide")}})}function widgetNames(){$.ajax({type:"POST",url:window.getwidgetUrl,data:{itemId:createdItemId},async:!1,success:function(n){for(var r,u,t=n,f="",i=0;i<t.data.length;i++)r="",u="",t.isMultiDashboard==!0&&(r=" ("+t.data[i].ParentName+")",u="data-itemid="+t.data[i].ParentId),f+="<option "+u+'  value="'+t.data[i].Name+'">'+t.data[i].Name+" "+r+"<\/option>";$(".items-dropdown select").append('<option disabled class="hide-option" selected="selected" value="">Select Widget<\/option>'+f).selectpicker("refresh")}})}function onExpressionEditorDialogOpen(){var n=$("#selected_dashboard").find("option:selected").val(),t;$("#selected_childdashboard").val()!=""&&(n=$("#selected_childdashboard").find("option:selected").val());t=$(".items-dropdown").find("option:selected").val();$("#custom-expression-editor-container iframe").attr("src",customExpressionEditor+"?title="+title+"&&itemname="+t+"&&itemid="+n);$("#custom-expression-editor-container_wrapper").ejWaitingPopup("show")}function onExpressionEditorDialogClose(){parent.$("#custom-expression-editor-container").find("iframe").contents().find("html").html("");parent.$("#custom-expression-editor-container").ejDialog("close")}var customExpressionWaitingPopupTemplateId;(function(n){typeof define=="function"&&define.amd?define(["jquery"],n):n()})(function(){window.ej=window.Syncfusion=window.Syncfusion||{},function(n,t,i){"use strict";var o,u,f,e;t.version="14.4.0.15";t.consts={NamespaceJoin:"-"};t.TextAlign={Center:"center",Justify:"justify",Left:"left",Right:"right"};t.Orientation={Horizontal:"horizontal",Vertical:"vertical"};t.serverTimezoneOffset=0;t.persistStateVersion=null;Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(n,t){return n[t]!==i});String.format=function(){for(var t=arguments[0],n=0;n<arguments.length-1;n++)t=t.replace(new RegExp("\\{"+n+"\\}","gm"),arguments[n+1]);return t.replace(/\{[0-9]\}/g,"")};jQuery.uaMatch=function(n){n=n.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(n)||/(webkit)[ \/]([\w.]+)/.exec(n)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(n)||/(msie) ([\w.]+)/.exec(n)||n.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(n)||[];return{browser:t[1]||"",version:t[2]||"0"}};t.defineClass=function(n,r,u,f){if(!n||!u)return i;for(var o=n.split("."),s=window,e=0;e<o.length-1;e++)t.isNullOrUndefined(s[o[e]])&&(s[o[e]]={}),s=s[o[e]];return(f||t.isNullOrUndefined(s[o[e]]))&&(r=typeof r=="function"?r:function(){},s[o[e]]=r,s[o[e]].prototype=u),s[o[e]]};t.util={getNameSpace:function(n){var i=n.toLowerCase().split(".");return i[0]==="ej"&&(i[0]="e"),i.join(t.consts.NamespaceJoin)},getObject:function(n,r){var u,e,f;if(!r)return i;for(u=r,e=n.split("."),f=0;f<e.length;f++){if(t.util.isNullOrUndefined(u))break;u=u[e[f]]}return u},createObject:function(n,r,u){for(var s=n.split("."),h=u||window,f=h,e,c=s.length,o=0;o<c;o++)e=s[o],o+1==c?f[e]=r===i?{}:r:t.isNullOrUndefined(f[e])&&(f[e]={}),f=f[e];return h},isNullOrUndefined:function(n){return n===i||n===null},print:function(i,r){var f=t.buildTag("div"),o=i.clone(),r,e,u;f.append(o);r||(r=window.open("","print","height=452,width=1024,tabbar=no"));r.document.write("<!DOCTYPE html>");e=n("head").find("link").add("style");t.browserInfo().name==="msie"?(u="",e.each(function(t,i){i.tagName=="LINK"&&n(i).attr("href",i.href);u+=i.outerHTML}),r.document.write("<html><head><\/head><body>"+u+f[0].innerHTML+"<\/body><\/html>")):(u="",r.document.write("<html><head>"),e.each(function(t,i){i.tagName=="LINK"&&n(i).attr("href",i.href);u+=i.outerHTML}),r.document.writeln(u+"<\/head><body>"),r.document.writeln(f[0].innerHTML+"<\/body><\/html>"));r.document.close();r.focus();setTimeout(function(){t.isNullOrUndefined(r.window)||(r.print(),setTimeout(function(){r.close()},1e3))},1e3)},ieClearRemover:function(t){var i=n(t).height();t.style.paddingTop=parseFloat(i/2)+"px";t.style.paddingBottom=parseFloat(i/2)+"px";t.style.height="1px";t.style.lineHeight="1px"},sendAjaxRequest:function(t){n.ajax({type:t.type,cache:t.cache,url:t.url,dataType:t.dataType,data:t.data,contentType:t.contentType,async:t.async,success:t.successHandler,error:t.errorHandler,beforeSend:t.beforeSendHandler,complete:t.completeHandler})},buildTag:function(t,r,u,f){var s=/^[a-z]*[0-9a-z]+/ig.exec(t)[0],e=/#([_a-z]+[-_0-9a-z]+)/ig.exec(t),o;return e=e?e[e.length-1]:i,o=/\.([a-z]+[-_0-9a-z ]+)/ig.exec(t),o=o?o[o.length-1]:i,n(document.createElement(s)).attr(e?{id:e}:{}).addClass(o||"").css(u||{}).attr(f||{}).html(r||"")},_preventDefaultException:function(n,t){if(n)for(var i in t)if(t[i].test(n[i]))return!0;return!1},getMaxZindex:function(){var t=1;return t=Math.max.apply(null,n.map(n("body *"),function(t){if(n(t).css("position")=="absolute"||n(t).css("position")=="fixed")return parseInt(n(t).css("z-index"))||1})),(t==i||t==null)&&(t=1),t},blockDefaultActions:function(n){n.cancelBubble=!0;n.returnValue=!1;n.preventDefault&&n.preventDefault();n.stopPropagation&&n.stopPropagation()},getDimension:function(t,i){var e,u=n(t).parents().andSelf().filter(":hidden"),r,f;return u&&(r={visibility:"hidden",display:"block"},f=[],u.each(function(){var t={};for(var n in r)t[n]=this.style[n],this.style[n]=r[n];f.push(t)}),e=/(outer)/g.test(i)?n(t)[i](!0):n(t)[i](),u.each(function(n){var i=f[n];for(var t in r)this.style[t]=i[t]})),e},transitionEndEvent:function(){return{"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"}[t.userAgent()]},animationEndEvent:function(){return{"":"animationend",webkit:"webkitAnimationEnd",Moz:"animationend",O:"webkitAnimationEnd",ms:"animationend"}[t.userAgent()]},startEvent:function(){return t.isTouchDevice()||n.support.hasPointer?"touchstart":"mousedown"},endEvent:function(){return t.isTouchDevice()||n.support.hasPointer?"touchend":"mouseup"},moveEvent:function(){return t.isTouchDevice()||n.support.hasPointer?n.support.hasPointer&&!t.isMobile()?"ejtouchmove":"touchmove":"mousemove"},cancelEvent:function(){return t.isTouchDevice()||n.support.hasPointer?"touchcancel":"mousecancel"},tapEvent:function(){return t.isTouchDevice()||n.support.hasPointer?"tap":"click"},tapHoldEvent:function(){return t.isTouchDevice()||n.support.hasPointer?"taphold":"click"},isDevice:function(){return t.getBooleanVal(n("head"),"data-ej-forceset",!1)?t.getBooleanVal(n("head"),"data-ej-device",this._device()):this._device()},isPortrait:function(){var n=document.documentElement;return n&&n.clientWidth/n.clientHeight<1.1},isLowerResolution:function(){return window.innerWidth<=640&&t.isPortrait()&&t.isDevice()||window.innerWidth<=800&&!t.isDevice()||window.innerWidth<=800&&!t.isPortrait()&&t.isWindows()&&t.isDevice()||t.isMobile()},isIOSWebView:function(){return/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent)},isAndroidWebView:function(){return!(typeof Android=="undefined")},isWindowsWebView:function(){return location.href.indexOf("x-wmapp")!=-1},_device:function(){return/Android|BlackBerry|iPhone|iPad|iPod|IEMobile|kindle|windows\sce|palm|smartphone|iemobile|mobile|pad|xoom|sch-i800|playbook/i.test(navigator.userAgent.toLowerCase())},isMobile:function(){return/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(navigator.userAgent.toLowerCase())&&/mobile/i.test(navigator.userAgent.toLowerCase())||t.getBooleanVal(n("head"),"data-ej-mobile",!1)===!0},isTablet:function(){return/ipad|xoom|sch-i800|playbook|tablet|kindle/i.test(navigator.userAgent.toLowerCase())||t.getBooleanVal(n("head"),"data-ej-tablet",!1)===!0||!t.isMobile()&&t.isDevice()},isTouchDevice:function(){return("ontouchstart"in window||window.navigator.msPointerEnabled&&t.isMobile())&&this.isDevice()},getClearString:function(t){return n.trim(t.replace(/\s+/g," ").replace(/(\r\n|\n|\r)/gm,"").replace(new RegExp(">[\n\t ]+<","g"),"><"))},getBooleanVal:function(t,i,r){var u=n(t).attr(i);return u!=null?u.toLowerCase()=="true":r},_getSkewClass:function(n,t,i){var h=n.width(),c=n.height(),f=n.offset().left,e=n.offset().left+h,o=n.offset().top,s=n.offset().top+c,r=h*.3,u=c*.3;return t<f+r&&i<o+u?"e-m-skew-topleft":t>e-r&&i<o+u?"e-m-skew-topright":t>e-r&&i>s-u?"e-m-skew-bottomright":t<f+r&&i>s-u?"e-m-skew-bottomleft":t>f+r&&i<o+u&&t<e-r?"e-m-skew-top":t<f+r?"e-m-skew-left":t>e-r?"e-m-skew-right":i>s-u?"e-m-skew-bottom":"e-m-skew-center"},_removeSkewClass:function(t){n(t).removeClass("e-m-skew-top e-m-skew-bottom e-m-skew-left e-m-skew-right e-m-skew-topleft e-m-skew-topright e-m-skew-bottomleft e-m-skew-bottomright e-m-skew-center e-skew-top e-skew-bottom e-skew-left e-skew-right e-skew-topleft e-skew-topright e-skew-bottomleft e-skew-bottomright e-skew-center")},_getObjectKeys:function(n){var t,i=[];if(n=Object.prototype.toString.call(n)===Object.prototype.toString()?n:{},!Object.keys){for(t in n)n.hasOwnProperty(t)&&i.push(t);return i}if(Object.keys)return Object.keys(n)},_touchStartPoints:function(n,t){if(n){var i=n.touches?n.touches[0]:n;t._distX=0;t._distY=0;t._moved=!1;t._pointX=i.pageX;t._pointY=i.pageY}},_isTouchMoved:function(n,t){if(n){var i=n.touches?n.touches[0]:n,f=i.pageX-t._pointX,e=i.pageY-t._pointY,o=Date.now(),r,u;return t._pointX=i.pageX,t._pointY=i.pageY,t._distX+=f,t._distY+=e,r=Math.abs(t._distX),u=Math.abs(t._distY),!(r<5&&u<5)}},listenEvents:function(n,i,r,u,f,e){for(var o=0;o<n.length;o++)t.listenTouchEvent(n[o],i[o],r[o],u,f,e)},listenTouchEvent:function(i,r,u,f,e,o){for(var s,h=f?"removeEventListener":"addEventListener",a=f?"off":"on",l=n(i),c=0;c<l.length;c++){s=l[c];switch(r){case"touchstart":t._bindEvent(s,h,r,u,"mousedown","MSPointerDown","pointerdown",o);break;case"touchmove":t._bindEvent(s,h,r,u,"mousemove","MSPointerMove","pointermove",o);break;case"touchend":t._bindEvent(s,h,r,u,"mouseup","MSPointerUp","pointerup",o);break;case"touchcancel":t._bindEvent(s,h,r,u,"mousecancel","MSPointerCancel","pointercancel",o);break;case"tap":case"taphold":case"ejtouchmove":case"click":n(s)[a](r,u);break;default:t.browserInfo().name=="msie"&&t.browserInfo().version<9?e._on(n(s),r,u):s[h](r,u,!0)}}},_bindEvent:function(t,i,r,u,f,e,o){n.support.hasPointer?t[i](window.navigator.pointerEnabled?o:e,u,!0):t[i](r,u,!0)},_browser:function(){return/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":/trident/i.test(navigator.userAgent)?"ms":"opera"in window?"O":""},styles:document.createElement("div").style,userAgent:function(){for(var i="webkitT,t,MozT,msT,OT".split(","),r,n=0,u=i.length;n<u;n++)if(r=i[n]+"ransform",r in t.styles)return i[n].substr(0,i[n].length-1);return!1},addPrefix:function(n){return t.userAgent()===""?n:(n=n.charAt(0).toUpperCase()+n.substr(1),t.userAgent()+n)},destroyWidgets:function(t){var i=n(t).find("[data-role *= ejm]");i.each(function(t,i){var r=n(i),u=r.data("ejWidgets");u&&r[u]("destroy")})},getAttrVal:function(t,i,r){var u=n(t).attr(i);return u!=null?u:r},getOffset:function(t){var i={},u=t.offset()||{left:0,top:0},r;return n.extend(!0,i,u),n("body").css("position")!="static"&&(r=n("body").offset(),i.left-=r.left,i.top-=r.top),i},getZindexPartial:function(i,r){var e,f,u;if(!t.isNullOrUndefined(i)&&i.length>0)return e=i.parents(),f=n("body").children(),!t.isNullOrUndefined(i)&&i.length>0&&f.splice(f.index(r),1),n(f).each(function(n,t){e.push(t)}),u=Math.max.apply(u,n.map(e,function(t){if(n(t).css("position")!="static")return parseInt(n(t).css("z-index"))||1})),!u||u<1e4?u=1e4:u+=1,u},isValidAttr:function(t,i){var t=n(t)[0],r;return typeof t[i]!="undefined"?!0:(r=!1,n.each(t,function(n){if(n.toLowerCase()==i.toLowerCase())return r=!0,!1}),r)}};n.extend(t,t.util);t.widgetBase={droppables:{"default":[]},resizables:{"default":[]},_renderEjTemplate:function(i,r,u,f){var e=null;return((typeof i=="object"||i.startsWith("#")||i.startsWith("."))&&(e=n(i).attr("type")),e&&(e=e.toLowerCase(),t.template[e]))?t.template[e](this,i,r,u,f):t.template.render(this,i,r,u,f)},destroy:function(){var u,r,f,i;if(!this._trigger("destroy")){this.model.enablePersistence&&(this.persistState(),n(window).off("unload",this._persistHandler));try{this._destroy()}catch(e){}for(u=this.element.data("ejWidgets")||[],i=0;i<u.length;i++)u[i]==this.pluginName&&u.splice(i,1);for(u.length||this.element.removeData("ejWidgets");this._events;){if(r=this._events.pop(),f=[],!r)break;for(i=0;i<r[1].length;i++)n.isPlainObject(r[1][i])||f.push(r[1][i]);n.fn.off.apply(r[0],f)}this._events=null;this.element.removeClass(t.util.getNameSpace(this.sfType)).removeClass("e-js").removeData(this.pluginName);this.element=null;this.model=null}},_on:function(i){this._events||(this._events=[]);for(var r=[].splice.call(arguments,1,arguments.length-1),u={},f=r.length;u&&typeof u!="function";)u=r[--f];return r[f]=t.proxy(r[f],this),this._events.push([i,r,u,r[f]]),n.fn.on.apply(i,r),this},_off:function(t,i,r,u){var e=this._events,s,h,o,f,c;if(!e||!e.length)return this;for(typeof r=="function"&&(s=u,u=r,r=s),h=i.match(/\S+/g)||[""],o=0;o<e.length;o++)if(f=e[o],c=f[0].length&&(!u||f[2]===u)&&(f[1][0]===i||h[0])&&(!r||f[1][1]===r)&&n.inArray(t[0],f[0])>-1,c){n.fn.off.apply(t,u?[i,r,f[3]]:[i,r]);e.splice(o,1);break}return this},_trigger:function(i,r){var f=null,e,u,s={},o,h;return(n.extend(s,r),i in this.model&&(f=this.model[i]),f&&(typeof f=="string"&&(f=t.util.getObject(f,window)),n.isFunction(f)&&(u=t.event(i,this.model,r),e=f.call(this,u),o=this.model._applyScope,o&&o.call(),r&&n.extend(r,u),u.cancel||!t.isNullOrUndefined(e))))?e===!1||u.cancel:(h=Boolean(r),r=r||{},r.originalEventType=i,r.type=this.pluginName+i,u=n.Event(r.type,t.event(r.type,this.model,r)),this.element.trigger(u),h&&n.extend(r,u),t.isOnWebForms&&u.cancel==!1&&this.model.serverEvents&&this.model.serverEvents.length&&t.raiseWebFormsServerEvents(i,r,s),u.cancel)},setModel:function(t,i){var r,f,e,u;if(!this._trigger("modelChange",{changes:t})){for(r in t){if(!i){if(this.model[r]===t[r]){delete t[r];continue}if(n.isPlainObject(t[r])&&(o(this.model[r],t[r]),n.isEmptyObject(t[r]))){delete t[r];continue}}if(this.dataTypes&&(f=this._isValidModelValue(r,this.dataTypes,t),f!==!0))throw"setModel - Invalid input for property :"+r+" - "+f;this.model.notifyOnEachPropertyChanges&&this.model[r]!==t[r]&&(e={oldValue:this.model[r],newValue:t[r]},t[r]=this._trigger(r+"Change",e)?this.model[r]:e.newValue)}n.isEmptyObject(t)||(this._setFirst?(u=t.dataSource,u&&delete t.dataSource,n.extend(!0,this.model,t),u&&(this.model.dataSource=u instanceof Array?u.slice():u,t.dataSource=this.model.dataSource),this._setModel&&this._setModel(t)):this._setModel&&this._setModel(t)===!1||n.extend(!0,this.model,t),"enablePersistence"in t&&this._setState(t.enablePersistence))}},option:function(r,u,f){if(!r)return this.model;if(n.isPlainObject(r))return this.setModel(r,f);if(typeof r=="string"){r=r.replace(/^model\./,"");var e=t.getObject(r,this.model);if(u===i&&!f)return e;if(r==="enablePersistence")return this._setState(u);if(f&&u===t.extensions.modelGUID)return this._setModel(t.createObject(r,t.getObject(r,this.model),{}));if(f||t.getObject(r,this.model)!==u)return this.setModel(t.createObject(r,u,{}),f)}return i},_isValidModelValue:function(n,t,i){var r=t[n],u=i[n],f,e,o;if(!r)return!0;if(typeof r=="string"){if(r=="enum"&&(i[n]=u?u.toString().toLowerCase():u,r="string"),r==="array"){if(Object.prototype.toString.call(u)==="[object Array]")return!0}else if(r==="data"||r==="parent"||typeof u===r)return!0;return"Expected type - "+r}if(u instanceof Array){for(e=0;e<u.length;e++)if(f=this._isValidModelValue(n,t,u[e]),f!==!0)return" ["+e+"] - "+f;return!0}for(o in u)if(f=this._isValidModelValue(o,r,u),f!==!0)return o+" : "+f;return!0},_returnFn:function(n,t){t.indexOf(".")!=-1?this._returnFn(n[t.split(".")[0]],t.split(".").slice(1).join(".")):n[t]=n[t].call(n.propName)},stringify:function(n){for(var r,u=this.observables,i=0;i<u.length;i++)r=t.getObject(u[i],n),t.isNullOrUndefined(r)||typeof r!="function"||this._returnFn(n,u[i]);return JSON.stringify(n)},_setState:function(i){if(i===!0){this._persistHandler=t.proxy(this.persistState,this);n(window).on("unload",this._persistHandler)}else this.deleteState(),n(window).off("unload",this._persistHandler)},_removeProp:function(n,i){t.isNullOrUndefined(n)||(i.indexOf(".")!=-1?this._removeProp(n[i.split(".")[0]],i.split(".").slice(1).join(".")):delete n[i])},persistState:function(){var n,i;if(this._ignoreOnPersist){for(n=r({},this.model),i=0;i<this._ignoreOnPersist.length;i++)this._removeProp(n,this._ignoreOnPersist[i]);n.ignoreOnPersist=this._ignoreOnPersist}else if(this._addToPersist){for(n={},i=0;i<this._addToPersist.length;i++)t.createObject(this._addToPersist[i],t.getObject(this._addToPersist[i],this.model),n);n.addToPersist=this._addToPersist}else n=r({},this.model);this._persistState&&(n.customPersists={},this._persistState(n.customPersists));window.localStorage?(t.isNullOrUndefined(t.persistStateVersion)||window.localStorage.getItem("persistKey")!=null||window.localStorage.setItem("persistKey",t.persistStateVersion),window.localStorage.setItem("$ej$"+this.pluginName+this._id,JSON.stringify(n))):document.cookie&&(t.isNullOrUndefined(t.persistStateVersion)||t.cookie.get("persistKey")!=null||t.cookie.set("persistKey",t.persistStateVersion),t.cookie.set("$ej$"+this.pluginName+this._id,n))},deleteState:function(){window.localStorage?window.localStorage.removeItem("$ej$"+this.pluginName+this._id):document.cookie&&t.cookie.set("$ej$"+this.pluginName+this._id,model,new Date)},restoreState:function(i){var f=null,r,u;if(window.localStorage?f=window.localStorage.getItem("$ej$"+this.pluginName+this._id):document.cookie&&(f=t.cookie.get("$ej$"+this.pluginName+this._id)),f&&(r=JSON.parse(f),this._restoreState&&(this._restoreState(r.customPersists),delete r.customPersists),t.isNullOrUndefined(r)===!1&&(t.isNullOrUndefined(r.ignoreOnPersist)?t.isNullOrUndefined(r.addToPersist)||(this._addToPersist=r.addToPersist,delete r.addToPersist):(this._ignoreOnPersist=r.ignoreOnPersist,delete r.ignoreOnPersist))),t.isNullOrUndefined(r)||t.isNullOrUndefined(this._ignoreOnPersist))this.model=n.extend(!0,this.model,r);else{for(u in this._ignoreOnPersist)this._ignoreOnPersist[u].indexOf(".")!==-1?t.createObject(this._ignoreOnPersist[u],t.getObject(this._ignoreOnPersist[u],this.model),r):r[this._ignoreOnPersist[u]]=this.model[this._ignoreOnPersist[u]];this.model=r}!i&&f&&this._setModel&&this._setModel(this.model)},ignoreOnPersist:function(n){var r=[],t,u;if(typeof n=="object"?r=n:typeof n=="string"&&r.push(n),this._addToPersist===i)for(this._ignoreOnPersist=this._ignoreOnPersist||[],t=0;t<r.length;t++)this._ignoreOnPersist.push(r[t]);else for(t=0;t<r.length;t++)u=this._addToPersist.indexOf(r[t]),this._addToPersist.splice(u,1)},addToPersist:function(t){var u=[],f,r;if(typeof t=="object"?u=t:typeof t=="string"&&u.push(t),this._addToPersist===i)for(this._ignoreOnPersist=this._ignoreOnPersist||[],r=0;r<u.length;r++)f=this._ignoreOnPersist.indexOf(u[r]),this._ignoreOnPersist.splice(f,1);else for(r=0;r<u.length;r++)n.inArray(u[r],this._addToPersist)===-1&&this._addToPersist.push(u[r])},formatting:function(i,r,u){var f,l,h,c,a,v,s,e,y;if(i=i.replace(/%280/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">"),u=t.preferredCulture(u)?u:"en-US",f=i,l=i.split("{0:"),a=i.split("}"),h=l[0],c=a[1],typeof r=="string"&&n.isNumeric(r)&&(r=Number(r)),i.indexOf("{0:")!=-1)return v=new RegExp("\\{0(:([^\\}]+))?\\}","gm"),s=v.exec(i),s!=null&&r!=null?h!=null&&c!=null?h+t.format(r,s[2],u)+c:t.format(r,s[2],u):r!=null?r:"";if(f.startsWith("{")&&!f.startsWith("{0:")){var o=f.split(""),r=(r||"")+"",p=r.split(""),w=/[0aA\*CN<>\?]/gm;for(e=0,y=0;e<o.length;e++)o[e]=w.test(o[e])?"{"+y+++"}":o[e];return String.format.apply(String,[o.join("")].concat(p)).replace("{","").replace("}","")}return this.data!=null&&this.data.Value==null?(n.each(this.data,function(n,t){f=f.replace(new RegExp("\\{"+n+"\\}","gm"),t)}),f):this.data.Value}};t.WidgetBase=function(){};o=function(t,i){for(var r in t)t[r]===i[r]&&delete i[r],n.isPlainObject(i[r])&&n.isPlainObject(t[r])&&o(t[r],i[r])};t.widget=function(f,o,h){var a,l,v;if(typeof f=="object"){h=o;for(a in f)l=f[a],l instanceof Array&&(h._rootCSS=l[1],l=l[0]),t.widget(a,l,h),f[a]instanceof Array&&(h._rootCSS="");return}v=h._rootCSS||t.getNameSpace(o);h=t.defineClass(o,function(i,e){var y,p,w,b,c,g,k,d,nt,l,a;if(this.sfType=o,this.pluginName=f,this.instance=s,t.isNullOrUndefined(this._setFirst)&&(this._setFirst=!0),this["ob.values"]={},n.extend(this,t.widgetBase),this.dataTypes)for(y in e)if(p=this._isValidModelValue(y,this.dataTypes,e),p!==!0)throw"setModel - Invalid input for property :"+y+" - "+p;for(w=i.data("ejWidgets")||[],w.push(f),i.data("ejWidgets",w),c=0;t.widget.observables&&this.observables&&c<this.observables.length;c++)b=t.getObject(this.observables[c],e),b&&t.createObject(this.observables[c],t.widget.observables.register(b,this.observables[c],this,i),e);if(this.element=i.jquery?i:n(i),this.model=r(!0,{},h.prototype.defaults,e),this.model.keyConfigs=r(this.keyConfigs),this.element.addClass(v+" e-js").data(f,this),this._id=i[0].id,this.element.attr("tabIndex")||this.element.attr("tabIndex",""),this.model.enablePersistence){if(window.localStorage&&!t.isNullOrUndefined(t.persistStateVersion)&&window.localStorage.getItem("persistKey")!=t.persistStateVersion)for(c in window.localStorage)c.indexOf("$ej$")!=-1&&window.localStorage.removeItem(c);else if(document.cookie&&!t.isNullOrUndefined(t.persistStateVersion)&&t.cookie.get("persistKey")!=t.persistStateVersion){g=document.cookie.split(/; */);for(k in g)k.indexOf("$ej$")!=-1&&t.cookie.set(k.split("=")[0],model,new Date)}this._persistHandler=t.proxy(this.persistState,this);n(window).on("unload",this._persistHandler);this.restoreState(!0)}if(this._init(e),typeof this.model.keyConfigs=="object"&&!(this.model.keyConfigs instanceof Array)){d=!1;this.model.keyConfigs.focus&&this.element.attr("accesskey",this.model.keyConfigs.focus);for(nt in this.model.keyConfigs)if(nt!=="focus"){d=!0;break}d&&this._keyPressed&&(l=i,a="keydown",this.keySettings&&(l=this.keySettings.getElement?this.keySettings.getElement()||l:l,a=this.keySettings.event||a),this._on(l,a,function(n){if(this.model.keyConfigs){var t=u.getActionFromCode(this.model.keyConfigs,n.which,n.ctrlKey,n.shiftKey,n.altKey),i={code:n.which,ctrl:n.ctrlKey,alt:n.altKey,shift:n.shiftKey};t&&this._keyPressed(t,n.target,i,n)===!1&&n.preventDefault()}}))}this._trigger("create")},h);n.fn[f]=function(r){for(var w,u,p=r,s=0;s<this.length;s++){var l=n(this[s]),a=l.data(f),b=a&&l.hasClass(v),y=null;if(this.length>0&&n.isPlainObject(p)&&(r=t.copyObject({},p)),!b){h.prototype._requiresID!==!0||n(this[s]).attr("id")||l.attr("id",c("ejControl_"));r&&typeof r!="object"?e(f+": methods/properties can be accessed only after plugin creation"):(h.prototype.defaults&&!t.isNullOrUndefined(t.setCulture)&&"locale"in h.prototype.defaults&&f!="ejChart"&&(!r||"locale"in r?t.isNullOrUndefined(r)&&(r={},r.locale=t.setCulture().name):r.locale=t.setCulture().name),new h(l,r));continue}if(r)if(u=[].slice.call(arguments,1),this.length>0&&u[0]&&p==="option"&&n.isPlainObject(u[0])&&(u[0]=t.copyObject({},u[0])),n.isPlainObject(r))a.setModel(r);else if((r.indexOf("_")===0||t.isNullOrUndefined(y=t.getObject(r,a)))&&r.indexOf("model.")!==0)e(o+": function/property - "+r+" does not exist");else{if(!y||!n.isFunction(y)){if(arguments.length==1)return y;a.option(r,arguments[1]);continue}if(w=y.apply(a,u),w!==i)return w}}return f.indexOf("ejm")!=-1&&t.widget.registerInstance(l,f,o,h.prototype),this};t.widget.register(f,o,h.prototype)};n.extend(t.widget,function(){var n={},i=[],r=function(i,r,u){t.isNullOrUndefined(n[i])||e("ej.widget : The widget named "+i+" is trying to register twice.");n[i]={name:i,className:r,proto:u};t.widget.extensions&&t.widget.extensions.registerWidget(i)},u=function(n,t,r,u){i.push({element:n,pluginName:t,className:r,proto:u})};return{register:r,registerInstance:u,registeredWidgets:n,registeredInstances:i}}());t.widget.destroyAll=function(n){var u,r,t,i;if(n&&n.length)for(u=0;u<n.length;u++)if(r=n.eq(u).data(),t=r.ejWidgets,t&&t.length)for(i=0;i<t.length;i++)r[t[i]]&&r[t[i]].destroy&&r[t[i]].destroy()};t.cookie={get:function(n){var t=RegExp(n+"=([^;]+)").exec(document.cookie);return t&&t.length>1?t[1]:i},set:function(n,t,i){typeof t=="object"&&(t=JSON.stringify(t));t=escape(t)+(i==null?"":"; expires="+i.toUTCString());document.cookie=n+"="+t}};u={getActionFromCode:function(n,t,i,r,f){var s,o,e;i=i||!1;r=r||!1;f=f||!1;for(s in n)if(s!=="focus")for(o=u.getKeyObject(n[s]),e=0;e<o.length;e++)if(t===o[e].code&&i==o[e].isCtrl&&r==o[e].isShift&&f==o[e].isAlt)return s;return null},getKeyObject:function(t){for(var r,o,f,s={isCtrl:!1,isShift:!1,isAlt:!1},c=n.extend(!0,{},s),e=t.split(","),h=[],i=0;i<e.length;i++){if(r=null,e[i].indexOf("+")!=-1)for(o=e[i].split("+"),f=0;f<o.length;f++)r=u.getResult(n.trim(o[f]),s);else r=u.getResult(n.trim(e[i]),n.extend(!0,{},c));h.push(r)}return h},getResult:function(n,t){return n==="ctrl"?t.isCtrl=!0:n==="shift"?t.isShift=!0:n==="alt"?t.isAlt=!0:t.code=parseInt(n,10),t}};t.getScrollableParents=function(t){return n(t).parentsUntil("html").filter(function(){return n(this).css("overflow")!="visible"}).add(n(window))};t.browserInfo=function(){var i={},r=[],e={opera:/(opera|opr)(?:.*version|)[ \/]([\w.]+)/i,edge:/(edge)(?:.*version|)[ \/]([\w.]+)/i,webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,msie:/(msie|trident) ([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i},o,s,f,u;for(o in e)if(e.hasOwnProperty(o)&&(r=navigator.userAgent.match(e[o]),r)){if(i.name=r[1].toLowerCase()=="opr"?"opera":r[1].toLowerCase(),i.version=r[2],i.culture={},i.culture.name=i.culture.language=navigator.language||navigator.userLanguage,typeof t.globalize!="undefined"){for(s=t.preferredCulture().name,f=navigator.language||navigator.userLanguage?t.preferredCulture(navigator.language||navigator.userLanguage):t.preferredCulture("en-US"),u=0;navigator.languages&&u<navigator.languages.length;u++)if(f=t.preferredCulture(navigator.languages[u]),f.language==navigator.languages[u])break;t.preferredCulture(s);n.extend(!0,i.culture,f)}navigator.userAgent.match(/Trident\/7\./)&&(i.name="msie");break}return i.isMSPointerEnabled=i.name=="msie"&&i.version>9&&window.navigator.msPointerEnabled,i.pointerEnabled=window.navigator.pointerEnabled,i};t.eventType={mouseDown:"mousedown touchstart",mouseMove:"mousemove touchmove",mouseUp:"mouseup touchend",mouseLeave:"mouseleave touchcancel",click:"click touchend"};t.event=function(t,i,r){return n.extend(r||{},{type:t,model:i,cancel:!1})};t.proxy=function(n,t,i){return!n||typeof n!="function"?null:"on"in n&&t?i?n.on(t,i):n.on(t):function(){var r=i?[i]:[];return r.push.apply(r,arguments),n.apply(t||this,r)}};t.hasStyle=function(n){var r=document.documentElement.style,i,t;if(n in r)return!0;for(i=["ms","Moz","Webkit","O","Khtml"],n=n[0].toUpperCase()+n.slice(1),t=0;t<i.length;t++)if(i[t]+n in r)return!0;return!1};Array.prototype.indexOf=Array.prototype.indexOf||function(n){var i=this.length,t;if(i===0)return-1;for(t=0;t<i;t++)if(t in this&&this[t]===n)return t;return-1};String.prototype.startsWith=String.prototype.startsWith||function(n){return this.slice(0,n.length)===n};var r=t.copyObject=function(n,u){var h=2,c,f,s,o,e,l;for(typeof n!="boolean"&&(h=1),s=[].slice.call(arguments,h),h===1&&(u=n,n=i),o=0;o<s.length;o++)for(e in s[o])if(c=u[e],f=s[o][e],f!==i&&c!==f&&s[o]!==f&&u!==f)if(f instanceof Array)if(o===0&&n)for(u[e]=[],l=0;l<f.length;l++)r(!0,u[e],f);else u[e]=f.slice();else t.isPlainObject(f)?(u[e]=c||{},n?r(n,u[e],f):r(u[e],f)):u[e]=f;return u},s=function(){return this},h=0,c=function(n){return n+h++};t.template={};t.template.render=t.template["text/x-jsrender"]=function(t,i,r,u,f){i.slice(0,1)!=="#"&&(i=["<div>",i,"<\/div>"].join(""));var e={prop:f,index:u};return n(i).render(r,e)};t.isPlainObject=function(n){if(!n||t.DataManager!==i&&n instanceof t.DataManager||typeof n!="object"||n.nodeType||jQuery.isWindow(n))return!1;try{if(n.constructor&&!n.constructor.prototype.hasOwnProperty("isPrototypeOf"))return!1}catch(f){return!1}var r,u=t.support.isOwnLast;for(r in n)if(u)break;return r===i||n.hasOwnProperty(r)};f=!1;t.util.valueFunction=function(n){return function(r,u){var e=t.getObject(n,this.model);if(f===!1&&(f=t.getObject("observables.getValue",t.widget)),r===i)return t.isNullOrUndefined(f)?typeof e=="function"?e.call(this):e:f(e,u);typeof e=="function"?(this["ob.values"][n]=r,e.call(this,r)):t.createObject(n,r,this.model)}};t.util.getVal=function(n){return typeof n=="function"?n():n};t.support={isOwnLast:function(){var n=function(){this.a=1},t;n.prototype.b=1;for(t in new n)return t==="b"}(),outerHTML:function(){return document.createElement("div").outerHTML!==i}()};e=t.throwError=function(n){try{throw new Error(n);}catch(t){throw t.message+"\n"+t.stack;}};t.getRandomValue=function(n,r){var u,f;return n===i||r===i?t.throwError("Min and Max values are required for generating a random number"):("crypto"in window&&"getRandomValues"in crypto?(f=new Uint16Array(1),window.crypto.getRandomValues(f),u=f[0]%(r-n)+n):u=Math.random()*(r-n)+n,u|0)};t.extensions={};t.extensions.modelGUID="{0B1051BA-1CCB-42C2-A3B5-635389B92A50}"}(window.jQuery,window.Syncfusion),function(){$.fn.addEleAttrs=function(n){var t=$(this);$.each(n,function(n,i){i&&i.specified&&t.attr(i.name,i.value)})};$.fn.removeEleAttrs=function(n){return this.each(function(){var t=$(this),i=$(this.attributes).clone();$.each(i,function(i,r){r&&r.specified&&n.test(r.name)&&t.removeAttr(r.name)})})};$.fn.attrNotStartsWith=function(n){var u=this,r=[],t;for(this.each(function(){t=$(this.attributes).clone()}),i=0;i<t.length;i++)if(t[i]&&t[i].specified&&n.test(t[i].name))continue;else r.push(t[i]);return r};$.fn.removeEleEmptyAttrs=function(){return this.each(function(){var n=$(this),t=$(this.attributes).clone();$.each(t,function(t,i){i&&i.specified&&i.value===""&&n.removeAttr(i.name)})})};$.extend($.support,{has3d:ej.addPrefix("perspective")in ej.styles,hasTouch:"ontouchstart"in window,hasPointer:navigator.msPointerEnabled,hasTransform:ej.userAgent()!==!1,pushstate:"pushState"in history&&"replaceState"in history,hasTransition:ej.addPrefix("transition")in ej.styles});$.extend($.expr[":"],{attrNotStartsWith:function(n,t,i){for(var u=n.attributes,r=0;r<u.length;r++)if(u[r].nodeName.indexOf(i[3])===0)return!1;return!0}});var n=$.fn.andSelf||$.fn.addBack;$.fn.andSelf=$.fn.addBack=function(){return n.apply(this,arguments)}}()}),function(n){typeof define=="function"&&define.amd?define(["./../common/ej.globalize.min","./../common/ej.core.min","./../common/ej.touch.min"],n):n()}(function(){(function(n,t,r){t.widget("ejDatePicker","ej.DatePicker",{element:null,_rootCss:"e-datepicker",model:null,validTags:["input","div","span"],_setFirst:!1,_addToPersist:["value"],_cancelValue:!1,type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"],requireFormatters:!0},defaults:{dayHeaderFormat:"min",showPopupButton:!0,enableAnimation:!0,showFooter:!0,displayInline:!1,htmlAttributes:{},dateFormat:"",watermarkText:"Select date",value:null,minDate:new Date(1900,00,01),maxDate:new Date(2099,11,31),startLevel:"month",depthLevel:"",cssClass:"",startDay:-1,stepMonths:1,locale:"en-US",showOtherMonths:!0,enableStrictMode:!1,enablePersistence:!1,enabled:!0,width:"",height:"",enableRTL:!1,showRoundedCorner:!1,headerFormat:"MMMM yyyy",buttonText:"Today",readOnly:!1,specialDates:null,fields:{date:"date",tooltip:"tooltip",iconClass:"iconClass",cssClass:"cssClass"},showTooltip:!0,showDisabledRange:!0,highlightSection:"none",highlightWeekend:!1,validationRules:null,validationMessage:null,allowEdit:!0,tooltipFormat:"ddd MMM dd yyyy",allowDrillDown:!0,blackoutDates:[],beforeDateCreate:null,open:null,close:null,select:null,change:null,focusIn:null,focusOut:null,beforeOpen:null,beforeClose:null,navigate:null,create:null,destroy:null},dataTypes:{startDay:"number",stepMonths:"number",showOtherMonths:"boolean",enableStrictMode:"boolean",showRoundedCorner:"boolean",enableRTL:"boolean",displayInline:"boolean",showPopupButton:"boolean",locale:"string",readOnly:"boolean",cssClass:"string",dateFormat:"string",watermarkText:"string",headerFormat:"string",buttonText:"string",specialDates:"data",showTooltip:"boolean",highlightSection:"enum",highlightWeekend:"boolean",enableAnimation:"boolean",validationRules:"data",validationMessage:"data",htmlAttributes:"data",tooltipFormat:"string",allowEdit:"boolean",allowDrillDown:"boolean"},_setModel:function(i){var u=!1,f=!1,e=!1,r,o;for(r in i)switch(r){case"dayHeaderFormat":this.model.dayHeaderFormat=i[r];u=f=!0;break;case"showPopupButton":this._renderDateIcon(i[r],!0);break;case"displayInline":if(this._setDisplayInline(i[r]),!this.model.allowEdit&&!i[r]&&this._isInputBox())this.element.on("mousedown",n.proxy(this._showDatePopUp,this));break;case"value":t.isPlainObject(i[r])&&(i[r]=null);t.isNullOrUndefined(i.minDate)&&t.isNullOrUndefined(i.maxDate)?(this._setDateValue(i[r]),this._specificFormat()&&(this._stopRefresh=!0),i[r]=this.model.value):this._updateDateValue(i[r]);e=u=f=!0;break;case"specialDates":this.model.specialDates=i[r];this._createSpecialDateObject();u=f=!0;break;case"fields":this.model.fields=i[r];this._mapField=this._getMapper();u=f=!0;break;case"showTooltip":this.model.showTooltip=i[r];u=f=!0;break;case"highlightWeekend":this.model.highlightWeekend=i[r];u=f=!0;break;case"highlightSection":this.model.highlightSection=i[r];u=f=!0;break;case"dateFormat":this.model.dateFormat=i[r];this._ensureValue();break;case"minDate":this._setMinDate(i[r]);i[r]=this.model.minDate;this._ensureValue();e=u=f=!0;break;case"maxDate":this._setMaxDate(i[r]);i[r]=this.model.maxDate;this._ensureValue();e=u=f=!0;break;case"locale":this.model.locale=i[r];this.model.startDay=t.isNullOrUndefined(this._options.startDay)&&this.model.startDay===this.culture.calendar.firstDay?-1:this._options.startDay===this.defaults.startDay?-1:this.model.startDay;this.model.dateFormat=t.isNullOrUndefined(this._options.dateFormat)&&this.model.dateFormat===this.culture.calendar.patterns.d?"":this.model.dateFormat;this._setCulture(i[r]);this.model.value&&this._setDateValue(this.model.value);i[r]=this.model.locale;u=f=!0;break;case"showOtherMonths":this.model.showOtherMonths=i[r];this._otherMonthsVisibility();break;case"enableStrictMode":this.model.enableStrictMode=i[r];e=u=f=!0;break;case"validationRules":this.model.validationRules!=null&&(this.element.rules("remove"),this.model.validationMessage=null);this.model.validationRules=i[r];this.model.validationRules!=null&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessage=i[r];this.model.validationRules!=null&&this.model.validationMessage!=null&&(this._initValidator(),this._setValidation());break;case"readOnly":this.model.readOnly=i[r];this._disbleMaualInput();break;case"width":this._setWidth(i[r]);break;case"height":this._setHeight(i[r]);break;case"cssClass":this._setSkin(i[r]);break;case"enableRTL":this._setRTL(i[r]);break;case"showRoundedCorner":this._setRoundedCorner(i[r]);break;case"enabled":i[r]?this.enable():this.disable();break;case"buttonText":t.isNullOrUndefined(this._options)&&(this._options={});this._options.buttonText=this.model.buttonText=i[r];this._localizedLabels.buttonText=this.model.buttonText;this._setFooterText(i[r]);break;case"showFooter":this._enableFooter(i[r]);break;case"watermarkText":t.isNullOrUndefined(this._options)&&(this._options={});this._options.watermarkText=this.model.watermarkText=i[r];this._localizedLabels.watermarkText=this.model.watermarkText;this._setWaterMark();break;case"startDay":o=i[r];(parseInt(i[r])<0||parseInt(i[r])>6)&&(i[r]=this.culture.calendar.firstDay,o=-1);this.model.startDay=i[r];t.isNullOrUndefined(this._options)&&(this._options={});this._options.startDay=o;u=f=!0;break;case"startLevel":this.model.startLevel=i[r];u=f=!0;break;case"headerFormat":this.model.headerFormat=i[r];u=f=!0;break;case"depthLevel":this.model.depthLevel=i[r];u=f=!0;break;case"htmlAttributes":this._addAttr(i[r]);break;case"allowEdit":this._changeEditable(i[r]);break;case"tooltipFormat":this.model.tooltipFormat=i[r];u=f=!0;break;case"allowDrillDown":this._allowQuickPick(i[r]);u=f=!0;break;case"showDisabledRange":this._setRestrictDateState(i[r]);break;case"blackoutDates":this.model.blackoutDates=i[r];this._initDisableObj(this.model.blackoutDates);u=f=!0}e&&(this._validateMinMaxDate(),i.value=this.model.value,i.maxDate=this.model.maxDate,i.minDate=this.model.minDate);this._setWaterMark();u&&(this.isValidState||this.model.displayInline)&&this._refreshDatepicker();f&&this._startLevel(this.model.startLevel);this._triggerChangeEvent();this._checkErrorClass()},observables:["value"],_destroy:function(){this.model.displayInline&&n(window).off("resize",n.proxy(this._OnWindowResize,this));this._isOpen&&this.hide();this.sfCalendar.remove();this.wrapper&&(this.element.insertAfter(this.wrapper),this.wrapper.remove());this._cloneElement.removeClass("e-js e-input").removeClass(t.util.getNameSpace(this.sfType));this._cloneElement.insertAfter(this.element);this.element.remove()},_init:function(n){this._options=n;this._cloneElement=this.element.clone();this._dt_drilldown=!1;this._ISORegex();this._initDisableObj(this.model.blackoutDates);this.animation={open:{duration:200},close:{duration:100}};this._animating=!1;this._isSupport=document.createElement("input").placeholder==r?!1:!0;this._checkAttribute();this._setValues();this._createDatePicker();this._setRestrictDateState(this.model.showDisabledRange);this.model.validationRules!=null&&(this._initValidator(),this._setValidation());n&&n.value!=r&&n.value!=this.element.val()&&this._trigger("_change",{value:this.element.val()})},_ISORegex:function(){this._tokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;this._extISORegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/;this._basicISORegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/;this._numberRegex={2:/\d\d?/,4:/^\d{4}/,z:/Z|[+-]\d\d(?::?\d\d)?/gi,t:/T/,"-":/\-/,":":/:/};this._zeroRegex=/Z|[+-]\d\d(?::?\d\d)?/;this._dates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]];this._times=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]]},_initValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setValidation:function(){var r,i,u,f;this.element.rules("add",this.model.validationRules);r=this.element.closest("form").data("validator");r=r?r:this.element.closest("form").validate();name=this.element.attr("name");r.settings.messages[name]={};for(i in this.model.validationRules)if(u=null,!t.isNullOrUndefined(this.model.validationRules[i])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[i])){r.settings.messages[name][i]=n.validator.messages[i];for(f in this.model.validationMessage)i==f?u=this.model.validationMessage[i]:""}else u=this.model.validationRules.messages[i];r.settings.messages[name][i]=u!=null?u:n.validator.messages[i]}},_checkAttribute:function(){for(var u=["min","max","readonly","disabled"],f=["minDate","maxDate","readOnly","enabled"],i,n,r=0;r<u.length;r++)i=this.element.attr(u[r]),n=f[r],t.isNullOrUndefined(i)||(t.isNullOrUndefined(this._options)?this.model[n]=n!="enabled"&&n!="readOnly"?new Date(i):n=="readOnly"?this.element.is("[readonly]"):!this.element.is("[disabled]"):t.isNullOrUndefined(this._options[n])&&(this.model[n]=n!="enabled"&&n!="readOnly"?new Date(i):n=="readOnly"?this.element.is("[readonly]"):!this.element.is("[disabled]")))},_updateDateValue:function(n){var t=this._checkDateObject(n);t!=null?(this.isValidState=!0,t==""?(this.element.val(""),this.model.value=null):(this.model.value=t,this._preTxtValue=this.element.val(this._formatter(this.model.value,this.model.dateFormat)))):(typeof t=="string"&&this.model.enableStrictMode?this.element.val(n):this.element.val(""),this.model.value=null,this.isValidState=this.element.val()==""?!0:!1);this._removeWatermark()},_ensureValue:function(){var n=this._parseDate(this.element.val(),this.model.dateFormat);this.model.value?this._setDateValue(this.model.value):n&&this._setDateValue(n)},_changeEditable:function(t){var i=t?"_on":"_off";if(this.element.is(":input")){if(t)this.model.readOnly||this.element.attr("readonly",!1),this.element.off("mousedown",n.proxy(this._showDatePopUp,this));else if(this.model.readOnly||this.element.attr("readonly","readonly"),!this.model.displayInline)this.element.on("mousedown",n.proxy(this._showDatePopUp,this));this[i](this.element,"blur",this._onFocusOut);this[i](this.element,"focus",this._onFocusIn);this[i](this.element,"keydown",this._onKeyDown)}},_allowQuickPick:function(t){n(".e-datepicker-headertext",this.sfCalendar)[t?"on":"off"]("click",n.proxy(this._forwardNavHandler,this))},_setRestrictDateState:function(n){var t=n?"addClass":"removeClass";this.sfCalendar[t]("e-dp-restrict-show")},_setValues:function(){this.Date=new Date;this._id=this.element[0].id;this.isValidState=!0;this._setCulture(this.model.locale);this._setMinDate(this.model.minDate);this._setMaxDate(this.model.maxDate);this._calendarDate=this._zeroTime(new Date);(this.model.startDay<0||this.model.startDay>6)&&(this.model.startDay=0);this.Date.firstDayOfWeek=this.model.startDay;this.Date.fullYearStart="20";this._showHeader=!0;t.isNullOrUndefined(this.model.value)&&this.element[0].value!=""&&(this.model.value=this.element[0].value);this._validateMinMaxDate();this._dateValue=new Date(this._calendarDate.toString());this._isIE7=this._checkIE7();this._isIE8=t.browserInfo().name=="msie"&&t.browserInfo().version=="8.0"?!0:!1;this._isIE9=t.browserInfo().name=="msie"&&t.browserInfo().version=="9.0"?!0:!1;this._getInternalEvents=!1;this._flag=!0;this._ejHLWeekEnd=!1;this._isOpen=!1;this._prevDate=null;this._preValue=null;this._isFocused=!1},_addAttr:function(i){var r=this;n.map(i,function(n,i){var u=i.toLowerCase();u=="class"?r.wrapper.addClass(n):u=="disabled"&&n=="disabled"?r.disable():u=="readOnly"&&n=="readOnly"?r.model.readOnly=!0:u=="style"||u=="id"?r.wrapper.attr(i,n):t.isValidAttr(r.element[0],i)?r.element.attr(i,n):r.wrapper.attr(i,n)})},_createDatePicker:function(){this._createWrapper();this._wireEvents();this.model.displayInline&&this.show();this.model.enableRTL&&this._setRTL(!0);this.model.showRoundedCorner&&this._setRoundedCorner(!0)},_checkNameAttr:function(){!this.element.attr("name")&&this._isInputBox()&&this.element.attr("name",this.element[0].id);this.model.displayInline&&!this._isInputBox()&&this._hiddenInput.attr("name",this.element[0].id)},_createWrapper:function(){if(this._mapField=this._getMapper(),this.model.specialDates&&this._createSpecialDateObject(),this._isInputBox()&&(this.element.addClass("e-input").attr({"aria-atomic":"true","aria-live":"assertive",tabindex:"0"}),this.wrapper=t.buildTag("span.e-datewidget e-widget "+this.model.cssClass),t.isTouchDevice()||this.wrapper.addClass("e-ntouch"),this.innerWrapper=t.buildTag("span.e-in-wrap e-box"),this.wrapper.append(this.innerWrapper).insertBefore(this.element),this.innerWrapper.append(this.element),this.innerWrapper.addClass("e-padding"),this.dateIcon=t.buildTag("span.e-select#"+this._id+"-img","",{},this._isIE8?{unselectable:"on"}:{}).append(t.buildTag("span.e-icon e-calendar","",{},{"aria-label":"Select"}).attr(this._isIE8?{unselectable:"on"}:{})).insertAfter(this.element)),!this._isSupport||this.model.displayInline&&!this._isInputBox()){this._hiddenInput=t.buildTag("input.e-input e-placeholder ","",{},{type:"text"}).insertAfter(this.element);this._isInputBox()&&this._hiddenInput.val(this._localizedLabels.watermarkText);this._hiddenInput.css("display","block");var i=this;n(this._hiddenInput).focus(function(){i.element.focus()})}this._checkNameAttr();this._setHeight(this.model.height);this._setWidth(this.model.width);this._id&&n("#e-"+this._id).remove();this.sfCalendar=t.buildTag("div.e-datepicker e-popup e-widget "+this.model.cssClass+" e-calendar "+(this.model.specialDates?this.model.specialDates[0][this._mapField._icon]?"e-icons ":"":""),"",{},{id:this._id?"e-"+this._id:""}).attr({"aria-hidden":"true"}).attr(this._isIE8?{unselectable:"on"}:{}).insertBefore(this.element);this.model.displayInline&&!this.element.is("input")&&this.sfCalendar.addClass("e-inline");this.popup=this.sfCalendar;t.isTouchDevice()||this.sfCalendar.addClass("e-ntouch");this._resizeCalender();this._setDateValue(this.model.value);this._preValue=this._parseDate(this.element.val(),this.model.dateFormat);this._setWaterMark();this._dateValue=new Date(this._calendarDate.toString());this._createCalender();this._setDisplayInline(this.model.displayInline);this.model.readOnly&&this._disbleMaualInput();this.model.enabled?this.model.enabled&&n(this.element).hasClass("e-disable")&&this.enable():this.disable();this._layoutChanged();this._checkErrorClass();this._addAttr(this.model.htmlAttributes)},_isInputBox:function(){return this.element.is("input")&&(this.element.is("input[type=text]")||!this.element.attr("type"))},_renderDateIcon:function(n,t){t&&this.model.showPopupButton==n||(!n&&this.dateIcon?(this._bindInputEvent(),this.dateIcon.css("display","none"),this.innerWrapper.removeClass("e-padding")):(this.innerWrapper&&(this.innerWrapper.addClass("e-padding"),this.dateIcon.css("display","block")),this.model.displayInline||this._bindDateButton()),this.model.showPopupButton=n)},_resizeCalender:function(){this.model.dayHeaderFormat=="short"||this.model.dayHeaderFormat=="min"||this.model.dayHeaderFormat=="none"?this.sfCalendar.removeClass("e-headerlong"):this.model.dayHeaderFormat=="long"&&this.sfCalendar.addClass("e-headerlong")},_setWidth:function(n){n?this.wrapper?this.wrapper.width(n):this.element.width(n):this.model.width=this.wrapper?this.wrapper.outerWidth():this.element.width()},_setHeight:function(n){n?this.wrapper?this.wrapper.height(n):this.element.height(n):this.model.height=this.wrapper?this.wrapper.outerHeight():this.element.height();this._isIE7&&this.element.height(this.innerWrapper.height())},_setRTL:function(n){n?(this.wrapper&&this.wrapper.addClass("e-rtl"),this.sfCalendar.addClass("e-rtl")):(this.wrapper&&this.wrapper.removeClass("e-rtl"),this.sfCalendar.removeClass("e-rtl"))},_setRoundedCorner:function(n){n?(this.innerWrapper&&this.innerWrapper.addClass("e-corner"),this.sfCalendar.addClass("e-corner")):(this.innerWrapper&&this.innerWrapper.removeClass("e-corner"),this.sfCalendar.removeClass("e-corner"))},_refreshDatepicker:function(){var t,i;if(this._stopRefresh){this._stopRefresh=!1;return}t=this.element.val();i=this._specificFormat()&&this._formatter(this._preValue,this.model.dateFormat,this.model.locale)!=t?this._parseDate(t,!0):this._parseDate(t);i=this._validateYearValue(i);this._setDateValue(i);this._specificFormat()&&this._compareDate(this.model.value,this._calendarDate)&&this.element.val(t);n(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._calendarDate,this.model.headerFormat));this._resizeCalender();this._dateValue=new Date(this._calendarDate.toString());this._hoverDate=this._calendarDate.getDate()-1;this._renderCalendar(this,this._dateValue);this._setFooterText(this._localizedLabels.buttonText);this._enableFooter(this.model.showFooter);this._layoutChanged()},_validateYearValue:function(n){if(n!=null){var i=t.preferredCulture(this.model.locale).calendars.standard.twoDigitYearMax;i=typeof i=="string"?(new Date).getFullYear()%100+parseInt(i,10):i;this._calendarDate.getFullYear()-n.getFullYear()==100&&this._calendarDate.getFullYear()>i&&n.setFullYear(this._calendarDate.getFullYear())}return n},_setFooterText:function(t){n(".e-footer-text",this.sfCalendar).html(t)},_setSkin:function(n){this.wrapper?(this.wrapper.removeClass(this.model.cssClass),this.wrapper.addClass(n)):(this.element.removeClass(this.model.cssClass),this.element.addClass(n));this.sfCalendar.removeClass(this.model.cssClass);this.sfCalendar.addClass(n)},_setDisplayInline:function(t){this.model.displayInline=t;t&&this._isInputBox()?(this.sfCalendar.insertAfter(this.wrapper),this._setDatePickerPosition()):t?(this.element.append(this.sfCalendar),this._isSupport&&this._isInputBox()||this._hiddenInput.css("display","none")):(this.sfCalendar.css("display","none"),n("body").append(this.sfCalendar),this._isOpen=!1);t?(this.show(),this._off(this.dateIcon,"mousedown",this._showDatePopUp),this.element.off("mousedown",n.proxy(this._showDatePopUp,this))):this._isInputBox()&&this._renderDateIcon(this.model.showPopupButton,!1)},_disbleMaualInput:function(){this.model.readOnly?(n(this.element).attr("readonly","readonly"),this.model.displayInline||this.hide()):this.model.allowEdit&&n(this.element).prop("readonly",!1)},_checkDateObject:function(n,t){var t;if(n&&(typeof JSON!="object"||JSON.stringify(n)!=="{}"))n instanceof Date||(t=this._specificFormat()?this._parseDate(n,!0):this._parseDate(n,t),n=t?t:(t=this._checkJSONString(n))?t:null);else return null;return!isNaN(Date.parse(n))&&(this._dateValue=this._calendarDate=this._zeroTime(n),this._validateDate(n))?this._dateValue:null},_checkJSONString:function(n){if(isNaN(Date.parse(n))){if(this._extISORegex.exec(n)||this._basicISORegex.exec(n))return this._dateFromISO(n)}else{if(new Date(n).toJSON()===n||new Date(n).toDateString()===n||new Date(n).toGMTString()===n||new Date(n).toISOString()===n||new Date(n).toLocaleString()===n||new Date(n).toString()===n||new Date(n).toUTCString()===n)return new Date(n);if(typeof n=="string")return this._dateFromISO(n)}},_dateFromISO:function(n){var i=this._extISORegex.exec(n)||this._basicISORegex.exec(n),c="",l="",a="",v,e,o,f,r,t,s,u,h,y;if(i){for(e=0;e<this._dates.length;e++)if(this._dates[e][1].exec(i[1])){c=this._dates[e][0];break}if(i[3])for(o=0;o<this._times.length;o++)if(this._times[o][1].exec(i[3])){l=(i[2]||" ")+this._times[o][0];break}for(i[4]&&this._zeroRegex.exec(i[4])&&(a="Z"),v=c+l+a,f=v.match(this._tokens),t=[],u=0;u<f.length;u++)h=f[u],s=this._checkLiteral(f[u]),y=this._numberRegex[s?f[u].toLowerCase():h.length]||new RegExp("^\\d{1,"+h.length+"}"),r=n.match(y),r&&(n.substr(0,n.indexOf(r))>=0&&!s&&(f[u].indexOf("M")>=0?t.push(parseInt(r[0])-1):t.push(parseInt(r[0]))),n=n.slice(n.indexOf(r[0])+r[0].length));return new Date(t[0],t[1],t[2],t[3],t[4],t[5])}},_checkLiteral:function(n){return char=n.toLowerCase(),char=="t"||char=="z"||char==":"||char=="-"?!0:!1},_checkInstanceType:function(n){if(n=this._stringToObject(n),n)n instanceof Date||(n=this._parseDate(n));else return null;return isNaN(Date.parse(n))?null:this._zeroTime(n)},_stringToObject:function(n){if(typeof n=="string"){var i=t.parseDate(n,this.model.dateFormat,this.model.locale);n=i!=null?i:new Date(n)}return n},_validateMinMaxDate:function(){var n=!1,t=!1;this.model.maxDate<this.model.minDate&&(this.model.minDate=this.model.maxDate);this.model.enableStrictMode?this.model.value?this.model.value<this.model.minDate?(this._calendarDate=this.model.minDate,this.isValidState=!1,t=!0):this.model.value>this.model.maxDate?(this._calendarDate=this.model.maxDate,this.isValidState=!1,t=!0):this.isValidState=!0:this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate):(this.model.value?this.model.value<this.model.minDate?(this._calendarDate=this.model.value=this.model.minDate,n=!0):this.model.value>this.model.maxDate&&(this._calendarDate=this.model.value=this.model.maxDate,n=!0):(this.element.val(""),this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate)),this.isValidState=!0);n&&this.element.val(this._formatter(this.model.value,this.model.dateFormat));t&&this._getInternalEvents&&this._trigger("outOfRange")},_setCulture:function(n){this.culture=t.preferredCulture(n);this.culture&&(this.model.locale=this.culture.name=="en"?"en-US":this.culture.name,this.Date.dayNames=this.culture.calendar.days.names,this.Date.dayNamesMin=this.culture.calendar.days.namesShort,this.Date.abbrDayNames=this.culture.calendar.days.namesAbbr,this.Date.monthNames=this.culture.calendar.months.names,this.Date.abbrMonthNames=this.culture.calendar.months.namesAbbr,this.Date.format=this.culture.calendar.patterns.d,this.model.dateFormat==""&&(this.model.dateFormat=this.culture.calendar.patterns.d),this.model.startDay==-1&&(this.model.startDay=this.culture.calendar.firstDay));this._separator=this._getSeparator();this._localizedLabels=this._getLocalizedLabels();t.isNullOrUndefined(this._options)||(t.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText),t.isNullOrUndefined(this._options.buttonText)||(this._localizedLabels.buttonText=this._options.buttonText));this._localizedLabelToModel()},_localizedLabelToModel:function(){this.model.watermarkText=this._localizedLabels.watermarkText;this.model.buttonText=this._localizedLabels.buttonText},_setWaterMark:function(){if(this.element!=null&&this.element.hasClass("e-input"))return this._localizedLabels.watermarkText&&this.element.val()==""&&(this.isValidState=!0,this._checkErrorClass()),this._isSupport||this.element.val()!=""?n(this.element).attr("placeholder",this._localizedLabels.watermarkText):this._hiddenInput.css("display","block").val(this._localizedLabels.watermarkText),!0},_setDatePickerPosition:function(){if(!this.model.displayInline||this._isInputBox()){var i=this.element.is("input")?this.wrapper:this.element,r=this._getOffset(i),o,s,l=n(document).scrollTop()+n(window).height()-(r.top+n(i).outerHeight()),a=r.top-n(document).scrollTop(),f=this.sfCalendar.outerHeight(),e=this.sfCalendar.outerWidth(),u=r.left,h=i.outerHeight(),p=(h-i.height())/2,v=this._getZindexPartial(),c=3,y=f<l||f>a?r.top+h+c:r.top-f-c;o=n(document).scrollLeft()+n(window).width()-u;s=n(document).scrollLeft()+u+i.width();(this.model.enableRTL||e>o&&e<u+i.outerWidth()&&!t.isNullOrUndefined(this.wrapper))&&(u+=this.wrapper.width()-this.sfCalendar.width());e>s&&(u=r.left);this.sfCalendar.css({left:u+"px",top:y+"px","z-index":v})}},_getOffset:function(n){return t.util.getOffset(n)},_getZindexPartial:function(){return t.util.getZindexPartial(this.element,this.sfCalendar)},_setMinDate:function(n){this.model.minDate=this._checkInstanceType(n);this.model.minDate||(this.model.minDate=new Date("11/31/1899"))},_setMaxDate:function(n){this.model.maxDate=this._checkInstanceType(n);this.model.maxDate||(this.model.maxDate=new Date("12/31/2099"))},_setDateValue:function(n,i){var r=this._checkDateObject(n,i);r!=null?(this.isValidState=!0,this.model.value=new Date(r.toString()),this._validateMinMaxDate(),this._preTxtValue=this.element.val(this._formatter(this.model.value,this.model.dateFormat))):(n instanceof Date&&(this._validateMinMaxDate(),n=this._formatter(n,this.model.dateFormat)),this.model.enableStrictMode?this.element.val(n):this.element.val(null),this.model.value=null,this._triggerChangeEvent(),this.isValidState=this.element.val()==""||t.isNullOrUndefined(this.element.val())?!0:!1);this._removeWatermark()},_updateInputVal:function(){var n=this._validateValue();(n!=null||!this.model.enableStrictMode)&&this.sfCalendar.find(".e-datepicker-days").is(":visible")&&this._refreshDatepicker()},_validateInputVal:function(){var n=this._validateValue();n!=null&&(this.model.enableStrictMode||(n<=this.model.maxDate&&n>=this.model.minDate?this.isValidState=!0:(this.model.value=null,this.isValidState=!0)))},_validateValue:function(){var n;return n=this._specificFormat()&&this.element.val()!=this._formatter(this._preValue,this.model.dateFormat,this.model.locale)?this._parseDate(this.element.val(),!0):this._parseDate(this.element.val()),this._validateYearValue(n)},_getSeparator:function(){var t,n;for(formats=this.culture?this.culture.calendar.patterns.d:this.model.dateFormat,t=new RegExp("^[a-zA-Z0-9]+$"),n=0;n<formats.length;n++)if(!t.test(formats[n]))return formats[n]},_checkIE7:function(){if(navigator.appName=="Microsoft Internet Explorer"){var t=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),n=-1;if(t.exec(navigator.userAgent)!=null&&(n=parseFloat(RegExp.$1)),n>=7&&n<8)return!0}return!1},_isValidDate:function(n){return n&&typeof n.getTime=="function"&&isFinite(n.getTime())},_formatter:function(n,i){var r=this._checkFormat(i);return t.format(n,r,this.model.locale)},_parseDate:function(n,i){var u=this._checkFormat(this.model.dateFormat);return DateValue=n,!this._specificFormat()||DateValue==r||n==""||i==!0||t.format(t.parseDate(DateValue,u,this.model.locale),this.model.dateFormat,this.model.locale)==DateValue?t.parseDate(n,u,this.model.locale):this._dateValue},_checkFormat:function(n){var i=this,r=this._regExp();return n.replace(r,function(n){return n==="/"?t.preferredCulture(i.model.locale).calendars.standard["/"]!=="/"?"'/'":n:n})},_regExp:function(){return/\/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|gg|g|"[^"]*"|'[^']*'|[/]/g},isLeapYear:function(n){return n%4==0&&n%100!=0||n%400==0},_zeroTime:function(n){var t=typeof n=="string"?this._parseDate(n):new Date(n);return t.setMilliseconds(0),t.setSeconds(0),t.setMinutes(0),t.setHours(0),t},_getDaysInMonth:function(n){return[31,this.isLeapYear(n)?29:28,31,30,31,30,31,31,30,31,30,31][n.getMonth()]},_addDays:function(n,t){return n.setDate(n.getDate()+t),n},_addYears:function(n,t){return n.setFullYear(n.getFullYear()+t),n},_addMonths:function(n,t){var i=n.getDate();return n.setMonth(n.getMonth()+t),i>n.getDate()&&this._addDays(n,-n.getDate()),n},_isWeekend:function(n){return n.getDay()==0||n.getDay()==6},_isSpecialDates:function(n){if(this.model.specialDates)for(var t=0;t<this.model.specialDates.length;t++)if(this.model.specialDates[t]&&this.model.specialDates[t][this._mapField._date]&&n.getDate()==this.model.specialDates[t][this._mapField._date].getDate()&&n.getMonth()==this.model.specialDates[t][this._mapField._date].getMonth()&&n.getFullYear()==this.model.specialDates[t][this._mapField._date].getFullYear())return this._getIndex=t,!0;return!1},_getMapper:function(){var n=this.model.fields,t={_date:null,_tooltip:null,_icon:null,_custom:null};return t._date=n&&n.date?n.date:"date",t._tooltip=n&&n.tooltip?n.tooltip:"tooltip",t._icon=n&&n.iconClass?n.iconClass:"iconClass",t._custom=n&&n.cssClass?n.cssClass:"cssClass",t},_createSpecialDateObject:function(){for(var n=0;n<this.model.specialDates.length;n++)this.model.specialDates[n][this._mapField._date]=this._checkInstanceType(this.model.specialDates[n][this._mapField._date])},_getMonthName:function(n,t){return n?this.Date.abbrMonthNames[t.getMonth()]:this.Date.monthNames[t.getMonth()]},_displayNewMonth:function(n,t){return this._setDisplayedMonth(this.displayedMonth+n,this.displayedYear+t,!0),!1},_setDisplayedMonth:function(n,t,i){var f,e,u,s,h,o;this.model.minDate!=r&&this.model.maxDate!=r&&(f=new Date(this.model.minDate.getTime()),f.setDate(1),e=new Date(this.model.maxDate.getTime()),e.setDate(1),!n&&!t||isNaN(n)&&isNaN(t)?(u=this._zeroTime(new Date),u.setDate(1)):u=isNaN(n)?new Date(t,this.displayedMonth,1):isNaN(t)?new Date(this.displayedYear,n,1):new Date(t,n,1),u.getTime()<f.getTime()?u=f:u.getTime()>e.getTime()&&(u=e),s=this.displayedMonth,h=this.displayedYear,this.displayedMonth=u.getMonth(),this.displayedYear=u.getFullYear(),o=u,i&&(this.displayedMonth!=s||this.displayedYear!=h)&&(this._renderCalendar(this,o),this._dateValue=o,this._trigger("monthChanged",[this.displayedMonth,this.displayedYear])))},_clearSelected:function(){this.numSelected=0;this.model.highlightSection=="week"?n("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1).parent().removeClass("e-selected-week"):this.model.highlightSection=="month"?n("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1).parent().parent().removeClass("e-selected-month"):this.model.highlightSection=="workdays"?n("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1).parent().removeClass("e-work-week"):n("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1)},_addSelected:function(){this.model.highlightSection=="week"?n("td.e-active",this.sfCalendar).parent().addClass("e-selected-week"):this.model.highlightSection=="month"?n("td.e-active, this.sfCalendar").parent().parent().addClass("e-selected-month"):this.model.highlightSection=="workdays"&&n("td.e-active",this.sfCalendar).parent().addClass("e-work-week")},_hideOtherMonths:function(t){n("td.other-month",t).css("visibility","hidden")},_showOtherMonths:function(t){n("td.other-month",t).css({visibility:"visible"})},_otherMonthsVisibility:function(){this.model.showOtherMonths?this._showOtherMonths(this.sfCalendar):this._hideOtherMonths(this.sfCalendar)},_createCalender:function(){t.buildTag("div.e-header").attr(this._isIE8?{unselectable:"on"}:{}).append(t.buildTag("span.e-prev").append(t.buildTag("a.e-icon e-arrow-sans-left").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(t.buildTag("span.e-text").append(t.buildTag("span.e-datepicker-headertext").text(this._formatter(this._calendarDate,this.model.headerFormat)).attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(t.buildTag("span.e-next").append(t.buildTag("a.e-icon e-arrow-sans-right").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this.sfCalendar);this._enableHeader(this._showHeader);var i=t.buildTag("table.e-dp-viewdays","",{},{cellspacing:2}).data("e-table","data").attr({role:"grid","aria-activedescendant":""}).attr(this._isIE8?{unselectable:"on"}:{});this.sfCalendar.append(i);this._renderCalendar(this);this._startLevel(this.model.startLevel);t.buildTag("div.e-footer").append(t.buildTag("span.e-footer-icon")).append(t.buildTag("span.e-footer-text")).appendTo(this.sfCalendar);n(".e-footer-text",this.sfCalendar).html(this._localizedLabels.buttonText);this._enableFooter(this.model.showFooter)},_enableHeader:function(t){t?n(".e-header",this.sfCalendar).show():n(".e-header",this.sfCalendar).hide()},_enableFooter:function(t){t?n(".e-footer",this.sfCalendar).show():n(".e-footer",this.sfCalendar).hide()},_checkArrows:function(n,t){this._preArrowCondition(n,this.model.minDate.getFullYear());this._nextArrowCondition(t,this.model.maxDate.getFullYear())},_checkDateArrows:function(){this._preArrowCondition(this._tempMinDate,this.model.minDate);this._nextArrowCondition(this._tempMaxDate,this.model.maxDate)},_preArrowCondition:function(n,t){n<=t?this.sfCalendar.find(".e-arrow-sans-left").addClass("e-disable").attr({"aria-disabled":!0}):this.sfCalendar.find(".e-arrow-sans-left").removeClass("e-disable").attr({"aria-disabled":!1})},_nextArrowCondition:function(n,t){n>=t?this.sfCalendar.find(".e-arrow-sans-right").addClass("e-disable").attr({"aria-disabled":!0}):this.sfCalendar.find(".e-arrow-sans-right").removeClass("e-disable").attr({"aria-disabled":!1})},_previousNextHandler:function(t){var r,u,f,e,o,s,i;if(this.model.readOnly||!this.model.enabled||n(t.target).hasClass("e-disable"))return!1;t.preventDefault();r=n("table",this.sfCalendar);u=this._navigateFrom(r);f=n(t.target).is("a")?n(t.target.parentNode):n(t.target);e=f.hasClass("e-prev")?!0:!1;this._processNextPrevDate(e);o=n("table",this.sfCalendar);s=o.get(0).className;switch(s){case"e-dp-viewdays":i="month";break;case"e-dp-viewmonths":i="year";break;case"e-dp-viewyears":i="decade";break;case"e-dp-viewallyears":i="century"}this._trigger("navigate",{date:this._dateValue,value:this._formatter(this._dateValue,this.model.dateFormat),navigateTo:i,navigateFrom:u})},_processNextPrevDate:function(t){var i,u,l,h,c,f,e,o,r;if((this._DRPdisableFade&&(s=new Date(this.sfCalendar.find("td.current-month").attr("date")),this._dateValue=s),t&&this.sfCalendar.find(".e-arrow-sans-left").hasClass("e-disable"))||!t&&this.sfCalendar.find(".e-arrow-sans-right").hasClass("e-disable"))return!1;i=n("table",this.sfCalendar);l=i.get(0).className;switch(l){case"e-dp-viewdays":if(h=this.model.stepMonths,t){if(this._dateValue<=this.model.minDate)return this._flag=!1,!1}else if(this._dateValue>=this.model.maxDate)return this._flag=!1,!1;this._flag=!0;this._addMonths(this._dateValue,t?-h:h);this._clickedDate&&(this._calendarDate=this._clickedDate);this._dateValue=this._dateValue<this.model.minDate?new Date(this.model.minDate.toString()):this._dateValue;this._dateValue=this._dateValue>this.model.maxDate?new Date(this.model.maxDate.toString()):this._dateValue;this._renderCalendar(this,this._dateValue);n(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._dateValue,this.model.headerFormat));this._addFocus("day",this._hoverDate);c=this._findFirstLastDay(new Date(this._dateValue.toString()));this._preArrowCondition(c.firstDay,this.model.minDate);this._nextArrowCondition(c.lastDay,this.model.maxDate);break;case"e-dp-viewmonths":if(f=this._dateValue,f.setFullYear(n(".e-datepicker-headertext",this.sfCalendar).text()),t){if(f.getFullYear()<=this.model.minDate.getFullYear())return this._flag=!1,!1}else if(f.getFullYear()>=this.model.maxDate.getFullYear())return this._flag=!1,!1;this._flag=!0;this._addYears(f,t?-1:1);this._renderCalendar(this,f);u=f.getFullYear();n(".e-datepicker-headertext",this.sfCalendar).text(u);n("tbody,tr.e-week-header",i).not(".e-datepicker-months").hide();n(n(i).find(".e-datepicker-months")).show();this._addFocus("month",this._hoverMonth);this._checkArrows(u,u);break;case"e-dp-viewyears":if(e=this._dateValue,e.setFullYear(n(i).find(".e-state-hover").text()),t){if(parseInt(n("td.e-year-first:first").text())<=this.model.minDate.getFullYear())return this._flag=!1,!1}else if(parseInt(n("td.e-year-last:first").prev().text())>=this.model.maxDate.getFullYear())return this._flag=!1,!1;this._flag=!0;n(i).find(".e-state-hover").hasClass("e-year-first")&&t||n(i).find(".e-state-hover").hasClass("e-year-last")&&!t?this._dateValue.setFullYear(e.getFullYear()):n(i).find(".e-state-hover").hasClass("e-year-first")&&!t?this._dateValue.setFullYear(e.getFullYear()+11):n(i).find(".e-state-hover").hasClass("e-year-last")&&t?this._dateValue.setFullYear(e.getFullYear()-11):this._dateValue.setFullYear(e.getFullYear()+(t?-10:10));this._renderCalendar(this,this._dateValue);r=parseInt(this._dateValue.getFullYear())-(parseInt(this._dateValue.getFullYear())%10+1);n(".e-datepicker-headertext",this.sfCalendar).text(r+1+" - "+(r+10));n("tbody,tr.e-week-header",i).not(".e-datepicker-years").hide();n(n(i).find(".e-datepicker-years")).show();this._addFocus("year",this._hoverYear+(n(".e-year-first.e-hidedate").length?-1:0));this._checkArrows(r+1,r+10);break;case"e-dp-viewallyears":if(t){if(o=parseFloat(n("td.e-allyear-first",i.get(0)).text().split("-")[1]),o<=this.model.minDate.getFullYear())return this._flag=!1,!1;this._flag=!0}else{if(o=parseFloat(n("td.e-allyear-last",i.get(0)).prev().text().split("-")[1]),o>=this.model.maxDate.getFullYear())return this._flag=!1,!1;this._flag=!0}this._dateValue.setFullYear((this._lastHoveredYear?this._lastHoveredYear:this._dateValue.getFullYear())+(t?-100:100));this._lastHoveredYear=this._dateValue.getFullYear();this._renderCalendar(this,this._dateValue);r=parseInt(this._dateValue.getFullYear())-(parseInt(this._dateValue.getFullYear())%100+1);u=parseFloat(n("td.e-allyear-last",i.get(0)).prev().text().split("-")[1]);n(".e-datepicker-headertext",this.sfCalendar).text(r+1+" - "+u);n("tbody,tr.e-week-header",i).not(".e-datepicker-allyears").hide();n(n(i).find(".e-datepicker-allyears")).show();this._addFocus("allyear",this._hoverAllYear+(n(".e-allyear-first.e-hidedate").length?-1:0));this._checkArrows(r+1,u)}this._layoutChanged()},_addFocus:function(t,i){var f="e-current-"+t,r,u;return t=="day"&&(f="current-month"),r=this.sfCalendar.find("tbody tr td."+f),t=="month"&&n(r).each(function(t,r){if(parseInt(n(r).attr("index"))==parseInt(i)){i=t;return}}),u=r[i],u||(u=r.last()),this.sfCalendar.find("table td").removeClass("e-state-hover"),n(u).addClass("e-state-hover"),this._setActiveState(t),i},_setActiveState:function(t){var e,f,o;if(this.model.value instanceof Date){var i=this.sfCalendar.find("tbody tr td.e-current-"+t),r,s=this,u=-1;switch(t){case"month":this.model.value.getFullYear()===parseInt(n(".e-text",this.sfCalendar).text())&&n(i).each(function(t,i){if(parseInt(n(i).attr("index"))==parseInt(s.model.value.getMonth())){u=t;return}});break;case"year":e=this.model.value.getFullYear();n(i).each(function(n,t){if(parseInt(t.innerHTML)==parseInt(e)){u=n;return}});break;case"allyear":f=parseInt(this.model.value.getFullYear())-(parseInt(this.model.value.getFullYear())%10+1);o=f+1+" - "+(f+10);n(i).each(function(n,t){if(parseInt(t.innerHTML)==parseInt(o)){u=n;return}})}r=i[u];r&&(this.sfCalendar.find("table td").removeClass("e-active"),n(r).hasClass("e-hidedate")||n(r).addClass("e-active"))}},_setFocusByName:function(t,i){var u=this.sfCalendar.find("tbody tr td.e-current-"+t),f,r;return n(u).each(function(n,t){if(parseInt(t.innerHTML)==parseInt(i)){f=n;return}}),r=u[f],r||(r=u.last()),this.sfCalendar.find("table td").removeClass("e-state-hover"),n(r).addClass("e-state-hover"),this._setActiveState(t),f},_getHeaderTxt:function(){return this.sfCalendar.find(".e-datepicker-headertext").text()},_findFirstLastDay:function(n){y=n.getFullYear();m=n.getMonth();var t=new Date(y,m,1),i=new Date(y,m+1,0);return{firstDay:t,lastDay:i}},_forwardNavHandler:function(t){if(this.model.readOnly||!this.model.enabled)return!1;t&&t.preventDefault();var u=n("table",this.sfCalendar),f=n("table",this.sfCalendar).get(0).className,e=this,i,r;navFrom=this._navigateFrom(u);switch(f){case"e-dp-viewdays":this._hoverMonth=this._getDateObj(u.find(".e-state-hover")).getMonth()||this._getDateObj(u.find(".e-active")).getMonth()||0;this._DRPdisableFade&&(this._renderCalendar(this,this._calendarDate),n(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._dateValue,this.model.headerFormat)));this._startLevel("year");r="year";this._addFocus("month",this._hoverMonth);break;case"e-dp-viewmonths":i=this._getHeaderTxt();this._startLevel("decade");r="decade";this._hoverYear=this._setFocusByName("year",i);break;case"e-dp-viewyears":i=this._getHeaderTxt();this._startLevel("century");r="century";this._hoverAllYear=this._setFocusByName("allyear",i)}navFrom!="century"&&this._trigger("navigate",{date:this._dateValue,value:this._formatter(this._dateValue,this.model.dateFormat),navigateTo:r,navigateFrom:navFrom});this._layoutChanged()},_cellSelection:function(){var u=n("table",this.sfCalendar),r=n("table",this.sfCalendar).get(0).className,t,i;switch(r){case"e-dp-viewmonths":this._hoverMonth=this._addFocus("month",this._dateValue.getMonth());break;case"e-dp-viewyears":t=new Date(this._dateValue.toString());this._navigationToPrevNext("year");this._dateValue=t;this._hoverYear=this._setFocusByName("year",this._dateValue.getFullYear());break;case"e-dp-viewallyears":t=new Date(this._dateValue.toString());this._navigationToPrevNext("allyear");this._dateValue=t;i=parseInt(this._dateValue.getFullYear())-(parseInt(this._dateValue.getFullYear())%10+1);this._hoverAllYear=this._setFocusByName("allyear",i+1+" - "+i+10)}this._layoutChanged()},_navigationToPrevNext:function(t){var r=this.sfCalendar.find("tbody tr td.e-current-"+t),u,i,f=this._dateValue.getFullYear();n(r).each(function(n,t){if(parseInt(t.innerHTML)==parseInt(f)){u=n;return}});i=r[u];i&&(n(i).hasClass("e-"+t+"-last")?this._processNextPrevDate(!1):n(i).hasClass("e-"+t+"-first")&&this._processNextPrevDate(!0))},_navigateFrom:function(n){var i=n.get(0).className,t;switch(i){case"e-dp-viewdays":t="month";break;case"e-dp-viewmonths":t="year";break;case"e-dp-viewyears":t="decade";break;case"e-dp-viewallyears":t="century"}return t},_backwardNavHandler:function(i){var u,r;if(this._animating=!0,this.model.readOnly||!this.model.enabled)return!1;i.type?(i.preventDefault(),u=n(i.currentTarget)):u=i;var f=n("table",this.sfCalendar),o,h=n("table",this.sfCalendar).get(0).className,e=this,s;navFrom=this._navigateFrom(f);switch(h){case"e-dp-viewmonths":f.removeClass("e-dp-viewmonths").addClass("e-dp-viewdays");this._lastHoveredMonth=parseInt(n(u).attr("index"));this._dateValue=new Date(this._dateValue.getFullYear(),this._lastHoveredMonth,this._dateValue.getDate());this._DRPdisableFade&&this._trigger("_month_Loaded",{currentTarget:i.currentTarget});this._renderCalendar(this,this._dateValue);n("tbody",f).not(".e-datepicker-days,.e-week-header").hide();n(n(f).find(".e-datepicker-days,.e-week-header")).fadeIn("fast",function(){e._addFocus("day",e._hoverDate||0);e._animating=!1});n(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._dateValue,this.model.headerFormat));s="month";break;case"e-dp-viewyears":f.removeClass("e-dp-viewyears").addClass("e-dp-viewmonths");this._lastHoveredYear=parseInt(u.text());this._dateValue.setFullYear(this._lastHoveredYear);this._renderCalendar(this,this._dateValue);n("tbody,tr.e-week-header",f).not(".e-datepicker-months").hide();t.isNullOrUndefined(this._hoverMonth)&&!t.isNullOrUndefined(this._dateValue)&&(this._hoverMonth=this._dateValue.getMonth());n(n(f).find(".e-datepicker-months")).fadeIn("fast",function(){e._addFocus("month",e._hoverMonth||0);e._animating=!1});o=u.text();n(".e-datepicker-headertext",this.sfCalendar).text(o);this._checkArrows(o,o);s="year";break;case"e-dp-viewallyears":r=u.text().split("-");f.removeClass("e-dp-viewallyears").addClass("e-dp-viewyears");r[0]<this.model.minDate.getFullYear()?r[0]=this.model.minDate.getFullYear().toString():r[0]>this.model.maxDate.getFullYear()&&(r[0]=this.model.maxDate.getFullYear().toString());this._renderCalendar(this,new Date(r[0],0,1));n("tbody,tr.e-week-header",f).not(".e-datepicker-years").hide();n(n(f).find(".e-datepicker-years")).fadeIn("fast",function(){e._addFocus("year",e._hoverYear||0);e._animating=!1});n(".e-datepicker-headertext",this.sfCalendar).text(r[0]+" - "+r[1]);this._checkArrows(r[0],r[1]);s="decade";this._dateValue=new Date(this._dateValue.setFullYear(parseInt(n.trim(r[0]))+(this._lastHoveredYear?this._lastHoveredYear%10:this._dateValue.getFullYear()%10)));break;default:this._clearSelected();this.sfCalendar.find("table td").removeClass("e-state-hover");u.not("td.other-month.e-hidedate").addClass("e-active").attr("aria-selected",!0);this._addSelected();this._hoverDate=this._getDateObj(u).getDate()-1;this._dateValue=new Date(u.attr("date"));this._clickedDate=new Date(u.attr("date"));this._animating=!1}navFrom!="month"&&this._trigger("navigate",{date:this._dateValue,value:this._formatter(this._dateValue,this.model.dateFormat),navigateTo:s,navigateFrom:navFrom});this._layoutChanged()},_startLevel:function(t){var i=n("table",this.sfCalendar),o=n(".e-datepicker-headertext",this.sfCalendar),r,f,u=this._dateValue,s,e;switch(t){case"decade":i.removeClass("e-dp-viewallyears e-dp-viewmonths e-dp-viewdays").addClass("e-dp-viewyears");n("tbody,tr.e-week-header",i).not(".e-datepicker-years").hide();n(n(i).find(".e-datepicker-years")).show();u=this.model.enableStrictMode&&this._calendarDate<this._dateValue?this._calendarDate:u;e=parseInt(u.getFullYear())-(parseInt(u.getFullYear())%10+1);r=e+1;f=e+10;o.text(r+" - "+f);this._checkArrows(r,f);this._hoverYear=this._setFocusByName("year",u.getFullYear());break;case"century":this._calendarDate<this._dateValue||this._renderCalendar(this,u);i.removeClass("e-dp-viewyears e-dp-viewdays e-dp-viewmonths").addClass("e-dp-viewallyears");n("tbody,tr.e-week-header",i).not(".e-datepicker-allyears").hide();n(n(i).find(".e-datepicker-allyears")).show();r=parseFloat(n("td.e-allyear-first",i.get(0)).text().split("-")[1])+1;f=parseFloat(n("td.e-allyear-last",i.get(0)).prev().text().split("-")[1]);s=r+" - "+f;o.text(s);this._checkArrows(r,f);e=parseInt(u.getFullYear())-(parseInt(u.getFullYear())%10+1);this._hoverAllYear=this._setFocusByName("allyear",e+1+" - "+(e+10));break;case"year":i.removeClass("e-dp-viewyears e-dp-viewallyears e-dp-viewdays").addClass("e-dp-viewmonths");n("tbody,tr.e-week-header",i).hide();n(n(i).find(".e-datepicker-months")).show();r=this.model.enableStrictMode&&this._calendarDate<this._dateValue?this._calendarDate.getFullYear():u.getFullYear();o.text(r);this._checkArrows(r,r);this._hoverMonth=u.getMonth();this._addFocus("month",this._hoverMonth);break;case"month":i.removeClass("e-dp-viewyears e-dp-viewallyears e-dp-viewmonths").addClass("e-dp-viewdays ")}},_depthLevel:function(t){var i=this.sfCalendar;switch(t){case"year":n(i.find(".e-current-year,.e-current-allyear")).on("click",n.proxy(this._backwardNavHandler,this));this._on(n(".e-current-month",this.sfCalendar),"click",n.proxy(this._onDepthSelectHandler,this));break;case"decade":n(i.find(".e-current-allyear")).on("click",n.proxy(this._backwardNavHandler,this));n(".e-current-year",this.sfCalendar).on("click",n.proxy(this._onDepthSelectHandler,this));break;case"century":n(i.find(".e-current-allyear")).on("click",n.proxy(this._onDepthSelectHandler,this));break;case"month":this._on(i.find(".current-month,.other-month,.e-current-month,.e-current-year,.e-current-allyear"),"click",n.proxy(this._backwardNavHandler,this));this._on(i.find(".current-month , .other-month"),"click",n.proxy(this._onSetCancelDateHandler,this))}},_onDepthSelectHandler:function(t){if(this.model.readOnly||!this.model.enabled)return!1;n(t.target).hasClass("e-current-month")?this._dateValue=new Date(this._dateValue.setMonth(parseInt(t.target.attributes.index.value))):n(t.target).hasClass("e-current-year")?this._dateValue=new Date(this._dateValue.setFullYear(parseInt(t.target.innerHTML))):n(t.target).hasClass("e-current-allyear")&&(this._dateValue=new Date(this._dateValue.setFullYear(parseInt(t.target.innerHTML))));this._onSetCancelDateHandler(t)},_datepickerMonths:function(t,i,r){for(var e,o,u,s,h=function(n){return document.createElement(n)},f=0,c=0;c<3;c++){for(e=n(h("tr")),o=0;o<4;o++)u=n(h("td")).addClass("e-current-month e-state-default").attr({index:f}).attr(this._isIE8?{unselectable:"on"}:{}).html(this.Date.abbrMonthNames[f++]),r.getFullYear()<this.model.minDate.getFullYear()||r.getFullYear()>this.model.maxDate.getFullYear()?(u.addClass("e-hidedate"),u.removeClass("e-current-month")):(r.getFullYear()<=this.model.minDate.getFullYear()&&f<this.model.minDate.getMonth()+1||r.getFullYear()>=this.model.maxDate.getFullYear()&&f>this.model.maxDate.getMonth()+1)&&(u.addClass("e-hidedate"),u.removeClass("e-current-month")),e.append(u);t.append(e)}i.append(t);s=r.getFullYear();this._checkArrows(s,s)},_datepickerYears:function(t,i,r){for(var e,s,h,u,c=function(n){return document.createElement(n)},l=parseInt(r)-(parseInt(r)%10+1),f=[],o=0;o<12;o++)f.push(l+o);for(e=0,s=0;s<3;s++){for(h=n(c("tr")),o=0;o<4;o++)u=n(c("td")),u.attr(this._isIE8?{unselectable:"on"}:{}),e==0?u.addClass("e-year-first e-current-year "):e==11?u.addClass("e-year-last e-current-year "):u.addClass("e-current-year e-state-default"),(f[e]<this.model.minDate.getFullYear()||f[e]>this.model.maxDate.getFullYear())&&(u.addClass("e-hidedate"),u.removeClass("e-current-year")),u.html(f[e++]),h.append(u);t.append(h)}i.append(t);this._checkArrows(f[0],f[f.length])},_datepickerAllYears:function(t,i,r){for(var f,h,c,u,e=parseInt(r)-(parseInt(r)%100+10),a=e,s=[],l=this._isIE8||this._isIE9?"":"\n",o=0;o<12;o++)s.push(parseInt(e)+" -"+l+parseInt(e+9)),e=e+10;for(f=0,h=0;h<3;h++){for(c=n(document.createElement("tr")),o=0;o<4;o++)u=n(document.createElement("td")),u.attr(this._isIE8?{unselectable:"on"}:{}),f==0?u.addClass("e-allyear-first e-current-allyear "):f==11?u.addClass("e-allyear-last e-current-allyear "):u.addClass("e-current-allyear e-state-default"),(parseInt(s[f].split("-\n")[1])<this.model.minDate.getFullYear()||parseInt(s[f].split("-\n")[0])>this.model.maxDate.getFullYear())&&(u.addClass("e-hidedate"),u.removeClass("e-current-allyear")),u.html(s[f++]),c.append(u);t.append(c)}i.append(t)},_renderHeader:function(i){var c=n(document.createElement("thead")),e=t.preferredCulture(this.model.locale).calendars.standard.days,o,f,r,u,s,h;if(i.model.dayHeaderFormat!="none")for(o=t.buildTag("tr.e-week-header").attr({role:"columnheader"}).attr(this._isIE8?{unselectable:"on"}:{}),f=this.Date.firstDayOfWeek;f<this.Date.firstDayOfWeek+7;f++)r=f%7,u=e.names[r],s=i.model.dayHeaderFormat=="short"?e.namesAbbr[r]:i.model.dayHeaderFormat=="long"?u:e.namesShort[r],h=t.buildTag("th","",{},{scope:"col",abbr:u,date:u,title:this._formatter(u,"dddd"),"class":r==0||r==6?"e-week-end":"e-week-day"}).attr(this._isIE8?{unselectable:"on"}:{}).html(s),o.append(h);return c.append(o)},_renderCalendar:function(i,u){var k=this,h,s,e,d,g,nt,l,p,w;i=n.extend({},t.DatePicker.prototype.defaults,i);this.Date.firstDayOfWeek=this.model.startDay;h=u?u:this._calendarDate?this._calendarDate:k._zeroTime(new Date);s=n("table",this.sfCalendar);s.empty();s.append(this._renderHeader(i));e=t.buildTag("tbody.e-datepicker-allyears","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{});this._datepickerAllYears(e,s,h.getFullYear());e=t.buildTag("tbody.e-datepicker-years","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{});this._datepickerYears(e,s,h.getFullYear());var tt=i.model.month==r?h.getMonth():i.model.month,rt=i.model.year||h.getFullYear(),f=new Date(rt,tt,1,0,0,0),a=this.Date.firstDayOfWeek-f.getDay()+1;a>1&&(a-=7);d=Math.ceil((-1*a+1+this._getDaysInMonth(f))/7);this._addDays(f,a-1);g=k._zeroTime(new Date);nt=this._calendarDate;e=t.buildTag("tbody.e-datepicker-months","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{});this._datepickerMonths(e,s,h);e=t.buildTag("tbody.e-datepicker-days","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{});for(var ut=0,it=!0,b=!0;ut++<d;){for(l=jQuery(document.createElement("tr")),p=0;p<7;p++){var v=f.getMonth()==tt,y=this._isSpecialDates(f),ft=this._checkDisableRange(f),c=this._getIndex,o=n(document.createElement("td")).html(y?"<span><\/span>"+f.getDate():f.getDate()+"").attr({date:f.toDateString(),title:this.model.showTooltip?y&&this.model.specialDates[c][this._mapField._tooltip]?this.model.specialDates[c][this._mapField._tooltip]:this._formatter(f,this.model.tooltipFormat):"","aria-selected":!1,role:"gridcell"}).attr(this._isIE8?{unselectable:"on"}:{}).addClass((v?"current-month e-state-default ":"other-month e-state-default ")+(this._isWeekend(f)?this._ejHLWeekEnd?"e-dp-weekend e-week-end ":this.model.highlightWeekend?"e-week-end ":"":"e-week-day ")+(v&&f.getTime()==g.getTime()?"today ":""));o.find("span:first-of-type").addClass(y?this.model.specialDates[c][this._mapField._icon]?"e-special-date-icon "+this.model.specialDates[c][this._mapField._icon]+" ":"e-special-day":"");o.addClass(y?this.model.specialDates[c][this._mapField._custom]?this.model.specialDates[c][this._mapField._custom]:"":"");ft&&this._disableDates({date:f,element:o});nt.getTime()==f.getTime()&&v&&(o.hasClass("e-hidedate")||(this.model.value?(o.addClass("e-active").attr({"aria-selected":!0}),this.model.highlightSection=="week"&&l.addClass("e-selected-week"),this.model.highlightSection=="month"&&e.addClass("e-selected-month"),this.model.highlightSection=="workdays"&&l.addClass("e-work-week")):o.addClass("e-state-hover").attr({"aria-selected":!1})),this._hoverDate||(o.hasClass("e-hidedate")||o.addClass("e-state-hover"),this._hoverDate=f.getDate()-1));w=!0;(f<this.model.minDate||f>this.model.maxDate)&&(o.addClass("e-hidedate"),o.removeClass("current-month"),this.model.showOtherMonths&&o.removeClass("other-month"),w=b=!1);v&&(w&&it&&(this._tempMinDate=f,it=!1,b=!0),b&&(this._tempMaxDate=f));this._trigger("beforeDateCreate",{date:f,value:this._formatter(f,this.model.dateFormat),element:o});l.append(o);f=new Date(f.getFullYear(),f.getMonth(),f.getDate()+1,0,0,0)}e.append(l)}s.append(e);this._DRPdisableFade?(n(e).css("display","block"),n(e).css({display:"table-row-group","vertical-align":"middle","border-color":"inherit"})):this._isIE8||this._isIE7?n(e).css("display","block"):n(e).fadeIn("fast");this.model.startLevel===this.model.depthLevel?this._depthLevel(this.model.depthLevel):this.model.depthLevel!="month"&&this.model.depthLevel!=""?this.model.startLevel=="century"?this._depthLevel(this.model.depthLevel):this.model.startLevel=="decade"&&this.model.depthLevel!="century"?this._depthLevel(this.model.depthLevel):this.model.startLevel=="year"&&this.model.depthLevel!="decade"&&this.model.depthLevel!="century"?this._depthLevel(this.model.depthLevel):(this._on(s.find(".current-month,.other-month,.e-current-month,.e-current-year,.e-current-allyear"),"click",n.proxy(this._backwardNavHandler,this)),this._on(s.find(".current-month , .other-month"),"click",n.proxy(this._onSetCancelDateHandler,this))):(this._on(s.find(".current-month,.other-month,.e-current-month,.e-current-year,.e-current-allyear"),"click",n.proxy(this._backwardNavHandler,this)),this._on(s.find(".current-month , .other-month"),"click",n.proxy(this._onSetCancelDateHandler,this)));this._otherMonthsVisibility();this._checkDateArrows()},_checkDisableRange:function(n){return!t.isNullOrUndefined(this._disableCollection[n.getFullYear()])&&jQuery.inArray(n.getMonth(),this._disableCollection[n.getFullYear()])!==-1?!0:!1},_initDisableObj:function(){var r,n,u;for(this._disableCollection={},i=0;i<this.model.blackoutDates.length;i++)r=this._checkInstanceType(this.model.blackoutDates[i]),r&&(n=r.getFullYear(),u=r.getMonth(),t.isNullOrUndefined(this._disableCollection[n])&&(this._disableCollection[n]=[]),jQuery.inArray(u,this._disableCollection[n])==-1&&this._disableCollection[n].push(u))},_disableDates:function(n){for(i=0;i<this.model.blackoutDates.length;i++){var t=this._checkInstanceType(this.model.blackoutDates[i]);t&&+n.date==+t&&n.element.removeClass("current-month").addClass("e-hidedate")}},_keyboardNavigation:function(n){var t;if(this._animating)return!1;if(this._isOpen&&(n.keyCode==37||n.keyCode==38||n.keyCode==39||n.keyCode==40||n.keyCode==13||n.keyCode==36||n.keyCode==35)){if(n.preventDefault&&n.preventDefault(),n.altKey)return n.keyCode==13?(this._setCurrDate(n),!1):void 0;t={row:null,col:null};t.col=this.sfCalendar.find("tbody tr td.e-state-hover").index();t.row=this.sfCalendar.find("tbody tr td.e-state-hover").parent().index();t.col=t.col!=-1?t.col+1:this.sfCalendar.find("tbody tr td.e-active").index()+1;t.row=t.row!=-1?t.row+1:this.sfCalendar.find("tbody tr td.e-active").parent().index()+1;var f=this.sfCalendar.find("table")[0].className,i,r=3,u=4;switch(f){case"e-dp-viewallyears":i=this._changeRowCol(t,n.keyCode,r,u,"yearall",n.ctrlKey);n.ctrlKey||(this._hoverAllYear=this.sfCalendar.find("tbody.e-datepicker-allyears tr td").index(i));break;case"e-dp-viewyears":i=this._changeRowCol(t,n.keyCode,r,u,"year",n.ctrlKey);n.ctrlKey||(this._hoverYear=this.sfCalendar.find("tbody.e-datepicker-years tr td").index(i));break;case"e-dp-viewmonths":i=this._changeRowCol(t,n.keyCode,r,u,"month",n.ctrlKey);n.ctrlKey||(this._hoverMonth=this.sfCalendar.find("tbody.e-datepicker-months tr td").index(i));break;case"e-dp-viewdays":r=this.sfCalendar.find("tbody.e-datepicker-days tr").length;u=7;i=this._changeRowCol(t,n.keyCode,r,u,"day",n.ctrlKey);n.ctrlKey||(this._hoverDate=this._getDateObj(i).getDate()-1)}n.ctrlKey||(this.sfCalendar.find("table td").removeClass("e-state-hover"),i.addClass("e-state-hover"))}else if(this.model.displayInline||n.keyCode!=27&&n.keyCode!=9){if(n.altKey&&n.keyCode==40)return this.show(),!1}else this.hide()},_changeRowCol:function(t,i,r,u,f,e){var h,s={parent:null,child:null},o,v,l,c,a;switch(f){case"day":h="tbody.e-datepicker-days tr td.current-month";s.parent=".e-datepicker-days";s.child=".current-month";break;case"month":h="tbody.e-datepicker-months tr td.e-current-month";s.parent=".e-datepicker-months";s.child=".e-current-month";break;case"year":h="tbody.e-datepicker-years tr td.e-current-year";s.parent=".e-datepicker-years";s.child=".e-current-year";break;case"yearall":h="tbody.e-datepicker-allyears tr td.e-current-allyear";s.parent=".e-datepicker-allyears";s.child=".e-current-allyear"}if(t.row<=0&&t.col<=0)return this.sfCalendar.find(h+":first");v=this;switch(i){case 36:return this.sfCalendar.find(h+":first");case 35:return this.sfCalendar.find(h+":last");case 38:if(e&&this.model.allowDrillDown)this._forwardNavHandler();else if(t.row>1)t.row-=1;else return this._processNextPrevDate(!0),this.sfCalendar.find(h+":nth-child("+t.col+"):last");if(o=this._getCell(t,s),o.length<=0){if(o=this._findVisible(t,s,"up"),o!==null)return o;this._processNextPrevDate(!0);o=this.sfCalendar.find(h+":nth-child("+t.col+"):last")}return o;case 37:if(e)return this._processNextPrevDate(!0),this.sfCalendar.find("tbody tr td.e-state-hover");if(t.col>1)t.col-=1;else if(t.row>1)t={row:t.row-1,col:u};else return this._processNextPrevDate(!0),this.sfCalendar.find(h+":last");if(o=this._getCell(t,s),o.length<=0){if(o=this._findVisible(t,s,"left"),o!==null)return o;this._processNextPrevDate(!0);o=this.sfCalendar.find(h+":last")}return o;case 39:if(e)return this._processNextPrevDate(!1),this.sfCalendar.find("tbody tr td.e-state-hover");if(t.col<u)t.col+=1;else if(t.row<r)t={row:t.row+1,col:1};else return this._processNextPrevDate(!1),this.sfCalendar.find(h+":first");if(o=this._getCell(t,s),o.length<=0){if(o=this._findVisible(t,s,"right"),o!==null)return o;this._processNextPrevDate(!1);o=this.sfCalendar.find(h+":first")}return o;case 40:if(!e){if(t.row<r)t.row+=1;else return this._processNextPrevDate(!1),this.sfCalendar.find(h+":nth-child("+t.col+"):first");if(o=this._getCell(t,s),o.length<=0){if(o=this._findVisible(t,s,"down"),o!==null)return o;this._processNextPrevDate(!1);o=this.sfCalendar.find(h+":nth-child("+t.col+"):first")}return o}case 13:l=n("table",this.sfCalendar).get(0).className;c=this._getCell(t,s);a=n(c)[0];l=="e-dp-viewmonths"&&this.model.startLevel=="year"&&this.model.depthLevel=="year"?(this._dateValue=new Date(this._dateValue.setMonth(parseInt(a.attributes.index.value))),this._onSetCancelDateHandler({type:null,target:c})):l=="e-dp-viewyears"&&this.model.startLevel=="decade"&&this.model.depthLevel=="decade"||l=="e-dp-viewallyears"&&this.model.startLevel=="century"&&this.model.depthLevel=="century"?(this._dateValue=new Date(this._dateValue.setFullYear(parseInt(a.innerHTML))),this._onSetCancelDateHandler({type:null,target:c})):l=="e-dp-viewdays"?(this._backwardNavHandler(c),this._onSetCancelDateHandler({type:null,target:c})):this._backwardNavHandler(c)}return this._getCell(t,s)},_findVisible:function(n,t,r){var f=n.col,u=n.row,e=t.child.slice(1,t.child.length);for(i=0;i>=0;i++){if(nextElement=this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+u+") td:nth-child("+f+")"),nextElement.length<=0)return null;if(nextElement.hasClass("e-hidedate")||!nextElement.is(":visible")){if((r=="right"||r=="left"?r=="right"?f++:f--:r=="down"?u++:u--,u<=0||u>this.sfCalendar.find("tbody"+t.parent+" tr").length)||(f>this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+u+") td").length&&(u++,f=1),f<=0&&(u--,f=this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+u+") td").length),u<=0||u>this.sfCalendar.find("tbody"+t.parent+" tr").length))return null}else{if(nextElement.hasClass("other-month"))return null;if(nextElement.hasClass(e))return n.col=f,n.row=u,nextElement}}},_getCell:function(n,t){return this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+n.row+") td"+t.child+":nth-child("+n.col+")")},_getDateObj:function(n){return new Date(n.attr("date"))},_touchCalendar:function(n){var t=this.sfCalendar.find("table")[0].className;switch(n.type){case"pinchin":t!="e-dp-viewdays"&&this._keyboardNavigation({keyCode:13});break;case"pinchout":t!="e-dp-viewallyears"&&this.model.allowDrillDown&&this._forwardNavHandler();break;case"swipeleft":this._processNextPrevDate(!1);break;case"swiperight":this._processNextPrevDate(!0)}},show:function(i){var r,u;if(this._isOpen)return!1;if(r=this,this._popupOpen=!0,u=this._preValue!=null?new Date(this._preValue.toString()):this._preValue,this.model.enabled){if(this.model.displayInline||this._setDatePickerPosition(),this._trigger("beforeOpen",{element:this.sfCalendar,events:i}))return!1;this.sfCalendar.attr({"aria-hidden":"false"});r._isOpen=!0;this.sfCalendar.slideDown(this.model.enableAnimation?this.animation.open.duration:0,function(){if(r.model&&!r.model.displayInline)n(document).on("mousedown",n.proxy(r._onDocumentClick,r))});this._updateInputVal();this._refreshLevel(u);this._trigger("open",{prevDate:u,date:this.model.value,value:this._formatter(this.model.value,this.model.dateFormat)});n(window).on("resize",n.proxy(this._OnWindowResize,this));this.model.displayInline||this._on(t.getScrollableParents(this.wrapper),"scroll",this.hide);this._isInputBox()&&this.wrapper.addClass("e-active")}},hide:function(i){if(!this._isOpen||this._getInternalEvents||this._trigger("beforeClose",{element:this.sfCalendar,events:i}))return!1;var u=this;(this._popupOpen=!1,this.sfCalendar.attr({"aria-hidden":"true"}),this._popClose&&i!=r&&i.type!="click")||(this.sfCalendar.slideUp(this.model.enableAnimation?this.animation.close.duration:0,function(){u._isOpen=!1;n(document).off("mousedown",n.proxy(u._onDocumentClick,u));u._setWaterMark()}),this.element.val()!=""&&this._validateInputVal(),this._trigger("close",{prevDate:this._prevDate,date:this.model.value,value:this._formatter(this.model.value,this.model.dateFormat)}),n(window).off("resize",n.proxy(this._OnWindowResize,this)),this._off(t.getScrollableParents(this.wrapper),"scroll",this.hide),this._isInputBox()&&this.wrapper.removeClass("e-active"))},enable:function(){this.model.enabled=!0;this.element.removeClass("e-disable").attr({"aria-disabled":!1});this.element.prop("disabled",!1);this.dateIcon&&this.dateIcon.removeClass("e-disable").attr({"aria-disabled":!1});this._isIE8&&this.dateIcon&&this.dateIcon.children().removeClass("e-disable");this.element.prop("disabled",!1);this._isSupport||this._hiddenInput.prop("disabled",!1);this.sfCalendar.removeClass("e-disable").attr({"aria-disabled":!1})},disable:function(){this.model.enabled=!1;this.element.addClass("e-disable").attr({"aria-disabled":!0});this.element.attr("disabled","disabled");this.dateIcon&&this.dateIcon.addClass("e-disable").attr({"aria-disabled":!0});this._isIE8&&this.dateIcon&&this.dateIcon.children().addClass("e-disable");this.element.attr("disabled","disabled");this._isSupport||this._hiddenInput.attr("disabled","disabled");this.sfCalendar.addClass("e-disable").attr({"aria-disabled":!0});this._isOpen&&(this.element.is(":input")&&this.element.blur(),this.model.displayInline||this.hide())},getValue:function(){return this._formatter(this.model.value,this.model.dateFormat)},_wireEvents:function(){if(this._allowQuickPick(this.model.allowDrillDown),this._on(n(".e-next",this.sfCalendar),"click",n.proxy(this._previousNextHandler,this)),this._on(n(".e-prev",this.sfCalendar),"click",n.proxy(this._previousNextHandler,this)),!this.model.displayInline){this.sfCalendar.on("mouseenter touchstart",n.proxy(function(){this._popClose=!0},this));this.sfCalendar.on("mouseleave touchend",n.proxy(function(){this._popClose=!1},this))}if(this.element.is(":input")&&this.model.allowEdit&&(this._on(this.element,"blur",this._onFocusOut),this._on(this.element,"focus",this._onFocusIn),this._on(this.element,"keydown",this._onKeyDown)),!this.model.allowEdit){this.element.attr("readonly","readonly");this.element.on("mousedown",n.proxy(this._showDatePopUp,this))}this.model.showFooter&&this._on(n(".e-footer",this.sfCalendar),"click",this._setCurrDate);this._on(this.sfCalendar,"pinchin pinchout swipeleft swiperight",n.proxy(this._touchCalendar,this))},_bindDateButton:function(){this._on(this.dateIcon,"mousedown",this._showDatePopUp);this.model.allowEdit&&this.element.off("mousedown",n.proxy(this._showDatePopUp,this))},_bindInputEvent:function(){this._off(this.dateIcon,"mousedown",this._showDatePopUp)},_specificFormat:function(){var i=t.globalize._getDateParseRegExp(t.globalize.findCulture(this.model.locale).calendar,this.model.dateFormat);return n.inArray("dddd",i.groups)>-1||n.inArray("ddd",i.groups)>-1},_onFocusOut:function(t){var r,i,u;this._isFocused=!1;r=this._preValue!=null?new Date(this._preValue.toString()):this._preValue;this._validateOnFocusOut(this._validateValue(),t);this.wrapper.removeClass("e-focus");this._isOpen&&!this.model.displayInline||this._setWaterMark()||this._compareDate(this._preValue,this._parseDate(this.element.val(),this.model.dateFormat))||this._updateInputVal();(!this._isOpen||this.model.displayInline)&&this._refreshLevel(r);this.element.val()!=""&&(!this._isOpen||this.model.displayInline)&&this._validateInputVal();this.element.off("keydown",n.proxy(this._keyboardNavigation,this));this.model.showPopupButton||this._off(this.element,"click",this._elementClick);i=this.element.val();u={prevDate:this._prevDate,value:i};this._specificFormat()?this._prevDate!=i&&this._setDateValue(i,!0):this._setDateValue(i);this.model.value||this._clearSelected();this._trigger("focusOut",u);this._checkErrorClass()},_onFocusIn:function(t){if(this._isSupport&&(t.preventDefault(),this._isFocused=!0),this.wrapper.removeClass("e-error").attr("aria-invalid","false"),this.isValidState=!0,this.wrapper.addClass("e-focus"),!this.model.readOnly){this._isSupport||this._hiddenInput.css("display","none");this.element.on("keydown",n.proxy(this._keyboardNavigation,this));this.model.showPopupButton||this.model.readOnly||this.show(t);this.model.showPopupButton||this._on(this.element,"click",this._elementClick);this._trigger("focusIn",{date:this.model.value,value:this._formatter(this.model.value,this.model.dateFormat)})}},_elementClick:function(n){this._popupOpen||this.show(n)},_removeWatermark:function(){this.element.val()==""||this._isSupport||this._hiddenInput.css("display","none")},_refreshPopup:function(){this._refreshDatepicker();this._startLevel(this.model.startLevel)},_refreshLevel:function(n){if(this.model.startLevel==this.model.depthLevel&&this.model.startLevel!="month"){var t=this._stringToObject(this.element.val());t=this._validateYearValue(t);t&&(this._compareDate(n,t)||this._refreshPopup())}},_validateOnFocusOut:function(n,i){var f=this._preValue!=null?this._calendarDate:this._preValue,o=this._formatter(f,this.model.dateFormat),e,r,u;this._specificFormat()&&n>this.model.minDate&&n<this.model.maxDate?n==null?this.model.value=f:(this.model.value=n,e=this._formatter(n,this.model.dateFormat,this.model.locale)):e=this._formatter(this._parseDate(this._formatter(new Date,"MM/dd/yyyy")),this.model.dateFormat);r=!1;u=!1;n==null||this.model.enableStrictMode?n!=null||this.model.enableStrictMode?n?(n<this.model.minDate||n>this.model.maxDate?(this.isValidState=!1,u=!0,this._calendarDate=n<this.model.minDate?this.model.minDate:this.model.maxDate):this.isValidState=!0,this._triggerChangeEvent(i),u&&this._getInternalEvents&&this._trigger("outOfRange")):(this.isValidState=!1,this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate)):(this._preTxtValue==null||this.element.val()==""?(this.element.val(""),this._isSupport||this._hiddenInput.css("display","block")):this.element.val(o),this._triggerChangeEvent(i)):(t.isNullOrUndefined(this.model.value)&&(this.model.value=this._parseDate(this.element.val())),this.model.maxDate<this.model.minDate&&(this.model.minDate=this.model.maxDate),this.model.enableStrictMode||(n?(n<this.model.minDate||n>this.model.maxDate)&&(r=!0,this._calendarDate=n=n<this.model.minDate?this.model.minDate:this.model.maxDate):(this.element.val(""),this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate)),this.isValidState=!0),r&&this.element.val(this._formatter(n,this.model.dateFormat)),this._compareDate(this._preValue,this._parseDate(this.element.val(),!0))||this._triggerChangeEvent(i))},_onKeyDown:function(n){if(n.keyCode===13){var t=this._preValue!=null?new Date(this._preValue.toString()):this._preValue;this._validateOnFocusOut(this._validateValue(),n);this._isOpen&&!this.model.displayInline||this._setWaterMark()||this._compareDate(this._preValue,this._parseDate(this.element.val(),this.model.dateFormat))||this._updateInputVal();(!this._isOpen||this.model.displayInline)&&this._refreshLevel(t);this.element.val()!=""&&(!this._isOpen||this.model.displayInline)&&this._validateInputVal();this._checkErrorClass()}},_showhidePopup:function(n){if(!this.model.enabled)return!1;this._isOpen?(this._isFocused||!this.element.is(":input")||t.isTouchDevice()||this.element.focus(),this._cancelValue||this.hide(n)):(this._isFocused||!this.element.is(":input")||t.isTouchDevice()||this.element.focus(),this.show(n))},_compareDate:function(n,t){return+n==+t?!0:!1},_validateDate:function(n){var t=!0,r;if(n!=null){for(i=0;i<this.model.blackoutDates.length;i++)r=this._checkInstanceType(this.model.blackoutDates[i]),r&&+n==+r&&(t=!1);(n<this.model.minDate||n>this.model.maxDate)&&this.model.enableStrictMode&&(t=!1,this.isValidState=!1)}return t},_triggerChangeEvent:function(n){var i,u=this.element.val()==""?null:this.element.val(),t;this._prevDate=this._formatter(this._preValue,this.model.dateFormat);t={prevDate:this._prevDate,value:u,isInteraction:!!n};i=this._specificFormat()&&n!=r&&n.type=="keydown"&&this._formatter(this._preValue,this.model.dateFormat,this.model.locale)!=this.element.val()?this._parseDate(this.element.val(),!0):this._specificFormat()&&n!=r&&n.type=="blur"?this.model.value:this._parseDate(u);i=this._validateYearValue(i);this._validateDate(i)||(i=null);this._compareDate(this._preValue,i)?this.element.val()==""&&this._prevDate==null||this.element.val()==this._prevDate||(t.value=this.element.val(),this._trigger("_change",t)):(this._preValue=this.model.value=i,t.value=this._formatter(this.model.value,this.model.dateFormat),this.model.value&&(this._clickedDate=this._calendarDate=this.model.value),this.model.displayInline&&!this._isInputBox()&&this._hiddenInput.attr("value",u),this.model.value||this.model.enableStrictMode||this._setDateValue(this.model.value),t.value=u,this._trigger("_change",t),t.value=this._formatter(this.model.value,this.model.dateFormat),this._trigger("change",t),this._checkErrorClass())},_triggerSelectEvent:function(){var t=this.element.val(),n;this._parseDate(t)&&(n={prevDate:this._prevDate,date:this.model.value,value:t,isSpecialDay:this._isSpecialDates(this.model.value)},this._prevDate!=t&&this._parseDate(n.value)&&this.model.value>=this.model.minDate&&this.model.value<=this.model.maxDate&&(this._cancelValue=this._trigger("select",n)),this._dt_drilldown&&this._trigger("dt_drilldown",n))},_onDocumentClick:function(t){this.model&&(n(t.target).is(this.popup)||n(t.target).parents(".e-popup").is(this.popup)||n(t.target).is(this.wrapper)||n(t.target).parents(".e-datewidget").is(this.wrapper)?(n(t.target).is(this.popup)||n(t.target).parents(".e-popup").is(this.popup))&&t.preventDefault():this.hide(t))},_OnWindowResize:function(){this._setDatePickerPosition()},_showDatePopUp:function(n){var t=!1;if((n.button?t=n.button==2:n.which&&(t=n.which==3),!t)&&(this._isSupport||this.model.showPopupButton||(n.preventDefault(),this._onFocusIn()),!this.model.readOnly)){if(n.preventDefault(),!this.model.enabled&&this.model.displayInline)return!1;this._showhidePopup(n)}},_layoutChanged:function(){this._getInternalEvents&&this._trigger("layoutChange")},_setCurrDate:function(n){if(this.model.readOnly||!this.model.enabled)return!1;n&&n.preventDefault();var t=this;this._prevDate=this._formatter(this.model.value,this.model.dateFormat);this._dateValue=this._zeroTime(new Date);this.model.value=this._calendarDate=new Date(this._dateValue.toString());this._setDateValue(this.model.value);this._triggerSelectEvent(n);this._triggerChangeEvent(n);this._refreshDatepicker();this._changeDayClass();this._startLevel(this.model.startLevel);this._onSetCancelDateHandler(n);this._layoutChanged()},_changeDayClass:function(){var n=this.popup.children("table")[0].className;n!="e-dp-viewdays"&&this.popup.children("table").removeClass(n).addClass("e-dp-viewdays")},_onSetCancelDateHandler:function(t){if(this.model.readOnly||!this.model.enabled||t&&(n(t.target).hasClass("e-disable")||n(t.target).hasClass("e-hidedate")))return!1;t&&t.type&&t.preventDefault();this._specificFormat()?this._prevDate=this.element.val():this.model.value=this._parseDate(this.element.val());this._prevDate=this._formatter(this.model.value,this.model.dateFormat);this._setDateValue(this._dateValue);this._triggerSelectEvent(t);this._triggerChangeEvent(t);this._dateValue=new Date(this.model.value.toString());this.element.is(":input")&&!this.model.displayInline&&this._showhidePopup(t);t&&n(t.currentTarget).hasClass("other-month")&&this._refreshDatepicker();this._cellSelection()},_closeCalendar:function(n){n&&n!=this.element||this.sfCalendar.empty().remove()},_checkErrorClass:function(){this.wrapper&&(this.isValidState?this.wrapper.removeClass("e-error").attr("aria-invalid","false"):this.wrapper.addClass("e-error").attr("aria-invalid","true"))},_getLocalizedLabels:function(){return t.getLocalizedConstants(this.sfType,this.model.locale)}});t.DatePicker.Locale=t.DatePicker.Locale||{};t.DatePicker.Locale["default"]=t.DatePicker.Locale["en-US"]={watermarkText:"Select date",buttonText:"Today"};t.DatePicker.Header={None:"none",Short:"short",Min:"min",Long:"long"};t.DatePicker.HighlightSection={Month:"month",Week:"week",WorkDays:"workdays",None:"none"};t.DatePicker.Level={Month:"month",Year:"year",Decade:"decade",Century:"century"}})(jQuery,Syncfusion)}),function(n){typeof define=="function"&&define.amd?define(["./../common/ej.globalize.min","./../common/ej.core.min","./../common/ej.scroller.min"],n):n()}(function(){(function(n,t,r){t.widget("ejTimePicker","ej.TimePicker",{element:null,model:null,validTags:["input"],_addToPersist:["value"],_rootCSS:"e-timepicker",_setFirst:!1,type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"],requireFormatters:!0},defaults:{cssClass:"",timeFormat:"",value:null,enableAnimation:!0,locale:"en-US",htmlAttributes:{},readOnly:!1,showPopupButton:!0,enableStrictMode:!1,interval:30,hourInterval:1,minutesInterval:1,secondsInterval:1,height:"",width:"",minTime:"12:00 AM",maxTime:"11:59 PM",showRoundedCorner:!1,enableRTL:!1,popupHeight:"191px",popupWidth:"auto",enabled:!0,enablePersistence:!1,disableTimeRanges:null,validationRules:null,validationMessages:null,focusIn:null,focusOut:null,beforeChange:null,change:null,select:null,create:null,destroy:null,beforeOpen:null,open:null,close:null},dataTypes:{timeFormat:"string",minTime:"string",maxTime:"string",readOnly:"boolean",interval:"number",showPopupButton:"boolean",locale:"string",hourInterval:"number",minutesInterval:"number",secondsInterval:"number",enabled:"boolean",enablePersistence:"boolean",enableAnimation:"boolean",enableStrictMode:"boolean",disableTimeRanges:"data",htmlAttributes:"data",validationRules:"data",validationMessages:"data"},observables:["value"],enable:function(){this.model.enabled||(this.element[0].disabled=!1,this.element.prop("disabled",!1),this.model.enabled=!0,this.element.removeClass("e-disable").attr("aria-disabled",!1),this.model.showPopupButton&&(this.timeIcon.removeClass("e-disable").attr("aria-disabled",!1),this.popupList.removeClass("e-disable").attr("aria-disabled",!1)),this._isIE8&&this.timeIcon.children().removeClass("e-disable"))},disable:function(){this.model.enabled&&(this.element[0].disabled=!0,this.model.enabled=!1,this.element.attr("disabled","disabled"),this.element.addClass("e-disable").attr("aria-disabled",!0),this.model.showPopupButton&&(this.timeIcon.addClass("e-disable").attr("aria-disabled",!0),this.popupList.addClass("e-disable").attr("aria-disabled",!0)),this._isIE8&&this.timeIcon.children().addClass("e-disable"),this._hideResult())},getValue:function(){return this.element.val()},setCurrentTime:function(){this.model.readOnly||this._setMask()},show:function(){this.showDropdown||this._getInternalEvents||this._showResult()},hide:function(){this.showDropdown&&this._hideResult()},_ISORegex:function(){this._tokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;this._extISORegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/;this._basicISORegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/;this._numberRegex={2:/\d\d?/,4:/^\d{4}/,z:/Z|[+-]\d\d(?::?\d\d)?/gi,t:/T/,"-":/\-/,":":/:/};this._zeroRegex=/Z|[+-]\d\d(?::?\d\d)?/;this._dates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]];this._times=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]]},_timeFormat:function(n){var r,i;return n||(n=t.preferredCulture(this.model.locale).calendars.standard.patterns.t),r=this._validateTimeFormat(n),r&&(this.model.timeFormat=r,this.model.minTime=t.format(this._createObject(this._minTimeObj),this.model.timeFormat,this.model.locale),this.model.maxTime=t.format(this._createObject(this._maxTimeObj),this.model.timeFormat,this.model.locale),this.model.value?(this._setModelOption=!0,this.model.value=this._localizeTime(this.model.value),this.element.val(this.model.value)):(this._setModelOption=!1,i=this._localizeTime(this.element.val()),i&&this._checkMinMax(i)&&(this.model.value=i,this.element.val(i)))),r},_getTimeFormat:function(){this.model.timeFormat=t.preferredCulture(this.model.locale).calendar.patterns.t||"h:mm tt";this.seperator=this._getSeperator()},_changeSkin:function(n){this.wrapper.removeClass(this.model.cssClass).addClass(n);this.popupList&&this.popupList.removeClass(this.model.cssClass).addClass(n)},_localize:function(n){var i=this._createObject(this.model.value,!0);this.model.locale=n;this._getTimeFormat();this.model.minTime=t.format(this._createObject(this._minTimeObj),this.model.timeFormat,this.model.locale);this.model.maxTime=t.format(this._createObject(this._maxTimeObj),this.model.timeFormat,this.model.locale);i?(this.model.value=this._localizeTime(i),this.element.val(this.model.value)):(i=this._localizeTime(this.element.val()),i&&this._checkMinMax(i)&&(this.model.value=i,this.element.val(i)));this._getAmPm()},_setLocalize:function(n){var n=t.preferredCulture(n);n&&(this.model.locale=n.name=="en"?"en-US":n.name,t.isNullOrUndefined(this._options)||!t.isNullOrUndefined(this._options.timeFormat)&&this._options.timeFormat||(this.model.timeFormat=t.preferredCulture(this.model.locale).calendars.standard.patterns.t))},_updateInput:function(){if(!t.isNullOrUndefined(this._options)){var n=this._localizeTime(this._options.value);t.isNullOrUndefined(n)||typeof n=="string"&&this.model.enableStrictMode&&!this.model.value&&(this.element.val(this._options.value),this.isValidState=this.element.val()==""?!0:!1,this._checkErrorClass())}},_createMinMaxObj:function(){this._minTimeObj=this._createObject(this.model.minTime);this._minTimeObj||(this.model.minTime=t.format(this._createObject((new Date).setHours(0,0,0,0)),this.model.timeFormat,this.model.locale));this._maxTimeObj=this._createObject(this.model.maxTime);this._maxTimeObj||(this.model.maxTime=t.format(this._createObject((new Date).setHours(23,59,59,59)),this.model.timeFormat,this.model.locale))},_setMinMax:function(){var n=(new Date).setHours(0,0,0,0),i=(new Date).setHours(23,59,59,59);!t.isNullOrUndefined(this._options)&&t.isNullOrUndefined(this._options.minTime)&&(this.model.minTime=t.format(this._createObject(n),this.model.timeFormat,this.model.locale));!t.isNullOrUndefined(this._options)&&t.isNullOrUndefined(this._options.maxTime)&&(this.model.maxTime=t.format(this._createObject(i),this.model.timeFormat,this.model.locale));this._createMinMaxObj()},_init:function(n){if(this._options=n,this._cloneElement=this.element.clone(),this._ISORegex(),!this.element.is("input")||this.element.attr("type")&&this.element.attr("type")!="text")return!1;this._initialize();this._render();this._wireEvents();n&&n.value!=r&&n.value!=this.element.val()&&this._trigger("_change",{value:this.element.val()});this._updateInput();this._updateTextbox();this.model.validationRules!=null&&(this._initTimeValidator(),this._setTimeValidation())},_updateTextbox:function(){this._options!==r&&(this._options.value!==r||this.model.value)||this._setTime(this._localizeTime(this.model.minTime))},_setMinMaxTime:function(i,r){!t.isNullOrUndefined(r.minTime)&&n.trim(r.minTime)&&this._isValid(r.minTime)&&(this.model.minTime=r.minTime,this._minTimeObj=this._createObject(this.model.minTime),this._validateTimes());!t.isNullOrUndefined(r.maxTime)&&n.trim(r.maxTime)&&this._isValid(r.maxTime)&&(this.model.maxTime=r.maxTime,this._maxTimeObj=this._createObject(this.model.maxTime),this._validateTimes());this._validateMinMax();this._createMinMaxObj();t.isNullOrUndefined(r.minTime)||(r.minTime=this.model.minTime);t.isNullOrUndefined(r.maxTime)||(r.maxTime=this.model.maxTime);this._checkMinMax(this.model.value)||(this.model.enableStrictMode?(this.isValidState=!1,this.model.value=null):(this.model.minTime&&!this._compareTime(this.model.value,this.model.minTime,!0)&&(this.model.value=this.model.minTime),this.model.maxTime&&!this._compareTime(this.model.maxTime,this.model.value,!0)&&(this.model.value=this.model.maxTime)));i!==this.model.value&&this._isValid(this.model.value,!0)&&this.element.val(this.model.value)},_setModel:function(n){var r=!1,o=this.model.value,i,e,u,f,s;for(i in n)switch(i){case"timeFormat":u=this._createObject(this.model.value);this._preTimeformat=this.model.timeFormat;e=this._timeFormat(n[i]);n[i]=this.model.timeFormat;e&&(this.seperator=this._getSeperator());f=this._createObject(this.model.value);r=+u==+f?!1:!0;break;case"locale":u=this._createObject(this.model.value);this._localize(n[i]);this.model.minTime=t.format(this._createObject(this._minTimeObj),this.model.timeFormat,this.model.locale);this.model.maxTime=t.format(this._createObject(this._maxTimeObj),this.model.timeFormat,this.model.locale);f=this._createObject(this.model.value);r=+u==+f?!1:!0;break;case"interval":this.model.interval=n[i];break;case"cssClass":this._changeSkin(n[i]);break;case"showRoundedCorner":this._setRoundedCorner(n[i]);break;case"enableRTL":this._setRtl(n[i]);break;case"height":this._setHeight(n[i]);break;case"width":this.wrapper.width(n[i]);this._setListWidth();break;case"value":t.isPlainObject(n[i])&&(n[i]=null);this.model.value=t.format(this._createObject(n[i],!0),this.model.timeFormat,this.model.locale);this._ensureValue();this._enableMask();this.model.enableStrictMode&&!this._isValid(n[i],!0)&&(s=this._isValid(n[i])?this._localizeTime(n[i]):n[i],this.element.val(s));n[i]=this.model.value;r=!0;break;case"enableStrictMode":this.model.enableStrictMode=n[i];break;case"validationRules":this.model.validationRules!=null&&(this.element.rules("remove"),this.model.validationMessages=null);this.model.validationRules=jsondata[key];this.model.validationRules!=null&&(this._initTimeValidator(),this._setTimeValidation());break;case"validationMessages":this.model.validationMessages=jsondata[key];this.model.validationRules!=null&&this.model.validationMessages!=null&&(this._initValidator(),this._setValidation());break;case"popupHeight":this.model.popupHeight=n[i];this._setListHeight();break;case"popupWidth":this.model.popupWidth=n[i];this._setListWidth();break;case"enabled":n[i]?this.enable():this.disable();break;case"htmlAttributes":this._addAttr(n[i]);break;case"disableTimeRanges":this.model.disableTimeRanges=n[i];this._initStartEnd();this.model.value=t.format(this._createObject(this.element.val(),!0),this.model.timeFormat,this.model.locale);this._ensureValue();this._enableMask();this.model.enableStrictMode&&!this._isValid(this.element.val(),!0)&&this.element.val(this.element.val());r=!0}t.isNullOrUndefined(n.minTime)&&t.isNullOrUndefined(n.maxTime)||(this._setMinMaxTime(o,n),r=!0);t.isNullOrUndefined(n.showPopupButton)?!this.model.showPopupButton||!e&&t.isNullOrUndefined(n.minTime)&&t.isNullOrUndefined(n.maxTime)&&t.isNullOrUndefined(n.locale)&&t.isNullOrUndefined(n.interval)&&t.isNullOrUndefined(n.disableTimeRanges)||this._reRenderDropdown():this._showButton(n[i]);r&&(this._raiseChangeEvent(o,!0),n.value=this.model.value);this._checkErrorClass()},_destroy:function(){this.element.insertAfter(this.wrapper);this.wrapper.remove();this.element.removeClass("e-input").removeAttr("ondragstart draggable aria-atomic aria-live aria-readonly").val(this.element.attr("value"));this._cloneElement.attr("name")||this.element.removeAttr("name");this.popupList&&this.popupList.remove()},_initialize:function(){this.target=this.element[0];this.timeIcon=null;this._disabledItems=[];this.popupList=null;this.focused=!1;this.start=0;this.end=0;this.min=null;this.max=null;this.incomplete=!1;this.downPosition=0;this._setLocalize(this.model.locale);this._setMinMax();this._getAmPm();this.showDropdown=!1;this._activeItem=0;this.isValidState=!0;this._manualFocus=!1;this._isIE7=this._checkIE7();this._initStartEnd();t.isNullOrUndefined(this.model.value)&&this.element[0].value!=""&&(this.model.value=this.element[0].value);this._isIE8=t.browserInfo().name=="msie"&&t.browserInfo().version=="8.0"?!0:!1;this._getInternalEvents=!1;this._dateTimeInternal=!1;this.model.timeFormat?this.seperator=this._getSeperator():this._getTimeFormat()},_render:function(){this._renderWrapper();this._setDimentions();this._renderTimeIcon();this._validateTimes();this._createMinMaxObj();this._renderDropdown();this._addAttr(this.model.htmlAttributes);this._checkProperties();this._enableMask();this._checkErrorClass();this.element.attr({"aria-atomic":"true","aria-live":"assertive","aria-readonly":this.model.readOnly,value:this.model.value});(this.model.showPopupButton||!t.isNullOrUndefined(this.popupList))&&this.ul.find("li").attr({tabindex:-1,"aria-selected":!1})},_renderWrapper:function(){this.element.addClass("e-input").attr("tabindex","0");this.wrapper=t.buildTag("span.e-timewidget e-widget "+this.model.cssClass+"#"+this.target.id+"_timewidget").insertAfter(this.element);t.isTouchDevice()||this.wrapper.addClass("e-ntouch");this.container=t.buildTag("span.e-in-wrap e-box").append(this.element);this.wrapper.append(this.container)},_addAttr:function(i){var r=this;n.map(i,function(n,i){var u=i.toLowerCase();u=="class"?r.wrapper.addClass(n):u=="disabled"&&n=="disabled"?r.disable():u=="readOnly"&&n=="readOnly"?r.model.readOnly=!0:u=="style"||u=="id"?r.wrapper.attr(i,n):t.isValidAttr(r.element[0],i)?r.element.attr(i,n):r.wrapper.attr(i,n)})},_initTimeValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setTimeValidation:function(){var r,i,u,f;this.element.rules("add",this.model.validationRules);r=this.element.closest("form").data("validator");r=r?r:this.element.closest("form").validate();name=this.element.attr("name");r.settings.messages[name]={};for(i in this.model.validationRules)if(u=null,!t.isNullOrUndefined(this.model.validationRules[i])){if(t.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[i])){r.settings.messages[name][i]=n.validator.messages[i];for(f in this.model.validationMessages)i==f?u=this.model.validationMessages[i]:""}else u=this.model.validationRules.messages[i];r.settings.messages[name][i]=u!=null?u:n.validator.messages[i]}},_renderTimeIcon:function(){if(this.model.showPopupButton){this.timeIcon=t.buildTag("span.e-select").attr({role:"button","aria-label":"select"});var n=t.buildTag("span.e-icon e-arrow-sans-down").attr("role","presentation");this._isIE8&&(this.timeIcon.attr("unselectable","on"),n.attr("unselectable","on"));this.timeIcon.append(n);this.container.append(this.timeIcon).addClass("e-padding");this._on(this.timeIcon,"mousedown",this._timeIconClick)}},_elementClick:function(){this.showDropdown||this._showResult()},_renderDropdown:function(){var i=n("#"+this.element[0].id+"_popup").get(0),r;if(i&&n(i).remove(),!this.model.showPopupButton||this.popupList)return!1;this.popupList=t.buildTag("div.e-time-popup e-popup e-widget e-box "+this.model.cssClass+"#"+this.target.id+"_popup","",{},{tabindex:0,"aria-activedescendant":""});t.isTouchDevice()||this.popupList.addClass("e-ntouch");this.popup=this.popupList;this.ul=t.buildTag("ul.e-ul");this._isIE8&&this.ul.attr("unselectable","on");r=t.buildTag("div").append(this.ul);n("body").append(this.popupList.append(r));this._renderLiTags();this._setListHeight();this._setListWidth();this.popupList.ejScroller({height:this.popupList.height(),width:0,scrollerSize:20});this.scrollerObj=this.popupList.ejScroller("instance");this.popupList.css("display","none");this._listSize=this.ul.find("li").length},_renderLiTags:function(){var r,o,f,s,h,e,i,u;for(this._disabledItems=[],s=this.model.interval*6e4,h=!t.isNullOrUndefined(this.model.disableTimeRanges)&&this.model.disableTimeRanges.length>0?!0:!1,r=this._minTimeObj,o=this._maxTimeObj,e=0;this._compareTime(o,r,!0);)f=this._localizeTime(r),i=n(document.createElement("li")),i[0].appendChild(document.createTextNode(f)),this._isIE8&&i.attr("unselectable","on"),h&&(this._ensureTimeRange(f)?(i.addClass("e-disable"),this._disabledItems.push(e)):i.removeClass("e-disable")),this.ul[0].appendChild(i[0]),r=new Date(r).getTime()+s,e++;u=this.ul.find("li");t.isTouchDevice()||(this._on(u,"mouseenter",n.proxy(this._OnMouseEnter,this)),this._on(u,"mouseleave",n.proxy(this._OnMouseLeave,this)));this._on(u,"click",n.proxy(this._OnMouseClick,this))},_ensureTimeRange:function(n){if(!t.isNullOrUndefined(this.model.disableTimeRanges)){var r=this._makeDateTimeObj(n);for(i=0;i<this.model.disableTimeRanges.length;i++)if(+r>=+this._makeDateTimeObj(this.model.disableTimeRanges[i].startTime)&&+r<=+this._makeDateTimeObj(this.model.disableTimeRanges[i].endTime))return!0}return!1},_initStartEnd:function(){if(this._startTime=[],this._endTime=[],!t.isNullOrUndefined(this.model.disableTimeRanges))for(i=0;i<this.model.disableTimeRanges.length;i++)this._startTime[i]=this._makeDateTimeObj(this.model.disableTimeRanges[i].startTime),this._endTime[i]=this._makeDateTimeObj(this.model.disableTimeRanges[i].endTime)},_makeDateTimeObj:function(n){var r;if(typeof n=="string"){var u=t.preferredCulture(this.model.locale).calendar.patterns.d,f=t.format(new Date("1/1/2000"),u,this.model.locale),i=t.parseDate(f+" "+n,u+" "+this.model.timeFormat);if(!i)if(r=new Date(n),isNaN(Date.parse(r))||t.isNullOrUndefined(n))i=new Date("1/1/2000 "+n);else return this._setEmptyDate(n);return i}return n instanceof Date?this._setEmptyDate(n):null},_reRenderDropdown:function(){this.ul.empty();this._renderLiTags();this._refreshScroller();this._changeActiveEle()},_refreshScroller:function(){var t=this.popupList.css("display")=="none"?!0:!1;this.popupList.css("height","auto");this.popupList.find(".e-content, .e-vscroll").removeAttr("style");this.popupList.find(".e-vscroll div").removeAttr("style");t&&this.popupList.css("display","block");this.scrollerObj.model.height=this.popupList.height();this.scrollerObj.model.scrollTop=0;this.scrollerObj.refresh();this._isIE8&&(n("#"+this.scrollerObj._id).children(".e-vscroll").children().attr("unselectable","on"),n("#"+this.scrollerObj._id).find(".e-vhandle").attr("unselectable","on"));t&&this.popupList.css("display","none")},_setListWidth:function(){if(this.popupList){var n=this.model.popupWidth;n&&n!="auto"?this.popupList.css({width:n}):this.popupList.css({width:this.wrapper.width()})}this.scrollerObj&&(this._refreshScroller(),this._updateScrollTop())},_setListHeight:function(){this.popupList&&this.popupList.css({"max-height":this.model.popupHeight||"191px"});this.scrollerObj&&(this._refreshScroller(),this._updateScrollTop())},_updateScrollTop:function(){this.scrollerObj.setModel({scrollTop:this._calcScrollTop()})},_refreshPopup:function(){this.model.popupWidth=="auto"&&this.popupList.css({width:this.wrapper.width()});this._setListPosition();this._refreshScroller()},_setListPosition:function(){var t=this.wrapper,i=this._getOffset(t),f,h=n(document).scrollTop()+n(window).height()-(i.top+n(t).outerHeight()),c=i.top-n(document).scrollTop(),u=this.popupList.outerHeight(),e=this.popupList.outerWidth(),r=i.left,o=t.outerHeight(),l=(o-t.height())/2,a=this._getZindexPartial(),s=3,v=(u<h||u>c?i.top+o+s:i.top-u-s)-l;f=n(document).scrollLeft()+n(window).width()-r;(this.model.enableRTL||e>f&&e<r+t.outerWidth())&&(r-=this.popupList.outerWidth()-t.outerWidth());this.popupList.css({left:r+"px",top:v+"px","z-index":a})},_getOffset:function(n){return t.util.getOffset(n)},_getZindexPartial:function(){return t.util.getZindexPartial(this.element,this.popupList)},_enableMask:function(){this.isValidState=this.model.minTime&&this._compareTime(this.model.minTime,this.model.value)||this.model.maxTime&&this._compareTime(this.model.value,this.model.maxTime)?!1:!0;this._setTime(this.model.value);this._getInternalEvents&&!this.isValidState&&this._trigger("outOfRange");this._changeActiveEle();this._preVal=this.element.val()},_setTime:function(n){var t=this._localizeTime(n);this.element.val(t);this.model.value=t},_timeFromISO:function(n){var i=this._extISORegex.exec(n)||this._basicISORegex.exec(n),c="",l="",a="",v,e,o,f,r,t,s,u,h,y;if(i){for(e=0;e<this._dates.length;e++)if(this._dates[e][1].exec(i[1])){c=this._dates[e][0];break}if(i[3])for(o=0;o<this._times.length;o++)if(this._times[o][1].exec(i[3])){l=(i[2]||" ")+this._times[o][0];break}for(i[4]&&this._zeroRegex.exec(i[4])&&(a="Z"),v=c+l+a,f=v.match(this._tokens),t=[],u=0;u<f.length;u++)h=f[u],s=this._checkLiteral(f[u]),y=this._numberRegex[s?f[u].toLowerCase():h.length]||new RegExp("^\\d{1,"+h.length+"}"),r=n.match(y),r&&(n.substr(0,n.indexOf(r))>=0&&!s&&(f[u].indexOf("M")>=0?t.push(parseInt(r[0])-1):t.push(parseInt(r[0]))),n=n.slice(n.indexOf(r[0])+r[0].length));return new Date(t[0],t[1],t[2],t[3],t[4],t[5])}},_checkLiteral:function(n){return char=n.toLowerCase(),char=="t"||char=="z"||char==":"||char=="-"?!0:!1},_setMask:function(){this.model.value=new Date;this._enableMask()},_validateTimes:function(){var n=this._validateTimeFormat(this.model.timeFormat);this.model.timeFormat=n?n:"h:mm tt";this._isValid(this.model.minTime)||(this.model.minTime="12:00 AM");this._isValid(this.model.maxTime)||(this.model.maxTime="11:59 PM");this._isValid(this.model.value,!0)||(this.model.value=null);this._checkMinMax(this.model.value)||this.model.enableStrictMode||(this.model.minTime&&!this._compareTime(this.model.value,this.model.minTime,!0)&&(this.model.value=this.model.minTime),this.model.maxTime&&!this._compareTime(this.model.maxTime,this.model.value,!0)&&(this.model.value=this.model.maxTime));this._validateMinMax()},_ensureValue:function(){!this._checkMinMax(this.model.value)&&this._isValid(this.model.value,!0)&&(this.model.enableStrictMode?this.isValidState=!1:(this.model.minTime&&!this._compareTime(this.model.value,this.model.minTime,!0)&&(this.model.value=this.model.minTime),this.model.maxTime&&!this._compareTime(this.model.maxTime,this.model.value,!0)&&(this.model.value=this.model.maxTime)))},_validateMinMax:function(){this.model.minTime&&this.model.maxTime&&this._compareTime(this.model.minTime,this.model.maxTime)&&(this.model.minTime=this.model.maxTime)},_checkProperties:function(){this.model.enabled?this.model.enabled&&this.element.hasClass("e-disable")&&(this.model.enabled=!1,this.enable()):(this.model.enabled=!0,this.disable());this._addProperty();this._checkAttributes()},_addProperty:function(){this._setRtl(this.model.enableRTL);this._setRoundedCorner(this.model.showRoundedCorner)},_setRtl:function(n){n?(this.wrapper.addClass("e-rtl"),this.popupList&&this.popupList.addClass("e-rtl")):(this.wrapper.removeClass("e-rtl"),this.popupList&&this.popupList.removeClass("e-rtl"))},_setRoundedCorner:function(n){n?(this.container.addClass("e-corner"),this.popupList&&this.popupList.addClass("e-corner")):(this.container.removeClass("e-corner"),this.popupList&&this.popupList.removeClass("e-corner"))},_showButton:function(t){this.model.showPopupButton=t;t?(this.container.addClass("e-padding"),this._renderTimeIcon(),this._renderDropdown(),this._addProperty()):(this.container.removeClass("e-padding"),this.timeIcon.remove(),this.popupList.remove(),this.timeIcon=this.popupList=null,n(document).off("mousedown",n.proxy(this._OnDocumentClick,this)))},_checkAttributes:function(){this.element.attr("name")||this.element.attr({name:this.element[0].id});"ondragstart"in document.createElement("input")&&this.element.attr({ondragstart:"return false"});"draggable"in document.createElement("input")&&this.element.attr({draggable:"false"})},_getAmPm:function(){var t=new Date;t.setHours(0);this.ttAM=n.trim(this._localizeMeridian(t));t.setHours(23);this.ttPM=n.trim(this._localizeMeridian(t))},_setDimentions:function(){this._setHeight(this.model.height);this.model.width&&this.wrapper.width(this.model.width)},_setHeight:function(n){n&&this.wrapper.height(n);this._isIE7&&this.element.height(this.container.height())},_validateTimeFormat:function(t){var i=t.split(" "),r="";return i.length==1||i.length==2?(n(i).each(function(t,i){r+=n.trim(i)+" "}),n.trim(r)):null},_getSeperator:function(){for(var i=this._getElePlace(),t=this.model.timeFormat.split(" ")[i.time],r=new RegExp("^[a-zA-Z0-9]+$"),n=0;n<t.length;n++)if(!r.test(t.charAt(n)))return t.charAt(n)},_checkInComplete:function(){var i=this._getCaretSelection(),r=this._getStartEnd(i),u="00",t=this._getSelectedValue(r),n=this._getCategory(r);i.end-i.start==this.element.val().length&&this._checkAll();n&&n!="tt"&&(this._findCategoryPosition(n),t=="__"?((n=="h"||n=="hh")&&(u="12"),this._changeToDefault(u)):n.length!=1&&t.length==1&&(t=this._changeWhole(t),this.element.val(this._replaceAt(this.target.value,this.start,this.end,t))))},_checkAll:function(){for(var r=this._getElePlace(),i=this.model.timeFormat.split(" ")[r.time].split(this.seperator),n,t=0;t<i.length;t++)this._findCategoryPosition(i[t]),n=this._getSelectedValue({start:this.start,end:this.end}),i[t].length!=1&&n.length==1&&(n=this._changeWhole(n),this.element.val(this._replaceAt(this.element.val(),this.start,this.end,n)))},_changeToDefault:function(n){var i,t;this.incomplete=!0;i=this.element[0].value;this.element[0].value=this._replaceAt(this.target.value,this.start,this.end,n);t=this._checkExceedRange(this.target.value);t&&this._setTime(this.model[t]);this._setSelection(this.start,this.end);this._raiseChangeEvent(i)},_setSelection:function(n,t){var i=this.element[0];i.setSelectionRange?i.setSelectionRange(n,t):i.createTextRange&&(i=i.createTextRange(),i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",n),i.select())},_getSelectedValue:function(n){return this.target.value.substring(n.start,n.end)},_getMinMax:function(n,t){n=="hh"||n=="h"?(this.min=1,this.max=11,t&&(this.max=12)):n=="HH"||n=="H"?(this.min=0,this.max=23):(n=="mm"||n=="m"||n=="ss"||n=="s")&&(this.min=0,this.max=59)},_focusElement:function(){this._manualFocus=!0;this.element.focus()},_targetFocus:function(t){this._clearRange();t.preventDefault();this.focused=!0;this.element.on("mousewheel DOMMouseScroll",n.proxy(this._mouseWheel,this));this.wrapper.addClass("e-focus").removeClass("e-error").attr("aria-invalid","false");this._manualFocus||(this._findCategoryPosition(this._getLeast(!1)),this._setSelection(this.start,this.end));this._manualFocus=!1;this._prevTimeVal=this.element.val();this._raiseEvent("focusIn")},_targetBlur:function(){this.focused=!1;this.element.off("mousewheel DOMMouseScroll",n.proxy(this._mouseWheel,this));this.wrapper.removeClass("e-focus");this.model.enableStrictMode||this.target.value.indexOf("_")>-1&&this.element.val("");!this._checkMinMax(this.target.value)&&this._isValid(this.target.value,!0)?this.model.enableStrictMode?this.isValidState=!1:(this.model.minTime&&!this._compareTime(this._createObject(this.target.value),this.model.minTime,!0)&&this.element.val(this.model.minTime),this.model.maxTime&&!this._compareTime(this.model.maxTime,this._createObject(this.target.value),!0)&&this.element.val(this.model.maxTime),this._isValid(this.model.value,!0)||this.element.val(null),this.isValidState=!0):this.isValidState=!0;this._ensureValue();this._raiseChangeEvent();this._checkErrorClass();this._raiseEvent("focusOut");this.model.enableStrictMode||this._checkInComplete()},_clearRange:function(){var n=this.element[0];isNaN(n.selectionStart)||(n.selectionStart=0,n.selectionEnd=0)},_checkErrorClass:function(){this.isValidState?this.wrapper.removeClass("e-error").attr("aria-invalid","false"):this.wrapper.addClass("e-error").attr("aria-invalid","true")},_getCaretSelection:function(){var n=this.element[0],u=0,f=0,e,t,i,r,o;return isNaN(n.selectionStart)?(e=document.selection.createRange().getBookmark(),t=n.createTextRange(),t.moveToBookmark(e),i=n.createTextRange(),i.collapse(!0),i.setEndPoint("EndToStart",t),r=i.text.length,o=t.text.length,{start:r,end:r+o}):(u=n.selectionStart,f=n.selectionEnd,{start:Math.abs(u),end:Math.abs(f)})},_mouseDownOnInput:function(){this.focused||t.isTouchDevice()||this._focusElement();this.downPosition=this._getCaretSelection();n(document).on("mouseup",n.proxy(this._mouseUpOnInput,this))},_mouseUpOnInput:function(t){t.preventDefault();n(document).off("mouseup",n.proxy(this._mouseUpOnInput,this));var i=this._getCaretSelection();this.incomplete&&(this.incomplete=!1,i=this.downPosition);this.target.value!=this._getSelectedText()&&(i=this._getStartEnd(i),this._setSelection(i.start,i.end))},_getCategoryPosition:function(n){var i=0,r=0,u=this.target.value.split(" "),t=this._getElePlace(),h=this.seperator,e=!1,o=this.model.timeFormat.split(" ")[t.time].split(h),c=u[t.time].split(h),s,f;if(o.length>c.length)return{start:i,end:r,isValid:e};if(n=="tt")(u[t.tt]==this.ttAM||u[t.tt]==this.ttPM)&&(i=t.tt==0?0:u[t.time].length+1,r=i+u[t.tt].length,e=!0);else if(i=t.time==0?0:u[t.tt].length+1,s=o.indexOf(n),s!=-1){for(f=0;f<o.length;f++)if(r=c[f].length+1,f==s)break;else i+=r;r+=i-1;e=!0}return{start:i,end:r,isValid:e}},_getCategory:function(n){var t=this.model.timeFormat.split(" "),r=this.seperator,i=this._getElePlace();return n.isTT?t[i.tt]:t[i.time].split(r)[n.index]},_getStartEnd:function(n){for(var s=this.seperator,h=this.element.val(),i=h.split(" "),r=0,f=0,e=tt=null,u,t=0;t<i.length;t++)if(i[t]!=this.ttAM&&i[t]!=this.ttPM){var o=i[t].split(s),c=r,l=r+o[0].length;for(u=0;u<o.length;u++)if(f=o[u].length+r,n.start<=f){e=u;tt=!1;t=i.length;break}else r+=o[u].length+1}else if(n.start<=r+i[t].length){f=i[t].length+r;e=0;tt=!0;t=i.length;break}else r+=i[t].length+1;return e==null&&(r=c,f=l,e=0,tt=!1),{start:r,end:f,index:e,isTT:tt}},_modifyValue:function(n){var i,t,r,u;this._isValid(this.target.value)&&(this.model.enableStrictMode||this._checkInComplete(),i=this._getCaretSelection(),i.start==i.end?(r=this._getLeast(!0),u=this._getCategoryPosition(r),t=this._getStartEnd(u)):t=this._getStartEnd(i),this.start=t.start,this.end=t.end,this._changeValue(t,n))},_keyUpOnInput:function(n){n.preventDefault();this._preVal!=this.element.val()&&(this._preVal=this.element.val())},_getNextCategory:function(t,i){var r=[],e=this.seperator,o=this.model.timeFormat.split(" "),u,f;return(n(o).each(function(n,t){if(t=="tt")r.push(t);else{var i=t.split(e);r=i.concat(r)}}),u=r.indexOf(t),u!=-1)?(f=i?u==0?r.length-1:u-1:u==r.length-1?0:u+1,r[f]):t},_getElePlace:function(){var i=this.model.timeFormat.split(" "),n,t;return i[0]=="tt"?(n=1,t=0):(n=0,t=1),{time:n,tt:t}},_movePosition:function(n,t){var i=this._getStartEnd(n),r=this._getCategory(i),u;r||(r=this._getLeast(t));u=this._getNextCategory(r,t);i=this._getCategoryPosition(u);i.isValid&&this._setSelection(i.start,i.end)},_findActiveIndex:function(){var t=this.ul.find("li"),i=this.element.val(),r=t.first().html(),n;n=(this._parse(i)-this._parse(r))/(this.model.interval*6e4);n=Math.round(n);this._activeItem=n==t.length?n:n+1;(this._activeItem<0||this._activeItem>t.length||isNaN(this._activeItem))&&(this._activeItem=0)},_keyDownOnInput:function(n){var t,r,i,b,h,k,c,e,v,y,d,l,o,g,a,p,f,w,s,u;if(this.model.readOnly&&!this._readOnlyKeys(n)||(i=n.keyCode,this._getInternalEvents&&i!=38&&i!=40&&i!=36&&i!=35&&i!=9))return!1;if(!this.model.enableStrictMode){if(this.showDropdown&&i!=38&&i!=40&&i!=27&&!this._readOnlyKeys(n))return!1;this.showDropdown&&(i==37||i==39)&&(n.keyCode=i==37?38:40)}t=this._getCaretSelection();u=this._getStartEnd(t);r=this._getCategory(u);switch(n.keyCode){case 38:n.preventDefault();this.showDropdown?this.showDropdown&&(n.preventDefault(),this._findActiveIndex(),prevActiveItem=this._activeItem,this._activeItem=this._disableItemSelectUp(this._activeItem-1),this._activeItem==0&&(this._activeItem=prevActiveItem),this._addListHover(),activeItem=this._getActiveItem(),activeItem.length&&this._selectTimeItem(activeItem)):this._isValid(this.target.value)&&this._modifyValue(!0);break;case 40:n.preventDefault();n.altKey&&this.model.showPopupButton?this._showhidePopup():this.showDropdown?this.showDropdown&&(n.preventDefault(),this._findActiveIndex(),prevActiveItem=this._activeItem,this._activeItem=this._disableItemSelectDown(this._activeItem),this._activeItem<this._listSize?this._activeItem+=1:this._activeItem=prevActiveItem,this._addListHover(),this._selectTimeItem(this._getActiveItem())):this._isValid(this.target.value)&&this._modifyValue(!1);break;case 37:n.preventDefault();t.start==t.end?this._setSelection(t.start-1,t.start-1):this._movePosition(t,!0);break;case 39:n.preventDefault();t.start==t.end?this._setSelection(t.start+1,t.start+1):this._movePosition(t,!1);break;case 36:n.preventDefault();this.showDropdown?(this._activeItem=0,prevActiveItem=this._activeItem,this._activeItem=this._disableItemSelectDown(this._activeItem),this._activeItem<this._listSize?this._activeItem+=1:this._activeItem=prevActiveItem,this._addListHover(),this._selectTimeItem(this._getActiveItem())):(b=this._firstlastVal(!0),h=this._getCategoryPosition(b),h.isValid&&this._setSelection(h.start,h.end));break;case 35:n.preventDefault();this.showDropdown?(this._activeItem=this._listSize+1,prevActiveItem=this._activeItem,this._activeItem=this._disableItemSelectUp(this._activeItem-1),this._activeItem==0&&(this._activeItem=prevActiveItem),this._addListHover(),this._selectTimeItem(this._getActiveItem())):(k=this._firstlastVal(!1),c=this._getCategoryPosition(k),c.isValid&&this._setSelection(c.start,c.end));break;case 9:if(this._getInternalEvents)break;this._hideResult();e=null;n.shiftKey&&t.start>0?e=!0:!n.shiftKey&&t.end<this.element.val().length&&(e=!1);e!=null&&(n.preventDefault(),this._checkInComplete(),this._movePosition(t,e));break;case 13:if(!this.showDropdown){this._raiseChangeEvent();break}case 27:n.preventDefault();this._hideResult();break;case 8:case 46:if(this.model.enableStrictMode)return;this.target.value!=this._getSelectedText()&&(n.preventDefault(),r&&r!="tt"&&(this._findCategoryPosition(r),v=i==8&&t.start!=this.start,y=i==46&&t.end!=this.end,d=this.end-this.start,(t.start!=t.end||d==1)&&(v||y||t.start!=t.end)?(l=this.start,o=this.end,this.element[0].value=this._replaceAt(this.target.value,l,o,"__"),g=o-l!=2?o+1:o,this._setSelection(l,g)):v?(this.element[0].value=this._replaceAt(this.target.value,t.start-1,t.start,""),this._setSelection(t.start-1,t.start-1)):y&&(this.element[0].value=this._replaceAt(this.target.value,t.end,t.end+1,""),this._setSelection(t.end,t.end))))}a=this._getSelectedValue(u);p=n.keyCode?n.keyCode:n.charCode;n.keyCode>47&&n.keyCode<58?f=String.fromCharCode(p):n.keyCode>95&&n.keyCode<106&&(f=String.fromCharCode(p-48));r=="tt"&&(!n.shiftKey&&!n.ctrlKey&&!n.altKey&&n.keyCode>64&&n.keyCode<91||n.keyCode>47&&n.keyCode<58||n.keyCode>95&&n.keyCode<106)&&(n.preventDefault(),w=this._getCategoryPosition(r),this.start=w.start,this.end=w.end,this._changeAmPm(a),this._raiseChangeEvent());this.target.value!=this._getSelectedText()||n.shiftKey||n.ctrlKey||n.altKey||(n.keyCode>64&&n.keyCode<91&&!this.model.enableStrictMode&&n.preventDefault(),(n.keyCode>47&&n.keyCode<58||n.keyCode>95&&n.keyCode<106)&&(u=this._getStartEnd(t),this._setSelection(u.start,u.end)));!n.shiftKey&&!n.ctrlKey&&!n.altKey&&n.keyCode>47&&n.keyCode<58||n.keyCode>95&&n.keyCode<106?r!="tt"&&(this._getMinMax(r,!0),t.start==t.end?(this._findCategoryPosition(r),t.start==this.start?(s=f+a,this.element.val(this.model.minTime),u=this._getStartEnd(t),this._setSelection(u.start,u.end)):s=a+f,(s.length>2||!(Number(s)>=this.min&&this.max>=Number(s)))&&(this.model.enableStrictMode||n.preventDefault())):Number(f)>=this.min&&this.max>=Number(f)||this.model.enableStrictMode||n.preventDefault()):this._allowKeyCodes(n)||(this.model.enableStrictMode?n.stopPropagation():n.keyCode==8||n.keyCode==46?n.stopPropagation():n.preventDefault())},_getSelectedText:function(){if(window.getSelection){var t=n("#"+this.element[0].id).get(0);return t.value.substring(t.selectionStart,t.selectionEnd)}return document.selection.createRange().text},_allowKeyCodes:function(n){return n.ctrlKey&&(n.keyCode==65||n.keyCode==67||n.keyCode==90||n.keyCode==89)||n.keyCode==9||n.keyCode==116||n.keyCode==13?!0:!1},_readOnlyKeys:function(n){return n.keyCode==35||n.keyCode==36||n.keyCode==37||n.keyCode==39||this._allowKeyCodes(n)?!0:!1},_firstlastVal:function(n){var t=this.model.timeFormat.split(" "),r=this.seperator,i;return n?t[0]!="tt"?t[0].split(r)[0]:"tt":t[0]!="tt"?"tt":t[1]?(i=t[1].split(r),i.length?i[i.length-1]:"tt"):"tt"},_mouseWheel:function(n){if(n.preventDefault(),this.model.readOnly)return!1;var t,i=n.originalEvent;i.wheelDelta?t=i.wheelDelta/120:i.detail&&(t=-i.detail/3);t>0?this._modifyValue(!0):t<0&&this._modifyValue(!1)},_addListHover:function(){this._addSelected();this._updateScrollTop()},_addSelected:function(){this.ul.find("li").removeClass("e-active e-hover");var n=this._getActiveItem();n.length&&!n.hasClass("e-disable")&&n.addClass("e-active")},_disableItemSelectDown:function(t){return(t==null||t<0)&&(t=0),t<this._listSize?n.inArray(t,this._disabledItems)<0?t:this._disableItemSelectDown(t+1):this._listSize},_disableItemSelectUp:function(t){if(t=t-1,(t==null||t<0)&&(t=0),t<this._listSize){if(n.inArray(t,this._disabledItems)<0)return t+1;if(t>0)return this._disableItemSelectUp(t)}return 0},_getActiveItem:function(){return n(this.ul.find("li")[this._activeItem-1])},_timeIconClick:function(n){var i=!1,r;if(n.button?i=n.button==2:n.which&&(i=n.which==3),!i){if(n.preventDefault(),!this.model.enabled||this.model.readOnly||this.ul.find("li").length<1)return!1;this._showhidePopup();r=this.element.val().length;t.isTouchDevice()||this._setSelection(r,r)}},_showhidePopup:function(){if(this._getInternalEvents)return!1;this.showDropdown?this._hideResult():this._showResult()},_showResult:function(){this._raiseEvent("beforeOpen");this._refreshPopup();this.focused||t.isTouchDevice()||this._focusElement();this.model.value?this._changeActiveEle():this.ul.find("li").removeClass("e-active");var i=this,r=this._vissibleAndCalculateTop();this.popupList.slideDown(this.model.enableAnimation?200:0,function(){n(document).on("mousedown",n.proxy(i._OnDocumentClick,i))});this.scrollerObj.setModel({scrollTop:r});this.showDropdown=!0;this._listSize=this.ul.find("li").length;n(window).on("resize",n.proxy(this._OnWindowResize,this));this._on(t.getScrollableParents(this.wrapper),"scroll",this._hideResult);this._raiseEvent("open");this.wrapper.addClass("e-active")},_hideResult:function(){this.showDropdown&&!this._getInternalEvents&&(this.showDropdown=!1,this.popupList.slideUp(this.model.enableAnimation?100:0),n(document).off("mousedown",n.proxy(this._OnDocumentClick,this)),n(window).off("resize",n.proxy(this._OnWindowResize,this)),this._off(t.getScrollableParents(this.wrapper),"scroll",this._hideResult),this._raiseEvent("close"),this.wrapper.removeClass("e-active"))},_vissibleAndCalculateTop:function(){this.popupList.css({display:"block"});var n=this._calcScrollTop();return this.popupList.css({display:"none"}),n},_calcScrollTop:function(){var i=this.ul.outerHeight(),n=this.ul.find("li").outerHeight(),t;return t=this.ul.find("li.e-active").index(),n*t-(this.popupList.outerHeight()-n)/2},_changeActiveEle:function(){if(!this.model.showPopupButton||!this.popupList)return!1;var t=this.ul.find("li"),i=this.element.val(),r=t.first().html(),n;n=(this._parse(i)-this._parse(r))/(this.model.interval*6e4);n=Math.round(n);this._activeItem=n==t.length?n:n+1;(this._activeItem<0||this._activeItem>t.length||isNaN(this._activeItem)||this._ensureTimeRange(i))&&(this._activeItem=0);this._addListHover()},_OnDocumentClick:function(t){n(t.target).is(this.popupList)||n(t.target).parents(".e-time-popup").is(this.popupList)||n(t.target).is(this.wrapper)||n(t.target).parents(".e-timewidget").is(this.wrapper)?(n(t.target).is(this.popupList)||n(t.target).parents(".e-time-popup").is(this.popupList))&&t.preventDefault():this._hideResult()},_OnWindowResize:function(){this._refreshPopup()},_OnMouseEnter:function(t){var i=t.target;this.ul.find("li").removeClass("e-hover");n(i).hasClass("e-disable")||n(i).addClass("e-hover")},_OnMouseLeave:function(){(!this._dateTimeInternal||this.model.value)&&this.ul.find("li").removeClass("e-hover")},_OnMouseClick:function(t){(t.preventDefault(),n(t.target).hasClass("e-disable"))||(this.model.enabled&&!this.model.readOnly&&(this._activeItem=n(t.target).index()+1,this.ul.find("li").attr({tabindex:-1,"aria-selected":!1}),n(t.target).attr({"aria-selected":!0,tabindex:0}),this._addSelected(),this._selectTimeItem(n(t.target))),this._showhidePopup())},_selectTimeItem:function(n){this._beforeChange(n);var t=this._raiseChangeEvent();t&&this._trigger("select",{value:this.model.value,prevTime:this._previousValue})},_findCategoryPosition:function(n){n=="least"&&(n=this._getLeast(!0));var t=this._getCategoryPosition(n);this.start=t.start;this.end=t.end},_getLeast:function(t){var r=this.model.timeFormat.split(" "),u=this.seperator,i=null;return n(r).each(function(n,r){if(r!="tt"){var f=r.split(u);i=t?f[f.length-1]:f[0]}}),i},_changeValue:function(n,r){var l=this.target.value,u,f=this._getCategory(n),o;if(!f)return!1;if(this._setSelection(this.start,this.end),u=this.target.value.substring(this.start,this.end),this._checkMinMax(this.target.value))if(u!=this.ttAM&&u!=this.ttPM){if(u=this._changeCurrentValue(u,f,r),f.length!=1&&(u=this._changeWhole(u)),this._findCategoryPosition(f),this.element.val(this._replaceAt(this.target.value,this.start,this.end,u)),this.end=this.start+u.toString().length,this._setSelection(this.start,this.end),this._ensureTimeRange(this.target.value)&&this._checkMinMax(this.target.value)){var e=this._createObject(this.target.value),s=e.getHours(),h=r?this._startTime:this._endTime,c=r?this._endTime:this._startTime;if(!t.isNullOrUndefined(this.model.disableTimeRanges))for(i=0;i<this.model.disableTimeRanges.length;i++)(h[i].getHours()===s||+e>=+this._startTime[i]&&+e<=+this._endTime[i])&&(this.target.value=this._localizeTime(c[i]),this._setSelection(this.start,this.end),this._changeValue(n,r))}}else this._changeAmPm(u);else o=this._checkExceedRange(this.target.value),this._setTime(this.model[o]),this._findCategoryPosition(f),this._setSelection(this.start,this.end);this._checkMinMax(this.target.value)?this._raiseChangeEvent():(this.element.val(this.model.value),this._findCategoryPosition(f),this._setSelection(this.start,this.end))},_checkMinMax:function(n){var t=this._checkExceedRange(n);return t==null&&(t=!1),!t},_checkExceedRange:function(n){if(n){if(this.model.minTime&&!this._compareTime(n,this.model.minTime,!0))return"minTime";if(this.model.maxTime&&!this._compareTime(this.model.maxTime,n,!0))return"maxTime"}return null},_changeWhole:function(n){return n>9?""+n:"0"+n},_changeAmPm:function(n){n=n==this.ttAM?this.ttPM:this.ttAM;this.element.val(this._replaceAt(this.target.value,this.start,this.end,n));this._setSelection(this.start,this.end)},_changeMinute:function(n){var i=this._getExactFormat(["mm","m"]),t;i&&(this._findCategoryPosition(i),t=Number(this.target.value.substring(this.start,this.end)),this._getMinMax(i),n?t==this.max?(t=this.min,this._changeHour(n)):t+=1:t==this.min?(t=this.max,this._changeHour(n)):t-=1,this._findCategoryPosition(i),i.length!=1&&(t=this._changeWhole(t)),this.element.val(this._replaceAt(this.target.value,this.start,this.end,t)))},_changeHour:function(n){var i=this._getExactFormat(["hh","h","HH","H"]),t;i&&(this._findCategoryPosition(i),t=Number(this.target.value.substring(this.start,this.end)),this._getMinMax(i),n?t==this.max?(t+=1,this._changeMeridian()):t>this.max?t=this.min:t+=1:t==this.min?t=this.max+1:t>this.max?(t=this.max,this._changeMeridian()):t-=1,this._findCategoryPosition(i),i.length!=1&&(t=this._changeWhole(t)),this.element.val(this._replaceAt(this.target.value,this.start,this.end,t)))},_getExactFormat:function(n){for(var i=this.model.timeFormat,t=0;t<n.length;t++)if(i.indexOf(n[t])!=-1)return n[t];return null},_changeMeridian:function(){var t=this.model.timeFormat.indexOf("tt"),n;t!=-1&&(this._findCategoryPosition("tt"),n=this.target.value.substring(this.start,this.end),n=n==this.ttAM?this.ttPM:this.ttAM,this.element.val(this._replaceAt(this.target.value,this.start,this.end,n)))},_changeCurrentValue:function(n,t,i){n=Number(n);var r=t,u=1,f=!0;return(this._getMinMax(r),r=="hh"||r=="h"||r=="HH"||r=="H"?u=this.model.hourInterval:r=="mm"||r=="m"?u=this.model.minutesInterval:(r=="ss"||r=="s")&&(u=this.model.secondsInterval),u<=0)?n:(i?((r=="hh"||r=="h")&&n>this.max?n=this.min-1+u:n<this.max?n+=u:(f=!1,r!="hh"&&r!="h"?n=this.min-1+u:n+=u,this._changeAdjacent(r,i)),(r=="hh"||r=="h")&&n==this.max+1?f&&this._changeAdjacent(r,i):n>this.max+1&&(n=n-(this.max+1),f&&this._changeAdjacent(r,i)),r!="hh"&&r!="h"&&n==this.max+1&&(n=this.min,f&&this._changeAdjacent(r,i))):(r!="hh"&&r!="h"&&n>this.min?n-=u:(r=="hh"||r=="h")&&n>this.min&&n<=this.max?n-=u:(r=="hh"||r=="h")&&n==this.min?n=this.max+2-u:(f=!1,n=this.max+1-u,this._changeAdjacent(r,i)),n<this.min&&(n=n+(this.max+1),f&&this._changeAdjacent(r,i))),n)},_changeAdjacent:function(n,t){n=="ss"||n=="s"?this._changeMinute(t):n=="mm"||n=="m"?this._changeHour(t):(n=="hh"||n=="h"||n=="HH"||n=="H")&&this._changeMeridian()},_valueChange:function(){this._raiseChangeEvent()},_beforeChange:function(n){return this._raiseEvent("beforeChange")||this.element.val(n.text()),!0},_raiseChangeEvent:function(n,t){return(n=n===r?this.model.value:n,this._previousValue=n,current=this.target.value?this.target.value:null,n==current)?!1:(this.isValidState=this._checkMinMax(this.target.value)&&this._isValid(this.target.value,this.model.enableStrictMode)||!this.target.value?!0:!1,this.model.value=this._isValid(this.target.value,!0)&&this._checkMinMax(this.target.value)?this.target.value:null,this.model.value||this.model.enableStrictMode||this._setTime(this.model.value),this.model.value==this._previousValue)?!1:(this._raiseEvent("change",t),this._raiseEvent("_change",t),!0)},_raiseEvent:function(n,t){var i={value:this.model.value,prevTime:this._previousValue};return n=="change"&&(i.isInteraction=!t),this._trigger(n,i)},_checkIE7:function(){if(navigator.appName=="Microsoft Internet Explorer"){var t=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),n=-1;if(t.exec(navigator.userAgent)!=null&&(n=parseFloat(RegExp.$1)),n>=7&&n<8)return!0}return!1},_replaceAt:function(n,t,i,r){return n.substring(0,t)+r+n.substring(i)},_localizeTime:function(i){return i?n.trim(t.format(this._createObject(i),this.model.timeFormat,this.model.locale)):null},_localizeMeridian:function(i){return n.trim(t.format(i,"tt",this.model.locale))},_compareTime:function(n,t,i){return i=i?!0:!1,i?this._parse(n)>=this._parse(t):this._parse(n)>this._parse(t)},_isValid:function(n,t){return n=this._createObject(n,t),n&&typeof n.getTime=="function"&&isFinite(n.getTime())},_parse:function(n){return Date.parse(this._createObject(n))},_setEmptyDate:function(n){var t=new Date(n);return t.setDate(1),t.setMonth(0),t.setFullYear(2e3),t},_createObject:function(n,i){var r=null,u,f;if(typeof n=="string"){var o=this._setModelOption?this._preTimeformat:this.model.timeFormat,e=t.preferredCulture(this.model.locale).calendar.patterns.d,s=t.format(new Date("1/1/2000"),e,this.model.locale);r=t.parseDate(s+" "+n,e+" "+o,this.model.locale);(this._extISORegex.exec(n)||this._basicISORegex.exec(n))&&(this.model.value=r=this._timeFromISO(n));this._setModelOption=!1;r||(u=new Date(n),r=isNaN(Date.parse(u))||t.isNullOrUndefined(n)?!this._dateTimeInternal||n==""?null:new Date("1/1/2000 "+n):this._setEmptyDate(n))}else typeof n=="number"?r=new Date(n):n instanceof Date&&(r=this._setEmptyDate(n));return r&&!this._dateTimeInternal&&i&&(f=this._localizeTime(r),this._ensureTimeRange(f)&&(r=null)),r},_wireEvents:function(){this._on(this.element,"focus",this._targetFocus);this._on(this.element,"blur",this._targetBlur);this._on(this.element,"mousedown",this._mouseDownOnInput);this._on(this.element,"keydown",this._keyDownOnInput);this._on(this.element,"keyup",this._keyUpOnInput)}})})(jQuery,Syncfusion)}),function(n){typeof define=="function"&&define.amd?define(["./../common/ej.globalize.min","./../common/ej.core.min","./../common/ej.scroller.min","./ej.datepicker.min","./ej.timepicker.min"],n):n()}(function(){"use strict";var n=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},t=function(t){function i(n){return t.call(this),this._rootCSS="e-daterangepicker",this._setFirst=!1,this.PluginName="ejDateRangePicker",this.id="myDateRange",this._addToPersist=["value"],this.type="editor",this.angular={require:["?ngModel","^?form","^?ngModelOptions"],requireFormatters:!0},this.model=null,this.validTags=["input"],this.defaults={height:"",width:"",value:"",cssClass:"",enabled:!0,startDate:null,endDate:null,enableTimePicker:!1,ranges:null,locale:"en-US",separator:"-",watermarkText:"Select Range",dateFormat:"",timeFormat:"",showPopupButton:!0,showRoundedCorner:!1,allowEdit:!0,enablePersistence:!1},this._isIE8=ej.browserInfo().name=="msie"&&ej.browserInfo().version=="8.0"?!0:!1,this._prevValue=null,this._validState=null,i.prototype.observables=["value"],n&&(n.jquery||(n=$("#"+n)),n.length)?$(n).ejDateRangePicker().data(this.PluginName):void 0}return n(i,t),i.prototype.setModel=function(n,t){this.setModel(n,t)},i.prototype.option=function(n,t){this.option(n,t)},i.prototype._setModel=function(n){var t,i;for(t in n)switch(t){case"allowEdit":if(!n[t]){this.element.attr("readonly","readonly");this.element.on("mousedown",$.proxy(this._showDatePopUp,this));this.element.off("blur",$.proxy(this._onMainFocusOut,this))}break;case"startDate":i=this._validateValues(n[t],"left");i==!1?n[t]=null:(this._startEndValidation()||this.model.endDate==null||(this._resetValues(),this.model.endDate=null),this._updateValues(),this._selectedStartDate=this.model.startDate,n[t]=this.model.startDate);break;case"endDate":i=this._validateValues(n[t],"right");i==!1?n[t]=null:(this._startEndValidation()||(this._rightDP.element.parents(".e-datewidget").addClass("e-val-error"),this.model.endDate=null),this._updateValues(),n[t]=this.model.endDate);break;case"enableTimePicker":this.model.enableTimePicker=n[t];n[t]?this._renderTimePicker():this._removeTimePicker();this._scrollerObj&&(this._scrollerObj.model.height=this.datePopup.height(),this._scrollerObj.refresh());break;case"locale":this._setCulture(n[t]);n[t]=this.model.locale;break;case"separator":this.model.separator=n[t];this._mainValue();break;case"dateFormat":this._leftDP&&this._leftDP.option(t,n[t]);this._rightDP&&this._rightDP.option(t,n[t]);this.model.dateFormat=n[t];this._getDateTimeFormat();this._updateInput();break;case"timeFormat":this._leftTP&&this._leftTP.option(t,n[t]);this._rightTP&&this._rightTP.option(t,n[t]);this.model.timeFormat=n[t];this._getDateTimeFormat();this._updateInput();break;case"watermarkText":ej.isNullOrUndefined(this._options)&&(this._options={});this._options.watermarkText=this.model.watermarkText=n[t];this._localizedLabels.watermarkText=this.model.watermarkText;this._setWaterMark();break;case"cssClass":this._changeSkin(n[t]);break;case"showRoundedCorner":this._setRoundedCorner(n[t]);break;case"showPopupButton":this._renderDateIcon(n[t]);break;case"value":this.element.val(n[t]);this._onMainFocusOut();n[t]=this.model.value;break;case"height":this.wrapper.height(n[t]);break;case"width":this.wrapper.width(n[t]);break;case"enabled":n[t]?this.enable():this.disable()}},i.prototype._init=function(n){this._options=n;this._flagevents=!1;this._id=this.element.attr("id");this._isSupport=document.createElement("input").placeholder==undefined?!1:!0;this.element.val()==""&&this.model.value&&this.element.val(this.model.value);this.element.val()&&this._setInitValue();this._createDateRangePicker();this._validState==!1&&this.element.val()&&this.wrapper.addClass("e-error");this._popupOpen=!1;this._isPopScroll=!1;this.model.enabled||this.disable();this._wireEvents()},i.prototype._setInitValue=function(){var n=this.element.val().split(this.model.separator),t=ej.parseDate(n[0],this._dateTimeFormat,this.model.locale),i=ej.parseDate(n[1],this._dateTimeFormat,this.model.locale);t&&i&&(this.model.startDate=t,this.model.endDate=i)},i.prototype._getNextMonth=function(n){var i=n,r,u,t;return i instanceof Date?(r=i.getMonth(),r==11?(u=i.getFullYear()+1,r=-1):u=i.getFullYear(),t=new Date,t=new Date(t.setFullYear(u)),t=new Date(t.setMonth(r+1)),new Date(t.setDate(1))):new Date},i.prototype._getDateTimeFormat=function(){var n=ej.preferredCulture(this.model.locale).calendars.standard.patterns;this.model.dateFormat||(this.model.dateFormat=n.d);this.model.enableTimePicker?(this.model.timeFormat||(this.model.timeFormat=n.t),this._dateTimeFormat=this.model.dateFormat+" "+this.model.timeFormat):this._dateTimeFormat=this.model.dateFormat},i.prototype._setValues=function(){this._leftDP.option("value",this.model.startDate);this._rightDP.option("value",this.model.endDate||null);this.model.startDate&&this._setStartDate(this.model.startDate,$('.current-month[date="'+this.model.startDate.toDateString()+'"]'),!0);this.model.endDate&&this._setEndDate(this.model.endDate,$('.current-month[date="'+this.model.endDate.toDateString()+'"]'),!0);this._rangeRefresh(this._setArgs(this._leftDP.popup));this._rangeRefresh(this._setArgs(this._rightDP.popup));this._rightDP.element.parents(".e-datewidget").removeClass("e-error");this.model.enableTimePicker&&(this._leftTP.option("value",this.model.startDate),this._rightTP.option("value",this.model.endDate));this._updateRanges("left");this._updateRanges("right")},i.prototype._customSet=function(){this._selectedStartDate=this.model.startDate;this._selectedEndDate=this.model.endDate;this._resetValues();this._setValues();this._popupOpen||this._mainValue();this._refreshMinMax();this._setWaterMark()},i.prototype._setCulture=function(n){n=ej.preferredCulture(n).name;this.model.locale=n;this._setOption("locale",n);this._localizedLabels=this._getLocalizedLabels();this._setLocalizedText();this._updateInput()},i.prototype._setRoundedCorner=function(n){n?(this._input_innerWrapper.addClass("e-corner"),this.popup.addClass("e-corner")):(this._input_innerWrapper.removeClass("e-corner"),this.popup.removeClass("e-corner"));this._setOption("showRoundedCorner",n)},i.prototype._renderDateIcon=function(n){n?(this.dateRangeIcon=ej.buildTag("span.e-select#"+this.id+"-img","",{},this._isIE8?{unselectable:"on"}:{}).append(ej.buildTag("span.e-icon e-calendar","",{},{"aria-label":"Select"}).attr(this._isIE8?{unselectable:"on"}:{})).insertAfter(this.element),this._input_innerWrapper.addClass("e-padding"),this._on(this.dateRangeIcon,"mousedown",this._showDatePopUp),this._off(this.dateRangeIcon,"click",this._showDatePopUp)):(this.dateRangeIcon&&this.dateRangeIcon.remove(),this._input_innerWrapper.removeClass("e-padding"),this._bindDateButton(),this._off(this.dateRangeIcon,"click",this._showDatePopUp))},i.prototype._validateValues=function(n,t){var r=t=="right"?this._rightDP:this._leftDP,i=n;if(i!=null&&typeof i=="string")t=="left"?(this.model.startDate=ej.parseDate(n,this.model.dateFormat,this.model.locale)||null,this.model.startDate=this.model.startDate!=null?this.model.startDate:new Date(i)):(this.model.endDate=ej.parseDate(n,this.model.dateFormat,this.model.locale)||null,this.model.endDate=this.model.endDate!=null?this.model.endDate:new Date(i));else if(n instanceof Date){if(t=="left"){if(this.model.startDate=n,isNaN(n.getDate()))return!1;typeof this._formatter(this.model.startDate,this.model.locale)!="string"&&(this.model.startDate=ej.parseDate(this._formatter(this.model.startDate,this.model.locale),this.model.dateFormat))}else if(t=="right"){if(this.model.endDate=n,isNaN(n.getDate()))return!1;typeof this._formatter(this.model.endDate,this.model.locale)!="string"&&(this.model.endDate=ej.parseDate(this._formatter(this.model.endDate,this.model.locale),this.model.dateFormat))}}else return!1;return!0},i.prototype._formatter=function(n,t){var i=this._checkFormat(t);return ej.format(n,i,this.model.locale)},i.prototype._checkFormat=function(n){var t=this,i=this._regExp();return n.replace(i,function(n){return n==="/"?ej.preferredCulture(t.model.locale).calendars.standard["/"]!=="/"?"'/'":n:n})},i.prototype._regExp=function(){return/\/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|gg|g|"[^"]*"|'[^']*'|[/]/g},i.prototype._setArgs=function(n){var t=new Date($(n.find(".current-month")[0]).attr("date"));return this.args={},this.args.element=n,this.args.month=t.getMonth(),this.args.year=t.getFullYear(),this.args},i.prototype._changeSkin=function(n){this.wrapper.removeClass(this.model.cssClass).addClass(n);this.popup.removeClass(this.model.cssClass).addClass(n);this._setOption("cssClass",n)},i.prototype._createDateRangePicker=function(){var n;this._localizedLabels=this._getLocalizedLabels();this.element.addClass("e-input").attr({"aria-atomic":"true","aria-live":"assertive",tabindex:"0"});this.wrapper=ej.buildTag("span.e-daterangewidget e-widget "+this.model.cssClass);ej.isTouchDevice()||this.wrapper.addClass("e-ntouch");this._input_innerWrapper=ej.buildTag("span.e-in-wrap e-box");this.wrapper.append(this._input_innerWrapper).insertBefore(this.element);this._input_innerWrapper.append(this.element);this._input_innerWrapper.addClass("e-padding");this.popup=ej.buildTag("div.e-daterangepicker-popup e-popup e-widget e-box"+this.model.cssClass+"#"+this.element[0].id+"_popup").css("display","none");this._isSupport||(this._hiddenInput=ej.buildTag("input.e-input e-placeholder ","",{},{type:"text"}).insertAfter(this.element),this._hiddenInput.val(this._localizedLabels.watermarkText),this._hiddenInput.css("display","block"),n=this,$(this._hiddenInput).focus(function(){n.element.focus()}));$("body").append(this.popup);this.datePopup=ej.buildTag("div.e-datepickers-popup");this.popup.append(this.datePopup);this._leftDiv=ej.buildTag("div.e-left-datepicker");this._rightDiv=ej.buildTag("div.e-right-datepicker");this.datePopup.append(this._leftDiv);this.datePopup.append(this._rightDiv);this.calendar_left=ej.buildTag("input.leftDate_wrapper#"+this.element[0].id+"leftDate_wrapper","",{},{type:"text"});this._leftDiv.append(this.calendar_left);this.calendar_right=ej.buildTag("input.rightDate_wrapper#"+this.element[0].id+"rightDate_wrapper","",{},{type:"text"});this._rightDiv.append(this.calendar_right);n=this;this.culture=ej.preferredCulture(this.model.locale);this._getDateTimeFormat();this._setRoundedCorner(this.model.showRoundedCorner);this._renderDateIcon(this.model.showPopupButton);this.calendar_left.ejDatePicker({displayInline:!0,showFooter:!1,watermarkText:"",width:"100%",enableStrictMode:!0,layoutChange:function(){n._refreshEvents("left");n._updateRanges("left");n._scrollerObj&&(n._scrollerObj.model.height=n.datePopup.height(),n._scrollerObj.refresh())},showTooltip:!1,locale:this.model.locale,dateFormat:this.model.dateFormat,_month_Loaded:function(t){n._previousNextHandler(t)},enablePersistence:this.model.enablePersistence});this._leftDP=this.calendar_left.data("ejDatePicker");this._leftDP._getInternalEvents=!0;this._leftDP._DRPdisableFade=!0;this._leftDP.option("showPopupButton",!1);this._leftDP.popup.css({position:"static",visibility:"inherit"});this.calendar_right.ejDatePicker({displayInline:!0,width:"100%",showFooter:!1,watermarkText:"",enableStrictMode:!0,locale:this.model.locale,create:$.proxy(this._updateOnRender,this),layoutChange:function(){n._refreshEvents("right");n._updateRanges("right");n._scrollerObj&&(n._scrollerObj.model.height=n.datePopup.height(),n._scrollerObj.refresh())},dateFormat:this.model.dateFormat,_month_Loaded:function(t){n._previousNextHandler(t)},enablePersistence:this.model.enablePersistence});this._rightDP=this.calendar_right.data("ejDatePicker");this._rightDP._getInternalEvents=!0;this._rightDP._DRPdisableFade=!0;this._rightDP.option("showPopupButton",!1);this._rightDP.popup.css({position:"static",visibility:"inherit"});this.model.ranges&&this._renderRanges();this.model.enableTimePicker&&this._renderTimePicker();this._renderButton();this._bindDateButton();this._refreshEvents("left");this._refreshEvents("right");this._updateRanges("left");this._updateRanges("right");this.wrapper&&(this.model.width&&this.wrapper.width(this.model.width),this.model.height&&this.wrapper.height(this.model.height))},i.prototype._updateOnRender=function(){this.model.enableTimePicker?this._rightTime&&(this._rightTP=this._rightTime.ejTimePicker("instance"),this._updateValues()):this.calendar_right&&(this._rightDP=this.calendar_right.ejDatePicker("instance"),this._updateValues())},i.prototype._updateRangesList=function(){$(".e-dateranges-ul").find(".rangeItem.e-active").removeClass("e-active");$(".e-dateranges-ul").find(".rangeItem.e-custompic").addClass("e-active")},i.prototype._updateValues=function(){this._updateRangesList();this._getDateTimeFormat();this._startEndValidation()||this.model.startDate!=null&&this.model.endDate==null?(this._validateValues(this.model.startDate,"left"),this._validateValues(this.model.endDate,"right"),this._setValues(),this._mainValue()):(this._clearRanges(),this.element.val(""));this._refreshMinMax();this._setWaterMark()},i.prototype._startEndValidation=function(){if(this.model.startDate&&this.model.endDate){var t=this.model.startDate,n=this.model.endDate;return n&&t>n?!1:!0}return!1},i.prototype._renderButton=function(){this._buttonDiv=ej.buildTag("div.e-drpbuttons");var n=ej.buildTag("div.e-drp-button e-drp-reset e-btn e-select e-flat").attr({tabindex:"0"}),t=ej.buildTag("div.e-drp-button e-drp-apply e-disable e-btn e-select e-flat").attr({tabindex:"0"}),i=ej.buildTag("div.e-drp-button e-drp-cancel e-btn e-select e-flat").attr({tabindex:"0"});this._buttonDiv.append(n);this._buttonDiv.append(t);this._buttonDiv.append(i);this.popup.append(this._buttonDiv);this._setLocalizedText()},i.prototype._setLocalizedText=function(){ej.isNullOrUndefined(this._options)||(ej.isNullOrUndefined(this._options.buttonText)||$.extend(this._localizedLabels.ButtonText,this._options.buttonText),ej.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText));this.model.buttonText=this._localizedLabels.ButtonText;$(this._buttonDiv.find("div.e-drp-reset")).text(this.model.buttonText.reset);$(this._buttonDiv.find("div.e-drp-apply")).text(this.model.buttonText.apply);$(this._buttonDiv.find("div.e-drp-cancel")).text(this.model.buttonText.cancel);this._customRangePicker&&this._customRangePicker.find("ul li.e-custompic").length>0&&this._customRangePicker.find("ul li.e-custompic").text(this._localizedLabels.customPicker);this._setWaterMark()},i.prototype._renderRanges=function(){var f,i,t,n,r,u;if(this._renderRangesWrapper(),this.popup.append(this._customRangePicker),this._ranges_li="",f=this,this.model.ranges)for(i=0;i<this.model.ranges.length;i++)t=this.model.ranges[i],n=t.range,n.length===2&&(r=new Date(n[0]),u=new Date(n[1]),ej.isNullOrUndefined(r)&&(r=new Date(n[0])),ej.isNullOrUndefined(u)&&(u=new Date(n[1])),r<=u&&(f._ranges_li+="<li aria-selected='false' title='"+t.label+"' class='rangeItem' e-date-range='"+JSON.stringify(n)+"' e-data-value='"+t.range+"'>"+t.label+"<\/li>"));this._ranges_li+="<li aria-selected='false' class='rangeItem e-active e-custompic' e-date-range='customPicker'>"+this._localizedLabels.customPicker+"<\/li>";this.popup.find("div.e-custom-dateranges ul").append(this._ranges_li);this._on(this._customRangePicker.find("ul li.rangeItem"),"click",this._customSelection);this._customRangePicker.ejScroller({height:this.datePopup.height(),width:0,scrollerSize:15});f._scrollerObj=this._customRangePicker.ejScroller("instance")},i.prototype._removeTimePicker=function(){this._leftDiv.removeClass("e-left-timepicker");this._rightDiv.removeClass("e-right-timepicker");this._leftTP.destroy();this._rightTP.destroy();this._rightTP=null;this._leftTP=null;this._leftTime.remove();this._rightTime.remove();this._setOption("width","");this._setOption("width","100%");this._updateValues()},i.prototype._setOption=function(n,t){this._leftDP&&this._leftDP.option(n,t);this._rightDP&&this._rightDP.option(n,t);this.model.enableTimePicker&&(this._leftTP&&this._leftTP.option(n,t),this._rightTP&&this._rightTP.option(n,t))},i.prototype._renderTimePicker=function(){this.model.timeFormat==""&&(this.model.timeFormat=this.culture.calendar.patterns.t);this._leftTime=ej.buildTag("input.leftTime#"+this._id+"_lTime");this._leftDiv.append(this._leftTime);this._leftDiv.addClass("e-left-timepicker");var n=this;this._leftTime.ejTimePicker({width:"100px",popupWidth:"100px",locale:this.model.locale,timeFormat:this.model.timeFormat,select:function(t){n.model.startDate&&n.model.endDate&&(n._rightTP&&n.model.startDate.toLocaleDateString()==n.model.endDate.toLocaleDateString()&&n._rightTP.option("minTime",t.value),n._buttonDiv.find(".e-drp-apply").removeClass("e-disable"))}});this._leftTP=this._leftTime.ejTimePicker("instance");this._leftTP.popup.addClass("e-daterange-timepopup");this._rightTime=ej.buildTag("input.rightTime#"+this._id+"_rTime");this._rightDiv.append(this._rightTime);this._rightDiv.addClass("e-right-timepicker");this._rightTime.ejTimePicker({width:"100px",popupWidth:"100px",locale:this.model.locale,create:$.proxy(this._updateOnRender,this),timeFormat:this.model.timeFormat,select:function(){n.model.startDate&&n.model.endDate&&n._buttonDiv.find(".e-drp-apply").removeClass("e-disable")}});this._rightTP=this._rightTime.ejTimePicker("instance");this._rightTP.popup.addClass("e-daterange-timepopup");this._on(this._leftTP.element,"keydown",this._onKeyDown);this._on(this._rightTP.element,"keydown",this._onKeyDown);this._setTimePickerPos()},i.prototype._setTimePickerPos=function(){$("#"+this._id+"_lTime_timewidget").css({position:"absolute",top:0,left:this._leftDP.popup.width()+this._leftDP.popup.position().left-this.popup.find($("#"+this._id+"_lTime_timewidget")).outerWidth()});$("#"+this._id+"_rTime_timewidget").css({position:"absolute",top:this.popup.hasClass("e-daterange-responsive")?this._rightDP.wrapper.position().top:0,left:this._rightDP.popup.width()+this._rightDP.popup.position().left-this.popup.find($("#"+this._id+"_rTime_timewidget")).outerWidth()});this.popup.find($(".e-left-datepicker .e-datewidget")).css({width:this._leftDP.popup.width()-this.popup.find($("#"+this._id+"_lTime_timewidget")).width()-1});this.popup.find($(".e-right-datepicker .e-datewidget")).css({width:this._rightDP.popup.width()-this.popup.find($("#"+this._id+"_rTime_timewidget")).width()-1})},i.prototype._updateInput=function(){if(!(this.model.startDate&&this.model.endDate)){this.model.value&&this.element.val(this.model.value);this._popupOpen&&this.popupHide();return}this._resetValues();this.wrapper.removeClass("e-error");this._mainValue();this._refreshMinMax()},i.prototype._removeWatermark=function(){this.element.val()==""||this._isSupport||this._hiddenInput.css("display","none")},i.prototype._mainValue=function(){var i="",r="",u=this.model.startDate,f=this.model.endDate,n=ej.format(u,this.model.dateFormat,this.model.locale),t=ej.format(f,this.model.dateFormat,this.model.locale);this.model.enableTimePicker&&this._leftTP&&this._rightTP&&this._leftTP.model.value&&this._rightTP.model.value?(i=this._leftTP.model.value,r=this._rightTP.model.value,n=ej.format(n+" "+i,this._dateTimeFormat,this.model.locale),t=ej.format(t+" "+r,this._dateTimeFormat,this.model.locale),this.model.startDate=ej.parseDate(n,this._dateTimeFormat,this.model.locale),this.model.endDate=ej.parseDate(t,this._dateTimeFormat,this.model.locale)):(this.model.startDate=ej.parseDate(n,this._leftDP.model.dateFormat,this.model.locale),this.model.endDate=ej.parseDate(t,this._rightDP.model.dateFormat,this.model.locale));n!=null&&t!=null?(this.model.value=n+" "+this.model.separator+" "+t,this.element.val(this.model.value),this._hiddenInput&&this._hiddenInput.attr("value",this.model.value),this._removeWatermark(),this._validState=!0):(this.model.value=null,this._setWaterMark(),this._validState=!1);this._prevValue=this.model.value;this._buttonDiv&&this._buttonDiv.find(".e-drp-apply").addClass("e-disable");this._trigger("_change",{value:this.model.value})},i.prototype._bindDateButton=function(){if(this.dateRangeicon&&this._on(this.dateRangeIcon,"click",this._showDatePopUp),!this.model.allowEdit){this.element.attr("readonly","readonly");this.element.on("mousedown",$.proxy(this._showDatePopUp,this));this.element.off("blur",$.proxy(this._onMainFocusOut,this))}this.model.allowEdit&&this.element.off("mousedown",$.proxy(this._showDatePopUp,this))},i.prototype._showDatePopUp=function(n){if(!this.model.enabled)return!1;var t=!1;(n.button?t=n.button==2:n.which&&(t=n.which==3),t)||this._showhidePopup(n)},i.prototype._showhidePopup=function(n){this._popupOpen?(this._isFocused||!this.element.is(":input")||ej.isTouchDevice()||this.wrapper.addClass("e-focus"),this.popupHide(n)):(this._isFocused||!this.element.is(":input")||ej.isTouchDevice()||this.wrapper.addClass("e-focus"),this.popupShow(n))},i.prototype.popupHide=function(n){if(!this._popupOpen||this._isPopScroll)return!1;var t=this;this._trigger("beforeClose",{element:this.popup,events:n});this.popup.attr({"aria-hidden":"true"});this._leftTP&&!this._leftTP._popupOpen&&this._leftTP.hide();this._rightTP&&!this._rightTP._popupOpen&&this._rightTP.hide();this.popup.css("visibility","visible").slideUp(100,function(){t._popupOpen=!1});this._off(ej.getScrollableParents(this.wrapper),"scroll",$.proxy(this.popupHide,this));this._trigger("close",{element:this.popup,events:n});this.wrapper.removeClass("e-active")},i.prototype.popupShow=function(n){if(!this.model.enabled||this._popupOpen)return!1;var t=this;this._trigger("beforeOpen",{element:this.popup,events:n});this.wrapper.addClass("e-focus");this.popup.attr({"aria-hidden":"false"});t._popupOpen=!0;this.popup.css({visibility:"hidden",display:"block"});this._resizePopup();this.popup.css({display:"none",visibility:"visible"}).slideDown(100,function(){});this._on(ej.getScrollableParents(this.wrapper),"scroll",$.proxy(this.popupHide,this));this._trigger("open",{element:this.popup,events:n});this.wrapper.addClass("e-active")},i.prototype._resizePopup=function(){var n=this,i=0,t=0,u=n.datePopup.find(".e-popup.e-calendar").outerWidth(),r=n.datePopup.find(".e-popup.e-calendar").height();if(this._customRangePicker&&this._customRangePicker.height()<=0&&this._customRangePicker.height(this.datePopup.height()),this.model.ranges&&this.model.ranges.length>0&&(t=this._customRangePicker.find("ul").height(),i=n._customRangePicker.outerWidth()),$(window).width()-this.wrapper.position().left<u*2+i+25){if(n.popup.addClass("e-daterange-responsive"),n._setOption("width","95%"),this.model.enableTimePicker){this._setOption("width","47%");this._setDatePickerPosition();$("#"+this._id+"_lTime_timewidget").css({left:this._leftDP.wrapper.outerWidth()+5});$("#"+this._id+"_rTime_timewidget").css({left:this._rightDP.wrapper.outerWidth()+5});n._scrollerObj&&(n._scrollerObj.model.height=t<r?t+10:r,n._scrollerObj.refresh());return}}else n.popup.removeClass("e-daterange-responsive"),this.model.enableTimePicker&&(this._leftTP.option("width","100px"),this._rightTP.option("width","100px"),this._setTimePickerPos()),n._scrollerObj&&(n._scrollerObj.model.height=this.datePopup.height(),n._scrollerObj.refresh());this._setDatePickerPosition()},i.prototype._onDocumentClick=function(n){this.model&&($(n.target).is(this.popup)||$(n.target).parents(".e-popup").is(this.popup)||$(n.target).is(this.wrapper)||$(n.target).parents(".e-daterangewidget").is(this.wrapper)||(!this.model.enableTimePicker||$(n.target).is(this._leftTP.popup)||$(n.target).parents(".e-popup").is(this._leftTP.popup)||$(n.target).is(this._rightTP.popup)||$(n.target).parents(".e-popup").is(this._rightTP.popup)||(this._popupOpen&&this.popupHide(n),this.wrapper.removeClass("e-focus")),this.model.enableTimePicker||(this._popupOpen&&this.popupHide(n),this.wrapper.removeClass("e-focus"))))},i.prototype._getOffset=function(n){var t=n.offset()||{left:0,top:0},i;return $("body").css("position")!="static"&&(i=$("body").offset(),t.left-=i.left,t.top-=i.top),t},i.prototype._getZindexPartial=function(n,t){var u,r,i;if(!ej.isNullOrUndefined(n)&&n.length>0)return u=n.parents(),r=$("body").children(),!ej.isNullOrUndefined(n)&&n.length>0&&r.splice(r.index(t),1),$(r).each(function(n,t){u.push(t)}),i=Math.max.apply(i,$.map(u,function(n){if($(n).css("position")!="static")return parseInt($(n).css("z-index"))||1})),!i||i<1e4?i=1e4:i+=1,i},i.prototype._setDatePickerPosition=function(){var n=this.element.is("input")?this.wrapper:this.element,t=this._getOffset(n),u,s=$(document).scrollTop()+$(window).height()-(t.top+$(n).outerHeight()),h=t.top-$(document).scrollTop(),r=this.popup.outerHeight(),f=this.popup.outerWidth(),i=t.left,e=n.outerHeight(),a=(e-n.height())/2,c=this._getZindexPartial(this.element,this.popup),o=3,l=r<s||r>h?t.top+e+o:t.top-r-o;u=$(document).scrollLeft()+$(window).width()-i;f>u&&f<i+n.outerWidth()&&(i-=this.popup.outerWidth()-n.outerWidth());this.popup.css({left:i+"px",top:l+"px","z-index":c});this.model.enableTimePicker&&($("#"+this._id+"_lTime_timewidget").css({position:"absolute",top:0,left:this._leftDP.popup.width()+this._leftDP.popup.position().left-$("#"+this._id+"_lTime_timewidget").width()}),$("#"+this._id+"_rTime_timewidget").css({position:"absolute",top:this.popup.hasClass("e-daterange-responsive")?this._rightDP.wrapper.position().top:0,left:this._rightDP.popup.width()+this._rightDP.popup.position().left-$("#"+this._id+"_rTime_timewidget").width()}))},i.prototype._dateEleClicked=function(n){var r,i,u,e,t,f;if(this._updateRangesList(),this._activeItem=$(n.currentTarget),this._activeItem.hasClass("e-hidedate")){n.stopPropagation();return}(this._activeItem.hasClass("other-month")&&this._refreshMinMax(),t=this._activeItem.attr("date"),r=$(n.currentTarget).parents(".e-left-datepicker").length>0?"left":"right",ej.isNullOrUndefined(t)||t==="")||(i=new Date(t),this._selectedStartDate!=null&&this._selectedEndDate!=null&&(this._selectedStartDate=null),this._selectedStartDate==null?(this._selectedStartDate=i,this._selectedEndDate=null,this._startDate&&(this._startDate.date=null),this._rightDP.element.val(null),r=="right"&&(this._leftDP._stopRefresh=!0,this._leftDP.option("value",this._selectedStartDate),this._leftDP.element.val(this._selectedStartDate.toLocaleDateString())),this._rightTP&&this._rightTP.option("value",""),this.popup.find(".in-range").removeClass("in-range"),this.datePopup.find("td.e-state-default.e-active").removeClass("e-active"),this._rightDP.element.parents(".e-datewidget").removeClass("e-error"),u=$(this.datePopup.find('.current-month[date="'+t+'"]')),this._selectedStartDate=new Date(u.attr("date")),this._setStartDate(this._selectedStartDate,u,!0)):this._selectedStartDate===null||this._selectedEndDate!=null||i<this._selectedStartDate?(this._selectedStartDate=i,this._selectedEndDate=null,this._endDate&&(this._endDate.date=null),this.popup.find(".in-range").removeClass("in-range"),this._rightDP.option("value",null),this._rightTP&&this._rightTP.option("value",""),r=="right"&&(this._leftDP._stopRefresh=!0,this._leftDP.option("value",this._selectedStartDate),this._leftDP.element.val(this._selectedStartDate.toLocaleDateString())),this._setStartDate(this._selectedStartDate,this._activeItem,!0),this._updateRanges("left"),this._updateRanges("right")):(e=i,t=$(n.currentTarget).attr("date"),this._rightDP._stopRefresh=!0,this._rightDP.option("value",new Date(t)),this._rightDP._stopRefresh=!1,this._rightTP&&this._rightTP.option("value",new Date(t)),this._rightDP.element.parents(".e-datewidget").removeClass("e-error"),f=$(this.datePopup.find('.current-month[date="'+t+'"]')),this._selectedStartDate=this.model.startDate,this._selectedEndDate=new Date(t),this._setEndDate(this._selectedEndDate,f,!0),this._startDate={},this._startDate.date=this._selectedStartDate,this._updateRanges("left"),this._updateRanges("right"),r=="left"&&(this._leftDP._stopRefresh=!0,this._leftDP.option("value",this.model.startDate),this._leftDP.element.val(this.model.startDate.toLocaleDateString()))),this._trigger("click",{element:$(n.currentTarget),startDate:this.model.startDate,endDate:this.model.endDate,value:new Date($(n.currentTarget).attr("date"))}))},i.prototype._setStartDate=function(n,t,i){if(this._startDate={},this._startDate.date=n,i&&(this._endDate={},this._endDate.date=null),this._leftDP._checkDateArrows(),this.datePopup.find("td.e-state-default").removeClass("e-select e-start-date e-active showrange e-end-date e-state-hover"),this.popup.find(".in-range").removeClass("in-range"),t.addClass("e-start-date"),this.model.startDate=n,this._buttonDiv&&this._buttonDiv.find(".e-drp-apply").addClass("e-disable"),this.model.enableTimePicker){var u=this._leftTP,r=ej.format(this._leftTP.model.value||this._leftDP.model.value,u.model.timeFormat,this.model.locale);r&&this._rightTP.option("minTime",r);r&&this._leftTP.option("value",r)}},i.prototype._setEndDate=function(n,t){if((this._rightDP.element.parents(".e-datewidget").removeClass("e-val-error"),this._endDate={},this._endDate.date=n,this.popup.find("td.e-end-date").removeClass("e-select e-end-date"),t.addClass("e-end-date"),this._buttonDiv&&this._buttonDiv.find(".e-disable").removeClass("e-disable"),this.model.endDate=n,this._startDate.date.getFullYear()!=this._endDate.date.getFullYear()||this._startDate.date.getMonth()!=this._endDate.date.getMonth())&&this.model.enableTimePicker)if(this.model.startDate.getDate()==this.model.endDate.getDate())this._rightTP.option("minTime",this._leftTP.option("value")||""),this._rightTP.option("value",this._leftTP.option("value")||"");else{var r=this._rightTP,i=ej.format(this._rightTP.model.value,r.model.timeFormat,this.model.locale);i&&this._rightTP.option("minTime",i);i&&this._rightTP.option("value",i)}},i.prototype._rangeRefresh=function(n){var t,r,i,f,u;this._rightDP&&(i=n.element.parent().hasClass("e-left-datepicker")?this._leftDP.popup:this._rightDP.popup);this._startDate&&this._startDate.date&&this._startDate.date.getMonth()==n.month&&this._startDate.date.getFullYear()==n.year&&(t=$(i.find('.current-month[date="'+this._startDate.date.toDateString()+'"]')),this._setStartDate(this._startDate.date,t,!1),this._startDate.date.getDate()+1==t.next("td").text()&&$(t).addClass("showrange"));this._endDate&&this._endDate.date&&this._endDate.date.getMonth()==n.month&&this._endDate.date.getFullYear()==n.year&&(r=$(i.find('.current-month[date="'+this._endDate.date.toDateString()+'"]')),this._setEndDate(this._endDate.date,r,!1));t==r&&$(t).removeClass("showrange");this._rightDP&&this._startDate&&this._startDate.date&&this._endDate&&this._endDate.date&&this._startDate.date.getFullYear()<=n.year&&this._endDate.date.getFullYear()>=n.year&&(f=n.element.parent().hasClass("e-left-datepicker")?$(i.find("td.current-month")[0]):$(i.find("td.current-month")[0]),u=n.element.parent().hasClass("e-left-datepicker")?"left":"right",this._updateRanges(u))},i.prototype._renderRangesWrapper=function(){ej.isNullOrUndefined(this._customRangePicker)&&(this._customRangePicker=ej.buildTag("div.e-custom-dateranges").css("height",this.datePopup.height()),this.popup.append(this._customRangePicker),this._customRangePicker.insertBefore(this._buttonDiv),this._ranges_li="<ul class='e-dateranges-ul'><\/ul>",this._customRangePicker.append(this._ranges_li))},i.prototype.setRange=function(n){var t,i;if(this._clearRanges(),typeof n=="string"){for(i=0;i<this.model.ranges.length;i++)if(t=this.model.ranges[i],t.label==n){this.model.startDate=t.range[0];this.model.endDate=t.range[1];this._updatePreRanges();return}}else if(typeof n=="object"&&n.length==2){this.model.startDate=n[0];this.model.endDate=n[1];this._updatePreRanges();return}},i.prototype._updatePreRanges=function(){this._selectedStartDate=this.model.startDate;this._selectedEndDate=this.model.endDate;this._resetValues();this._setValues();this._refreshMinMax();this._popupOpen||this._mainValue();this._setWaterMark()},i.prototype.destroy=function(){this.destroy()},i.prototype._destroy=function(){this._popupOpen&&this._showhidePopup();this.wrapper&&(this.element.removeClass("e-input"),this.element.insertAfter(this.wrapper),this.wrapper.remove());ej.isNullOrUndefined(this._leftDP)||this._leftDP.destroy();ej.isNullOrUndefined(this._rightDP)||this._rightDP.destroy();ej.isNullOrUndefined(this._rightTP)||this._rightTP.destroy();ej.isNullOrUndefined(this._leftTP)||this._leftTP.destroy();ej.isNullOrUndefined(this._scrollerObj)||this._scrollerObj.destroy();this.popup.remove()},i.prototype.addRanges=function(n){var o=this,e="",r,t,i,u,f;if(n)for(r=0;r<n.length;r++)t=n[r],i=t.range,i.length===2&&(u=new Date(i[0]),f=new Date(i[1]),ej.isNullOrUndefined(u)&&(u=new Date(i[0])),ej.isNullOrUndefined(f)&&(f=new Date(i[1])),u<=f&&(t.label||(t.label="PreDefined Ranges"),e+="<li aria-selected='false' title='"+t.label+"'class='rangeItem' e-date-range='"+JSON.stringify(i)+"' e-data-value='"+t.range+"'>"+t.label+"<\/li>"));this._renderRangesWrapper();this._customRangePicker.find(".e-dateranges-ul").append(e);this._off(this._customRangePicker.find("ul li.rangeItem"),"click",this._customSelection);this._on(this._customRangePicker.find("ul li.rangeItem"),"click",this._customSelection);this._scrollerObj&&this._scrollerObj.refresh()},i.prototype._righthoverRange=function(n){var r,i,t;if(this._activeItem=$(n.currentTarget),this._activeItem.hasClass("e-hidedate")){n.stopPropagation();return}this.popup.find(".range-hover").removeClass("range-hover");this._activeItem.hasClass("in-range")&&this._activeItem.addClass("range-hover");r=this._activeItem.attr("date");i=new Date(r);this._trigger("hover",{element:n.currentTarget,events:n,value:new Date(this._activeItem.attr("date"))});t=this;!ej.isNullOrUndefined(t._selectedStartDate)&&ej.isNullOrUndefined(t._selectedEndDate)&&this.popup.find(".current-month").each(function(n,r){var u=$(r),e=u.attr("date"),f;ej.isNullOrUndefined(e)||e===""||(f=new Date(e),f>t._startDate.date&&f<i?u.addClass("in-range"):u.removeClass("in-range"),f.getTime()===t._selectedStartDate.getTime()&&u.next().length!==0&&u.next("td.current-month").length!==0&&i>t._selectedStartDate&&new Date(new Date(t._selectedStartDate.getTime()).setDate(t._selectedStartDate.getDate()+1)).getTime()!==i.getTime()?u.addClass("showrange"):u.removeClass("showrange"))})},i.prototype._customSelection=function(n){if(this._customRangePicker.find(".e-active").removeClass("e-active"),$(n.currentTarget).attr("e-date-range")!="customPicker"){var t=$(n.currentTarget).attr("e-data-value").split(",");this.model.startDate=new Date(t[0]);this.model.endDate=new Date(t[1]);this._rightDP.element.parents(".e-datewidget").removeClass("e-error");this._customSet()}else this.model.startDate=null,this.model.endDate=null,this._clearRanges();$(n.currentTarget).addClass("e-active")},i.prototype._setWaterMark=function(){if(this.element!=null&&this.element.hasClass("e-input"))return this._isSupport||this.element.val()!=""?$(this.element).attr("placeholder",this._localizedLabels.watermarkText):this._hiddenInput.css("display","block").val(this._localizedLabels.watermarkText),!0},i.prototype._clearRanges=function(){this._updateRangesList();this._setOption("value","");this._rightDP.element.parents(".e-datewidget").removeClass("e-val-error");this._selectedStartDate=null;this._selectedEndDate=null;this._startDate&&(this._startDate.date=null);this._endDate&&(this._endDate.date=null);this.popup.find("td").removeClass("e-start-date e-end-date in-range e-active e-state-hover today");this.model.value=null;this.model.startDate=null;this.model.endDate=null;this._buttonDiv&&this._buttonDiv.find(".e-drp-apply").addClass("e-disable")},i.prototype.clearRanges=function(){this._clearRanges();this._refreshMinMax();this.element.val("");this._trigger("_change",{value:this.model.value});this._trigger("change",{value:this.model.value,startDate:this.model.startDate,endDate:this.model.endDate});this._trigger("clear",{})},i.prototype._getLocalizedLabels=function(){return ej.getLocalizedConstants("ej.DateRangePicker",this.model.locale)},i.prototype._unWireEvents=function(){this._off($(".e-next",this.popup),"click",$.proxy(this._previousNextHandler,this));this._off($(".e-prev",this.popup),"click",$.proxy(this._previousNextHandler,this));this._off($(this._buttonDiv.find("div.e-drp-cancel")),"click",this._cancelButton);this._off($(this._buttonDiv.find("div.e-drp-reset")),"click",this.clearRanges);this._off(this.popup.find(".leftDate_wrapper.e-datepicker.e-js.e-input"),"blur",this._onPopupFocusOut);this._off(this.popup.find(".rightDate_wrapper.e-datepicker.e-js.e-input"),"blur",this._onPopupFocusOut);this.model.allowEdit&&(this._off(this.element,"blur",this._onMainFocusOut),this._off(this.element,"focus",this._onFocusIn),this._off(this.element,"keydown",this._onKeyDown))},i.prototype._onDocumentKeyDown=function(n){n.keyCode=="13"&&!this._buttonDiv.find(".e-drp-apply").hasClass("e-disable")&&this.wrapper.hasClass("e-focus")&&this._buttonDiv.find(".e-drp-apply").click()},i.prototype._wireEvents=function(){this._on($(".e-next",this.popup),"click",$.proxy(this._previousNextHandler,this));this._on($(".e-prev",this.popup),"click",$.proxy(this._previousNextHandler,this));this._on($(this._leftDP.sfCalendar.find("table .e-datepicker-months td")),"click",$.proxy(this._previousNextHandler,this));var n=this;this._on($(this._buttonDiv.find("div.e-drp-reset")),"click",this.clearRanges);this._on($(this._buttonDiv.find("div.e-drp-apply")),"click",function(){n._buttonDiv.find(".e-drp-apply").hasClass("e-disable")||(n._isPopScroll=!1,n._updateInput(),n._showhidePopup(),n._buttonDiv.find(".e-drp-apply").addClass("e-disable"),this._trigger("change",{value:this.model.value,startDate:this.model.startDate,endDate:this.model.endDate}),this._trigger("select",{startDate:this.model.startDate,endDate:this.model.endDate,value:this.model.value}))});this._on($(window),"resize",this._resizePopup);$(document).on("mousedown",$.proxy(this._onDocumentClick,this));$(document).on("keydown",$.proxy(this._onDocumentKeyDown,this));this._on($(this._buttonDiv.find("div.e-drp-cancel")),"click",this._cancelButton);this._on(this.popup.find(".leftDate_wrapper.e-datepicker.e-js.e-input"),"blur",this._onPopupFocusOut);this._on(this.popup.find(".rightDate_wrapper.e-datepicker.e-js.e-input"),"blur",this._onPopupFocusOut);this._on(this.popup.find(".leftDate_wrapper.e-timepicker.e-js.e-input"),"blur",this._onPopupFocusOut);this._on(this.popup.find(".rightDate_wrapper.e-timepicker.e-js.e-input"),"blur",this._onPopupFocusOut);this.model.allowEdit&&(this._on(this.element,"blur",this._onMainFocusOut),this._on(this.element,"focus",this._onFocusIn),this._on(this.element,"keydown",this._onKeyDown));this._on(this._leftDP.element,"keydown",this._onKeyDown);this._on(this._rightDP.element,"keydown",this._onKeyDown);this.popup.on("mouseenter touchstart",$.proxy(function(){this._isPopScroll=!0},this));this.popup.on("mouseleave touchend",$.proxy(function(){this._isPopScroll=!1},this))},i.prototype._onFocusIn=function(n){this._isSupport&&(n.preventDefault(),this._isFocused=!0);this.wrapper.hasClass("e-error")&&(this._validState=!1,this.wrapper.removeClass("e-error"));this.model.showPopupButton||this.model.readOnly||this.popupShow(n);this.model.showPopupButton||this._on(this.element,"click",this._elementClick);this.wrapper.addClass("e-focus")},i.prototype._onKeyDown=function(n){n.keyCode==13&&($(n.currentTarget).hasClass("e-datepicker")?(this._validateValues($(n.currentTarget).val(),$(n.currentTarget).parents(".e-left-datepicker").length>0?"left":"right"),$(n.currentTarget).parents(".e-left-datepicker").length>0?this._leftDP.model.value=this.model.startDate:this._rightDP.model.value=this.model.endDate,this._onPopupFocusOut(n)):$(n.currentTarget).hasClass("leftTime")?this._leftTP._trigger("select"):this._rightTP._trigger("select"));n.stopImmediatePropagation()},i.prototype._cancelButton=function(){this._prevValue=null;this._isPopScroll=!1;this._clearRanges();this._onMainFocusOut();this._showhidePopup()},i.prototype._updateRanges=function(n){var i=n=="left"?this._leftDP:this._rightDP,t=this;if(i.popup.find("td.current-month").each(function(n,i){var r=$(i),f=r.attr("date"),u;ej.isNullOrUndefined(f)||f===""||(u=new Date(f),ej.isNullOrUndefined(t._startDate)||ej.isNullOrUndefined(t._startDate.date)||ej.isNullOrUndefined(t._endDate.date)||(u>t._startDate.date&&u<t._endDate.date?r.addClass("in-range"):r.removeClass("in-range")),ej.isNullOrUndefined(t._startDate)||ej.isNullOrUndefined(t._startDate.date)||u.toDateString()!=t._startDate.date.toDateString()||(r.addClass("e-start-date"),ej.isNullOrUndefined(t._endDate)||ej.isNullOrUndefined(t._endDate.date)||t._startDate.date.toDateString()==t._endDate.date.toDateString()||r.addClass("showrange"),r.removeClass("in-range")),ej.isNullOrUndefined(t._endDate)||ej.isNullOrUndefined(t._endDate.date)||ej.isNullOrUndefined(t._endDate)||u.toDateString()!=t._endDate.date.toDateString()||(r.addClass("e-end-date"),r.removeClass("in-range")))}),i.popup.find(".e-start-date").length>0){if($(i.popup.find(".e-start-date")).next("td.in-range").length>0)return;$(i.popup.find(".e-start-date")).removeClass("showrange")}},i.prototype.getSelectedRange=function(){return{startDate:this.model.startDate,endDate:this.model.endDate}},i.prototype.enable=function(){this.element[0].disabled=!1;this.model.enabled=!0;this.wrapper.removeClass("e-disable");this.element.removeClass("e-disable");this.element.attr("aria-enabled","false");this.element.attr("enabled","enabled");this._isSupport||this._hiddenInput.attr("enabled","enabled");this.dateRangeIcon&&this.dateRangeIcon.removeClass("e-disable").attr("aria-disabled","false");this.popup.children("div").removeClass("e-disable").attr("aria-disabled","false");this._setOption("enabled",!0)},i.prototype.disable=function(){this.element[0].disabled=!0;this.model.enabled=!1;this.wrapper.addClass("e-disable");this.element.addClass("e-disable");this.element.attr("aria-disabled","true");this.element.attr("disabled","disabled");this._isSupport||this._hiddenInput.attr("disabled","disabled");this.dateRangeIcon&&this.dateRangeIcon.addClass("e-disable").attr("aria-disabled","true");this.popup.children("div").addClass("e-disable").attr("aria-disabled","true");this.popupHide();this._setOption("enabled",!1)},i.prototype._onMainFocusOut=function(){var n=this.element.val(),t;if(this.wrapper.removeClass("e-focus"),this.element.val()!=""||this._prevValue!=null){if(this._prevValue&&this._prevValue==this.element.val()){this._validState?this.wrapper.removeClass("e-error").removeClass("e-focus"):this.wrapper.addClass("e-error").removeClass("e-focus");return}if(this._updateRangesList(),this.element.val()==""){this.wrapper.removeClass("e-error");this._clearRanges();this._setWaterMark();this._refreshMinMax();this._trigger("change",{value:this.model.value,startDate:null,endDate:null});this._trigger("_change",{value:this.model.value});return}this.wrapper.removeClass("e-error");var i=this.element.val().split(this.model.separator),r=ej.parseDate(i[0],this._dateTimeFormat,this.model.locale),u=ej.parseDate(i[1],this._dateTimeFormat,this.model.locale);if(this._resetValues(),this._validState=!0,this._validateValues(r,"left")&&this._validateValues(u,"right")||(this._clearRanges(),this._refreshMinMax(),t=!0),this._startEndValidation()||(this._clearRanges(),this._refreshMinMax(),t=!0),n!=""&&t){this.element.val(n);this.wrapper.addClass("e-error");this.model.value=null;this._validState=!1;this._trigger("_change",{value:this.element.val()});this._trigger("change",{value:this.model.value,startDate:null,endDate:null});return}this._resetValues();this._setValues();this._refreshMinMax();this.model.value=this._validState&&n!=""?n:null;this._popupOpen||this._mainValue();this._prevValue=this.model.value;this._validState?this.wrapper.removeClass("e-error").removeClass("e-focus"):this.wrapper.addClass("e-error").removeClass("e-focus");this._trigger("change",{value:this.model.value,startDate:this.model.startDate,endDate:this.model.endDate})}},i.prototype._onPopupFocusOut=function(n){var r;(ej.format(this._selectedStartDate,"M/d/yyyy")!=$("#daterangeleftDate_wrapper").val()||ej.format(this._selectedEndDate,"M/d/yyyy")!=$("#daterangerightDate_wrapper").val())&&this._updateRangesList();r=$(n.currentTarget).parents(".e-left-datepicker").length>0?this._leftDP:this._rightDP;this._validateValues($(n.currentTarget).val(),$(n.currentTarget).parents(".e-left-datepicker").length>0?"left":"right");$(n.currentTarget).parents(".e-left-datepicker").length>0?this._leftDP.model.value=this.model.startDate:this._rightDP.model.value=this.model.endDate;var t=this.model.startDate,u=this.model.endDate,i=!1;if(this._rightDP.element.parents(".e-datewidget").removeClass("e-val-error"),this._startEndValidation()||($(n.currentTarget).parents(".e-left-datepicker").length>0?(this._clearRanges(),this.model.startDate=t,this._selectedStartDate=this.model.startDate):(this._rightDP.element.parents(".e-datewidget").addClass("e-val-error"),this.model.endDate=null,i=!0)),t==null){this._clearRanges();return}this._selectedStartDate=this.model.startDate;this._selectedEndDate=this.model.endDate;this._resetValues();this._setValues();this.model.showPopupButton||this._off(this.element,"click",this._elementClick);this._refreshMinMax();this._popupOpen||this._mainValue();i&&this._rightDP.element.val(u.toLocaleDateString());this._setWaterMark()},i.prototype._resetValues=function(){this._leftDP.option("maxDate",null);this._rightDP.option("minDate",null);this._leftDP.option("value",this._leftDP.model.value);this._rightDP.option("value",this._rightDP.model.value)},i.prototype._refreshMinMax=function(){var n=this._getNextMonth(this._leftDP._calendarDate),t;n.toDateString()>this._rightDP._calendarDate.toDateString()&&(t=this._rightDP.model.value,this._rightDP._calendarDate=n,this._rightDP._dateValue=n,this._rightDP.option("value",n));this._rightDP.option("minDate",n);this._rightDP.option("value",t);var t=this._rightDP._calendarDate,i=t.getFullYear(),r=t.getMonth();this._leftDP.option("maxDate",new Date(i,r,0))},i.prototype._refreshEvents=function(){this._off(this._rightDP.sfCalendar.find("table .e-datepicker-days td.e-state-default"),"click",this._dateEleClicked);this._off(this._leftDP.sfCalendar.find("table .e-datepicker-days td.e-state-default"),"click",this._dateEleClicked);this._off(this._rightDP.sfCalendar.find("table .e-datepicker-days td.e-state-default"),"mouseover",this._righthoverRange);this._off(this._leftDP.sfCalendar.find("table .e-datepicker-days td.e-state-default"),"mouseover",this._righthoverRange);this._on(this._leftDP.sfCalendar.find("table .e-datepicker-days td.e-state-default"),"mouseover",this._righthoverRange);this._on(this._leftDP.sfCalendar.find("table .e-datepicker-days td.e-state-default"),"click",this._dateEleClicked);this._on(this._rightDP.sfCalendar.find("table .e-datepicker-days td.e-state-default"),"mouseover",this._righthoverRange);this._on(this._rightDP.sfCalendar.find("table .e-datepicker-days td.e-state-default"),"click",this._dateEleClicked);this._on($(this._leftDP.sfCalendar.find("table .e-datepicker-months td")),"click",$.proxy(this._previousNextHandler,this))},i.prototype._previousNextHandler=function(n){var s=$(n.currentTarget).closest(".e-calendar").parent(),u=s.hasClass("e-left-datepicker")?"left":"right",i,r,f,e,h,t;if(n.type=="_month_Loaded"?u=="left"?(r=$(this._rightDP.popup.find("td.current-month")[0]).attr("date"),i=this._leftDP._dateValue.toDateString()):u=="right"&&(i=$(this._leftDP.popup.find("td.current-month")[0]).attr("date"),r=this._rightDP._dateValue.toDateString()):(r=$(this._rightDP.popup.find("td.current-month")[0]).attr("date"),i=$(this._leftDP.popup.find("td.current-month")[0]).attr("date")),f=new Date(i),e=new Date(r),f.setHours(0,0,0,0),e.setHours(0,0,0,0),h=!0,u=="right"){t=$("table",this._leftDP.sfCalendar).get(0).className;t=="e-dp-viewdays"&&(this._leftDP._stopRefresh=!0);this._rightDP._stopRefresh=!1;var o=e,c=o.getFullYear(),l=o.getMonth();this._leftDP.option("maxDate",new Date(c,l,0));t=="e-dp-viewmonths"&&this._leftDP._startLevel("year");this._leftDP._checkDateArrows()}else t=$("table",this._rightDP.sfCalendar).get(0).className,$("table",this._rightDP.sfCalendar).get(0).className=="e-dp-viewdays"&&(this._rightDP._stopRefresh=!0),this._leftDP._stopRefresh=!1,this._rightDP.option("minDate",this._getNextMonth(f)),t=="e-dp-viewmonths"&&this._rightDP._startLevel("year"),this._rightDP._checkDateArrows();this._rightDP.element.parents(".e-datewidget").removeClass("e-error")},i}(ej.WidgetBase);window.ej.widget("ejDateRangePicker","ej.DateRangePicker",new t);window.ejDateRangePicker=null;ej.DateRangePicker.Locale={};ej.DateRangePicker.Locale=ej.DateRangePicker.Locale||{};ej.DateRangePicker.Locale["default"]=ej.DateRangePicker.Locale["en-US"]={ButtonText:{apply:"Apply",cancel:"Cancel",reset:"Reset"},watermarkText:"Select Range",customPicker:"Custom Picker"}});var selectJoinOption=window.Server.App.LocalizationContent.SelectJoin.replace("/ '/g","\\'"),targetColumn,actualColumn,valueAdded,conditionMeasure,validation=0,conditionAdded=0,display=1,listItems,listDimensionItems,listDimensionValues,dropdown=1,selectedRangeValues,dimensionColumns,measureColumns,addButtonClicked=0,buttonValue,addConditionClicked=0,summaryType={0:"None",1:"Summation",2:"Average",3:"Maximum",4:"Minumum",5:"Standard Deviation",6:"Variance",7:"Count",8:"Distinct Count",9:"Weighted Average",10:"AGG"},title="";$("#custom-expression-editor-container").ejDialog({allowDraggable:!1,enableResize:!1,enableModal:!0,showHeader:!1,showOnInit:!1,close:"onExpressionEditorDialogClose",open:"onExpressionEditorDialogOpen",width:"876px"});customExpressionWaitingPopupTemplateId=createLoader("custom-expression-editor-container_wrapper");$("#custom-expression-editor-container_wrapper").ejWaitingPopup({template:$("#"+customExpressionWaitingPopupTemplateId)});$(document).on("click","#add-alert-column",function(){var t,u,e,f;cursorPos.codemirrorIgnore;t=cursorPos.codemirror.getCursor();initialPosition=t;var n=t.line,i=t.ch,r=cursorPos.codemirror.getLine(n);initialLine=r;u=r.length;cursorPos.codemirror.setSelection({line:n,ch:0},{line:n,ch:u});cursorPos.codemirror.replaceSelection(initialLine);cursorPos.codemirror.setSelection({line:n,ch:i},{line:n,ch:i});e=$(":selected",this);f=$("#widget-items option:selected").closest("optgroup").attr("data-id");cursorPos.codemirror.replaceSelection("{:"+f+":"+$("#widget-items").val()+"}")});$(".condition-category").find("select").each(function(){$(this).find("option:selected").val==""?($(this).siblings(".bootstrap-select").addClass("validation-error"),$("#add-alert-rule").attr("disabled",!0)):($(this).siblings(".bootstrap-select").removeClass("validation-error"),$("#add-alert-rule").attr("disabled",!1))});$(document).on("focus",".frequency-info",function(){$(this).val()==""?($(this).parent("div").find("span").css("display","inline"),$(this).addClass("validation-error")):($(this).parent("div").find("span").css("display","none"),$(this).removeClass("validation-error"))});$(document).on("keyup",".frequency-info",function(){$(this).val()==""?($(this).parent("div").find("span").css("display","inline"),$(this).addClass("validation-error")):($(this).parent("div").find("span").css("display","none"),$(this).removeClass("validation-error"))});$(document).on("focusout",".frequency-info",function(){$(this).val()!=""?($(this).parent("div").find("span").css("display","none"),$(this).removeClass("validation-error")):($(this).parent("div").find("span").css("display","inline"),$(this).addClass("validation-error"))});$(document).on("keyup",".frequency-info",function(){$(this).val()!=""?($(this).parent("div").find("span").css("display","none"),$(this).removeClass("validation-error")):($(this).parent("div").find("span").css("display","inline"),$(this).addClass("validation-error"))});$(document).on("focus",".add-value input",function(){$(this).val()==""?($(this).parent(".add-value").find(".add-custom").css("display","inline"),$(this).parent(".add-value").find(".add-custom").css("visibility","visible"),$(this).addClass("validation-error")):($(this).parent(".add-value").find(".add-custom").css("display","none"),$(this).parent(".add-value").find(".add-custom").css("visibility","hidden"),$(this).removeClass("validation-error"))});$(document).on("focusout",".add-value input",function(){$(this).val()!=""?($(this).parent(".add-value").find(".add-custom").css("display","none"),$(this).parent(".add-value").find(".add-custom").css("visibility","hidden"),$(this).removeClass("validation-error")):($(this).parent(".add-value").find(".add-custom").css("display","inline"),$(this).parent(".add-value").find(".add-custom").css("visibility","visible"),$(this).addClass("validation-error"))});$(document).on("focus",".add-value-dimension input",function(){$(this).val()==""?($(this).parent(".add-value-dimension").find(".add-dimension-custom").css("display","inline"),$(this).parent(".add-value-dimension").find(".add-dimension-custom").css("visibility","visible"),$(this).addClass("validation-error")):($(this).parent(".add-value-dimension").find(".add-dimension-custom").css("display","none"),$(this).parent(".add-value-dimension").find(".add-dimension-custom").css("visibility","hidden"),$(this).removeClass("validation-error"))});$(document).on("focusout",".add-value-dimension input",function(){$(this).val()!=""?($(this).parent(".add-value-dimension").find(".add-dimension-custom").css("display","none"),$(this).parent(".add-value-dimension").find(".add-dimension-custom").css("visibility","hidden"),$(this).removeClass("validation-error")):($(this).parent(".add-value-dimension").find(".add-dimension-custom").css("display","inline"),$(this).parent(".add-value-dimension").find(".add-dimension-custom").css("visibility","visible"),$(this).addClass("validation-error"))});$(document).on("keyup",".add-value input",function(){$(this).val()==""?($(this).parent(".add-value").find(".add-custom").css("display","inline"),$(this).parent(".add-value").find(".add-custom").css("visibility","visible"),$(this).addClass("validation-error")):($(this).parent(".add-value").find(".add-custom").css("display","none"),$(this).parent(".add-value").find(".add-custom").css("visibility","hidden"),$(this).removeClass("validation-error"))});$(document).on("keyup",".add-value input",function(){$(this).val()!=""?($(this).parent(".add-value").find(".add-custom").css("display","none"),$(this).parent(".add-value").find(".add-custom").css("visibility","hidden"),$(this).removeClass("validation-error")):($(this).parent(".add-value").find(".add-custom").css("display","inline"),$(this).parent(".add-value").find(".add-custom").css("visibility","visible"),$(this).addClass("validation-error"))});$(document).on("keyup",".add-value-dimension input",function(){$(this).val()==""?($(this).parent(".add-value-dimension").find(".add-dimension-custom").css("display","inline"),$(this).parent(".add-value-dimension").find(".add-dimension-custom").css("visibility","visible"),$(this).addClass("validation-error")):($(this).parent(".add-value-dimension").find(".add-dimension-custom").css("display","none"),$(this).parent(".add-value-dimension").find(".add-dimension-custom").css("visibility","hidden"),$(this).removeClass("validation-error"))});$(document).on("keyup",".add-value-dimension input",function(){$(this).val()!=""?($(this).parent(".add-value-dimension").find(".add-dimension-custom").css("display","none"),$(this).parent(".add-value-dimension").find(".add-dimension-custom").css("visibility","hidden"),$(this).removeClass("validation-error")):($(this).parent(".add-value-dimension").find(".add-dimension-custom").css("display","inline"),$(this).parent(".add-value-dimension").find(".add-dimension-custom").css("visibility","visible"),$(this).addClass("validation-error"))});$(document).on("click","#add-condition",function(){var r,u,f,t,i,n;for(window.listItems="",window.listDimensionItems="",r=$("#selected_dashboard").find("option:selected").val(),u=$("#selected-items").find("option:selected").val(),$(this).siblings("#measure-div").find(".condition-div-statement").length==0?$("#measure-div").append('<span id="form-message" class="error-message-widget validate-error no-padding col-sm-8 col-xs-8"><\/span><label class="custom-expression-columns" style="top: 5px;">'+window.Server.App.LocalizationContent.CutomExpression+'<\/label><div class="col-sm-12 col-xs-12 condition-div-statement no-padding first-condition"><span class="filterarea"><span class="filterareatext"><\/span><input type="hidden" class="filterareainput"><\/span><a href="javascript:void(0);" title="" class="add-where-local remove-measure-dimension pull-right su su-close"><\/a><div class="measure-statement col-sm-12 col-xs-12 no-padding"><div class="col-sm-3 col-xs-3 no-padding measure-column-col column" id="condition-first-col"><select id="selected-col-option" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectColumn+'" class="selectpicker select-condition col-sm-2 col-xs-2 no-padding no-margin" data-size="5"><\/select><\/div><input class="add-comparison btn"  type="button" value='+window.Server.App.LocalizationContent.AddComparisionTarget+'><div class="add-comparison-target col-sm-6 col-xs-6" ><span class="remove-comparison su su-close" data-toggle="tooltip" data-container="body" data-placement="right" title="'+window.Server.App.LocalizationContent.RemoveComparisionTarget+'"><\/span><div class="col-sm-2 col-xs-1 no-padding column-condition no-margin" id="where-condition"><select id="selected-condition" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectCondition+'" class="col-sm-1 col-xs-1 no-padding no-margin" data-size="5"><option value="0" selected="selected" class="su su-equals">Equals<\/option><option value="1" class="su su-not-equals">Not Equals<\/option><option value="2" class="su su-lesser-than">Less Than<\/option><option value="3" class="su su-greater-than">Greater Than<\/option><option value="4" class="su su-lesser-than-or-equal-to">Less Than Or Equals<\/option><option value="5" class="su su-greater-than-or-equal-to">Greater Than Or Equals<\/option><\/select><\/div><div class="col-sm-4 col-xs-3 no-padding condition-type no-margin" id="condition-type"><select id="switch-value" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectTarget+'" class="selectpicker col-sm-2 col-xs-2 no-padding no-margin select-value" data-size="5"><option value="" disabled class="hide-option"selected="selected">'+window.Server.App.LocalizationContent.SelectTarget+'<\/option><option value="0">Condition<\/option><option value="1">Custom<\/option><\/select><\/div><div class="col-sm-5 col-xs-4 no-padding  measure-column-col  target-column no-margin" id="condition-second-col"><select id="selected-col2-option" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectColumn+'" class="selectpicker select-condition col-sm-2 col-xs-2 no-padding no-margin" data-size="5"><\/select><\/div><div class="col-sm-4 col-xs-4 no-padding no-margin add-value"><input type= "text"  id="value" class=" form-control validation-input"><span class="add-custom" style="display:none;">'+window.Server.App.LocalizationContent.CustomValueNumericValidator+'<\/span><\/div><\/div><a href="javascript:void(0);" class="col-md-12  col-sm-12 col-lg-12 col-xs-12 add-where-local" id="add-dimensions"><span class="su su-add"><\/span><span class="margin-alignment">Add Where condition<\/span><\/a><\/div><div class=" col-sm-12 col-xs-12 no-padding dimension-statement no-margin"><\/div><\/div>'):$("#measure-div").append('<div class="col-sm-12 col-xs-12 condition-div-statement no-padding margin-condition-div-statement"><span class="filterarea"><span class="filterareatext"><\/span><input type="hidden" class="filterareainput"><\/span><a href="javascript:void(0);" title="" class="remove-measure-dimension pull-right su su-close"><\/a><div class="col-sm-2 col-xs-2 no-padding selected-joins" id="selected-joins"><select id="selected-join-option" data-live-search="true" title='+selectJoinOption+' class="selectpicker col-sm-2 col-xs-2 join-option no-padding" data-size="5"><option value="0" class="and" selected="selected">AND<\/option><option value="1" class="or">OR<\/option><option value="2" class="nand">AND NOT<\/option><option value="3" class="nor">OR NOT<\/option><\/select><\/div><div class="measure-statement col-sm-12 col-xs-12 no-padding"><div class="col-sm-3 col-xs-3 no-padding measure-column-col column" id="condition-first-col"><select id="selected-col-option" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectColumn+'" class="selectpicker select-condition col-sm-2 col-xs-2 no-padding no-margin" data-size="5"><\/select><\/div><input class="add-comparison btn"  type="button" value='+window.Server.App.LocalizationContent.AddComparisionTarget+'><div class="add-comparison-target col-sm-6 col-xs-6" ><span class="remove-comparison su su-close" data-toggle="tooltip" data-container="body" data-placement="right" title="'+window.Server.App.LocalizationContent.RemoveComparisionTarget+'"><\/span><div class="col-sm-2 col-xs-1 no-padding  column-condition no-margin" id="where-condition"><select id="selected-condition" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectCondition+'" class="col-sm-4 col-xs-4 no-padding no-margin" data-size="5"><option value="0" selected="selected" class="su su-equals">Equals<\/option><option value="1" class="su su-not-equals">Not Equals<\/option><option value="2" class="su su-lesser-than">Less Than<\/option><option value="3" class="su su-greater-than">Greater Than<\/option><option value="4" class="su su-lesser-than-or-equal-to">Less Than Or Equals<\/option><option value="5" class="su su-greater-than-or-equal-to">Greater Than Or Equals<\/option><\/select><\/div><div class="col-sm-4 col-xs-3 no-padding condition-type no-margin" id="condition-type"><select id="switch-value" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectTarget+'" class="selectpicker col-sm-2 col-xs-2 no-padding no-margin select-value" data-size="5"><option value="" disabled class="hide-option"selected="selected" >'+window.Server.App.LocalizationContent.SelectTarget+'<\/option><option value="0">Condition<\/option><option value="1">Custom<\/option><\/select><\/div><div class="col-sm-5 col-xs-4 no-padding  measure-column-col  target-column no-margin" id="condition-second-col"><select id="selected-col2-option" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectColumn+'" class="selectpicker select-condition col-sm-2 col-xs-2 no-padding no-margin" data-size="5"><\/select><\/div><div class="col-sm-4 col-xs-4 no-padding no-margin add-value"><input type= "text" id="value" class="form-control validation-input"><span class="add-custom">'+window.Server.App.LocalizationContent.CustomValueNumericValidator+'<\/span><\/div><\/div><a href="javascript:void(0);" class="col-md-12  col-sm-12 col-lg-12 col-xs-12 add-where-local" id="add-dimensions"><span class="su su-add"><\/span><span class="margin-alignment">Add Where condition<\/span><\/a><\/div><div class=" col-sm-12 col-xs-12 no-padding dimension-statement  no-margin"><\/div><\/div>'),f=$(this).siblings("#measure-div").find(".condition-div-statement"),t=0;t<f.length;t++)$(this).siblings("#measure-div").find(".condition-div-statement .filterareatext").eq(t).html("Filter : "+(t+1)),$(this).siblings("#measure-div").find(".condition-div-statement .filterareainput").eq(t).val(t+1);i=$("#condition-category").find("option:selected").html();$(this).closest(".condition-div-statement .measure-statement").find(".measure-column-col select").html("");$(this).closest(".condition-div-statement .measure-statement").find(".measure-column-col select").append('<option value="" disabled class="hide-option" selected="selected">Select Column<\/option>'+window.listItems).selectpicker("refresh");$(this).parent(".joining-condition").remove();$(".where-global").css("display","inline");$(this).closest(".condition-div-statement").find(".add-value,.target-column").css("visibility","hidden");parent.$("#popup-container_wrapper").ejWaitingPopup("show");parent.$("#editpopup-container_wrapper").ejWaitingPopup("show");n=$("#measure-div").find(".condition-div-statement:last");$(n).find(".and").hasClass("and-img")||($(n).find(".and").prepend("<img class='and-img'/>"),$(n).find(".and-img").attr("src",dashboardServerResourceUrl+"/images/and.png"),$(n).find(".or").prepend("<img class='or-img'/>"),$(n).find(".or-img").attr("src",dashboardServerResourceUrl+"/images/or.png"),$(n).find(".nand").prepend("<img class='nand-img'/>"),$(n).find(".nand-img").attr("src",dashboardServerResourceUrl+"/images/nand.png"),$(n).find(".nor").prepend("<img class='nor-img'/>"),$(n).find(".nor-img").attr("src",dashboardServerResourceUrl+"/images/nor.png"),$(n).find("select").selectpicker("refresh"));$(n).find(".column-condition .bootstrap-select .btn-default .filter-option").attr("id","option-selected");$(n).find(".column-condition .bootstrap-select .btn-default #option-selected").removeAttr("class");$(n).find(".column-condition .bootstrap-select .btn-default #option-selected").html("");$(n).find(".column-condition .bootstrap-select .btn-default #option-selected").addClass("su su-equals").addClass("filter-option pull-left");$(n).find(".column-condition .bootstrap-select .btn-default .filter-option").removeAttr("id");$.ajax({type:"POST",data:{itemId:r,name:u},url:getItemNamesUrl,async:!1,success:function(n){var i,t,f;for(parent.$("#popup-container_wrapper").ejWaitingPopup("hide"),parent.$("#editpopup-container_wrapper").ejWaitingPopup("hide"),i=n,t=0;t<i.data.length;t++)f=getSummaryType(i.data[t].SummaryType),i.data[t].IsWidgetBounded==!0&&(window.listItems+='<option value="'+i.data[t].ColumnName+'">'+f+" ("+i.data[t].DisplayName+")<\/option>"),i.data[t].CustomColumnType==2&&(window.listDimensionItems+='<option value="'+i.data[t].ColumnName+'">'+i.data[t].DisplayName+"<\/option>");$.ajax({type:"POST",data:{itemId:r,itemName:u,userId:$("#userid").val()},url:getCustomExpressionListUrl,success:function(n){var t,i;if(parent.$("#popup-container_wrapper").ejWaitingPopup("hide"),parent.$("#editpopup-container_wrapper").ejWaitingPopup("hide"),n!=null)for(t=0;t<n.Result.length;t++)window.listItems+='<option value="'+n.Result[t].Name+'">'+n.Result[t].Name+"<\/option>",window.listDimensionItems+='<option value="'+n.Result[t].Name+'">'+n.Result[t].Name+"<\/option>";$(".measure-column select,.measure-column-col select").each(function(){if($(this).html()==""){$(this).html("");$(this).append('<option value="" disabled class="hide-option"selected="selected">Select Column<\/option>'+window.listItems);var n=$(this).closest(".condition-div-statement .measure-statement").find("#selected-col-option,#selected-col2-option");refreshColumns(n);addTitleForColumns()}});$("#widget-items option").remove();$("#widget-items").append(window.listItems).selectpicker("refresh");window.listDimensionItems==""?($("#dimension-div .join-div").html(""),$("#dimension-div .dimension-statement").html(""),$(".schedule-dialog #data-changes-container #add-dimension-condition").css("display","none"),$(".measure-statement .add-where-local").css("display","none")):$(".dimension-column select,.dimension-column-col select").html()==""&&($(".dimension-column select,.dimension-column-col select").html(""),$(".dimension-column select,.dimension-column-col select").append('<option value="" disabled class="hide-option"selected="selected">Select Column<\/option>'+window.listDimensionItems).selectpicker("refresh"),i=$(this).closest(".condition-div-statement .dimension-statement").find("#selected-col-option"),refreshColumns(i),addTitleForColumns(),$("#add-dimension-condition").css("display","inline"))}})}});(i=="Increases"||i=="Decreases"||i=="Continuously Increases"||i=="Continuously Decreases")&&($(".measure-statement .column-condition,.measure-statement .condition-type").css("visibility","hidden"),$(".measure-statement .add-comparison-target").css("display","none"));$(".add-comparison-target").find(".remove-comparison").tooltip();$("#add-condition").css("margin-top","24px");addConditionClicked++;$(".add-error-msg").css("visibility","hidden");$("#add-condition").removeClass("add-first-condition-validation")});$(document).on("blur","#add-dimension-condition",function(){$(".add-error-msg").css("visibility","hidden");$("#add-condition").removeClass("add-first-condition-validation")});$(document).on("click",".add-comparison",function(){$(this).next(".add-comparison-target").siblings(".add-comparison").hide();$(this).siblings(".add-comparison-target").find(".remove-comparison").tooltip();$(this).next(".add-comparison-target").css("display","block")});$(document).on("click",".remove-comparison",function(){$(this).closest(".add-comparison-target").css("display","none");$(this).closest(".add-comparison-target").siblings(".add-comparison").show()});$(document).on("click","#add-dimension-condition",function(){$(this).siblings("#dimension-div").find(".condition-div-statement").length==0&&$("#condition-div #measure-div").find(".condition-div-statement").length>1?($("#dimension-div").append('<div class="col-sm-12 col-xs-12 condition-div-statement margin-dimension-statement no-padding"><div class="col-sm-12 col-xs-12 dimension-statement no-padding"><div class="col-sm-12 col-xs-12 no-padding dimension-each no-margin where"><div class="col-sm-1 col-xs-1 no-padding delete-button-dimension no-margin"><span class="su su-close action"><\/span><\/div><div class="col-sm-1 col-xs-1 where-class no-padding no-margin text-center"><span id="where">Where<\/span><\/div><div class="col-sm-2 col-xs-2 no-padding dimension-column-col actual-column no-margin" id="condition-first-col"><select id="selected-col-option" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectColumn+'" class="selectpicker col-sm-2 col-xs-2 no-padding select-condition" data-size="5"><\/select><span class="error-column"><\/span><\/div><div class="col-sm-2  col-xs-2 no-padding  column-dimension no-margin" id="where-condition"><select id="selected-condition" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectCondition+'" class="selectpicker col-sm-2 col-xs-2 no-padding" data-size="5"><option value = "" disabled class="hide-option" selected="selected">'+window.Server.App.LocalizationContent.SelectCondition+'<\/option><option value="0">Contains<\/option><option value="1">Starts With<\/option><option value="2">Ends With<\/option><option value="3">Not Contains<\/option><option value="4">Include<\/option><option value="5">Exclude<\/option><\/select><\/div><div class="col-sm-2 col-xs-2 no-padding condition-type no-margin" id="condition-type-dimension"><select id="switch-value" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectCondition+'" class="selectpicker col-sm-2 col-xs-2 no-padding no-margin select-value-dimension" data-size="5"><option value="" disabled class="hide-option" selected="selected">'+window.Server.App.LocalizationContent.SelectTarget+'<\/option><option value="0">Actual<\/option><option value="1">Custom<\/option><\/select><\/div><div class="col-sm-3 col-xs-3 no-padding dimension-column-value-col value target-column-value no-margin target-row" id="selected-value-condition"><select id="selected-value-condition" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectValue+'" class="selectpicker col-sm-3 col-xs-3 no-padding" data-size="5" multiple=""><\/select><\/div><div class="col-sm-3 col-xs-3 no-padding add-value-dimension"><input type= "text" class="form-control target-value validation-input" id="value-dimension"><span class="add-dimension-custom"><\/span><\/div><div class="col-sm-1 col-xs-1 no-padding add-dimension-after"><span class="su su-add add-dimension-condition-again" id=add-dimension-condition-again><\/span><\/div><div class="dropdown col-sm-1 col-xs-1 no-padding dropdown-class" ><\/div><\/div><a href="javascript:void(0);" title="" class="su su-close remove-dimension"><\/a><\/div><\/div>'),$(this).closest(".add-dimension-after").css("display","inline"),$("#condition-div .dimension-statement select").selectpicker("refresh"),$(".dimension-each").each(function(){if($(this).find(".dimension-column select,.dimension-column-col select").html()==""){$(this).find(".dimension-column select,.dimension-column-col select").append('<option value="" disabled class="hide-option"selected="selected">Select Column<\/option>'+window.listDimensionItems).selectpicker("refresh");var n=$(this).closest(".condition-div-statement .dimension-statement").find("#selected-col-option");refreshColumns(n);addTitleForColumns()}}),$(this).remove(),$("#add-condition").removeClass("add-first-condition-validation"),$(".add-error-msg").css("visibility","hidden")):$("#condition-div #measure-div").find(".condition-div-statement").length<1?($("#add-condition").addClass("add-first-condition-validation"),$(".add-error-msg").html(window.Server.App.LocalizationContent.ConditionValidator).css("visibility","visible")):($(".add-error-msg").html(window.Server.App.LocalizationContent.ConditionValidator).css("visibility","visible"),$("#add-condition").addClass("add-first-condition-validation"))});$(document).on("click",".add-dimension-condition-again",function(){$("#dimension-div .condition-div-statement .dimension-statement").append('<div class="col-sm-12 col-xs-12 no-padding dimension-each no-margin"><div class="col-sm-1 col-xs-1 no-padding delete-button-dimension no-margin"><span class="su su-close action"><\/span><\/div><div class="col-sm-2 col-xs-2 join-div no-padding no-margin"><select id="selected-join-option" data-live-search="true" title='+selectJoinOption+' class="selectpicker col-sm-2 col-xs-2 join-option no-padding" data-size="5"><option value="0" class="and" selected="selected">AND<\/option><option value="1" class="or">OR<\/option><\/select><\/div><div class="col-sm-2 col-xs-2 no-padding dimension-column-col actual-column no-margin" id="condition-first-col"><select id="selected-col-option" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectColumn+'" class="selectpicker col-sm-2 col-xs-2 no-padding select-condition" data-size="5"><\/select><span class="error-column"><\/span><\/div><div class="col-sm-2 col-xs-2 no-padding column-dimension no-margin" id="where-condition"><select id="selected-condition" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectCondition+'" class="selectpicker col-sm-2 col-xs-2 no-padding" data-size="5"><option value = "" disabled class="hide-option" selected="selected">'+window.Server.App.LocalizationContent.SelectCondition+'<\/option><option value="0">Contains<\/option><option value="1">Starts With<\/option><option value="2">Ends With<\/option><option value="3">Not Contains<\/option><option value="4">Include<\/option><option value="5">Exclude<\/option><\/select><\/div><div class="col-sm-2 col-xs-2 no-padding condition-type no-margin" id="condition-type-dimension"><select id="switch-value" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectCondition+'" class="selectpicker col-sm-2 col-xs-2 no-padding no-margin select-value-dimension" data-size="5"><option value="" name="" class="hide-option" disabled="disabled" selected="selected">'+window.Server.App.LocalizationContent.SelectTarget+'<\/option><option value="0">Actual<\/option><option value="1">Custom<\/option><\/select><\/div><div class="col-sm-3 col-xs-3  no-padding value dimension-column-value-col target-column-value no-margin target-row" id="selected-value-condition"><select id="select-value-condition" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectValue+'" class="selectpicker col-sm-3 col-xs-3 no-padding" data-size="5" multiple=""><\/select><\/div><div class="col-sm-3 col-xs-3 no-padding add-value-dimension"><input type= "text" class="form-control target-value validation-input" id="value-dimension"><span class="add-dimension-custom"><\/span><\/div><div class="col-sm-1 col-xs-1 no-padding  add-dimension-after"><span class="su su-add add-dimension-condition-again" id="add-dimension-condition-again"><\/span><\/div><\/div>');var n=$("#dimension-div").find(".condition-div-statement .dimension-each:last");$(n).find(".and").hasClass("and-img")||($(n).find(".and").prepend("<img class='and-img'/>"),$(n).find(".and-img").attr("src",dashboardServerResourceUrl+"/images/and.png"),$(n).find(".or").prepend("<img class='or-img'/>"),$(n).find(".or-img").attr("src",dashboardServerResourceUrl+"/images/or.png"),$(n).find(".nand").prepend("<img class='nand-img'/>"),$(n).find(".nand-img").attr("src",dashboardServerResourceUrl+"/images/nand.png"),$(n).find(".nor").prepend("<img class='nor-img'/>"),$(n).find(".nor-img").attr("src",dashboardServerResourceUrl+"/images/nor.png"),$(n).find("select").selectpicker("refresh"));$(this).closest(".add-dimension-after").css("display","inline");$("#condition-div .dimension-statement select").selectpicker("refresh");$(".dimension-each").each(function(){if($(this).find(".dimension-column select,.dimension-column-col select").html()==""){$(this).find(".dimension-column select,.dimension-column-col select").append('<option value="" disabled class="hide-option"selected="selected">Select Column<\/option>'+window.listDimensionItems).selectpicker("refresh");var n=$(this).closest(".condition-div-statement .dimension-statement").find("#selected-col-option");refreshColumns(n);addTitleForColumns()}});$(this).remove()});$(document).on("click","#add-dimensions",function(){$(this).parents(".measure-statement").siblings(".dimension-statement").append('<div class="col-sm-12 col-xs-12 no-padding dimension-each no-margin where"><div class="col-sm-1 col-xs-1 no-padding delete-button no-margin"><span class="su su-close action"><\/span><\/div><div class="col-sm-1 col-xs-1 where-class no-padding no-margin text-center"><span id="where">Where<\/span><\/div><div class="col-sm-2 col-xs-2 no-padding dimension-column-col actual-column no-margin" id="condition-first-col"><select id="selected-col-option" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectColumn+'" class="selectpicker col-sm-2 col-xs-2 no-padding select-condition" data-size="5"><\/select><span class="error-column"><\/span><\/div><div class="col-sm-2 col-xs-2 no-padding  column-dimension no-margin" id="where-condition"><select id="selected-condition" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectCondition+'" class="selectpicker col-sm-2 col-xs-2 no-padding" data-size="5"><option value = "" disabled class="hide-option" selected="selected">'+window.Server.App.LocalizationContent.SelectCondition+'<\/option><option value="0">Contains<\/option><option value="1">Starts With<\/option><option value="2">Ends With<\/option><option value="3">Not Contains<\/option><option value="4">Include<\/option><option value="5">Exclude<\/option><\/select><\/div><div class="col-sm-2 col-xs-2 no-padding condition-type no-margin" id="condition-type-dimension"><select id="switch-value" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectCondition+'" class="selectpicker col-sm-2 col-xs-2 no-padding no-margin select-value-dimension" data-size="5"><option value="" disabled class="hide-option" selected="selected">'+window.Server.App.LocalizationContent.SelectTarget+'<\/option><option value="0">Actual<\/option><option value="1">Custom<\/option><\/select><\/div><div class="col-sm-3 col-xs-3 no-padding dimension-column-value-col value target-column-value no-margin target-row" id="selected-value-condition"><select id="selected-value-condition" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectValue+'" class="selectpicker col-sm-3 col-xs-3 no-padding" data-size="5" multiple=""><\/select><\/div><div class="col-sm-3 col-xs-3 no-padding add-value-dimension"><input type= "text" class="form-control target-value validation-input" id="value-dimension"><span class="add-dimension-custom"><\/span><\/div><div class="col-sm-1 col-xs-1 no-padding add-dimension-after"><span class="su su-add add-dimension-again" id=add-dimension-again><\/span><\/div><\/div>');$(this).closest(".add-dimension-after").css("display","inline");$("#condition-div .dimension-statement select").selectpicker("refresh");$(".dimension-each").each(function(){if($(this).find(".dimension-column select,.dimension-column-col select").html()==""){$(this).find(".dimension-column select,.dimension-column-col select").append('<option value="" disabled class="hide-option"selected="selected">Select Column<\/option>'+window.listDimensionItems).selectpicker("refresh");var n=$(this).closest(".condition-div-statement .dimension-statement").find("#selected-col-option");refreshColumns(n);addTitleForColumns()}});$(".dimension-statement .condition-div-statement").css("border","none");$(this).attr("disabled","disabled");$(this).css("display","none")});$(document).on("click",".add-dimension-again",function(){$(this).parents(".dimension-statement").append('<div class="col-sm-12 col-xs-12 no-padding dimension-each no-margin"><div class="col-sm-1 col-xs-1 no-padding delete-button no-margin"><span class="su su-close action"><\/span><\/div><div class="col-sm-2 col-xs-2 join-div no-padding no-margin"><select id="selected-join-option" data-live-search="true" title='+selectJoinOption+' class="selectpicker col-sm-2 col-xs-2 join-option no-padding" data-size="5"><option value="0" class="and" selected="selected">AND<\/option><option value="1" class="or">OR<\/option><\/select><\/div><div class="col-sm-2 col-xs-2 no-padding dimension-column-col actual-column no-margin" id="condition-first-col"><select id="selected-col-option" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectColumn+'" class="selectpicker col-sm-2 col-xs-2 no-padding select-condition" data-size="5"><\/select><span class="error-column"><\/span><\/div><div class="col-sm-2 col-xs-2 no-padding column-dimension no-margin" id="where-condition"><select id="selected-condition" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectCondition+'" class="selectpicker col-sm-2 col-xs-2 no-padding" data-size="5"><option value = "" disabled class="hide-option" selected="selected">'+window.Server.App.LocalizationContent.SelectCondition+'<\/option><option value="0">Contains<\/option><option value="1">Starts With<\/option><option value="2">Ends With<\/option><option value="3">Not Contains<\/option><option value="4">Include<\/option><option value="5">Exclude<\/option><\/select><\/div><div class="col-sm-2 col-xs-2 no-padding condition-type no-margin" id="condition-type-dimension"><select id="switch-value" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectCondition+'" class="selectpicker col-sm-2 col-xs-2 no-padding no-margin select-value-dimension" data-size="5"><option value="" disabled class="hide-option" selected="selected">'+window.Server.App.LocalizationContent.SelectTarget+'<\/option><option value="0">Actual<\/option><option value="1">Custom<\/option><\/select><\/div><div class="col-sm-3 col-xs-3  no-padding value dimension-column-value-col target-column-value no-margin target-row" id="selected-value-condition"><select id="select-value-condition" data-live-search="true" title="'+window.Server.App.LocalizationContent.SelectValue+'" class="selectpicker col-sm-3 col-xs-3 no-padding" data-size="5" multiple=""><\/select><\/div><div class="col-sm-3 col-xs-3 no-padding add-value-dimension"><input type= "text" class="form-control target-value validation-input" id="value-dimension"><span class="add-dimension-custom"><\/span><\/div><div class="col-sm-1 col-xs-1 no-padding  add-dimension-after"><span class="su su-add add-dimension-again" id="add-dimension-again"><\/span><\/div><\/div>');$(this).parents(".dimension-each").next(".dimension-each").find("div.join-div select#selected-join-option .and").prepend("<img class='and-img'/>");$(this).parents(".dimension-each").next(".dimension-each").find("div.join-div select#selected-join-option .and-img").attr("src",dashboardServerResourceUrl+"/images/and.png");$(this).parents(".dimension-each").next(".dimension-each").find("div.join-div select#selected-join-option .or").prepend("<img class='or-img'/>");$(this).parents(".dimension-each").next(".dimension-each").find("div.join-div select#selected-join-option .or-img").attr("src",dashboardServerResourceUrl+"/images/or.png");$(this).parents(".dimension-each").next(".dimension-each").find("div.join-div select#selected-join-option .nand").prepend("<img class='nand-img'/>");$(this).parents(".dimension-each").next(".dimension-each").find("div.join-div select#selected-join-option .nand-img").attr("src",dashboardServerResourceUrl+"/images/nand.png");$(this).parents(".dimension-each").next(".dimension-each").find("div.join-div select#selected-join-option .nor").prepend("<img class='nor-img'/>");$(this).parents(".dimension-each").next(".dimension-each").find("div.join-div select#selected-join-option .nor-img").attr("src",dashboardServerResourceUrl+"/images/nor.png");$(this).closest(".add-dimension-after").css("display","inline");$("#condition-div .dimension-statement select").selectpicker("refresh");$(".dimension-each").each(function(){if($(this).find(".dimension-column select,.dimension-column-col select").html()==""){$(this).find(".dimension-column select,.dimension-column-col select").append('<option value="" disabled class="hide-option"selected="selected">Select Column<\/option>'+window.listDimensionItems).selectpicker("refresh");var n=$(this).closest(".condition-div-statement .dimension-statement").find("#selected-col-option");refreshColumns(n);addTitleForColumns()}});$(this).remove()});$(document).on("click",".remove-dimension",function(){$(this).parents("#dimension-div").html("");$("#condition-div").append('<button class="col-md-12  col-sm-12 col-lg-12 col-xs-12 where-global no-padding" id="add-dimension-condition"><span class="su su-add"><\/span><span class="margin-alignment">Add global Where condition<\/span><\/button>');$(".schedule-dialog #data-changes-container #add-dimension-condition").css("display","inline")});$(document).on("click",".remove-measure-dimension",function(){var t,n;for($(this).parents(".condition-div-statement").hasClass("first-condition")&&($(this).parents(".condition-div-statement").prev(".custom-expression-columns").remove(),$(this).parents(".condition-div-statement").prev(".error-message-widget").remove(),$(this).parents(".condition-div-statement").next(".condition-div-statement").find("#selected-joins").remove(),$(this).parents(".condition-div-statement").next(".condition-div-statement").addClass("first-condition"),$(this).parents(".condition-div-statement").next(".condition-div-statement").css("margin-top","0px")),$(this).parents(".condition-div-statement").remove(),t=$("#measure-div").find(".condition-div-statement"),n=0;n<t.length;n++)$("#measure-div").find(".condition-div-statement").eq(n).find(".filterareatext").html("Filter : "+(n+1)),$("#measure-div").find(".condition-div-statement").eq(n).find(".filterareainput").val(n+1)});$(document).on("click",".delete-button",function(){$(this).closest(".dimension-statement").find(".dimension-each").length==1&&$(this).parents(".condition-div-statement").find(".measure-statement a#add-dimensions").css("display","inline");$(this).closest(".dimension-each").hasClass("where")&&($(this).closest(".dimension-each").next(".dimension-each").find(".join-div").html(""),$(this).closest(".dimension-each").next(".dimension-each").find(".join-div").append('<span id="where">Where<\/span>'),$(this).closest(".dimension-each").next(".dimension-each").find(".join-div").addClass("col-sm-1 col-xs-1 where-class text-center"),$(this).closest(".dimension-each").next(".dimension-each").find(".where-class").removeClass("join-div col-sm-2 col-xs-2"),$(this).closest(".dimension-each").next(".dimension-each").addClass("where"));$(this).closest(".dimension-each").remove();$("#measure-div .condition-div-statement").each(function(){$(this).find(".dimension-statement .dimension-each:last").find(".add-dimension-after").html()==""&&$(this).find(".dimension-statement .dimension-each:last").find(".add-dimension-after").append('<span class="su su-add add-dimension-again" id="add-dimension-again"><\/span>')})});$(document).on("click",".delete-button-dimension",function(){$("#dimension-div .condition-div-statement .dimension-statement").find(".dimension-each").length==1?($(this).parents("#dimension-div").html(""),$("#condition-div").append('<button class="col-md-12  col-sm-12 col-lg-12 col-xs-12 where-global no-padding" id="add-dimension-condition"><span class="su su-add"><\/span><span class="margin-alignment">Add global Where condition<\/span><\/button>'),$(this).closest(".dimension-each").parent().remove(),$("#condition-div #add-dimension-condition").css("display","inline")):($(this).closest(".dimension-each").hasClass("where")&&($(this).closest(".dimension-each").next(".dimension-each").find(".join-div").html(""),$(this).closest(".dimension-each").next(".dimension-each").find(".join-div").append('<span id="where">Where<\/span>'),$(this).closest(".dimension-each").next(".dimension-each").find(".join-div").addClass("col-sm-1 col-xs-1 where-class text-center"),$(this).closest(".dimension-each").next(".dimension-each").find(".where-class").removeClass("join-div col-sm-2 col-xs-2"),$(this).closest(".dimension-each").next(".dimension-each").addClass("where")),$(this).closest(".dimension-each").remove(),$("#dimension-div .condition-div-statement .dimension-statement").find(".dimension-each:last").find(".add-dimension-after").html()==""&&$("#dimension-div .condition-div-statement .dimension-statement").find(".dimension-each:last").find(".add-dimension-after").append('<span class="su su-add add-dimension-again" id="add-dimension-again"><\/span>'))});$(document).on("click",".condition-type .bootstrap-select li",function(){if($(this).hasClass("selected active")){var n=$(this).attr("data-original-index");$(this).parents(".condition-type").find(".select-value option").each(function(){$(this).val()==(n-1).toString()?($(this).attr("selected","selected"),$(this).parents(".condition-type").hasClass("validation")&&($(this).parents(".condition-type").removeClass("validation"),$(this).parents(".condition-type").find(".bootstrap-select").removeClass("validation-error")),$(this).val()=="1"?($(this).parents(".condition-type").find(".selectpicker").selectpicker("refresh"),$(this).closest(".add-comparison-target").find(".target-column").css("visibility","hidden"),$(this).closest(".add-comparison-target").find(".target-column").css("display","none"),$(this).closest(".add-comparison-target").find(".add-value").css("visibility","visible"),$(this).closest(".add-comparison-target").find(".add-value").css("display","inline")):$(this).val()=="0"&&($(this).parents(".condition-type").find(".selectpicker").selectpicker("refresh"),$(this).closest(".add-comparison-target").find(".target-column").css("display","inline"),$(this).closest(".add-comparison-target").find(".target-column").css("visibility","visible"),$(this).closest(".add-comparison-target").find(".add-value").css("display","none"),$(this).closest(".add-comparison-target").find(".add-value").css("visibility","hidden"))):$(this).attr("selected")=="selected"&&$(this).removeAttr("selected")})}});$(document).on("change",".column-dimension",function(){var n;$(this).hasClass("validation")&&($(this).removeClass("validation"),$(this).children(".bootstrap-select").removeClass("validation-error"));$(this).find("option:selected").text()=="Between"?($(this).parent().children(".condition-type,.add-value-dimension,.target-column-value").css("display","none"),$(this).parent().find(".condition-type").before('<div class="col-sm-3 col-xs-3 no-padding pull-left from-date-div"><input type="text" class="form-control from-date validation-input"/><span class="date-error">'+window.Server.App.LocalizationContent.DateRangeValidator+"<\/span><\/div>"),n=$(this).parents("#measure-div").length>0?"datepicker"+$(this).parents(".condition-div-statement").index()+"id"+$(this).parent(".dimension-each").index():"date"+$(this).parents(".condition-div-statement").index()+"id"+$(this).parent(".dimension-each").index(),$(this).parent().find(".from-date").attr("id",n),$("#"+n).ejDateRangePicker({dateFormat:dateFormat}),$(this).parent().children(".add-dimension-after").removeClass("padding-left").css("margin-left","10px")):($(this).parent().children(".from-date-div").remove(),$(this).parent().children(".condition-type").css("display","inline"),$(this).parent().children(".add-dimension-after").css("margin-left","0px"))});$(document).on("change",".select-value-dimension",function(){$(this).parent().siblings(".actual-column").find("option:selected").val()==""?($(this).parent().siblings(".actual-column").addClass("validation"),$(this).parent().siblings(".actual-column").find(".bootstrap-select").addClass("validation-error"),$(this).parent().siblings(".actual-column").find(".error-column").html(window.Server.App.LocalizationContent.ColumnValidator).css("display","inline"),$(this).parent().siblings(".actual-column").find(".error-column").css("visibility","visible")):($(this).parent("div").hasClass("validation")&&($(this).parent("div").removeClass("validation"),$(this).siblings(".bootstrap-select").removeClass("validation-error")),$(this).find("option:selected").val()=="1"?($(this).parent().siblings(".dimension-column-value-col,.dimension-column-value").css("display","none"),$(this).parent().siblings(".add-value-dimension").find("input").val(""),$(this).parent().siblings(".add-value-dimension").css("display","inline"),$(this).parent().siblings(".add-dimension-after").addClass("padding-left")):($(this).parent().siblings(".dimension-column-value-col,.dimension-column-value").css("display","inline"),$(this).parent().siblings(".add-value-dimension").css("display","none"),$(this).parent().siblings(".add-dimension-after").addClass("padding-left")))});$(document).on("change","#selected-option",function(){$(".error-message-widget").css("display","none");$(".items-dropdown").removeClass("validation");$(".items-dropdown .bootstrap-select").removeClass("validation-error");$(".schedule-dialog #data-changes-container #add-condition").css("display","inline");$(".schedule-dialog #data-changes-container  #add-dimension-condition").css("display","inline");var n=$("#condition-category").find("option:selected").html(),t=$(".condition-div-statement").length;t==0&&$("#add-condition").trigger("click");n=="Increases"||n=="Decreases"||n=="Continuously Increases"||n=="Continuously Decreases"?($(".measure-statement .column-condition,.measure-statement .condition-type,.measure-statement .target-column").css("visibility","hidden"),$(".measure-statement .add-value").css("visibility","hidden"),$(".measure-statement .add-custom").css("display","none"),$(".measure-statement .add-comparison").hide(),$(".measure-statement .add-comparison-target").css("display","none")):($(".measure-statement .add-comparison-target").css("display","block"),$(".add-comparison-target").find(".remove-comparison").tooltip(),$(".measure-statement .column-condition,.measure-statement .condition-type").css("visibility","visible"),$(".measure-statement .condition-type").find(".bootstrap-select li").removeClass("selected"),$(".measure-statement .condition-type").find(".bootstrap-select li:first").addClass("selected active"),$(".measure-statement .condition-type").find(".bootstrap-select .btn-default").attr("title","Select Target"),$(".measure-statement .condition-type").find(".bootstrap-select .btn-default .filter-option").html("Select Target"),$(".column-condition").change());$("#condition-category .bootstrap-select button.selectpicker").removeAttr("title");$("#condition-category .bootstrap-select button.selectpicker span.filter-option").attr({title:$(this).find("option:selected").attr("data-title"),"data-toggle":"tooltip","data-container":"body","data-placement":"right"});$("#condition-category .bootstrap-select button.selectpicker span.filter-option").tooltip();$("#condition-category .bootstrap-select button.selectpicker span.filter-option").removeAttr("title")});$(document).on("change","#selected-items",function(){$(this).parent("div").hasClass("validation")&&($(this).parent("div").removeClass("validation"),$(this).siblings(".bootstrap-select").removeClass("validation-error"));window.listItems="";window.listDimensionItems="";display==1?display=2:($(".schedule-dialog #data-changes-container  #add-condition").css("display","none"),$(".schedule-dialog #data-changes-container  #add-dimension-condition").css("display","none"));($("#measure-div .condition-div-statement").length>0||$("#dimension-div .condition-div-statement").length>0)&&$("#condition-div #measure-div,#condition-div #dimension-div").html("");$(".error-message-widget").css("display","none");$("#selected-option").trigger("change");$(".select-picker").selectpicker("refresh")});$(document).on("change",".measure-column-col select,.dimension-column-col select",function(){var r;$(this).parent("div").hasClass("validation")&&($(this).parent("div").removeClass("validation"),$(this).siblings(".bootstrap-select").removeClass("validation-error"),$(this).parent("div").find(".error-column").css("display","none"),$(this).parent("div").find(".error-column").css("visibility","hidden"));listDimensionValues="";r=$("#selected_dashboard").find("option:selected").val();$("#selected_childdashboard").val()!=""&&(r=$("#selected_childdashboard").find("option:selected").val());var e=$("#selected-items").find("option:selected").val(),o=$(this).find("option:selected").val(),n=$(this).parents(".dimension-each"),i=$(n).find(".column-dimension"),u=$(n).find(".condition-type"),s=$(n).find(".from-date-div"),h=$(n).find(".add-value-dimension"),f=$(n).find(".add-dimension-after"),t=$(n).find(".dimension-column-value-col,.target-column-value");$(i).find("select").attr("disabled",!0);$(t).find("select").attr("disabled",!0);parent.$("#popup-container_wrapper").ejWaitingPopup("show");refreshTarget(u);$.ajax({type:"POST",data:{itemId:r,columnName:o,widgetName:e},url:getColumnValuesUrl,success:function(r){var o=r,p=r.summaryType,a=r.type,v=r.dataType,y=r.isBoolean,e,c,l;for(a==2&&v.toLowerCase()=="date"?($(n).find(".column-dimension select").html(""),$(n).find(".column-dimension select").append('<option value="" disabled class="hide-option" selected="selected">Select Condition<\/option><option value="0">Include<\/option><option value="1">Exclude<\/option><option value="3">Between<\/option>').selectpicker("refresh"),$(n).find(".add-value-dimension .add-dimension-custom").html(window.Server.App.LocalizationContent.DateFormatvalidator+dateFormat+window.Server.App.LocalizationContent.Format)):y?($(n).find(".column-dimension select").html(""),$(n).find(".column-dimension select").append('<option value="" disabled class="hide-option" selected="selected">Select Condition<\/option><option value="4">Include<\/option><option value="5">Exclude<\/option>').selectpicker("refresh"),$(n).find(".add-value-dimension .add-dimension-custom").html(window.Server.App.LocalizationContent.CustomValueValidator)):($(n).find(".column-dimension select").html(""),$(n).find(".column-dimension select").append('<option value="" disabled class="hide-option" selected="selected">'+window.Server.App.LocalizationContent.SelectCondition+'<\/option><option value="0">Contains<\/option><option value="1">Starts With<\/option><option value="2">Ends With<\/option><option value="3">Not Contains<\/option><option value="4">Include<\/option><option value="5">Exclude<\/option>').selectpicker("refresh"),$(n).find(".from-date-div").remove(),$(n).find(".condition-type").css("display","inline"),$(n).find(".add-value-dimension .add-dimension-custom").html(window.Server.App.LocalizationContent.CustomValueStringValidator)),e=0;e<o.data.length;e++)listDimensionValues+='<option value="'+o.data[e]+'">'+o.data[e]+"<\/option>";$(n).find(".dimension-column-value-col select,.target-column-value select").html("");$(n).find(".dimension-column-value-col select,.target-column-value select").append(listDimensionValues).selectpicker("refresh");c=$(n).find(".target-column-value select");l=$(n).find(".column-dimension select");refreshColumns(c);addTitleForColumnValues();$(i).find("select").removeAttr("disabled");$(t).find("select").removeAttr("disabled");$(i).find(".bootstrap-select li,.bootstrap-select .btn-default").removeClass("disabled");$(t).find(".bootstrap-select li,.bootstrap-select .btn-default").removeClass("disabled");$(i).find(".dropdown-menu").addClass("alignment-dropdown");$(t).find(".dropdown-menu").addClass("alignment-dropdown");$(i).find(".dropdown-menu .inner").addClass("alignment-dropdown-inner");$(t).find(".dropdown-menu .inner").addClass("alignment-dropdown-inner");$(i).find(".dropdown-menu li:first").css("height","0px");$(t).find(".dropdown-menu li:first").removeClass("selected");$(t).css("display","none");$(h).css("display","none");$(u).css("display","inline");$(s).remove();refreshColumns(l);addTitleForColumns();$(f).hasClass("padding-left")&&$(f).removeClass("padding-left");parent.$("#popup-container_wrapper").ejWaitingPopup("hide")}})});$(document).on("change",".column-condition",function(){$(this).parent("div").hasClass("validation")&&($(this).parent("div").removeClass("validation"),$(this).siblings(".bootstrap-select").removeClass("validation-error"));var n=$(this).find("option:selected").attr("class");$(this).find(".bootstrap-select .btn-default .filter-option").attr("id","option-selected");$(this).find(".bootstrap-select .btn-default #option-selected").removeAttr("class");$(this).find(".bootstrap-select .btn-default #option-selected").html("");$(this).find(".bootstrap-select .btn-default #option-selected").addClass(n).addClass("filter-option pull-left");$(this).find(".bootstrap-select .btn-default .filter-option").removeAttr("id")});$(document).on("click",".delete-action",function(){$(this).closest("#dimension-div .condition-div-statement").prev("div").remove();$(this).closest("#dimension-div .condition-div-statement").remove()});$(document).on("click",".delete-measure-dimension",function(){$(this).closest("#measure-div .condition-div-statement .dimension-statement .dimension-each").remove()});$(document).on("click",".delete-measure",function(){$(this).closest("#measure-div .condition-div-statement").prev("div").remove();$(this).closest("#measure-div .condition-div-statement").remove()});$(document).on("click",".delete-dimension",function(){$(this).parent().closest(".dimension-each").remove()});$(document).on("click",".delete-dimension-all",function(){$(this).parents().find(".dimension-statement").html()});$(document).on("click",".add-first-condition",function(){$("#measure-div").css("display","inline")});$(document).on("change",".change-event, input[type=radio][name=daily-recurrence-type], input[type=radio][name=end-type], input[type=radio][name=monthly], input[type=radio][name=yearly]",function(){var n=createScheduleMessage(!1);$("#schedule-message").text(n)});$(document).on("change",".join-option",function(){$(this).parent("div").hasClass("validation")&&($(this).parent("div").removeClass("validation"),$(this).siblings(".bootstrap-select").removeClass("validation-error"))});$(document).on("click",".target-row .bootstrap-select li a",function(n){n.stopPropagation()});$(document).on("click",".custom-expression-columns",function(){title=$(".popup-title").html();$("#selected-items").find("option:selected").val()==""?($("#selected-items").siblings(".bootstrap-select").addClass("validation-error"),$("#widget-message").css("display","inline")):$("#custom-expression-editor-container").ejDialog("open")});$(document).ready(function(){$("#data-changes-div-container").css("display","inline");typeof actionType!="undefined"&&actionType==="Edit"?item.ItemName!=null?(widgetNames(),$("#data-changes-container .items-dropdown").find(".bootstrap-select li").each(function(){if($(this).hasClass("disabled selected active")&&$(this).removeClass("selected active"),$(this).find("span .text").text().trim()==item.ItemName.trim()){$(this).addClass("selected active");var n=$(this).find(".text").text();$(this).parents(".bootstrap-select").find(".filter-option").html(n)}}),$("#data-changes-container .items-dropdown").find("select option").each(function(){$(this).val()==""&&$(this).removeAttr("selected");$(this).text().trim()==item.ItemName.trim()&&$(this).attr("selected","selected");$("#selected-items").selectpicker("refresh")}),$("#data-changes-container .condition-category-changes").find(".bootstrap-select li").each(function(){if($(this).hasClass("disabled selected active")&&$(this).removeClass("selected active"),$(this).attr("data-original-index")==item.ConditionCategory){$(this).addClass("selected active");var n=$(this).find(".text").text();$(this).parents(".bootstrap-select").find(".filter-option").html(n)}}),$("#data-changes-container .condition-category-changes").find("select option").attr("selected",!1),$("#data-changes-container .condition-category-changes").find("select option").each(function(){$(this).val()==""&&$(this).removeAttr("selected");$(this).val()==item.ConditionCategory&&$(this).attr("selected","selected")}),$("#data-changes-container .condition-category-changes select").selectpicker("refresh"),renderDataCondition(itemConditionCategory,itemConditionArray,itemWidgetName.trim()),addTitleForWidgets()):getWidgets():getWidgets()})