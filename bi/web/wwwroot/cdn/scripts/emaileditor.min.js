/*!
*  filename: emaileditor.min.js
*  version : unknown version
*  Copyright Syncfusion Inc. 2001 - 2013. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
function getRelativePath(n){var u=$("#itemType").attr("data-item-type").toLowerCase().replace(/\b[a-z]/g,function(n){return n.toUpperCase()}),i=n.match(/(?:\!\[\]\((.*?)\))/g),r=[],t;if(i!=null)for(t=0;t<i.length;t++)r[t]=i[t].split(/[\(\\!\[\ \]\\)\s]+/),r[t]=$.grep(r[t],function(n){return n});return n}function setValue(n){var t=scheduleEmailEditRTE.inputElement.selectionStart,r=scheduleEmailEditRTE.inputElement.selectionEnd,i=scheduleEmailEditRTE.formatter.editorManager.markdownSelection.getSelectedInlinePoints(scheduleEmailEditRTE.inputElement);scheduleEmailEditRTE.inputElement.value=scheduleEmailEditRTE.inputElement.value.substr(0,t)+n+scheduleEmailEditRTE.inputElement.value.substr(i.end,scheduleEmailEditRTE.inputElement.value.length)}(function(n){"use strict";function l(n){this.tokens=[];this.tokens.links={};this.options=n||r.defaults;this.rules=t.normal;this.options.gfm&&(this.rules=this.options.tables?t.tables:t.gfm)}function o(n,t){if(this.options=t||r.defaults,this.links=n,this.rules=i.normal,this.renderer=this.options.renderer||new u,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.rules=this.options.breaks?i.breaks:i.gfm:this.options.pedantic&&(this.rules=i.pedantic)}function u(n){this.options=n||{}}function c(){}function s(n){this.tokens=[];this.token=null;this.options=n||r.defaults;this.options.renderer=this.options.renderer||new u;this.renderer=this.options.renderer;this.renderer.options=this.options}function e(n,t){return n.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function p(n){return n.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,function(n,t){return(t=t.toLowerCase(),t==="colon")?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}function f(n,t){return n=n.source,t=t||"",{replace:function(t,i){return i=i.source||i,i=i.replace(/(^|[^\[])\^/g,"$1"),n=n.replace(t,i),this},getRegex:function(){return new RegExp(n,t)}}}function w(n,t){return v[" "+n]||(v[" "+n]=/^[^:]+:\/*[^/]*$/.test(n)?n+"/":n.replace(/[^/]*$/,"")),n=v[" "+n],t.slice(0,2)==="//"?n.replace(/:[\s\S]*/,":")+t:t.charAt(0)==="/"?n.replace(/(:\/*[^/]*)[\s\S]*/,"$1")+t:n+t}function a(){}function h(n){for(var r=1,t,i;r<arguments.length;r++){t=arguments[r];for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n}function r(n,t,i){var u,o,c,a,f;if(typeof n=="undefined"||n===null)throw new Error("marked(): input parameter is undefined or null");if(typeof n!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected");if(i||typeof t=="function"){i||(i=t,t=null);t=h({},r.defaults,t||{});u=t.highlight;a=0;try{o=l.lex(n,t)}catch(v){return i(v)}if((c=o.length,f=function(n){if(n)return t.highlight=u,i(n);var r;try{r=s.parse(o,t)}catch(f){n=f}return t.highlight=u,n?i(n):i(null,r)},!u||u.length<3)||(delete t.highlight,!c))return f();for(;a<o.length;a++)(function(n){return n.type!=="code"?--c||f():u(n.text,n.lang,function(t,i){if(t)return f(t);if(i==null||i===n.text)return--c||f();n.text=i;n.escaped=!0;--c||f()})})(o[a]);return}try{return t&&(t=h({},r.defaults,t)),s.parse(l.lex(n,t),t)}catch(v){if(v.message+="\nPlease report this to https://github.com/markedjs/marked.",(t||r.defaults).silent)return"<p>An error occurred:<\/p><pre>"+e(v.message+"",!0)+"<\/pre>";throw v;}}var t={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:a,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:a,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:a,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,paragraph:/^([^\n]+(?:\n?(?!hr|heading|lheading| {0,3}>|tag)[^\n]+)+)/,text:/^[^\n]+/},i,v,y;t._label=/(?:\\[\[\]]|[^\[\]])+/;t._title=/(?:"(?:\\"|[^"]|"[^"\n]*")*"|'\n?(?:[^'\n]+\n?)*'|\([^()]*\))/;t.def=f(t.def).replace("label",t._label).replace("title",t._title).getRegex();t.bullet=/(?:[*+-]|\d+\.)/;t.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/;t.item=f(t.item,"gm").replace(/bull/g,t.bullet).getRegex();t.list=f(t.list).replace(/bull/g,t.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+t.def.source+")").getRegex();t._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b";t.html=f(t.html).replace("comment",/<!--[\s\S]*?-->/).replace("closed",/<(tag)[\s\S]+?<\/\1>/).replace("closing",/<tag(?:"[^"]*"|'[^']*'|\s[^'"\/>\s]*)*?\/?>/).replace(/tag/g,t._tag).getRegex();t.paragraph=f(t.paragraph).replace("hr",t.hr).replace("heading",t.heading).replace("lheading",t.lheading).replace("tag","<"+t._tag).getRegex();t.blockquote=f(t.blockquote).replace("paragraph",t.paragraph).getRegex();t.normal=h({},t);t.gfm=h({},t.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\n? *\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/});t.gfm.paragraph=f(t.paragraph).replace("(?!","(?!"+t.gfm.fences.source.replace("\\1","\\2")+"|"+t.list.source.replace("\\1","\\3")+"|").getRegex();t.tables=h({},t.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/});l.rules=t;l.lex=function(n,t){var i=new l(t);return i.lex(n)};l.prototype.lex=function(n){return n=n.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(n,!0)};l.prototype.token=function(n,i){n=n.replace(/^ +$/gm,"");for(var s,h,r,e,c,u,l,f,a,o,v;n;){if((r=this.rules.newline.exec(n))&&(n=n.substring(r[0].length),r[0].length>1&&this.tokens.push({type:"space"})),r=this.rules.code.exec(n)){n=n.substring(r[0].length);r=r[0].replace(/^ {4}/gm,"");this.tokens.push({type:"code",text:this.options.pedantic?r:r.replace(/\n+$/,"")});continue}if(r=this.rules.fences.exec(n)){n=n.substring(r[0].length);this.tokens.push({type:"code",lang:r[2],text:r[3]||""});continue}if(r=this.rules.heading.exec(n)){n=n.substring(r[0].length);this.tokens.push({type:"heading",depth:r[1].length,text:r[2]});continue}if(i&&(r=this.rules.nptable.exec(n))){for(n=n.substring(r[0].length),u={type:"table",header:r[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3].replace(/\n$/,"").split("\n")},f=0;f<u.align.length;f++)u.align[f]=/^ *-+: *$/.test(u.align[f])?"right":/^ *:-+: *$/.test(u.align[f])?"center":/^ *:-+ *$/.test(u.align[f])?"left":null;for(f=0;f<u.cells.length;f++)u.cells[f]=u.cells[f].split(/ *\| */);this.tokens.push(u);continue}if(r=this.rules.hr.exec(n)){n=n.substring(r[0].length);this.tokens.push({type:"hr"});continue}if(r=this.rules.blockquote.exec(n)){n=n.substring(r[0].length);this.tokens.push({type:"blockquote_start"});r=r[0].replace(/^ *> ?/gm,"");this.token(r,i);this.tokens.push({type:"blockquote_end"});continue}if(r=this.rules.list.exec(n)){for(n=n.substring(r[0].length),e=r[2],v=e.length>1,this.tokens.push({type:"list_start",ordered:v,start:v?+e:""}),r=r[0].match(this.rules.item),s=!1,o=r.length,f=0;f<o;f++)u=r[f],l=u.length,u=u.replace(/^ *([*+-]|\d+\.) +/,""),~u.indexOf("\n ")&&(l-=u.length,u=this.options.pedantic?u.replace(/^ {1,4}/gm,""):u.replace(new RegExp("^ {1,"+l+"}","gm"),"")),this.options.smartLists&&f!==o-1&&(c=t.bullet.exec(r[f+1])[0],e===c||e.length>1&&c.length>1||(n=r.slice(f+1).join("\n")+n,f=o-1)),h=s||/\n\n(?!\s*$)/.test(u),f!==o-1&&(s=u.charAt(u.length-1)==="\n",h||(h=s)),this.tokens.push({type:h?"loose_item_start":"list_item_start"}),this.token(u,!1),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"});continue}if(r=this.rules.html.exec(n)){n=n.substring(r[0].length);this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&(r[1]==="pre"||r[1]==="script"||r[1]==="style"),text:r[0]});continue}if(i&&(r=this.rules.def.exec(n))){n=n.substring(r[0].length);r[3]&&(r[3]=r[3].substring(1,r[3].length-1));a=r[1].toLowerCase();this.tokens.links[a]||(this.tokens.links[a]={href:r[2],title:r[3]});continue}if(i&&(r=this.rules.table.exec(n))){for(n=n.substring(r[0].length),u={type:"table",header:r[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:r[3].replace(/(?: *\| *)?\n$/,"").split("\n")},f=0;f<u.align.length;f++)u.align[f]=/^ *-+: *$/.test(u.align[f])?"right":/^ *:-+: *$/.test(u.align[f])?"center":/^ *:-+ *$/.test(u.align[f])?"left":null;for(f=0;f<u.cells.length;f++)u.cells[f]=u.cells[f].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(u);continue}if(r=this.rules.lheading.exec(n)){n=n.substring(r[0].length);this.tokens.push({type:"heading",depth:r[2]==="="?1:2,text:r[1]});continue}if(i&&(r=this.rules.paragraph.exec(n))){n=n.substring(r[0].length);this.tokens.push({type:"paragraph",text:r[1].charAt(r[1].length-1)==="\n"?r[1].slice(0,-1):r[1]});continue}if(r=this.rules.text.exec(n)){n=n.substring(r[0].length);this.tokens.push({type:"text",text:r[0]});continue}if(n)throw new Error("Infinite loop on byte: "+n.charCodeAt(0));}return this.tokens};i={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:a,tag:/^<!--[\s\S]*?-->|^<\/?[a-zA-Z0-9\-]+(?:"[^"]*"|'[^']*'|\s[^<'">\/\s]*)*?\/?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^_([^\s_](?:[^_]|__)+?[^\s_])_\b|^\*((?:\*\*|[^*])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`]?)\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:a,text:/^[\s\S]+?(?=[\\<!\[`*]|\b_| {2,}\n|$)/};i._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;i._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;i.autolink=f(i.autolink).replace("scheme",i._scheme).replace("email",i._email).getRegex();i._inside=/(?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]]|\](?=[^\[]*\]))*/;i._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/;i.link=f(i.link).replace("inside",i._inside).replace("href",i._href).getRegex();i.reflink=f(i.reflink).replace("inside",i._inside).getRegex();i.normal=h({},i);i.pedantic=h({},i.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/});i.gfm=h({},i.normal,{escape:f(i.escape).replace("])","~|])").getRegex(),url:f(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("email",i._email).getRegex(),_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:f(i.text).replace("]|","~]|").replace("|","|https?://|ftp://|www\\.|[a-zA-Z0-9.!#$%&'*+/=?^_`{\\|}~-]+@|").getRegex()});i.breaks=h({},i.gfm,{br:f(i.br).replace("{2,}","*").getRegex(),text:f(i.gfm.text).replace("{2,}","*").getRegex()});o.rules=i;o.output=function(n,t,i){var r=new o(t,i);return r.output(n)};o.prototype.output=function(n){for(var i="",u,r,f,t;n;){if(t=this.rules.escape.exec(n)){n=n.substring(t[0].length);i+=t[1];continue}if(t=this.rules.autolink.exec(n)){n=n.substring(t[0].length);t[2]==="@"?(r=e(this.mangle(t[1])),f="mailto:"+r):(r=e(t[1]),f=r);i+=this.renderer.link(f,null,r);continue}if(!this.inLink&&(t=this.rules.url.exec(n))){t[0]=this.rules._backpedal.exec(t[0])[0];n=n.substring(t[0].length);t[2]==="@"?(r=e(t[0]),f="mailto:"+r):(r=e(t[0]),f=t[1]==="www."?"http://"+r:r);i+=this.renderer.link(f,null,r);continue}if(t=this.rules.tag.exec(n)){!this.inLink&&/^<a /i.test(t[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(t[0])&&(this.inLink=!1);n=n.substring(t[0].length);i+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):e(t[0]):t[0];continue}if(t=this.rules.link.exec(n)){n=n.substring(t[0].length);this.inLink=!0;i+=this.outputLink(t,{href:t[2],title:t[3]});this.inLink=!1;continue}if((t=this.rules.reflink.exec(n))||(t=this.rules.nolink.exec(n))){if(n=n.substring(t[0].length),u=(t[2]||t[1]).replace(/\s+/g," "),u=this.links[u.toLowerCase()],!u||!u.href){i+=t[0].charAt(0);n=t[0].substring(1)+n;continue}this.inLink=!0;i+=this.outputLink(t,u);this.inLink=!1;continue}if(t=this.rules.strong.exec(n)){n=n.substring(t[0].length);i+=this.renderer.strong(this.output(t[2]||t[1]));continue}if(t=this.rules.em.exec(n)){n=n.substring(t[0].length);i+=this.renderer.em(this.output(t[2]||t[1]));continue}if(t=this.rules.code.exec(n)){n=n.substring(t[0].length);i+=this.renderer.codespan(e(t[2].trim(),!0));continue}if(t=this.rules.br.exec(n)){n=n.substring(t[0].length);i+=this.renderer.br();continue}if(t=this.rules.del.exec(n)){n=n.substring(t[0].length);i+=this.renderer.del(this.output(t[1]));continue}if(t=this.rules.text.exec(n)){n=n.substring(t[0].length);i+=this.renderer.text(e(this.smartypants(t[0])));continue}if(n)throw new Error("Infinite loop on byte: "+n.charCodeAt(0));}return i};o.prototype.outputLink=function(n,t){var i=e(t.href),r=t.title?e(t.title):null;return n[0].charAt(0)!=="!"?this.renderer.link(i,r,this.output(n[1])):this.renderer.image(i,r,e(n[1]))};o.prototype.smartypants=function(n){return this.options.smartypants?n.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):n};o.prototype.mangle=function(n){if(!this.options.mangle)return n;for(var r="",u=n.length,i=0,t;i<u;i++)t=n.charCodeAt(i),Math.random()>.5&&(t="x"+t.toString(16)),r+="&#"+t+";";return r};u.prototype.code=function(n,t,i){if(this.options.highlight){var r=this.options.highlight(n,t);r!=null&&r!==n&&(i=!0,n=r)}return t?'<pre><code class="'+this.options.langPrefix+e(t,!0)+'">'+(i?n:e(n,!0))+"\n<\/code><\/pre>\n":"<pre><code>"+(i?n:e(n,!0))+"\n<\/code><\/pre>"};u.prototype.blockquote=function(n){return"<blockquote>\n"+n+"<\/blockquote>\n"};u.prototype.html=function(n){return n};u.prototype.heading=function(n,t,i){return"<h"+t+' id="'+this.options.headerPrefix+i.toLowerCase().replace(/[^\w]+/g,"-")+'">'+n+"<\/h"+t+">\n"};u.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"};u.prototype.list=function(n,t,i){var r=t?"ol":"ul",u=t&&i!==1?' start="'+i+'"':"";return"<"+r+u+">\n"+n+"<\/"+r+">\n"};u.prototype.listitem=function(n){return"<li>"+n+"<\/li>\n"};u.prototype.paragraph=function(n){return"<p>"+n+"<\/p>\n"};u.prototype.table=function(n,t){return"<table>\n<thead>\n"+n+"<\/thead>\n<tbody>\n"+t+"<\/tbody>\n<\/table>\n"};u.prototype.tablerow=function(n){return"<tr>\n"+n+"<\/tr>\n"};u.prototype.tablecell=function(n,t){var i=t.header?"th":"td",r=t.align?"<"+i+' style="text-align:'+t.align+'">':"<"+i+">";return r+n+"<\/"+i+">\n"};u.prototype.strong=function(n){return"<strong>"+n+"<\/strong>"};u.prototype.em=function(n){return"<em>"+n+"<\/em>"};u.prototype.codespan=function(n){return"<code>"+n+"<\/code>"};u.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"};u.prototype.del=function(n){return"<del>"+n+"<\/del>"};u.prototype.link=function(n,t,i){var r,u;if(this.options.sanitize){try{r=decodeURIComponent(p(n)).replace(/[^\w:]/g,"").toLowerCase()}catch(f){return i}if(r.indexOf("javascript:")===0||r.indexOf("vbscript:")===0||r.indexOf("data:")===0)return i}return this.options.baseUrl&&!y.test(n)&&(n=w(this.options.baseUrl,n)),u='<a href="'+n+'"',t&&(u+=' title="'+t+'"'),u+(">"+i+"<\/a>")};u.prototype.image=function(n,t,i){this.options.baseUrl&&!y.test(n)&&(n=w(this.options.baseUrl,n));var r='<img src="'+n+'" alt="'+i+'"';return t&&(r+=' title="'+t+'"'),r+(this.options.xhtml?"/>":">")};u.prototype.text=function(n){return n};c.prototype.strong=c.prototype.em=c.prototype.codespan=c.prototype.del=c.prototype.text=function(n){return n};c.prototype.link=c.prototype.image=function(n,t,i){return""+i};c.prototype.br=function(){return""};s.parse=function(n,t){var i=new s(t);return i.parse(n)};s.prototype.parse=function(n){this.inline=new o(n.links,this.options);this.inlineText=new o(n.links,h({},this.options,{renderer:new c}));this.tokens=n.reverse();for(var t="";this.next();)t+=this.tok();return t};s.prototype.next=function(){return this.token=this.tokens.pop()};s.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0};s.prototype.parseText=function(){for(var n=this.token.text;this.peek().type==="text";)n+="\n"+this.next().text;return this.inline.output(n)};s.prototype.tok=function(){var u,n,t,f,i,r,e,o,s;switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,p(this.inlineText.output(this.token.text)));case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":for(u="",n="",i="",t=0;t<this.token.header.length;t++)i+=this.renderer.tablecell(this.inline.output(this.token.header[t]),{header:!0,align:this.token.align[t]});for(u+=this.renderer.tablerow(i),t=0;t<this.token.cells.length;t++){for(f=this.token.cells[t],i="",r=0;r<f.length;r++)i+=this.renderer.tablecell(this.inline.output(f[r]),{header:!1,align:this.token.align[r]});n+=this.renderer.tablerow(i)}return this.renderer.table(u,n);case"blockquote_start":for(n="";this.next().type!=="blockquote_end";)n+=this.tok();return this.renderer.blockquote(n);case"list_start":for(n="",e=this.token.ordered,o=this.token.start;this.next().type!=="list_end";)n+=this.tok();return this.renderer.list(n,e,o);case"list_item_start":for(n="";this.next().type!=="list_item_end";)n+=this.token.type==="text"?this.parseText():this.tok();return this.renderer.listitem(n);case"loose_item_start":for(n="";this.next().type!=="list_item_end";)n+=this.tok();return this.renderer.listitem(n);case"html":return s=!this.token.pre&&!this.options.pedantic?this.inline.output(this.token.text):this.token.text,this.renderer.html(s);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}};v={};y=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;a.exec=a;r.options=r.setOptions=function(n){return h(r.defaults,n),r};r.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,sanitizer:null,mangle:!0,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new u,xhtml:!1,baseUrl:null};r.Parser=s;r.parser=s.parse;r.Renderer=u;r.TextRenderer=c;r.Lexer=l;r.lexer=l.lex;r.InlineLexer=o;r.inlineLexer=o.output;r.parse=r;typeof module!="undefined"&&typeof exports=="object"?module.exports=r:typeof define=="function"&&define.amd?define(function(){return r}):n.marked=r})(this||(typeof window!="undefined"?window:global));var scheduleEmailEditRTE="",activeFilterCondition="";$(document).ready(function(){function i(){var t=scheduleEmailEditRTE.getID()+"html-preview",n=scheduleEmailEditRTE.element.querySelector("#"+t);mdsource.classList.contains("e-active")?(mdsource.classList.remove("e-active"),mdsource.parentElement.title="Preview",scheduleEmailEditRTE.enableToolbarItem(scheduleEmailEditRTE.toolbarSettings.items),textArea.style.display="block",n.style.display="none"):(mdsource.classList.add("e-active"),scheduleEmailEditRTE.disableToolbarItem(scheduleEmailEditRTE.toolbarSettings.items),n||(n=ejs.base.createElement("div",{className:"e-content e-pre-source"}),n.id=t,textArea.parentNode.appendChild(n)),textArea.style.display="none",n.style.display="block",n.innerHTML=marked(scheduleEmailEditRTE.contentModule.getEditPanel().value),mdsource.parentElement.title="Code View")}var t,n;if($(".schedule-dialog #email-editor-panel").css("display","inline"),t="",alertChange==2){for(n=0;n<filterContent.Filters.length;n++)t+="<option data-id='"+filterContent.Filters[n].FilterName+"'>"+filterContent.Filters[n].DisplayText+"<\/option>";$("#widget-items").html(t).selectpicker("refresh")}else $("#data-alert-header").hide();scheduleEmailEditRTE=new ejs.richtexteditor.RichTextEditor({height:"410px",formatter:new ejs.richtexteditor.MarkdownFormatter({listTags:{OL:"1., 2., 3."}}),toolbarSettings:{items:["Bold","Italic","|","Formats","OrderedList","UnorderedList","|","CreateLink","Image","|",{tooltipText:"Preview",template:'<button id="preview-code" class="e-tbar-btn e-control e-btn e-icon-btn"><span class="e-btn-icon su su-preview e-icons"><\/span><\/button>'},{tooltipText:"Reset",template:'<button id="reset-code" class="e-tbar-btn e-control e-btn e-icon-btn"><span class="e-btn-icon su su-reset e-icons"><\/span><\/button>'},]},editorMode:"Markdown",created:function(){textArea=scheduleEmailEditRTE.contentModule.getEditPanel();mdsource=document.getElementById("preview-code");mdResetSource=document.getElementById("reset-code");mdsource.addEventListener("click",function(n){i();n.currentTarget.classList.contains("e-active")?scheduleEmailEditRTE.disableToolbarItem(["Bold","Italic","OrderedList","UnorderedList","CreateLink","Image","Formats","Undo","Redo"]):scheduleEmailEditRTE.enableToolbarItem(["Bold","Italic","OrderedList","UnorderedList","CreateLink","Image","Formats","Undo","Redo"])});mdResetSource.addEventListener("click",function(){scheduleEmailEditRTE.value=null;scheduleEmailEditRTE.value=alertChange==1?"Hello {:Username},\n\nPlease find attached, the dashboard that you had requested. \n \nSchedule- {:ScheduleName} has exported the dashboard [{:DashboardName}]({:DashboardLink}).\n\nRegards,\n\n{:OrganizationName}":"Hi {:Username},\n\nThe configured data notification condition has been met. \n \nPlease find a snapshot of the current state of the dashboard attached.\n\nRegards,\n\n{:OrganizationName}";scheduleEmailEditRTE.value==""||scheduleEmailEditRTE.value==null?$("#email-content-validation").html(window.Server.App.LocalizationContent.ScheduleMessageValidator):$("#email-content-validation").html("")})}});scheduleEmailEditRTE.value=actionType=="Create"?alertChange==1?"Hello {:Username},\n\nPlease find attached, the dashboard that you had requested. \n \nSchedule- {:ScheduleName} has exported the dashboard [{:DashboardName}]({:DashboardLink}).\n\nRegards,\n\n{:OrganizationName}":"Hi {:Username},\n\nThe configured data notification condition has been met. \n \nPlease find a snapshot of the current state of the dashboard attached.\n\nRegards,\n\n{:OrganizationName}":emailContent==null?alertChange==1?"Hello {:Username},\n\nPlease find attached, the dashboard that you had requested. \n \nSchedule- {:ScheduleName} has exported the dashboard [{:DashboardName}]({:DashboardLink}).\n\nRegards,\n\n{:OrganizationName}":"Hi {:Username},\n\nThe configured data notification condition has been met. \n \nPlease find a snapshot of the current state of the dashboard attached.\n\nRegards,\n\n{:OrganizationName}":emailContent.includes("data notification")&&alertChange==1?"Hello {:Username},\n\nPlease find attached, the dashboard that you had requested. \n \nSchedule- {:ScheduleName} has exported the dashboard [{:DashboardName}]({:DashboardLink}).\n\nRegards,\n\n{:OrganizationName}":emailContent;scheduleEmailEditRTE.appendTo("#email-editor-panel #selected-users-container");parent.$("#popup-container_wrapper").ejWaitingPopup("hide");parent.$("#editpopup-container_wrapper").ejWaitingPopup("hide");alertChange==2&&(activeFilterCondition=$("#widget-items option").val().trim())});document.getElementById("add-alert-column").addEventListener("click",function(){scheduleEmailEditRTE.focusIn();setValue("{:"+activeFilterCondition+"}")});$(document).on("click","#selected-users-containerhtml-preview p a",function(n){n.preventDefault()});$(document).on("click","#email-alert-widget-container .bootstrap-select .dropdown-menu .selectpicker li a",function(n){activeFilterCondition=$("#widget-items option")[$(n.target.parentElement).index()].value.trim()});$(document).on("keyup","#selected-users-container_editable-content",function(){var n=$("#selected-users-container_editable-content").val().trim();n=n==null?null:n.replace(/(<([^>]+)>)/ig,"");n==""||n==null?$("#email-content-validation").html(window.Server.App.LocalizationContent.ScheduleMessageValidator):$("#email-content-validation").html("")})